<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Zephyr API Documentation: include/sys/winstream.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-zephyr.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-zephyr.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Zephyr API Documentation
   &#160;<span id="projectnumber">3.0.0-rc3</span>
   </div>
   <div id="projectbrief">A Scalable Open Source RTOS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('winstream_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">winstream.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="stdint_8h_source.html">stdint.h</a>&gt;</code><br />
</div>
<p><a href="winstream_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsys__winstream.html">sys_winstream</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lockless shared memory byte stream IPC.  <a href="structsys__winstream.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acc72f0f65bd88e8f2b630a3832006f9c"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structsys__winstream.html">sys_winstream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="winstream_8h.html#acc72f0f65bd88e8f2b630a3832006f9c">sys_winstream_init</a> (void *buf, int buflen)</td></tr>
<tr class="memdesc:acc72f0f65bd88e8f2b630a3832006f9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a <a class="el" href="structsys__winstream.html" title="Lockless shared memory byte stream IPC.">sys_winstream</a> from a region of memory.  <a href="winstream_8h.html#acc72f0f65bd88e8f2b630a3832006f9c">More...</a><br /></td></tr>
<tr class="separator:acc72f0f65bd88e8f2b630a3832006f9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8686be598c081858322378c8e4368cb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="winstream_8h.html#ae8686be598c081858322378c8e4368cb">sys_winstream_write</a> (struct <a class="el" href="structsys__winstream.html">sys_winstream</a> *ws, const char *<a class="el" href="test__stack__fail_8c.html#a4bb6fa6c719fd9021449009ab8befc04">data</a>, <a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> len)</td></tr>
<tr class="memdesc:ae8686be598c081858322378c8e4368cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write bytes to a <a class="el" href="structsys__winstream.html" title="Lockless shared memory byte stream IPC.">sys_winstream</a>.  <a href="winstream_8h.html#ae8686be598c081858322378c8e4368cb">More...</a><br /></td></tr>
<tr class="separator:ae8686be598c081858322378c8e4368cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55dc3b77ec21e6d799aa951e327dc392"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="winstream_8h.html#a55dc3b77ec21e6d799aa951e327dc392">sys_winstream_read</a> (struct <a class="el" href="structsys__winstream.html">sys_winstream</a> *ws, <a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> *seq, char *buf, <a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> buflen)</td></tr>
<tr class="memdesc:a55dc3b77ec21e6d799aa951e327dc392"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read bytes from a <a class="el" href="structsys__winstream.html" title="Lockless shared memory byte stream IPC.">sys_winstream</a>.  <a href="winstream_8h.html#a55dc3b77ec21e6d799aa951e327dc392">More...</a><br /></td></tr>
<tr class="separator:a55dc3b77ec21e6d799aa951e327dc392"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="acc72f0f65bd88e8f2b630a3832006f9c" name="acc72f0f65bd88e8f2b630a3832006f9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc72f0f65bd88e8f2b630a3832006f9c">&#9670;&nbsp;</a></span>sys_winstream_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structsys__winstream.html">sys_winstream</a> * sys_winstream_init </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>buflen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a <a class="el" href="structsys__winstream.html" title="Lockless shared memory byte stream IPC.">sys_winstream</a> from a region of memory. </p>
<p >This function initializes a <a class="el" href="structsys__winstream.html" title="Lockless shared memory byte stream IPC.">sys_winstream</a> in an arbitrarily-sized region of memory, returning the resulting object (which is guaranteed to be at the same address as the buffer). The memory must (obviously) be shared between the reader and writer, and all operations to it must be coherent and consistently ordered.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>Pointer to a region of memory to contain the stream </td></tr>
    <tr><td class="paramname">buflen</td><td>Length of the buffer, must be large enough to contain the struct <a class="el" href="structsys__winstream.html" title="Lockless shared memory byte stream IPC.">sys_winstream</a> and at least one byte of data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to an initialized <a class="el" href="structsys__winstream.html" title="Lockless shared memory byte stream IPC.">sys_winstream</a> (same address as the buf parameter). </dd></dl>

</div>
</div>
<a id="a55dc3b77ec21e6d799aa951e327dc392" name="a55dc3b77ec21e6d799aa951e327dc392"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55dc3b77ec21e6d799aa951e327dc392">&#9670;&nbsp;</a></span>sys_winstream_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> sys_winstream_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsys__winstream.html">sys_winstream</a> *&#160;</td>
          <td class="paramname"><em>ws</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> *&#160;</td>
          <td class="paramname"><em>seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>&#160;</td>
          <td class="paramname"><em>buflen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read bytes from a <a class="el" href="structsys__winstream.html" title="Lockless shared memory byte stream IPC.">sys_winstream</a>. </p>
<p >This function will read bytes from a <a class="el" href="structsys__winstream.html" title="Lockless shared memory byte stream IPC.">sys_winstream</a> into a specified buffer. It will always return in constant time, it does not block or engage in any kind of synchronization beyond memory ordering. The number of bytes read into the buffer will be returned, but note that it is possible that an underflow can occur if the writer gets ahead of our context. That situation can be detected via the sequence number returned via a pointer (i.e. if "*seq != old_seq +
return_value", an underflow occurred and bytes were dropped).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ws</td><td>A <a class="el" href="structsys__winstream.html" title="Lockless shared memory byte stream IPC.">sys_winstream</a> from which to read </td></tr>
    <tr><td class="paramname">seq</td><td>A pointer to an integer containing the last sequence number read from the stream, or zero to indicate "start
           of stream". The current state of the stream will be returned in the pointer for use in future calls. </td></tr>
    <tr><td class="paramname">buf</td><td>A buffer into which to store the data read </td></tr>
    <tr><td class="paramname">buflen</td><td>The length of buf in bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes written into the buffer </dd></dl>

</div>
</div>
<a id="ae8686be598c081858322378c8e4368cb" name="ae8686be598c081858322378c8e4368cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8686be598c081858322378c8e4368cb">&#9670;&nbsp;</a></span>sys_winstream_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sys_winstream_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsys__winstream.html">sys_winstream</a> *&#160;</td>
          <td class="paramname"><em>ws</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write bytes to a <a class="el" href="structsys__winstream.html" title="Lockless shared memory byte stream IPC.">sys_winstream</a>. </p>
<p >This function writes the specified number of bytes into the stream. It will always return synchronously, it does not block or engage in any kind of synchronization beyond memory write ordering. Any bytes passed beyond what can be stored in the buffer will be silently dropped, but readers can detect their presence via the sequence number.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ws</td><td>A <a class="el" href="structsys__winstream.html" title="Lockless shared memory byte stream IPC.">sys_winstream</a> to which to write </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to bytes to be written </td></tr>
    <tr><td class="paramname">len</td><td>Number of bytes to write </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_317ea3797c15f4a1d9c156bc812661ca.html">sys</a></li><li class="navelem"><a class="el" href="winstream_8h.html">winstream.h</a></li>
    <li class="footer">Generated on Mon Feb 21 2022 04:59:40 for Zephyr API Documentation by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
<script type="text/javascript">
  $(function() {
    toggleButton = document.createElement('doxygen-awesome-dark-mode-toggle')
    toggleButton.title = "Toggle Light/Dark Mode"
    $(document).ready(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
    // every resize will remove the button, which is why it has to be added again:
    $(window).resize(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
  })
</script>
</body>
</html>

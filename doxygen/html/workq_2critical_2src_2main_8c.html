<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Zephyr API Documentation: tests/kernel/workq/critical/src/main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-zephyr.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-zephyr.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Zephyr API Documentation
   &#160;<span id="projectnumber">3.0.0-rc3</span>
   </div>
   <div id="projectbrief">A Scalable Open Source RTOS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('workq_2critical_2src_2main_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">main.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Offload to the Kernel workqueue.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;zephyr.h&gt;</code><br />
<code>#include &lt;<a class="el" href="sections_8h_source.html">linker/sections.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="ztest_8h_source.html">ztest.h</a>&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af86559ee3b53b7b6f929f91ef6416c0d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="workq_2critical_2src_2main_8c.html#af86559ee3b53b7b6f929f91ef6416c0d">NUM_MILLISECONDS</a>&#160;&#160;&#160;50</td></tr>
<tr class="separator:af86559ee3b53b7b6f929f91ef6416c0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fd0cdfdda29532a444c52dd9e1c1d1f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="workq_2critical_2src_2main_8c.html#a9fd0cdfdda29532a444c52dd9e1c1d1f">TEST_TIMEOUT</a>&#160;&#160;&#160;200</td></tr>
<tr class="separator:a9fd0cdfdda29532a444c52dd9e1c1d1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afab74e343d694a9682cb1e8775b970af"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="workq_2critical_2src_2main_8c.html#afab74e343d694a9682cb1e8775b970af">OFFLOAD_WORKQUEUE_STACK_SIZE</a>&#160;&#160;&#160;1024</td></tr>
<tr class="separator:afab74e343d694a9682cb1e8775b970af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6423a880df59733d2d9b509c7718d3a9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="workq_2critical_2src_2main_8c.html#a6423a880df59733d2d9b509c7718d3a9">STACK_SIZE</a>&#160;&#160;&#160;(1024 + CONFIG_TEST_EXTRA_STACKSIZE)</td></tr>
<tr class="separator:a6423a880df59733d2d9b509c7718d3a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4cc22fe9f014988ceb30759178e9fa9d"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="workq_2critical_2src_2main_8c.html#a4cc22fe9f014988ceb30759178e9fa9d">K_THREAD_STACK_DEFINE</a> (offload_work_q_stack, 1024)</td></tr>
<tr class="separator:a4cc22fe9f014988ceb30759178e9fa9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e323bc7055fd9523ced679d9ff225d1"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="workq_2critical_2src_2main_8c.html#a1e323bc7055fd9523ced679d9ff225d1">K_THREAD_STACK_DEFINE</a> (stack1,(1024+CONFIG_TEST_EXTRA_STACKSIZE))</td></tr>
<tr class="separator:a1e323bc7055fd9523ced679d9ff225d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0974c7160298d75bf2ea7f55246ee0d7"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="workq_2critical_2src_2main_8c.html#a0974c7160298d75bf2ea7f55246ee0d7">K_THREAD_STACK_DEFINE</a> (stack2,(1024+CONFIG_TEST_EXTRA_STACKSIZE))</td></tr>
<tr class="separator:a0974c7160298d75bf2ea7f55246ee0d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a1a76d3d6a844306897a1d87cf53467"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="workq_2critical_2src_2main_8c.html#a1a1a76d3d6a844306897a1d87cf53467">K_SEM_DEFINE</a> (ALT_SEM, 0, UINT_MAX)</td></tr>
<tr class="separator:a1a1a76d3d6a844306897a1d87cf53467"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6d22ac9811241d5674fa069ecd90de5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="workq_2critical_2src_2main_8c.html#af6d22ac9811241d5674fa069ecd90de5">K_SEM_DEFINE</a> (REGRESS_SEM, 0, UINT_MAX)</td></tr>
<tr class="separator:af6d22ac9811241d5674fa069ecd90de5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a386f677dae09a3c4cbc752f7a0d9b2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="workq_2critical_2src_2main_8c.html#a9a386f677dae09a3c4cbc752f7a0d9b2">K_SEM_DEFINE</a> (TEST_SEM, 0, UINT_MAX)</td></tr>
<tr class="separator:a9a386f677dae09a3c4cbc752f7a0d9b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fa9a2151ee3487b3f9a60409e9899a4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="workq_2critical_2src_2main_8c.html#a4fa9a2151ee3487b3f9a60409e9899a4">critical_rtn</a> (struct <a class="el" href="structk__work.html">k_work</a> *unused)</td></tr>
<tr class="memdesc:a4fa9a2151ee3487b3f9a60409e9899a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Routine to be called from a workqueue.  <a href="workq_2critical_2src_2main_8c.html#a4fa9a2151ee3487b3f9a60409e9899a4">More...</a><br /></td></tr>
<tr class="separator:a4fa9a2151ee3487b3f9a60409e9899a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accd7183757b022e3994cf2655c46d034"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="workq_2critical_2src_2main_8c.html#accd7183757b022e3994cf2655c46d034">critical_loop</a> (const char *<a class="el" href="timer_2starve_2src_2main_8c.html#aa7eccd3911dd697c8b39d08273f3e64e">tag</a>, <a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> <a class="el" href="semaphore_2sys__sem_2src_2main_8c.html#a7624b580dc5672d7564cdc73212de784">count</a>)</td></tr>
<tr class="memdesc:accd7183757b022e3994cf2655c46d034"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common code for invoking work.  <a href="workq_2critical_2src_2main_8c.html#accd7183757b022e3994cf2655c46d034">More...</a><br /></td></tr>
<tr class="separator:accd7183757b022e3994cf2655c46d034"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc25549e89cbc7a6e1cf20ac20ab1b2d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="workq_2critical_2src_2main_8c.html#adc25549e89cbc7a6e1cf20ac20ab1b2d">alternate_thread</a> (void *arg1, void *arg2, void *arg3)</td></tr>
<tr class="memdesc:adc25549e89cbc7a6e1cf20ac20ab1b2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alternate thread.  <a href="workq_2critical_2src_2main_8c.html#adc25549e89cbc7a6e1cf20ac20ab1b2d">More...</a><br /></td></tr>
<tr class="separator:adc25549e89cbc7a6e1cf20ac20ab1b2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40765e44dc72703346b6c24f547b1c08"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="workq_2critical_2src_2main_8c.html#a40765e44dc72703346b6c24f547b1c08">regression_thread</a> (void *arg1, void *arg2, void *arg3)</td></tr>
<tr class="memdesc:a40765e44dc72703346b6c24f547b1c08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Regression thread.  <a href="workq_2critical_2src_2main_8c.html#a40765e44dc72703346b6c24f547b1c08">More...</a><br /></td></tr>
<tr class="separator:a40765e44dc72703346b6c24f547b1c08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa04962c8609cdebc298741ba5e6d0654"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kernel__workqueue__tests.html#gaa04962c8609cdebc298741ba5e6d0654">test_offload_workqueue</a> (void)</td></tr>
<tr class="memdesc:gaa04962c8609cdebc298741ba5e6d0654"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify thread context.  <a href="group__kernel__workqueue__tests.html#gaa04962c8609cdebc298741ba5e6d0654">More...</a><br /></td></tr>
<tr class="separator:gaa04962c8609cdebc298741ba5e6d0654"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a4533f287d99bb2d7c24c0e29c9a449"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="workq_2critical_2src_2main_8c.html#a8a4533f287d99bb2d7c24c0e29c9a449">test_main</a> (void)</td></tr>
<tr class="separator:a8a4533f287d99bb2d7c24c0e29c9a449"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:acb8b644db1c9c3eb555489bc39c051ab"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="workq_2critical_2src_2main_8c.html#acb8b644db1c9c3eb555489bc39c051ab">critical_var</a></td></tr>
<tr class="separator:acb8b644db1c9c3eb555489bc39c051ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a503990a148c127210f6776aba6287432"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="workq_2critical_2src_2main_8c.html#a503990a148c127210f6776aba6287432">alt_thread_iterations</a></td></tr>
<tr class="separator:a503990a148c127210f6776aba6287432"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0649d933c202a3d327ce1f6feaf4468"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structk__work__q.html">k_work_q</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="workq_2critical_2src_2main_8c.html#ac0649d933c202a3d327ce1f6feaf4468">offload_work_q</a></td></tr>
<tr class="separator:ac0649d933c202a3d327ce1f6feaf4468"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a831207229073303d6d3789bc7f4e827b"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structk__thread.html">k_thread</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="workq_2critical_2src_2main_8c.html#a831207229073303d6d3789bc7f4e827b">thread1</a></td></tr>
<tr class="separator:a831207229073303d6d3789bc7f4e827b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2753ba5eef5c1dd44e13cff5399519d6"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structk__thread.html">k_thread</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="workq_2critical_2src_2main_8c.html#a2753ba5eef5c1dd44e13cff5399519d6">thread2</a></td></tr>
<tr class="separator:a2753ba5eef5c1dd44e13cff5399519d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Offload to the Kernel workqueue. </p>
<p >This test verifies that the kernel workqueue operates as expected.</p>
<p >This test has two threads that increment a counter. The routine that increments the counter is invoked from workqueue due to the two threads calling using it. The final result of the counter is expected to be the the number of times work item was called to increment the counter.</p>
<p >This is done with time slicing both disabled and enabled to ensure that the result always matches the number of times the workqueue is called. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="af86559ee3b53b7b6f929f91ef6416c0d" name="af86559ee3b53b7b6f929f91ef6416c0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af86559ee3b53b7b6f929f91ef6416c0d">&#9670;&nbsp;</a></span>NUM_MILLISECONDS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUM_MILLISECONDS&#160;&#160;&#160;50</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="afab74e343d694a9682cb1e8775b970af" name="afab74e343d694a9682cb1e8775b970af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afab74e343d694a9682cb1e8775b970af">&#9670;&nbsp;</a></span>OFFLOAD_WORKQUEUE_STACK_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OFFLOAD_WORKQUEUE_STACK_SIZE&#160;&#160;&#160;1024</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6423a880df59733d2d9b509c7718d3a9" name="a6423a880df59733d2d9b509c7718d3a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6423a880df59733d2d9b509c7718d3a9">&#9670;&nbsp;</a></span>STACK_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STACK_SIZE&#160;&#160;&#160;(1024 + CONFIG_TEST_EXTRA_STACKSIZE)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9fd0cdfdda29532a444c52dd9e1c1d1f" name="a9fd0cdfdda29532a444c52dd9e1c1d1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fd0cdfdda29532a444c52dd9e1c1d1f">&#9670;&nbsp;</a></span>TEST_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TEST_TIMEOUT&#160;&#160;&#160;200</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="adc25549e89cbc7a6e1cf20ac20ab1b2d" name="adc25549e89cbc7a6e1cf20ac20ab1b2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc25549e89cbc7a6e1cf20ac20ab1b2d">&#9670;&nbsp;</a></span>alternate_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void alternate_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg3</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Alternate thread. </p>
<p >This routine invokes the workqueue many times. </p>

</div>
</div>
<a id="accd7183757b022e3994cf2655c46d034" name="accd7183757b022e3994cf2655c46d034"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accd7183757b022e3994cf2655c46d034">&#9670;&nbsp;</a></span>critical_loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> critical_loop </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Common code for invoking work. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tag</td><td>text identifying the invocation context </td></tr>
    <tr><td class="paramname">count</td><td>number of critical section calls made thus far</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of critical section calls made by a thread </dd></dl>

</div>
</div>
<a id="a4fa9a2151ee3487b3f9a60409e9899a4" name="a4fa9a2151ee3487b3f9a60409e9899a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fa9a2151ee3487b3f9a60409e9899a4">&#9670;&nbsp;</a></span>critical_rtn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void critical_rtn </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structk__work.html">k_work</a> *&#160;</td>
          <td class="paramname"><em>unused</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Routine to be called from a workqueue. </p>
<p >This routine increments the global variable <em>critical_var</em>. </p>

</div>
</div>
<a id="a1a1a76d3d6a844306897a1d87cf53467" name="a1a1a76d3d6a844306897a1d87cf53467"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a1a76d3d6a844306897a1d87cf53467">&#9670;&nbsp;</a></span>K_SEM_DEFINE() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">K_SEM_DEFINE </td>
          <td>(</td>
          <td class="paramtype">ALT_SEM&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT_MAX&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af6d22ac9811241d5674fa069ecd90de5" name="af6d22ac9811241d5674fa069ecd90de5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6d22ac9811241d5674fa069ecd90de5">&#9670;&nbsp;</a></span>K_SEM_DEFINE() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">K_SEM_DEFINE </td>
          <td>(</td>
          <td class="paramtype">REGRESS_SEM&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT_MAX&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9a386f677dae09a3c4cbc752f7a0d9b2" name="a9a386f677dae09a3c4cbc752f7a0d9b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a386f677dae09a3c4cbc752f7a0d9b2">&#9670;&nbsp;</a></span>K_SEM_DEFINE() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">K_SEM_DEFINE </td>
          <td>(</td>
          <td class="paramtype">TEST_SEM&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT_MAX&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4cc22fe9f014988ceb30759178e9fa9d" name="a4cc22fe9f014988ceb30759178e9fa9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cc22fe9f014988ceb30759178e9fa9d">&#9670;&nbsp;</a></span>K_THREAD_STACK_DEFINE() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static K_THREAD_STACK_DEFINE </td>
          <td>(</td>
          <td class="paramtype">offload_work_q_stack&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">1024&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1e323bc7055fd9523ced679d9ff225d1" name="a1e323bc7055fd9523ced679d9ff225d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e323bc7055fd9523ced679d9ff225d1">&#9670;&nbsp;</a></span>K_THREAD_STACK_DEFINE() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static K_THREAD_STACK_DEFINE </td>
          <td>(</td>
          <td class="paramtype">stack1&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(1024+CONFIG_TEST_EXTRA_STACKSIZE)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a0974c7160298d75bf2ea7f55246ee0d7" name="a0974c7160298d75bf2ea7f55246ee0d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0974c7160298d75bf2ea7f55246ee0d7">&#9670;&nbsp;</a></span>K_THREAD_STACK_DEFINE() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static K_THREAD_STACK_DEFINE </td>
          <td>(</td>
          <td class="paramtype">stack2&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">(1024+CONFIG_TEST_EXTRA_STACKSIZE)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a40765e44dc72703346b6c24f547b1c08" name="a40765e44dc72703346b6c24f547b1c08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40765e44dc72703346b6c24f547b1c08">&#9670;&nbsp;</a></span>regression_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void regression_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg3</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Regression thread. </p>
<p >This routine invokes the workqueue many times. It also checks to ensure that the number of times it is called matches the global variable <em>critical_var</em>. </p>

</div>
</div>
<a id="a8a4533f287d99bb2d7c24c0e29c9a449" name="a8a4533f287d99bb2d7c24c0e29c9a449"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a4533f287d99bb2d7c24c0e29c9a449">&#9670;&nbsp;</a></span>test_main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >test case main entry </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a503990a148c127210f6776aba6287432" name="a503990a148c127210f6776aba6287432"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a503990a148c127210f6776aba6287432">&#9670;&nbsp;</a></span>alt_thread_iterations</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> alt_thread_iterations</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="acb8b644db1c9c3eb555489bc39c051ab" name="acb8b644db1c9c3eb555489bc39c051ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb8b644db1c9c3eb555489bc39c051ab">&#9670;&nbsp;</a></span>critical_var</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> critical_var</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac0649d933c202a3d327ce1f6feaf4468" name="ac0649d933c202a3d327ce1f6feaf4468"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0649d933c202a3d327ce1f6feaf4468">&#9670;&nbsp;</a></span>offload_work_q</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structk__work__q.html">k_work_q</a> offload_work_q</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a831207229073303d6d3789bc7f4e827b" name="a831207229073303d6d3789bc7f4e827b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a831207229073303d6d3789bc7f4e827b">&#9670;&nbsp;</a></span>thread1</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structk__thread.html">k_thread</a> thread1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a2753ba5eef5c1dd44e13cff5399519d6" name="a2753ba5eef5c1dd44e13cff5399519d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2753ba5eef5c1dd44e13cff5399519d6">&#9670;&nbsp;</a></span>thread2</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structk__thread.html">k_thread</a> thread2</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_59425e443f801f1f2fd8bbe4959a3ccf.html">tests</a></li><li class="navelem"><a class="el" href="dir_2b7a4b5856a4d2068800cbeeeef5e1d8.html">kernel</a></li><li class="navelem"><a class="el" href="dir_e5b39f496e969021ac64d53381ae15ae.html">workq</a></li><li class="navelem"><a class="el" href="dir_b2f5bba8d1fc18734a6deb9a1dd484b5.html">critical</a></li><li class="navelem"><a class="el" href="dir_f1547a2c5a978ff4dbf26893b608a57b.html">src</a></li><li class="navelem"><a class="el" href="workq_2critical_2src_2main_8c.html">main.c</a></li>
    <li class="footer">Generated on Mon Feb 21 2022 04:59:41 for Zephyr API Documentation by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
<script type="text/javascript">
  $(function() {
    toggleButton = document.createElement('doxygen-awesome-dark-mode-toggle')
    toggleButton.title = "Toggle Light/Dark Mode"
    $(document).ready(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
    // every resize will remove the button, which is why it has to be added again:
    $(window).resize(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
  })
</script>
</body>
</html>

<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Zephyr API Documentation: Network long timeout primitives and helpers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-zephyr.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-zephyr.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Zephyr API Documentation
   &#160;<span id="projectnumber">3.0.0-rc3</span>
   </div>
   <div id="projectbrief">A Scalable Open Source RTOS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__net__timeout.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Network long timeout primitives and helpers<div class="ingroups"><a class="el" href="group__networking.html">Networking</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Network long timeout primitives and helpers.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnet__timeout.html">net_timeout</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gab59bff1cb36902a27ee8e887ef39a4ce"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__timeout.html#gab59bff1cb36902a27ee8e887ef39a4ce">NET_TIMEOUT_MAX_VALUE</a>&#160;&#160;&#160;((<a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>)<a class="el" href="stdint_8h.html#a181807730d4a375f848ba139813ce04f">INT32_MAX</a>)</td></tr>
<tr class="memdesc:gab59bff1cb36902a27ee8e887ef39a4ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Divisor used to support ms resolution timeouts.  <a href="group__net__timeout.html#gab59bff1cb36902a27ee8e887ef39a4ce">More...</a><br /></td></tr>
<tr class="separator:gab59bff1cb36902a27ee8e887ef39a4ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga833e08b83a671d4adff799d648a12417"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__timeout.html#ga833e08b83a671d4adff799d648a12417">net_timeout_set</a> (struct <a class="el" href="structnet__timeout.html">net_timeout</a> *<a class="el" href="timer_2cycle64_2src_2main_8c.html#a8f4b69a82b00d7baf3f1f7d480bb7fa0">timeout</a>, <a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> lifetime, <a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> <a class="el" href="timer_2starve_2src_2main_8c.html#ad2a5acb9b13b943cac9ef0b8c8370100">now</a>)</td></tr>
<tr class="memdesc:ga833e08b83a671d4adff799d648a12417"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure a network timeout structure.  <a href="group__net__timeout.html#ga833e08b83a671d4adff799d648a12417">More...</a><br /></td></tr>
<tr class="separator:ga833e08b83a671d4adff799d648a12417"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3d9804474050d070fc4224e834f8cefc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#ac714c0d2c1a4adb10e73cab29623314b">int64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__timeout.html#ga3d9804474050d070fc4224e834f8cefc">net_timeout_deadline</a> (const struct <a class="el" href="structnet__timeout.html">net_timeout</a> *<a class="el" href="timer_2cycle64_2src_2main_8c.html#a8f4b69a82b00d7baf3f1f7d480bb7fa0">timeout</a>, <a class="el" href="stdint_8h.html#ac714c0d2c1a4adb10e73cab29623314b">int64_t</a> <a class="el" href="timer_2starve_2src_2main_8c.html#ad2a5acb9b13b943cac9ef0b8c8370100">now</a>)</td></tr>
<tr class="memdesc:ga3d9804474050d070fc4224e834f8cefc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the 64-bit system time at which the timeout will complete.  <a href="group__net__timeout.html#ga3d9804474050d070fc4224e834f8cefc">More...</a><br /></td></tr>
<tr class="separator:ga3d9804474050d070fc4224e834f8cefc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga34e39484b19c39b3e37a4799848ad502"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__timeout.html#ga34e39484b19c39b3e37a4799848ad502">net_timeout_remaining</a> (const struct <a class="el" href="structnet__timeout.html">net_timeout</a> *<a class="el" href="timer_2cycle64_2src_2main_8c.html#a8f4b69a82b00d7baf3f1f7d480bb7fa0">timeout</a>, <a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> <a class="el" href="timer_2starve_2src_2main_8c.html#ad2a5acb9b13b943cac9ef0b8c8370100">now</a>)</td></tr>
<tr class="memdesc:ga34e39484b19c39b3e37a4799848ad502"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the remaining time to the timeout in whole seconds.  <a href="group__net__timeout.html#ga34e39484b19c39b3e37a4799848ad502">More...</a><br /></td></tr>
<tr class="separator:ga34e39484b19c39b3e37a4799848ad502"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga07b07966dd10929f6d3774467614f006"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__net__timeout.html#ga07b07966dd10929f6d3774467614f006">net_timeout_evaluate</a> (struct <a class="el" href="structnet__timeout.html">net_timeout</a> *<a class="el" href="timer_2cycle64_2src_2main_8c.html#a8f4b69a82b00d7baf3f1f7d480bb7fa0">timeout</a>, <a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> <a class="el" href="timer_2starve_2src_2main_8c.html#ad2a5acb9b13b943cac9ef0b8c8370100">now</a>)</td></tr>
<tr class="memdesc:ga07b07966dd10929f6d3774467614f006"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update state to reflect elapsed time and get new delay.  <a href="group__net__timeout.html#ga07b07966dd10929f6d3774467614f006">More...</a><br /></td></tr>
<tr class="separator:ga07b07966dd10929f6d3774467614f006"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >Network long timeout primitives and helpers. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gab59bff1cb36902a27ee8e887ef39a4ce" name="gab59bff1cb36902a27ee8e887ef39a4ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab59bff1cb36902a27ee8e887ef39a4ce">&#9670;&nbsp;</a></span>NET_TIMEOUT_MAX_VALUE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NET_TIMEOUT_MAX_VALUE&#160;&#160;&#160;((<a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>)<a class="el" href="stdint_8h.html#a181807730d4a375f848ba139813ce04f">INT32_MAX</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="net__timeout_8h.html">include/net/net_timeout.h</a>&gt;</code></p>

<p>Divisor used to support ms resolution timeouts. </p>
<p >Because delays are processed in work queues which are not invoked synchronously with clock changes we need to be able to detect timeouts after they occur, which requires comparing "deadline" to "now" with enough "slop" to handle any observable latency due to "now" advancing past "deadline".</p>
<p >The simplest solution is to use the native conversion of the well-defined 32-bit unsigned difference to a 32-bit signed difference, which caps the maximum delay at INT32_MAX. This is compatible with the standard mechanism for detecting completion of deadlines that do not overflow their representation. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga3d9804474050d070fc4224e834f8cefc" name="ga3d9804474050d070fc4224e834f8cefc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3d9804474050d070fc4224e834f8cefc">&#9670;&nbsp;</a></span>net_timeout_deadline()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#ac714c0d2c1a4adb10e73cab29623314b">int64_t</a> net_timeout_deadline </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structnet__timeout.html">net_timeout</a> *&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#ac714c0d2c1a4adb10e73cab29623314b">int64_t</a>&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="net__timeout_8h.html">include/net/net_timeout.h</a>&gt;</code></p>

<p>Return the 64-bit system time at which the timeout will complete. </p>
<dl class="section note"><dt>Note</dt><dd>Correct behavior requires invocation of <a class="el" href="group__net__timeout.html#ga07b07966dd10929f6d3774467614f006" title="Update state to reflect elapsed time and get new delay.">net_timeout_evaluate()</a> at its specified intervals.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>state a pointer to the timeout state, initialized by <a class="el" href="group__net__timeout.html#ga833e08b83a671d4adff799d648a12417" title="Configure a network timeout structure.">net_timeout_set()</a> and maintained by <a class="el" href="group__net__timeout.html#ga07b07966dd10929f6d3774467614f006" title="Update state to reflect elapsed time and get new delay.">net_timeout_evaluate()</a>.</td></tr>
    <tr><td class="paramname">now</td><td>the full-precision value of <a class="el" href="group__clock__apis.html#gae3e992cd3257c23d5b26d765fcbb2b69" title="Get system uptime.">k_uptime_get()</a> relative to which the deadline will be calculated.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the value of <a class="el" href="group__clock__apis.html#gae3e992cd3257c23d5b26d765fcbb2b69" title="Get system uptime.">k_uptime_get()</a> at which the timeout will expire. </dd></dl>

</div>
</div>
<a id="ga07b07966dd10929f6d3774467614f006" name="ga07b07966dd10929f6d3774467614f006"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga07b07966dd10929f6d3774467614f006">&#9670;&nbsp;</a></span>net_timeout_evaluate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> net_timeout_evaluate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structnet__timeout.html">net_timeout</a> *&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="net__timeout_8h.html">include/net/net_timeout.h</a>&gt;</code></p>

<p>Update state to reflect elapsed time and get new delay. </p>
<p >This function must be invoked periodically to (1) apply the effect of elapsed time on what remains of a total delay that exceeded the maximum representable delay, and (2) determine that either the timeout has completed or that the infrastructure must wait a certain period before checking again for completion.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>a pointer to the timeout state</td></tr>
    <tr><td class="paramname">now</td><td>the time relative to which the estimate of remaining time should be calculated. This should be recently captured value from <a class="el" href="group__clock__apis.html#ga9253cfb7b46af4d8994349323ce9872b" title="Get system uptime (32-bit version).">k_uptime_get_32()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if the timeout has completed </td></tr>
    <tr><td class="paramname">positive</td><td>the maximum delay until the state of this timeout should be re-evaluated, in milliseconds. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga34e39484b19c39b3e37a4799848ad502" name="ga34e39484b19c39b3e37a4799848ad502"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga34e39484b19c39b3e37a4799848ad502">&#9670;&nbsp;</a></span>net_timeout_remaining()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> net_timeout_remaining </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structnet__timeout.html">net_timeout</a> *&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="net__timeout_8h.html">include/net/net_timeout.h</a>&gt;</code></p>

<p>Calculate the remaining time to the timeout in whole seconds. </p>
<dl class="section note"><dt>Note</dt><dd>This function rounds the remaining time down, i.e. if the timeout will occur in 3500 milliseconds the value 3 will be returned.</dd>
<dd>
Correct behavior requires invocation of <a class="el" href="group__net__timeout.html#ga07b07966dd10929f6d3774467614f006" title="Update state to reflect elapsed time and get new delay.">net_timeout_evaluate()</a> at its specified intervals.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>a pointer to the timeout state</td></tr>
    <tr><td class="paramname">now</td><td>the time relative to which the estimate of remaining time should be calculated. This should be recently captured value from <a class="el" href="group__clock__apis.html#ga9253cfb7b46af4d8994349323ce9872b" title="Get system uptime (32-bit version).">k_uptime_get_32()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if the timeout has completed. </td></tr>
    <tr><td class="paramname">positive</td><td>the remaining duration of the timeout, in seconds. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga833e08b83a671d4adff799d648a12417" name="ga833e08b83a671d4adff799d648a12417"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga833e08b83a671d4adff799d648a12417">&#9670;&nbsp;</a></span>net_timeout_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void net_timeout_set </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structnet__timeout.html">net_timeout</a> *&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>&#160;</td>
          <td class="paramname"><em>lifetime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="net__timeout_8h.html">include/net/net_timeout.h</a>&gt;</code></p>

<p>Configure a network timeout structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>a pointer to the timeout state.</td></tr>
    <tr><td class="paramname">lifetime</td><td>the duration of the timeout in seconds.</td></tr>
    <tr><td class="paramname">now</td><td>the time at which the timeout started counting down, in milliseconds. This is generally a captured value of <a class="el" href="group__clock__apis.html#ga9253cfb7b46af4d8994349323ce9872b" title="Get system uptime (32-bit version).">k_uptime_get_32()</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Feb 21 2022 04:59:41 for Zephyr API Documentation by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
<script type="text/javascript">
  $(function() {
    toggleButton = document.createElement('doxygen-awesome-dark-mode-toggle')
    toggleButton.title = "Toggle Light/Dark Mode"
    $(document).ready(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
    // every resize will remove the button, which is why it has to be added again:
    $(window).resize(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
  })
</script>
</body>
</html>

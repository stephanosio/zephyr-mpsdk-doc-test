<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Zephyr API Documentation: PCI Express Controller Interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-zephyr.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-zephyr.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Zephyr API Documentation
   &#160;<span id="projectnumber">3.0.0-rc3</span>
   </div>
   <div id="projectbrief">A Scalable Open Source RTOS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__pcie__controller__interface.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">PCI Express Controller Interface<div class="ingroups"><a class="el" href="group__io__interfaces.html">Device Driver APIs</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>PCI Express Controller Interface.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpcie__ctrl__driver__api.html">pcie_ctrl_driver_api</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure providing callbacks to be implemented for devices that supports the PCI Express Controller API.  <a href="structpcie__ctrl__driver__api.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpcie__ctrl__config.html">pcie_ctrl_config</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure describing a device that supports the PCI Express Controller API.  <a href="structpcie__ctrl__config.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga91525130b94b07187633abd1e017aa61"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pcie__controller__interface.html#ga91525130b94b07187633abd1e017aa61">PCIE_RANGE_FORMAT</a>(node_id,  idx)</td></tr>
<tr class="separator:ga91525130b94b07187633abd1e017aa61"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gac3d0f7e90bcc30996ce23324d2d7356a"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pcie__controller__interface.html#gac3d0f7e90bcc30996ce23324d2d7356a">pcie_ctrl_conf_read_t</a>) (const struct <a class="el" href="structdevice.html">device</a> *dev, <a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a> bdf, <a class="el" href="lib_2libc_2minimal_2include_2sys_2types_8h.html#a4089fb16419d359081465355db05f846">unsigned</a> int <a class="el" href="mem__heap_2shared__multi__heap_2src_2main_8c.html#a698b4ae5d990c4030b61afb7e057cb03">reg</a>)</td></tr>
<tr class="memdesc:gac3d0f7e90bcc30996ce23324d2d7356a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called to read a 32-bit word from an endpoint's configuration space.  <a href="group__pcie__controller__interface.html#gac3d0f7e90bcc30996ce23324d2d7356a">More...</a><br /></td></tr>
<tr class="separator:gac3d0f7e90bcc30996ce23324d2d7356a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3241acc7de4af2b73cf3f47a25349109"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pcie__controller__interface.html#ga3241acc7de4af2b73cf3f47a25349109">pcie_ctrl_conf_write_t</a>) (const struct <a class="el" href="structdevice.html">device</a> *dev, <a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a> bdf, <a class="el" href="lib_2libc_2minimal_2include_2sys_2types_8h.html#a4089fb16419d359081465355db05f846">unsigned</a> int <a class="el" href="mem__heap_2shared__multi__heap_2src_2main_8c.html#a698b4ae5d990c4030b61afb7e057cb03">reg</a>, <a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> <a class="el" href="test__stack__fail_8c.html#a4bb6fa6c719fd9021449009ab8befc04">data</a>)</td></tr>
<tr class="memdesc:ga3241acc7de4af2b73cf3f47a25349109"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called to write a 32-bit word to an endpoint's configuration space.  <a href="group__pcie__controller__interface.html#ga3241acc7de4af2b73cf3f47a25349109">More...</a><br /></td></tr>
<tr class="separator:ga3241acc7de4af2b73cf3f47a25349109"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga62ce18e7495256c148168b773eabd37d"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pcie__controller__interface.html#ga62ce18e7495256c148168b773eabd37d">pcie_ctrl_region_allocate_t</a>) (const struct <a class="el" href="structdevice.html">device</a> *dev, <a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a> bdf, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> mem, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> mem64, size_t bar_size, <a class="el" href="stdint_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a> *bar_bus_addr)</td></tr>
<tr class="memdesc:ga62ce18e7495256c148168b773eabd37d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called to allocate a memory region subset for an endpoint Base Address Register.  <a href="group__pcie__controller__interface.html#ga62ce18e7495256c148168b773eabd37d">More...</a><br /></td></tr>
<tr class="separator:ga62ce18e7495256c148168b773eabd37d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa9d5bd27c841e36f65e65dec0b057e9a"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pcie__controller__interface.html#gaa9d5bd27c841e36f65e65dec0b057e9a">pcie_ctrl_region_get_allocate_base_t</a>) (const struct <a class="el" href="structdevice.html">device</a> *dev, <a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a> bdf, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> mem, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> mem64, size_t align, <a class="el" href="stdint_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a> *bar_base_addr)</td></tr>
<tr class="memdesc:gaa9d5bd27c841e36f65e65dec0b057e9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called to get the current allocation base of a memory region subset for an endpoint Base Address Register.  <a href="group__pcie__controller__interface.html#gaa9d5bd27c841e36f65e65dec0b057e9a">More...</a><br /></td></tr>
<tr class="separator:gaa9d5bd27c841e36f65e65dec0b057e9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab144356b1c3ec3754aae0008634f2d2f"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pcie__controller__interface.html#gab144356b1c3ec3754aae0008634f2d2f">pcie_ctrl_region_translate_t</a>) (const struct <a class="el" href="structdevice.html">device</a> *dev, <a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a> bdf, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> mem, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> mem64, <a class="el" href="stdint_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a> bar_bus_addr, <a class="el" href="stdint_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a> *bar_addr)</td></tr>
<tr class="memdesc:gab144356b1c3ec3754aae0008634f2d2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called to translate an endpoint Base Address Register bus-centric address into Physical address.  <a href="group__pcie__controller__interface.html#gab144356b1c3ec3754aae0008634f2d2f">More...</a><br /></td></tr>
<tr class="separator:gab144356b1c3ec3754aae0008634f2d2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa16b59c39f273a654b72d9e209f3ba2e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pcie__controller__interface.html#gaa16b59c39f273a654b72d9e209f3ba2e">pcie_generic_ctrl_conf_read</a> (<a class="el" href="sys_2sys__io_8h.html#a7bcfa789a44940bccc5b9b98642744b0">mm_reg_t</a> cfg_addr, <a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a> bdf, <a class="el" href="lib_2libc_2minimal_2include_2sys_2types_8h.html#a4089fb16419d359081465355db05f846">unsigned</a> int <a class="el" href="mem__heap_2shared__multi__heap_2src_2main_8c.html#a698b4ae5d990c4030b61afb7e057cb03">reg</a>)</td></tr>
<tr class="memdesc:gaa16b59c39f273a654b72d9e209f3ba2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a 32-bit word from a Memory-Mapped endpoint's configuration space.  <a href="group__pcie__controller__interface.html#gaa16b59c39f273a654b72d9e209f3ba2e">More...</a><br /></td></tr>
<tr class="separator:gaa16b59c39f273a654b72d9e209f3ba2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga709ecedbd0585b4eb17fc2f5923a8f61"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pcie__controller__interface.html#ga709ecedbd0585b4eb17fc2f5923a8f61">pcie_generic_ctrl_conf_write</a> (<a class="el" href="sys_2sys__io_8h.html#a7bcfa789a44940bccc5b9b98642744b0">mm_reg_t</a> cfg_addr, <a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a> bdf, <a class="el" href="lib_2libc_2minimal_2include_2sys_2types_8h.html#a4089fb16419d359081465355db05f846">unsigned</a> int <a class="el" href="mem__heap_2shared__multi__heap_2src_2main_8c.html#a698b4ae5d990c4030b61afb7e057cb03">reg</a>, <a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> <a class="el" href="test__stack__fail_8c.html#a4bb6fa6c719fd9021449009ab8befc04">data</a>)</td></tr>
<tr class="memdesc:ga709ecedbd0585b4eb17fc2f5923a8f61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a 32-bit word to a Memory-Mapped endpoint's configuration space.  <a href="group__pcie__controller__interface.html#ga709ecedbd0585b4eb17fc2f5923a8f61">More...</a><br /></td></tr>
<tr class="separator:ga709ecedbd0585b4eb17fc2f5923a8f61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga75910ea4255a740b57e35a596a90b7bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pcie__controller__interface.html#ga75910ea4255a740b57e35a596a90b7bb">pcie_generic_ctrl_enumerate</a> (const struct <a class="el" href="structdevice.html">device</a> *dev, <a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a> bdf_start)</td></tr>
<tr class="memdesc:ga75910ea4255a740b57e35a596a90b7bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start PCIe Endpoints enumeration.  <a href="group__pcie__controller__interface.html#ga75910ea4255a740b57e35a596a90b7bb">More...</a><br /></td></tr>
<tr class="separator:ga75910ea4255a740b57e35a596a90b7bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1d978b8075191d6e571349684c731a43"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pcie__controller__interface.html#ga1d978b8075191d6e571349684c731a43">pcie_ctrl_conf_read</a> (const struct <a class="el" href="structdevice.html">device</a> *dev, <a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a> bdf, <a class="el" href="lib_2libc_2minimal_2include_2sys_2types_8h.html#a4089fb16419d359081465355db05f846">unsigned</a> int <a class="el" href="mem__heap_2shared__multi__heap_2src_2main_8c.html#a698b4ae5d990c4030b61afb7e057cb03">reg</a>)</td></tr>
<tr class="memdesc:ga1d978b8075191d6e571349684c731a43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a 32-bit word from an endpoint's configuration space.  <a href="group__pcie__controller__interface.html#ga1d978b8075191d6e571349684c731a43">More...</a><br /></td></tr>
<tr class="separator:ga1d978b8075191d6e571349684c731a43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5cfe01762e5af8dc0cc5fbd550ff7e74"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pcie__controller__interface.html#ga5cfe01762e5af8dc0cc5fbd550ff7e74">pcie_ctrl_conf_write</a> (const struct <a class="el" href="structdevice.html">device</a> *dev, <a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a> bdf, <a class="el" href="lib_2libc_2minimal_2include_2sys_2types_8h.html#a4089fb16419d359081465355db05f846">unsigned</a> int <a class="el" href="mem__heap_2shared__multi__heap_2src_2main_8c.html#a698b4ae5d990c4030b61afb7e057cb03">reg</a>, <a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> <a class="el" href="test__stack__fail_8c.html#a4bb6fa6c719fd9021449009ab8befc04">data</a>)</td></tr>
<tr class="memdesc:ga5cfe01762e5af8dc0cc5fbd550ff7e74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a 32-bit word to an endpoint's configuration space.  <a href="group__pcie__controller__interface.html#ga5cfe01762e5af8dc0cc5fbd550ff7e74">More...</a><br /></td></tr>
<tr class="separator:ga5cfe01762e5af8dc0cc5fbd550ff7e74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1de030e2e8b07509d75de5a348297f42"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pcie__controller__interface.html#ga1de030e2e8b07509d75de5a348297f42">pcie_ctrl_region_allocate</a> (const struct <a class="el" href="structdevice.html">device</a> *dev, <a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a> bdf, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> mem, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> mem64, size_t bar_size, <a class="el" href="stdint_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a> *bar_bus_addr)</td></tr>
<tr class="memdesc:ga1de030e2e8b07509d75de5a348297f42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a memory region subset for an endpoint Base Address Register.  <a href="group__pcie__controller__interface.html#ga1de030e2e8b07509d75de5a348297f42">More...</a><br /></td></tr>
<tr class="separator:ga1de030e2e8b07509d75de5a348297f42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae7c109ca138adfd906fef5b6f3dca385"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pcie__controller__interface.html#gae7c109ca138adfd906fef5b6f3dca385">pcie_ctrl_region_get_allocate_base</a> (const struct <a class="el" href="structdevice.html">device</a> *dev, <a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a> bdf, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> mem, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> mem64, size_t align, <a class="el" href="stdint_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a> *bar_base_addr)</td></tr>
<tr class="memdesc:gae7c109ca138adfd906fef5b6f3dca385"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called to get the current allocation base of a memory region subset for an endpoint Base Address Register.  <a href="group__pcie__controller__interface.html#gae7c109ca138adfd906fef5b6f3dca385">More...</a><br /></td></tr>
<tr class="separator:gae7c109ca138adfd906fef5b6f3dca385"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae6fa104ea2cc85912ebb1cfe0a1a3ddf"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pcie__controller__interface.html#gae6fa104ea2cc85912ebb1cfe0a1a3ddf">pcie_ctrl_region_translate</a> (const struct <a class="el" href="structdevice.html">device</a> *dev, <a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a> bdf, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> mem, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> mem64, <a class="el" href="stdint_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a> bar_bus_addr, <a class="el" href="stdint_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a> *bar_addr)</td></tr>
<tr class="memdesc:gae6fa104ea2cc85912ebb1cfe0a1a3ddf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Translate an endpoint Base Address Register bus-centric address into Physical address.  <a href="group__pcie__controller__interface.html#gae6fa104ea2cc85912ebb1cfe0a1a3ddf">More...</a><br /></td></tr>
<tr class="separator:gae6fa104ea2cc85912ebb1cfe0a1a3ddf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >PCI Express Controller Interface. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga91525130b94b07187633abd1e017aa61" name="ga91525130b94b07187633abd1e017aa61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga91525130b94b07187633abd1e017aa61">&#9670;&nbsp;</a></span>PCIE_RANGE_FORMAT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PCIE_RANGE_FORMAT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">node_id, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">idx&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="drivers_2pcie_2controller_8h.html">include/drivers/pcie/controller.h</a>&gt;</code></p>
<b>Value:</b><div class="fragment"><div class="line">{                                                                                       \</div>
<div class="line">        .flags = <a class="code hl_define" href="group__devicetree-ranges-prop.html#ga32a9c873d3ec1f5d7922c38eaafd1af8">DT_RANGES_CHILD_BUS_FLAGS_BY_IDX</a>(node_id, idx),                        \</div>
<div class="line">        .pcie_bus_addr = <a class="code hl_define" href="group__devicetree-ranges-prop.html#ga449940559213086b15151ec00e46607d">DT_RANGES_CHILD_BUS_ADDRESS_BY_IDX</a>(node_id, idx),              \</div>
<div class="line">        .host_map_addr = <a class="code hl_define" href="group__devicetree-ranges-prop.html#ga48d493ad616438ace2396c0312a242ba">DT_RANGES_PARENT_BUS_ADDRESS_BY_IDX</a>(node_id, idx),             \</div>
<div class="line">        .map_length = <a class="code hl_define" href="group__devicetree-ranges-prop.html#ga52677a5bc86f9132a09b6bc37153afb2">DT_RANGES_LENGTH_BY_IDX</a>(node_id, idx),                            \</div>
<div class="line">},</div>
<div class="ttc" id="agroup__devicetree-ranges-prop_html_ga32a9c873d3ec1f5d7922c38eaafd1af8"><div class="ttname"><a href="group__devicetree-ranges-prop.html#ga32a9c873d3ec1f5d7922c38eaafd1af8">DT_RANGES_CHILD_BUS_FLAGS_BY_IDX</a></div><div class="ttdeci">#define DT_RANGES_CHILD_BUS_FLAGS_BY_IDX(node_id, idx)</div><div class="ttdoc">Get the ranges property child bus flags at index.</div><div class="ttdef"><b>Definition:</b> devicetree.h:1355</div></div>
<div class="ttc" id="agroup__devicetree-ranges-prop_html_ga449940559213086b15151ec00e46607d"><div class="ttname"><a href="group__devicetree-ranges-prop.html#ga449940559213086b15151ec00e46607d">DT_RANGES_CHILD_BUS_ADDRESS_BY_IDX</a></div><div class="ttdeci">#define DT_RANGES_CHILD_BUS_ADDRESS_BY_IDX(node_id, idx)</div><div class="ttdoc">Get the ranges property child bus address at index.</div><div class="ttdef"><b>Definition:</b> devicetree.h:1400</div></div>
<div class="ttc" id="agroup__devicetree-ranges-prop_html_ga48d493ad616438ace2396c0312a242ba"><div class="ttname"><a href="group__devicetree-ranges-prop.html#ga48d493ad616438ace2396c0312a242ba">DT_RANGES_PARENT_BUS_ADDRESS_BY_IDX</a></div><div class="ttdeci">#define DT_RANGES_PARENT_BUS_ADDRESS_BY_IDX(node_id, idx)</div><div class="ttdoc">Get the ranges property parent bus address at index.</div><div class="ttdef"><b>Definition:</b> devicetree.h:1445</div></div>
<div class="ttc" id="agroup__devicetree-ranges-prop_html_ga52677a5bc86f9132a09b6bc37153afb2"><div class="ttname"><a href="group__devicetree-ranges-prop.html#ga52677a5bc86f9132a09b6bc37153afb2">DT_RANGES_LENGTH_BY_IDX</a></div><div class="ttdeci">#define DT_RANGES_LENGTH_BY_IDX(node_id, idx)</div><div class="ttdoc">Get the ranges property length at index.</div><div class="ttdef"><b>Definition:</b> devicetree.h:1490</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gac3d0f7e90bcc30996ce23324d2d7356a" name="gac3d0f7e90bcc30996ce23324d2d7356a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac3d0f7e90bcc30996ce23324d2d7356a">&#9670;&nbsp;</a></span>pcie_ctrl_conf_read_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>(* pcie_ctrl_conf_read_t) (const struct <a class="el" href="structdevice.html">device</a> *dev, <a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a> bdf, <a class="el" href="lib_2libc_2minimal_2include_2sys_2types_8h.html#a4089fb16419d359081465355db05f846">unsigned</a> int <a class="el" href="mem__heap_2shared__multi__heap_2src_2main_8c.html#a698b4ae5d990c4030b61afb7e057cb03">reg</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="drivers_2pcie_2controller_8h.html">include/drivers/pcie/controller.h</a>&gt;</code></p>

<p>Function called to read a 32-bit word from an endpoint's configuration space. </p>
<p >Read a 32-bit word from an endpoint's configuration space with the PCI Express Controller configuration space access method (I/O port, memory mapped or custom method)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>PCI Express Controller device pointer </td></tr>
    <tr><td class="paramname">bdf</td><td>PCI(e) endpoint </td></tr>
    <tr><td class="paramname">reg</td><td>the configuration word index (not address) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the word read (0xFFFFFFFFU if nonexistent endpoint or word) </dd></dl>

</div>
</div>
<a id="ga3241acc7de4af2b73cf3f47a25349109" name="ga3241acc7de4af2b73cf3f47a25349109"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3241acc7de4af2b73cf3f47a25349109">&#9670;&nbsp;</a></span>pcie_ctrl_conf_write_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* pcie_ctrl_conf_write_t) (const struct <a class="el" href="structdevice.html">device</a> *dev, <a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a> bdf, <a class="el" href="lib_2libc_2minimal_2include_2sys_2types_8h.html#a4089fb16419d359081465355db05f846">unsigned</a> int <a class="el" href="mem__heap_2shared__multi__heap_2src_2main_8c.html#a698b4ae5d990c4030b61afb7e057cb03">reg</a>, <a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> <a class="el" href="test__stack__fail_8c.html#a4bb6fa6c719fd9021449009ab8befc04">data</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="drivers_2pcie_2controller_8h.html">include/drivers/pcie/controller.h</a>&gt;</code></p>

<p>Function called to write a 32-bit word to an endpoint's configuration space. </p>
<p >Write a 32-bit word to an endpoint's configuration space with the PCI Express Controller configuration space access method (I/O port, memory mapped or custom method)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>PCI Express Controller device pointer </td></tr>
    <tr><td class="paramname">bdf</td><td>PCI(e) endpoint </td></tr>
    <tr><td class="paramname">reg</td><td>the configuration word index (not address) </td></tr>
    <tr><td class="paramname">data</td><td>the value to write </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga62ce18e7495256c148168b773eabd37d" name="ga62ce18e7495256c148168b773eabd37d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga62ce18e7495256c148168b773eabd37d">&#9670;&nbsp;</a></span>pcie_ctrl_region_allocate_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>(* pcie_ctrl_region_allocate_t) (const struct <a class="el" href="structdevice.html">device</a> *dev, <a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a> bdf, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> mem, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> mem64, size_t bar_size, <a class="el" href="stdint_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a> *bar_bus_addr)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="drivers_2pcie_2controller_8h.html">include/drivers/pcie/controller.h</a>&gt;</code></p>

<p>Function called to allocate a memory region subset for an endpoint Base Address Register. </p>
<p >When enumerating PCIe Endpoints, Type0 endpoints can require up to 6 memory zones via the Base Address Registers from I/O or Memory types.</p>
<p >This call allocates such zone in the PCI Express Controller memory regions if such region is available and space is still available.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>PCI Express Controller device pointer </td></tr>
    <tr><td class="paramname">bdf</td><td>PCI(e) endpoint </td></tr>
    <tr><td class="paramname">mem</td><td>True if the BAR is of memory type </td></tr>
    <tr><td class="paramname">mem64</td><td>True if the BAR is of 64bit memory type </td></tr>
    <tr><td class="paramname">bar_size</td><td>Size in bytes of the Base Address Register as returned by HW </td></tr>
    <tr><td class="paramname">bar_bus_addr</td><td>bus-centric address allocated to be written in the BAR register </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if allocation was possible, False if allocation failed </dd></dl>

</div>
</div>
<a id="gaa9d5bd27c841e36f65e65dec0b057e9a" name="gaa9d5bd27c841e36f65e65dec0b057e9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa9d5bd27c841e36f65e65dec0b057e9a">&#9670;&nbsp;</a></span>pcie_ctrl_region_get_allocate_base_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>(* pcie_ctrl_region_get_allocate_base_t) (const struct <a class="el" href="structdevice.html">device</a> *dev, <a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a> bdf, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> mem, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> mem64, size_t align, <a class="el" href="stdint_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a> *bar_base_addr)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="drivers_2pcie_2controller_8h.html">include/drivers/pcie/controller.h</a>&gt;</code></p>

<p>Function called to get the current allocation base of a memory region subset for an endpoint Base Address Register. </p>
<p >When enumerating PCIe Endpoints, Type1 bridge endpoints requires a range of memory allocated by all endpoints in the bridged bus.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>PCI Express Controller device pointer </td></tr>
    <tr><td class="paramname">bdf</td><td>PCI(e) endpoint </td></tr>
    <tr><td class="paramname">mem</td><td>True if the BAR is of memory type </td></tr>
    <tr><td class="paramname">mem64</td><td>True if the BAR is of 64bit memory type </td></tr>
    <tr><td class="paramname">align</td><td>size to take in account for alignment </td></tr>
    <tr><td class="paramname">bar_base_addr</td><td>bus-centric address allocation base </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if allocation was possible, False if allocation failed </dd></dl>

</div>
</div>
<a id="gab144356b1c3ec3754aae0008634f2d2f" name="gab144356b1c3ec3754aae0008634f2d2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab144356b1c3ec3754aae0008634f2d2f">&#9670;&nbsp;</a></span>pcie_ctrl_region_translate_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>(* pcie_ctrl_region_translate_t) (const struct <a class="el" href="structdevice.html">device</a> *dev, <a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a> bdf, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> mem, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> mem64, <a class="el" href="stdint_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a> bar_bus_addr, <a class="el" href="stdint_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a> *bar_addr)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="drivers_2pcie_2controller_8h.html">include/drivers/pcie/controller.h</a>&gt;</code></p>

<p>Function called to translate an endpoint Base Address Register bus-centric address into Physical address. </p>
<p >When enumerating PCIe Endpoints, Type0 endpoints can require up to 6 memory zones via the Base Address Registers from I/O or Memory types.</p>
<p >The bus-centric address set in this BAR register is not necessarely accessible from the CPU, thus must be translated by using the PCI Express Controller memory regions translation ranges to permit mapping from the CPU.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>PCI Express Controller device pointer </td></tr>
    <tr><td class="paramname">bdf</td><td>PCI(e) endpoint </td></tr>
    <tr><td class="paramname">mem</td><td>True if the BAR is of memory type </td></tr>
    <tr><td class="paramname">mem64</td><td>True if the BAR is of 64bit memory type </td></tr>
    <tr><td class="paramname">bar_bus_addr</td><td>bus-centric address written in the BAR register </td></tr>
    <tr><td class="paramname">bar_addr</td><td>CPU-centric address translated from the bus-centric address </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if translation was possible, False if translation failed </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga1d978b8075191d6e571349684c731a43" name="ga1d978b8075191d6e571349684c731a43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1d978b8075191d6e571349684c731a43">&#9670;&nbsp;</a></span>pcie_ctrl_conf_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> pcie_ctrl_conf_read </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdevice.html">device</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a>&#160;</td>
          <td class="paramname"><em>bdf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lib_2libc_2minimal_2include_2sys_2types_8h.html#a4089fb16419d359081465355db05f846">unsigned</a> int&#160;</td>
          <td class="paramname"><em>reg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="drivers_2pcie_2controller_8h.html">include/drivers/pcie/controller.h</a>&gt;</code></p>

<p>Read a 32-bit word from an endpoint's configuration space. </p>
<p >Read a 32-bit word from an endpoint's configuration space with the PCI Express Controller configuration space access method (I/O port, memory mapped or custom method)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>PCI Express Controller device pointer </td></tr>
    <tr><td class="paramname">bdf</td><td>PCI(e) endpoint </td></tr>
    <tr><td class="paramname">reg</td><td>the configuration word index (not address) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the word read (0xFFFFFFFFU if nonexistent endpoint or word) </dd></dl>

</div>
</div>
<a id="ga5cfe01762e5af8dc0cc5fbd550ff7e74" name="ga5cfe01762e5af8dc0cc5fbd550ff7e74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5cfe01762e5af8dc0cc5fbd550ff7e74">&#9670;&nbsp;</a></span>pcie_ctrl_conf_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void pcie_ctrl_conf_write </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdevice.html">device</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a>&#160;</td>
          <td class="paramname"><em>bdf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lib_2libc_2minimal_2include_2sys_2types_8h.html#a4089fb16419d359081465355db05f846">unsigned</a> int&#160;</td>
          <td class="paramname"><em>reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="drivers_2pcie_2controller_8h.html">include/drivers/pcie/controller.h</a>&gt;</code></p>

<p>Write a 32-bit word to an endpoint's configuration space. </p>
<p >Write a 32-bit word to an endpoint's configuration space with the PCI Express Controller configuration space access method (I/O port, memory mapped or custom method)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>PCI Express Controller device pointer </td></tr>
    <tr><td class="paramname">bdf</td><td>PCI(e) endpoint </td></tr>
    <tr><td class="paramname">reg</td><td>the configuration word index (not address) </td></tr>
    <tr><td class="paramname">data</td><td>the value to write </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga1de030e2e8b07509d75de5a348297f42" name="ga1de030e2e8b07509d75de5a348297f42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1de030e2e8b07509d75de5a348297f42">&#9670;&nbsp;</a></span>pcie_ctrl_region_allocate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> pcie_ctrl_region_allocate </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdevice.html">device</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a>&#160;</td>
          <td class="paramname"><em>bdf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>mem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>mem64</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bar_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a> *&#160;</td>
          <td class="paramname"><em>bar_bus_addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="drivers_2pcie_2controller_8h.html">include/drivers/pcie/controller.h</a>&gt;</code></p>

<p>Allocate a memory region subset for an endpoint Base Address Register. </p>
<p >When enumerating PCIe Endpoints, Type0 endpoints can require up to 6 memory zones via the Base Address Registers from I/O or Memory types.</p>
<p >This call allocates such zone in the PCI Express Controller memory regions if such region is available and space is still available.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>PCI Express Controller device pointer </td></tr>
    <tr><td class="paramname">bdf</td><td>PCI(e) endpoint </td></tr>
    <tr><td class="paramname">mem</td><td>True if the BAR is of memory type </td></tr>
    <tr><td class="paramname">mem64</td><td>True if the BAR is of 64bit memory type </td></tr>
    <tr><td class="paramname">bar_size</td><td>Size in bytes of the Base Address Register as returned by HW </td></tr>
    <tr><td class="paramname">bar_bus_addr</td><td>bus-centric address allocated to be written in the BAR register </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if allocation was possible, False if allocation failed </dd></dl>

</div>
</div>
<a id="gae7c109ca138adfd906fef5b6f3dca385" name="gae7c109ca138adfd906fef5b6f3dca385"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae7c109ca138adfd906fef5b6f3dca385">&#9670;&nbsp;</a></span>pcie_ctrl_region_get_allocate_base()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> pcie_ctrl_region_get_allocate_base </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdevice.html">device</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a>&#160;</td>
          <td class="paramname"><em>bdf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>mem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>mem64</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>align</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a> *&#160;</td>
          <td class="paramname"><em>bar_base_addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="drivers_2pcie_2controller_8h.html">include/drivers/pcie/controller.h</a>&gt;</code></p>

<p>Function called to get the current allocation base of a memory region subset for an endpoint Base Address Register. </p>
<p >When enumerating PCIe Endpoints, Type1 bridge endpoints requires a range of memory allocated by all endpoints in the bridged bus.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>PCI Express Controller device pointer </td></tr>
    <tr><td class="paramname">bdf</td><td>PCI(e) endpoint </td></tr>
    <tr><td class="paramname">mem</td><td>True if the BAR is of memory type </td></tr>
    <tr><td class="paramname">mem64</td><td>True if the BAR is of 64bit memory type </td></tr>
    <tr><td class="paramname">align</td><td>size to take in account for alignment </td></tr>
    <tr><td class="paramname">bar_base_addr</td><td>bus-centric address allocation base </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if allocation was possible, False if allocation failed </dd></dl>

</div>
</div>
<a id="gae6fa104ea2cc85912ebb1cfe0a1a3ddf" name="gae6fa104ea2cc85912ebb1cfe0a1a3ddf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae6fa104ea2cc85912ebb1cfe0a1a3ddf">&#9670;&nbsp;</a></span>pcie_ctrl_region_translate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> pcie_ctrl_region_translate </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdevice.html">device</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a>&#160;</td>
          <td class="paramname"><em>bdf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>mem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>mem64</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>&#160;</td>
          <td class="paramname"><em>bar_bus_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a> *&#160;</td>
          <td class="paramname"><em>bar_addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="drivers_2pcie_2controller_8h.html">include/drivers/pcie/controller.h</a>&gt;</code></p>

<p>Translate an endpoint Base Address Register bus-centric address into Physical address. </p>
<p >When enumerating PCIe Endpoints, Type0 endpoints can require up to 6 memory zones via the Base Address Registers from I/O or Memory types.</p>
<p >The bus-centric address set in this BAR register is not necessarely accessible from the CPU, thus must be translated by using the PCI Express Controller memory regions translation ranges to permit mapping from the CPU.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>PCI Express Controller device pointer </td></tr>
    <tr><td class="paramname">bdf</td><td>PCI(e) endpoint </td></tr>
    <tr><td class="paramname">mem</td><td>True if the BAR is of memory type </td></tr>
    <tr><td class="paramname">mem64</td><td>True if the BAR is of 64bit memory type </td></tr>
    <tr><td class="paramname">bar_bus_addr</td><td>bus-centric address written in the BAR register </td></tr>
    <tr><td class="paramname">bar_addr</td><td>CPU-centric address translated from the bus-centric address </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if translation was possible, False if translation failed </dd></dl>

</div>
</div>
<a id="gaa16b59c39f273a654b72d9e209f3ba2e" name="gaa16b59c39f273a654b72d9e209f3ba2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa16b59c39f273a654b72d9e209f3ba2e">&#9670;&nbsp;</a></span>pcie_generic_ctrl_conf_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> pcie_generic_ctrl_conf_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sys_2sys__io_8h.html#a7bcfa789a44940bccc5b9b98642744b0">mm_reg_t</a>&#160;</td>
          <td class="paramname"><em>cfg_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a>&#160;</td>
          <td class="paramname"><em>bdf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lib_2libc_2minimal_2include_2sys_2types_8h.html#a4089fb16419d359081465355db05f846">unsigned</a> int&#160;</td>
          <td class="paramname"><em>reg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="drivers_2pcie_2controller_8h.html">include/drivers/pcie/controller.h</a>&gt;</code></p>

<p>Read a 32-bit word from a Memory-Mapped endpoint's configuration space. </p>
<p >Read a 32-bit word from an endpoint's configuration space from a Memory-Mapped configuration space access method, known as PCI Control Access Method (CAM) or PCIe Extended Control Access Method (ECAM).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cfg_addr</td><td>Logical address of Memory-Mapped configuration space </td></tr>
    <tr><td class="paramname">bdf</td><td>PCI(e) endpoint </td></tr>
    <tr><td class="paramname">reg</td><td>the configuration word index (not address) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the word read (0xFFFFFFFFU if nonexistent endpoint or word) </dd></dl>

</div>
</div>
<a id="ga709ecedbd0585b4eb17fc2f5923a8f61" name="ga709ecedbd0585b4eb17fc2f5923a8f61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga709ecedbd0585b4eb17fc2f5923a8f61">&#9670;&nbsp;</a></span>pcie_generic_ctrl_conf_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pcie_generic_ctrl_conf_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sys_2sys__io_8h.html#a7bcfa789a44940bccc5b9b98642744b0">mm_reg_t</a>&#160;</td>
          <td class="paramname"><em>cfg_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a>&#160;</td>
          <td class="paramname"><em>bdf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lib_2libc_2minimal_2include_2sys_2types_8h.html#a4089fb16419d359081465355db05f846">unsigned</a> int&#160;</td>
          <td class="paramname"><em>reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="drivers_2pcie_2controller_8h.html">include/drivers/pcie/controller.h</a>&gt;</code></p>

<p>Write a 32-bit word to a Memory-Mapped endpoint's configuration space. </p>
<p >Write a 32-bit word to an endpoint's configuration space from a Memory-Mapped configuration space access method, known as PCI Control Access Method (CAM) or PCIe Extended Control Access Method (ECAM).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cfg_addr</td><td>Logical address of Memory-Mapped configuration space </td></tr>
    <tr><td class="paramname">bdf</td><td>PCI(e) endpoint </td></tr>
    <tr><td class="paramname">reg</td><td>the configuration word index (not address) </td></tr>
    <tr><td class="paramname">data</td><td>the value to write </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga75910ea4255a740b57e35a596a90b7bb" name="ga75910ea4255a740b57e35a596a90b7bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga75910ea4255a740b57e35a596a90b7bb">&#9670;&nbsp;</a></span>pcie_generic_ctrl_enumerate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pcie_generic_ctrl_enumerate </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdevice.html">device</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="drivers_2pcie_2pcie_8h.html#a84bb3c734945ebaee0e9801495eebe90">pcie_bdf_t</a>&#160;</td>
          <td class="paramname"><em>bdf_start</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="drivers_2pcie_2controller_8h.html">include/drivers/pcie/controller.h</a>&gt;</code></p>

<p>Start PCIe Endpoints enumeration. </p>
<p >Start a PCIe Endpoints enumeration from a Bus number. When on non-x86 architecture or when firmware didn't setup the PCIe Bus hierarchy, the PCIe bus complex must be enumerated to setup the Endpoints Base Address Registers.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>PCI Express Controller device pointer </td></tr>
    <tr><td class="paramname">bdf_start</td><td>PCI(e) start endpoint (only bus &amp; dev are used to start enumeration) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Feb 21 2022 04:59:41 for Zephyr API Documentation by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
<script type="text/javascript">
  $(function() {
    toggleButton = document.createElement('doxygen-awesome-dark-mode-toggle')
    toggleButton.title = "Toggle Light/Dark Mode"
    $(document).ready(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
    // every resize will remove the button, which is why it has to be added again:
    $(window).resize(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
  })
</script>
</body>
</html>

<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Zephyr API Documentation: Time Synchronization APIs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-zephyr.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-zephyr.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Zephyr API Documentation
   &#160;<span id="projectnumber">3.0.99</span>
   </div>
   <div id="projectbrief">A Scalable Open Source RTOS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__timeutil__sync__apis.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Time Synchronization APIs<div class="ingroups"><a class="el" href="group__timeutil__apis.html">Time Utility APIs</a></div></div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtimeutil__sync__config.html">timeutil_sync_config</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Immutable state for synchronizing two clocks.  <a href="structtimeutil__sync__config.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtimeutil__sync__instant.html">timeutil_sync_instant</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Representation of an instant in two time scales.  <a href="structtimeutil__sync__instant.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtimeutil__sync__state.html">timeutil_sync_state</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">State required to convert instants between time scales.  <a href="structtimeutil__sync__state.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa6926a23d1c4fbb61584e957d157bd62"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timeutil__sync__apis.html#gaa6926a23d1c4fbb61584e957d157bd62">timeutil_sync_state_update</a> (struct <a class="el" href="structtimeutil__sync__state.html">timeutil_sync_state</a> *tsp, const struct <a class="el" href="structtimeutil__sync__instant.html">timeutil_sync_instant</a> *inst)</td></tr>
<tr class="memdesc:gaa6926a23d1c4fbb61584e957d157bd62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Record a new instant in the time synchronization state.  <a href="group__timeutil__sync__apis.html#gaa6926a23d1c4fbb61584e957d157bd62">More...</a><br /></td></tr>
<tr class="separator:gaa6926a23d1c4fbb61584e957d157bd62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga01142931b299e848b0642634a0922be5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timeutil__sync__apis.html#ga01142931b299e848b0642634a0922be5">timeutil_sync_state_set_skew</a> (struct <a class="el" href="structtimeutil__sync__state.html">timeutil_sync_state</a> *tsp, float skew, const struct <a class="el" href="structtimeutil__sync__instant.html">timeutil_sync_instant</a> *base)</td></tr>
<tr class="memdesc:ga01142931b299e848b0642634a0922be5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the state with a new skew and possibly base value.  <a href="group__timeutil__sync__apis.html#ga01142931b299e848b0642634a0922be5">More...</a><br /></td></tr>
<tr class="separator:ga01142931b299e848b0642634a0922be5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac4c25a1ed054a8a06c87d4df9c25ffc6"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timeutil__sync__apis.html#gac4c25a1ed054a8a06c87d4df9c25ffc6">timeutil_sync_estimate_skew</a> (const struct <a class="el" href="structtimeutil__sync__state.html">timeutil_sync_state</a> *tsp)</td></tr>
<tr class="memdesc:gac4c25a1ed054a8a06c87d4df9c25ffc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Estimate the skew based on current state.  <a href="group__timeutil__sync__apis.html#gac4c25a1ed054a8a06c87d4df9c25ffc6">More...</a><br /></td></tr>
<tr class="separator:gac4c25a1ed054a8a06c87d4df9c25ffc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga75361d2bfd219f1e8107d635eb4ecc16"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timeutil__sync__apis.html#ga75361d2bfd219f1e8107d635eb4ecc16">timeutil_sync_ref_from_local</a> (const struct <a class="el" href="structtimeutil__sync__state.html">timeutil_sync_state</a> *tsp, <a class="el" href="stdint_8h.html#a2095b9bffea4b2656950c6c0419edbf1">uint64_t</a> local, <a class="el" href="stdint_8h.html#a2095b9bffea4b2656950c6c0419edbf1">uint64_t</a> *refp)</td></tr>
<tr class="memdesc:ga75361d2bfd219f1e8107d635eb4ecc16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interpolate a reference timescale instant from a local instant.  <a href="group__timeutil__sync__apis.html#ga75361d2bfd219f1e8107d635eb4ecc16">More...</a><br /></td></tr>
<tr class="separator:ga75361d2bfd219f1e8107d635eb4ecc16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad8ef92e5dc72bd26d765567134044400"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timeutil__sync__apis.html#gad8ef92e5dc72bd26d765567134044400">timeutil_sync_local_from_ref</a> (const struct <a class="el" href="structtimeutil__sync__state.html">timeutil_sync_state</a> *tsp, <a class="el" href="stdint_8h.html#a2095b9bffea4b2656950c6c0419edbf1">uint64_t</a> ref, <a class="el" href="stdint_8h.html#ac714c0d2c1a4adb10e73cab29623314b">int64_t</a> *localp)</td></tr>
<tr class="memdesc:gad8ef92e5dc72bd26d765567134044400"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interpolate a local timescale instant from a reference instant.  <a href="group__timeutil__sync__apis.html#gad8ef92e5dc72bd26d765567134044400">More...</a><br /></td></tr>
<tr class="separator:gad8ef92e5dc72bd26d765567134044400"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabe374cf629ee64b850cc49e954666d8d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#a0c18914b3041c2f583aba76f418399c2">int32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timeutil__sync__apis.html#gabe374cf629ee64b850cc49e954666d8d">timeutil_sync_skew_to_ppb</a> (float skew)</td></tr>
<tr class="memdesc:gabe374cf629ee64b850cc49e954666d8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert from a skew to an error in parts-per-billion.  <a href="group__timeutil__sync__apis.html#gabe374cf629ee64b850cc49e954666d8d">More...</a><br /></td></tr>
<tr class="separator:gabe374cf629ee64b850cc49e954666d8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="gac4c25a1ed054a8a06c87d4df9c25ffc6" name="gac4c25a1ed054a8a06c87d4df9c25ffc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac4c25a1ed054a8a06c87d4df9c25ffc6">&#9670;&nbsp;</a></span>timeutil_sync_estimate_skew()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float timeutil_sync_estimate_skew </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structtimeutil__sync__state.html">timeutil_sync_state</a> *&#160;</td>
          <td class="paramname"><em>tsp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="timeutil_8h.html">include/sys/timeutil.h</a>&gt;</code></p>

<p>Estimate the skew based on current state. </p>
<p >Using the base and latest syncpoints from the state determine the skew of the local clock relative to the reference clock. See <a class="el" href="structtimeutil__sync__state.html#a39454807d207dddb2564d766c8ec2ea3">timeutil_sync_state::skew</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tsp</td><td>pointer to a time synchronization state. The base and latest syncpoints must be present and the latest syncpoint must be after the base point in the local time scale.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the estimated skew, or zero if skew could not be estimated. </dd></dl>

</div>
</div>
<a id="gad8ef92e5dc72bd26d765567134044400" name="gad8ef92e5dc72bd26d765567134044400"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad8ef92e5dc72bd26d765567134044400">&#9670;&nbsp;</a></span>timeutil_sync_local_from_ref()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int timeutil_sync_local_from_ref </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structtimeutil__sync__state.html">timeutil_sync_state</a> *&#160;</td>
          <td class="paramname"><em>tsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a2095b9bffea4b2656950c6c0419edbf1">uint64_t</a>&#160;</td>
          <td class="paramname"><em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#ac714c0d2c1a4adb10e73cab29623314b">int64_t</a> *&#160;</td>
          <td class="paramname"><em>localp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="timeutil_8h.html">include/sys/timeutil.h</a>&gt;</code></p>

<p>Interpolate a local timescale instant from a reference instant. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tsp</td><td>pointer to a time synchronization state. This must have a base and a skew installed.</td></tr>
    <tr><td class="paramname">ref</td><td>an instant measured in the reference timescale. This may be before or after the base instant.</td></tr>
    <tr><td class="paramname">localp</td><td>where the corresponding instant in the local timescale should be stored. An interpolated value before local time 0 is provided without error. If interpolation fails the referenced object is not modified.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if successful with a skew of 1 </td></tr>
    <tr><td class="paramname">1</td><td>if successful with a skew not equal to 1 </td></tr>
    <tr><td class="paramname">-EINVAL</td><td><ul>
<li>the time synchronization state is not adequately initialized</li>
<li><code>refp</code> is null </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga75361d2bfd219f1e8107d635eb4ecc16" name="ga75361d2bfd219f1e8107d635eb4ecc16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga75361d2bfd219f1e8107d635eb4ecc16">&#9670;&nbsp;</a></span>timeutil_sync_ref_from_local()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int timeutil_sync_ref_from_local </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structtimeutil__sync__state.html">timeutil_sync_state</a> *&#160;</td>
          <td class="paramname"><em>tsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a2095b9bffea4b2656950c6c0419edbf1">uint64_t</a>&#160;</td>
          <td class="paramname"><em>local</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a2095b9bffea4b2656950c6c0419edbf1">uint64_t</a> *&#160;</td>
          <td class="paramname"><em>refp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="timeutil_8h.html">include/sys/timeutil.h</a>&gt;</code></p>

<p>Interpolate a reference timescale instant from a local instant. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tsp</td><td>pointer to a time synchronization state. This must have a base and a skew installed.</td></tr>
    <tr><td class="paramname">local</td><td>an instant measured in the local timescale. This may be before or after the base instant.</td></tr>
    <tr><td class="paramname">refp</td><td>where the corresponding instant in the reference timescale should be stored. A negative interpolated reference time produces an error. If interpolation fails the referenced object is not modified.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if interpolated using a skew of 1 </td></tr>
    <tr><td class="paramname">1</td><td>if interpolated using a skew not equal to 1 </td></tr>
    <tr><td class="paramname">-EINVAL</td><td><ul>
<li>the times synchronization state is not adequately initialized</li>
<li><code>refp</code> is null </li>
</ul>
</td></tr>
    <tr><td class="paramname">-ERANGE</td><td>the interpolated reference time would be negative </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gabe374cf629ee64b850cc49e954666d8d" name="gabe374cf629ee64b850cc49e954666d8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabe374cf629ee64b850cc49e954666d8d">&#9670;&nbsp;</a></span>timeutil_sync_skew_to_ppb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#a0c18914b3041c2f583aba76f418399c2">int32_t</a> timeutil_sync_skew_to_ppb </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>skew</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="timeutil_8h.html">include/sys/timeutil.h</a>&gt;</code></p>

<p>Convert from a skew to an error in parts-per-billion. </p>
<p >A skew of 1.0 has zero error. A skew less than 1 has a positive error (clock is faster than it should be). A skew greater than one has a negative error (clock is slower than it should be).</p>
<p >Note that due to the limited precision of <code>float</code> compared with <code>double</code> the smallest error that can be represented is about 120 ppb. A "precise" time source may have error on the order of 2000 ppb.</p>
<p >A skew greater than 3.14748 may underflow the 32-bit representation; this represents a clock running at less than 1/3 its nominal rate.</p>
<dl class="section return"><dt>Returns</dt><dd>skew error represented as parts-per-billion, or INT32_MIN if the skew cannot be represented in the return type. </dd></dl>

</div>
</div>
<a id="ga01142931b299e848b0642634a0922be5" name="ga01142931b299e848b0642634a0922be5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga01142931b299e848b0642634a0922be5">&#9670;&nbsp;</a></span>timeutil_sync_state_set_skew()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int timeutil_sync_state_set_skew </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtimeutil__sync__state.html">timeutil_sync_state</a> *&#160;</td>
          <td class="paramname"><em>tsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>skew</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structtimeutil__sync__instant.html">timeutil_sync_instant</a> *&#160;</td>
          <td class="paramname"><em>base</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="timeutil_8h.html">include/sys/timeutil.h</a>&gt;</code></p>

<p>Update the state with a new skew and possibly base value. </p>
<p >Set the skew from a value retrieved from persistent storage, or calculated based on recent skew estimations including from <a class="el" href="group__timeutil__sync__apis.html#gac4c25a1ed054a8a06c87d4df9c25ffc6" title="Estimate the skew based on current state.">timeutil_sync_estimate_skew()</a>.</p>
<p >Optionally update the base timestamp. If the base is replaced the latest instant will be cleared until <a class="el" href="group__timeutil__sync__apis.html#gaa6926a23d1c4fbb61584e957d157bd62" title="Record a new instant in the time synchronization state.">timeutil_sync_state_update()</a> is invoked.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tsp</td><td>pointer to a time synchronization state.</td></tr>
    <tr><td class="paramname">skew</td><td>the skew to be used. The value must be positive and shouldn't be too far away from 1.</td></tr>
    <tr><td class="paramname">base</td><td>optional new base to be set. If provided this becomes the base timestamp that will be used along with skew to convert between reference and local timescale instants. Setting the base clears the captured latest value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if skew was updated </dd>
<dd>
-EINVAL if skew was not valid </dd></dl>

</div>
</div>
<a id="gaa6926a23d1c4fbb61584e957d157bd62" name="gaa6926a23d1c4fbb61584e957d157bd62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa6926a23d1c4fbb61584e957d157bd62">&#9670;&nbsp;</a></span>timeutil_sync_state_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int timeutil_sync_state_update </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtimeutil__sync__state.html">timeutil_sync_state</a> *&#160;</td>
          <td class="paramname"><em>tsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structtimeutil__sync__instant.html">timeutil_sync_instant</a> *&#160;</td>
          <td class="paramname"><em>inst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="timeutil_8h.html">include/sys/timeutil.h</a>&gt;</code></p>

<p>Record a new instant in the time synchronization state. </p>
<p >Note that this updates only the latest persisted instant. The skew is not adjusted automatically.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tsp</td><td>pointer to a <a class="el" href="structtimeutil__sync__state.html" title="State required to convert instants between time scales.">timeutil_sync_state</a> object.</td></tr>
    <tr><td class="paramname">inst</td><td>the new instant to be recorded. This becomes the base instant if there is no base instant, otherwise the value must be strictly after the base instant in both the reference and local time scales.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if installation succeeded in providing a new base </td></tr>
    <tr><td class="paramname">1</td><td>if installation provided a new latest instant </td></tr>
    <tr><td class="paramname">-EINVAL</td><td>if the new instant is not compatible with the base instant </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sat Mar 5 2022 05:00:47 for Zephyr API Documentation by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
<script type="text/javascript">
  $(function() {
    toggleButton = document.createElement('doxygen-awesome-dark-mode-toggle')
    toggleButton.title = "Toggle Light/Dark Mode"
    $(document).ready(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
    // every resize will remove the button, which is why it has to be added again:
    $(window).resize(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
  })
</script>
</body>
</html>

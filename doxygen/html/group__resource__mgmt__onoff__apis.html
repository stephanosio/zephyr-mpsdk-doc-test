<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Zephyr API Documentation: On-Off Service APIs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-zephyr.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-zephyr.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Zephyr API Documentation
   &#160;<span id="projectnumber">3.0.0-rc3</span>
   </div>
   <div id="projectbrief">A Scalable Open Source RTOS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__resource__mgmt__onoff__apis.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">On-Off Service APIs<div class="ingroups"><a class="el" href="group__kernel__apis.html">Kernel APIs</a></div></div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structonoff__transitions.html">onoff_transitions</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">On-off service transition functions.  <a href="structonoff__transitions.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structonoff__manager.html">onoff_manager</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">State associated with an on-off manager.  <a href="structonoff__manager.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structonoff__client.html">onoff_client</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">State associated with a client of an on-off service.  <a href="structonoff__client.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structonoff__monitor.html">onoff_monitor</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registration state for notifications of onoff service transitions.  <a href="structonoff__monitor.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structonoff__sync__service.html">onoff_sync_service</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">State used when a driver uses the on-off service API for synchronous operations.  <a href="structonoff__sync__service.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga9ae0c3528254b10f5e1a9743aea234dd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#ga9ae0c3528254b10f5e1a9743aea234dd">ONOFF_FLAG_ERROR</a>&#160;&#160;&#160;<a class="el" href="group__sys-util.html#ga3a8ea58898cb58fc96013383d39f482c">BIT</a>(0)</td></tr>
<tr class="memdesc:ga9ae0c3528254b10f5e1a9743aea234dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag indicating an error state.  <a href="group__resource__mgmt__onoff__apis.html#ga9ae0c3528254b10f5e1a9743aea234dd">More...</a><br /></td></tr>
<tr class="separator:ga9ae0c3528254b10f5e1a9743aea234dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7189c7d7b3180c4e12a16b96ac52b15d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#ga7189c7d7b3180c4e12a16b96ac52b15d">ONOFF_FLAG_ONOFF</a>&#160;&#160;&#160;<a class="el" href="group__sys-util.html#ga3a8ea58898cb58fc96013383d39f482c">BIT</a>(1)</td></tr>
<tr class="separator:ga7189c7d7b3180c4e12a16b96ac52b15d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabfee74d3339efe10acc40603c73954bb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#gabfee74d3339efe10acc40603c73954bb">ONOFF_FLAG_TRANSITION</a>&#160;&#160;&#160;<a class="el" href="group__sys-util.html#ga3a8ea58898cb58fc96013383d39f482c">BIT</a>(2)</td></tr>
<tr class="separator:gabfee74d3339efe10acc40603c73954bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0e06eafdf5021ce970027f20fc001acc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#ga0e06eafdf5021ce970027f20fc001acc">ONOFF_STATE_MASK</a></td></tr>
<tr class="memdesc:ga0e06eafdf5021ce970027f20fc001acc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mask used to isolate bits defining the service state.  <a href="group__resource__mgmt__onoff__apis.html#ga0e06eafdf5021ce970027f20fc001acc">More...</a><br /></td></tr>
<tr class="separator:ga0e06eafdf5021ce970027f20fc001acc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab9e5380dce026a5dfea770f999400484"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#gab9e5380dce026a5dfea770f999400484">ONOFF_STATE_OFF</a>&#160;&#160;&#160;0U</td></tr>
<tr class="memdesc:gab9e5380dce026a5dfea770f999400484"><td class="mdescLeft">&#160;</td><td class="mdescRight">Value exposed by ONOFF_STATE_MASK when service is off.  <a href="group__resource__mgmt__onoff__apis.html#gab9e5380dce026a5dfea770f999400484">More...</a><br /></td></tr>
<tr class="separator:gab9e5380dce026a5dfea770f999400484"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7cd0fba52afba2e337ab7c830d3058d7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#ga7cd0fba52afba2e337ab7c830d3058d7">ONOFF_STATE_ON</a>&#160;&#160;&#160;<a class="el" href="group__resource__mgmt__onoff__apis.html#ga7189c7d7b3180c4e12a16b96ac52b15d">ONOFF_FLAG_ONOFF</a></td></tr>
<tr class="memdesc:ga7cd0fba52afba2e337ab7c830d3058d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Value exposed by ONOFF_STATE_MASK when service is on.  <a href="group__resource__mgmt__onoff__apis.html#ga7cd0fba52afba2e337ab7c830d3058d7">More...</a><br /></td></tr>
<tr class="separator:ga7cd0fba52afba2e337ab7c830d3058d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac005a25d149568208a6fbaa2ceaa1ac6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#gac005a25d149568208a6fbaa2ceaa1ac6">ONOFF_STATE_ERROR</a>&#160;&#160;&#160;<a class="el" href="group__resource__mgmt__onoff__apis.html#ga9ae0c3528254b10f5e1a9743aea234dd">ONOFF_FLAG_ERROR</a></td></tr>
<tr class="memdesc:gac005a25d149568208a6fbaa2ceaa1ac6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Value exposed by ONOFF_STATE_MASK when the service is in an error state (and not in the process of resetting its state).  <a href="group__resource__mgmt__onoff__apis.html#gac005a25d149568208a6fbaa2ceaa1ac6">More...</a><br /></td></tr>
<tr class="separator:gac005a25d149568208a6fbaa2ceaa1ac6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac4a0d8a7b501adb011aa1c4c4da3f2a3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#gac4a0d8a7b501adb011aa1c4c4da3f2a3">ONOFF_STATE_TO_ON</a>&#160;&#160;&#160;(<a class="el" href="group__resource__mgmt__onoff__apis.html#gabfee74d3339efe10acc40603c73954bb">ONOFF_FLAG_TRANSITION</a> | <a class="el" href="group__resource__mgmt__onoff__apis.html#ga7cd0fba52afba2e337ab7c830d3058d7">ONOFF_STATE_ON</a>)</td></tr>
<tr class="memdesc:gac4a0d8a7b501adb011aa1c4c4da3f2a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Value exposed by ONOFF_STATE_MASK when service is transitioning to on.  <a href="group__resource__mgmt__onoff__apis.html#gac4a0d8a7b501adb011aa1c4c4da3f2a3">More...</a><br /></td></tr>
<tr class="separator:gac4a0d8a7b501adb011aa1c4c4da3f2a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga235a04122763f1a2cbb849c56df65d26"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#ga235a04122763f1a2cbb849c56df65d26">ONOFF_STATE_TO_OFF</a>&#160;&#160;&#160;(<a class="el" href="group__resource__mgmt__onoff__apis.html#gabfee74d3339efe10acc40603c73954bb">ONOFF_FLAG_TRANSITION</a> | <a class="el" href="group__resource__mgmt__onoff__apis.html#gab9e5380dce026a5dfea770f999400484">ONOFF_STATE_OFF</a>)</td></tr>
<tr class="memdesc:ga235a04122763f1a2cbb849c56df65d26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Value exposed by ONOFF_STATE_MASK when service is transitioning to off.  <a href="group__resource__mgmt__onoff__apis.html#ga235a04122763f1a2cbb849c56df65d26">More...</a><br /></td></tr>
<tr class="separator:ga235a04122763f1a2cbb849c56df65d26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacc0438b5c81c639e0035ada5caec940b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#gacc0438b5c81c639e0035ada5caec940b">ONOFF_STATE_RESETTING</a>&#160;&#160;&#160;(<a class="el" href="group__resource__mgmt__onoff__apis.html#gabfee74d3339efe10acc40603c73954bb">ONOFF_FLAG_TRANSITION</a> | <a class="el" href="group__resource__mgmt__onoff__apis.html#gac005a25d149568208a6fbaa2ceaa1ac6">ONOFF_STATE_ERROR</a>)</td></tr>
<tr class="memdesc:gacc0438b5c81c639e0035ada5caec940b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Value exposed by ONOFF_STATE_MASK when service is in the process of resetting.  <a href="group__resource__mgmt__onoff__apis.html#gacc0438b5c81c639e0035ada5caec940b">More...</a><br /></td></tr>
<tr class="separator:gacc0438b5c81c639e0035ada5caec940b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8c1171a844ef1d9d6541d342124492ff"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#ga8c1171a844ef1d9d6541d342124492ff">ONOFF_TRANSITIONS_INITIALIZER</a>(_start,  _stop,  _reset)</td></tr>
<tr class="memdesc:ga8c1171a844ef1d9d6541d342124492ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializer for a <a class="el" href="structonoff__transitions.html" title="On-off service transition functions.">onoff_transitions</a> object.  <a href="group__resource__mgmt__onoff__apis.html#ga8c1171a844ef1d9d6541d342124492ff">More...</a><br /></td></tr>
<tr class="separator:ga8c1171a844ef1d9d6541d342124492ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7ce4af635f16ad39097502a68dc125e7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#ga7ce4af635f16ad39097502a68dc125e7">ONOFF_MANAGER_INITIALIZER</a>(_transitions)</td></tr>
<tr class="separator:ga7ce4af635f16ad39097502a68dc125e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad61d053ae4e9ee12efe8d37372a16c63"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#gad61d053ae4e9ee12efe8d37372a16c63">ONOFF_CLIENT_EXTENSION_POS</a>&#160;&#160;&#160;<a class="el" href="notify_8h.html#aa22143622004e478668cdd98a2e04357">SYS_NOTIFY_EXTENSION_POS</a></td></tr>
<tr class="memdesc:gad61d053ae4e9ee12efe8d37372a16c63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identify region of <a class="el" href="structsys__notify.html" title="State associated with notification for an asynchronous operation.">sys_notify</a> flags available for containing services.  <a href="group__resource__mgmt__onoff__apis.html#gad61d053ae4e9ee12efe8d37372a16c63">More...</a><br /></td></tr>
<tr class="separator:gad61d053ae4e9ee12efe8d37372a16c63"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gac05f7946a14fa23ef67212eba30c98ac"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#gac05f7946a14fa23ef67212eba30c98ac">onoff_notify_fn</a>) (struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *mgr, int res)</td></tr>
<tr class="memdesc:gac05f7946a14fa23ef67212eba30c98ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signature used to notify an on-off manager that a transition has completed.  <a href="group__resource__mgmt__onoff__apis.html#gac05f7946a14fa23ef67212eba30c98ac">More...</a><br /></td></tr>
<tr class="separator:gac05f7946a14fa23ef67212eba30c98ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga51fdf83642c5fa16112ce143382ec5d1"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#ga51fdf83642c5fa16112ce143382ec5d1">onoff_transition_fn</a>) (struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *mgr, <a class="el" href="group__resource__mgmt__onoff__apis.html#gac05f7946a14fa23ef67212eba30c98ac">onoff_notify_fn</a> notify)</td></tr>
<tr class="memdesc:ga51fdf83642c5fa16112ce143382ec5d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signature used by service implementations to effect a transition.  <a href="group__resource__mgmt__onoff__apis.html#ga51fdf83642c5fa16112ce143382ec5d1">More...</a><br /></td></tr>
<tr class="separator:ga51fdf83642c5fa16112ce143382ec5d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga41b94526182c5772d7adebb1d1745068"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#ga41b94526182c5772d7adebb1d1745068">onoff_client_callback</a>) (struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *mgr, struct <a class="el" href="structonoff__client.html">onoff_client</a> *cli, <a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> <a class="el" href="http__parser__state_8h.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>, int res)</td></tr>
<tr class="memdesc:ga41b94526182c5772d7adebb1d1745068"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signature used to notify an on-off service client of the completion of an operation.  <a href="group__resource__mgmt__onoff__apis.html#ga41b94526182c5772d7adebb1d1745068">More...</a><br /></td></tr>
<tr class="separator:ga41b94526182c5772d7adebb1d1745068"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaee41b38d408cf5f5efc9cd007f377545"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#gaee41b38d408cf5f5efc9cd007f377545">onoff_monitor_callback</a>) (struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *mgr, struct <a class="el" href="structonoff__monitor.html">onoff_monitor</a> *mon, <a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> <a class="el" href="http__parser__state_8h.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>, int res)</td></tr>
<tr class="memdesc:gaee41b38d408cf5f5efc9cd007f377545"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signature used to notify a monitor of an onoff service of errors or completion of a state transition.  <a href="group__resource__mgmt__onoff__apis.html#gaee41b38d408cf5f5efc9cd007f377545">More...</a><br /></td></tr>
<tr class="separator:gaee41b38d408cf5f5efc9cd007f377545"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga73d52272baab03d1df2f267429390978"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#ga73d52272baab03d1df2f267429390978">onoff_manager_init</a> (struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *mgr, const struct <a class="el" href="structonoff__transitions.html">onoff_transitions</a> *transitions)</td></tr>
<tr class="memdesc:ga73d52272baab03d1df2f267429390978"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize an on-off service to off state.  <a href="group__resource__mgmt__onoff__apis.html#ga73d52272baab03d1df2f267429390978">More...</a><br /></td></tr>
<tr class="separator:ga73d52272baab03d1df2f267429390978"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga347efda0aa0305c134224c59677fa6cb"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#ga347efda0aa0305c134224c59677fa6cb">onoff_has_error</a> (const struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *mgr)</td></tr>
<tr class="memdesc:ga347efda0aa0305c134224c59677fa6cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test whether an on-off service has recorded an error.  <a href="group__resource__mgmt__onoff__apis.html#ga347efda0aa0305c134224c59677fa6cb">More...</a><br /></td></tr>
<tr class="separator:ga347efda0aa0305c134224c59677fa6cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga20dcb358e405deb87b7fbb7846ef9d68"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#ga20dcb358e405deb87b7fbb7846ef9d68">onoff_request</a> (struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *mgr, struct <a class="el" href="structonoff__client.html">onoff_client</a> *cli)</td></tr>
<tr class="memdesc:ga20dcb358e405deb87b7fbb7846ef9d68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request a reservation to use an on-off service.  <a href="group__resource__mgmt__onoff__apis.html#ga20dcb358e405deb87b7fbb7846ef9d68">More...</a><br /></td></tr>
<tr class="separator:ga20dcb358e405deb87b7fbb7846ef9d68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga19da5359f10fa2e2eb034d1e72235ea6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#ga19da5359f10fa2e2eb034d1e72235ea6">onoff_release</a> (struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *mgr)</td></tr>
<tr class="memdesc:ga19da5359f10fa2e2eb034d1e72235ea6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release a reserved use of an on-off service.  <a href="group__resource__mgmt__onoff__apis.html#ga19da5359f10fa2e2eb034d1e72235ea6">More...</a><br /></td></tr>
<tr class="separator:ga19da5359f10fa2e2eb034d1e72235ea6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad05d32f1548e56b508628e84ba101554"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#gad05d32f1548e56b508628e84ba101554">onoff_cancel</a> (struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *mgr, struct <a class="el" href="structonoff__client.html">onoff_client</a> *cli)</td></tr>
<tr class="memdesc:gad05d32f1548e56b508628e84ba101554"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to cancel an in-progress client operation.  <a href="group__resource__mgmt__onoff__apis.html#gad05d32f1548e56b508628e84ba101554">More...</a><br /></td></tr>
<tr class="separator:gad05d32f1548e56b508628e84ba101554"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7aac2aeb66907ec920557f0ef67d6795"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#ga7aac2aeb66907ec920557f0ef67d6795">onoff_cancel_or_release</a> (struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *mgr, struct <a class="el" href="structonoff__client.html">onoff_client</a> *cli)</td></tr>
<tr class="memdesc:ga7aac2aeb66907ec920557f0ef67d6795"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to safely cancel a request.  <a href="group__resource__mgmt__onoff__apis.html#ga7aac2aeb66907ec920557f0ef67d6795">More...</a><br /></td></tr>
<tr class="separator:ga7aac2aeb66907ec920557f0ef67d6795"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf7b46a5f2e43d1bab193c18b8f6c8ba8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#gaf7b46a5f2e43d1bab193c18b8f6c8ba8">onoff_reset</a> (struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *mgr, struct <a class="el" href="structonoff__client.html">onoff_client</a> *cli)</td></tr>
<tr class="memdesc:gaf7b46a5f2e43d1bab193c18b8f6c8ba8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear errors on an on-off service and reset it to its off state.  <a href="group__resource__mgmt__onoff__apis.html#gaf7b46a5f2e43d1bab193c18b8f6c8ba8">More...</a><br /></td></tr>
<tr class="separator:gaf7b46a5f2e43d1bab193c18b8f6c8ba8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9897d93359fe58359c0204da46b4c01e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#ga9897d93359fe58359c0204da46b4c01e">onoff_monitor_register</a> (struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *mgr, struct <a class="el" href="structonoff__monitor.html">onoff_monitor</a> *mon)</td></tr>
<tr class="memdesc:ga9897d93359fe58359c0204da46b4c01e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a monitor of state changes for a manager.  <a href="group__resource__mgmt__onoff__apis.html#ga9897d93359fe58359c0204da46b4c01e">More...</a><br /></td></tr>
<tr class="separator:ga9897d93359fe58359c0204da46b4c01e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga50a51da8e701a3f19f242af5183d807a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#ga50a51da8e701a3f19f242af5183d807a">onoff_monitor_unregister</a> (struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *mgr, struct <a class="el" href="structonoff__monitor.html">onoff_monitor</a> *mon)</td></tr>
<tr class="memdesc:ga50a51da8e701a3f19f242af5183d807a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a monitor of state changes from a manager.  <a href="group__resource__mgmt__onoff__apis.html#ga50a51da8e701a3f19f242af5183d807a">More...</a><br /></td></tr>
<tr class="separator:ga50a51da8e701a3f19f242af5183d807a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga174cadf7dfa5d3c4dc5c8185994f3825"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#ga174cadf7dfa5d3c4dc5c8185994f3825">onoff_sync_lock</a> (struct <a class="el" href="structonoff__sync__service.html">onoff_sync_service</a> *srv, <a class="el" href="group__spinlock__apis.html#gacacd3d3bbd31416dbbf6a0239be82ef0">k_spinlock_key_t</a> *keyp)</td></tr>
<tr class="memdesc:ga174cadf7dfa5d3c4dc5c8185994f3825"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock a synchronous onoff service and provide its state.  <a href="group__resource__mgmt__onoff__apis.html#ga174cadf7dfa5d3c4dc5c8185994f3825">More...</a><br /></td></tr>
<tr class="separator:ga174cadf7dfa5d3c4dc5c8185994f3825"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae3331bdad9d03309ee78e86c487b7f26"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__resource__mgmt__onoff__apis.html#gae3331bdad9d03309ee78e86c487b7f26">onoff_sync_finalize</a> (struct <a class="el" href="structonoff__sync__service.html">onoff_sync_service</a> *srv, <a class="el" href="group__spinlock__apis.html#gacacd3d3bbd31416dbbf6a0239be82ef0">k_spinlock_key_t</a> <a class="el" href="spinlock__error__case_8c.html#ac67cfa528fbe6d605bc5a011b74611cc">key</a>, struct <a class="el" href="structonoff__client.html">onoff_client</a> *cli, int res, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> on)</td></tr>
<tr class="memdesc:gae3331bdad9d03309ee78e86c487b7f26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process the completion of a transition in a synchronous service and release lock.  <a href="group__resource__mgmt__onoff__apis.html#gae3331bdad9d03309ee78e86c487b7f26">More...</a><br /></td></tr>
<tr class="separator:gae3331bdad9d03309ee78e86c487b7f26"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gad61d053ae4e9ee12efe8d37372a16c63" name="gad61d053ae4e9ee12efe8d37372a16c63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad61d053ae4e9ee12efe8d37372a16c63">&#9670;&nbsp;</a></span>ONOFF_CLIENT_EXTENSION_POS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ONOFF_CLIENT_EXTENSION_POS&#160;&#160;&#160;<a class="el" href="notify_8h.html#aa22143622004e478668cdd98a2e04357">SYS_NOTIFY_EXTENSION_POS</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>

<p>Identify region of <a class="el" href="structsys__notify.html" title="State associated with notification for an asynchronous operation.">sys_notify</a> flags available for containing services. </p>
<p >Bits of the flags field of the <a class="el" href="structsys__notify.html" title="State associated with notification for an asynchronous operation.">sys_notify</a> structure contained within the queued_operation structure at and above this position may be used by extensions to the <a class="el" href="structonoff__client.html" title="State associated with a client of an on-off service.">onoff_client</a> structure.</p>
<p >These bits are intended for use by containing service implementations to record client-specific information and are subject to other conditions of use specified on the <a class="el" href="structsys__notify.html" title="State associated with notification for an asynchronous operation.">sys_notify</a> API. </p>

</div>
</div>
<a id="ga9ae0c3528254b10f5e1a9743aea234dd" name="ga9ae0c3528254b10f5e1a9743aea234dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9ae0c3528254b10f5e1a9743aea234dd">&#9670;&nbsp;</a></span>ONOFF_FLAG_ERROR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ONOFF_FLAG_ERROR&#160;&#160;&#160;<a class="el" href="group__sys-util.html#ga3a8ea58898cb58fc96013383d39f482c">BIT</a>(0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>

<p>Flag indicating an error state. </p>
<p >Error states are cleared using <a class="el" href="group__resource__mgmt__onoff__apis.html#gaf7b46a5f2e43d1bab193c18b8f6c8ba8" title="Clear errors on an on-off service and reset it to its off state.">onoff_reset()</a>. </p>

</div>
</div>
<a id="ga7189c7d7b3180c4e12a16b96ac52b15d" name="ga7189c7d7b3180c4e12a16b96ac52b15d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7189c7d7b3180c4e12a16b96ac52b15d">&#9670;&nbsp;</a></span>ONOFF_FLAG_ONOFF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ONOFF_FLAG_ONOFF&#160;&#160;&#160;<a class="el" href="group__sys-util.html#ga3a8ea58898cb58fc96013383d39f482c">BIT</a>(1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>

</div>
</div>
<a id="gabfee74d3339efe10acc40603c73954bb" name="gabfee74d3339efe10acc40603c73954bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabfee74d3339efe10acc40603c73954bb">&#9670;&nbsp;</a></span>ONOFF_FLAG_TRANSITION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ONOFF_FLAG_TRANSITION&#160;&#160;&#160;<a class="el" href="group__sys-util.html#ga3a8ea58898cb58fc96013383d39f482c">BIT</a>(2)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>

</div>
</div>
<a id="ga7ce4af635f16ad39097502a68dc125e7" name="ga7ce4af635f16ad39097502a68dc125e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7ce4af635f16ad39097502a68dc125e7">&#9670;&nbsp;</a></span>ONOFF_MANAGER_INITIALIZER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ONOFF_MANAGER_INITIALIZER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_transitions</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>
<b>Value:</b><div class="fragment"><div class="line">                { \</div>
<div class="line">                .transitions = _transitions,      \</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a id="gac005a25d149568208a6fbaa2ceaa1ac6" name="gac005a25d149568208a6fbaa2ceaa1ac6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac005a25d149568208a6fbaa2ceaa1ac6">&#9670;&nbsp;</a></span>ONOFF_STATE_ERROR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ONOFF_STATE_ERROR&#160;&#160;&#160;<a class="el" href="group__resource__mgmt__onoff__apis.html#ga9ae0c3528254b10f5e1a9743aea234dd">ONOFF_FLAG_ERROR</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>

<p>Value exposed by ONOFF_STATE_MASK when the service is in an error state (and not in the process of resetting its state). </p>

</div>
</div>
<a id="ga0e06eafdf5021ce970027f20fc001acc" name="ga0e06eafdf5021ce970027f20fc001acc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0e06eafdf5021ce970027f20fc001acc">&#9670;&nbsp;</a></span>ONOFF_STATE_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ONOFF_STATE_MASK</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>
<b>Value:</b><div class="fragment"><div class="line">                          (<a class="code hl_define" href="group__resource__mgmt__onoff__apis.html#ga9ae0c3528254b10f5e1a9743aea234dd">ONOFF_FLAG_ERROR</a>   \</div>
<div class="line">                          | <a class="code hl_define" href="group__resource__mgmt__onoff__apis.html#ga7189c7d7b3180c4e12a16b96ac52b15d">ONOFF_FLAG_ONOFF</a> \</div>
<div class="line">                          | <a class="code hl_define" href="group__resource__mgmt__onoff__apis.html#gabfee74d3339efe10acc40603c73954bb">ONOFF_FLAG_TRANSITION</a>)</div>
<div class="ttc" id="agroup__resource__mgmt__onoff__apis_html_ga7189c7d7b3180c4e12a16b96ac52b15d"><div class="ttname"><a href="group__resource__mgmt__onoff__apis.html#ga7189c7d7b3180c4e12a16b96ac52b15d">ONOFF_FLAG_ONOFF</a></div><div class="ttdeci">#define ONOFF_FLAG_ONOFF</div><div class="ttdef"><b>Definition:</b> onoff.h:33</div></div>
<div class="ttc" id="agroup__resource__mgmt__onoff__apis_html_ga9ae0c3528254b10f5e1a9743aea234dd"><div class="ttname"><a href="group__resource__mgmt__onoff__apis.html#ga9ae0c3528254b10f5e1a9743aea234dd">ONOFF_FLAG_ERROR</a></div><div class="ttdeci">#define ONOFF_FLAG_ERROR</div><div class="ttdoc">Flag indicating an error state.</div><div class="ttdef"><b>Definition:</b> onoff.h:30</div></div>
<div class="ttc" id="agroup__resource__mgmt__onoff__apis_html_gabfee74d3339efe10acc40603c73954bb"><div class="ttname"><a href="group__resource__mgmt__onoff__apis.html#gabfee74d3339efe10acc40603c73954bb">ONOFF_FLAG_TRANSITION</a></div><div class="ttdeci">#define ONOFF_FLAG_TRANSITION</div><div class="ttdef"><b>Definition:</b> onoff.h:35</div></div>
</div><!-- fragment -->
<p>Mask used to isolate bits defining the service state. </p>
<p >Mask a value with this then test for ONOFF_FLAG_ERROR to determine whether the machine has an unfixed error, or compare against ONOFF_STATE_ON, ONOFF_STATE_OFF, ONOFF_STATE_TO_ON, ONOFF_STATE_TO_OFF, or ONOFF_STATE_RESETTING. </p>

</div>
</div>
<a id="gab9e5380dce026a5dfea770f999400484" name="gab9e5380dce026a5dfea770f999400484"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab9e5380dce026a5dfea770f999400484">&#9670;&nbsp;</a></span>ONOFF_STATE_OFF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ONOFF_STATE_OFF&#160;&#160;&#160;0U</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>

<p>Value exposed by ONOFF_STATE_MASK when service is off. </p>

</div>
</div>
<a id="ga7cd0fba52afba2e337ab7c830d3058d7" name="ga7cd0fba52afba2e337ab7c830d3058d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7cd0fba52afba2e337ab7c830d3058d7">&#9670;&nbsp;</a></span>ONOFF_STATE_ON</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ONOFF_STATE_ON&#160;&#160;&#160;<a class="el" href="group__resource__mgmt__onoff__apis.html#ga7189c7d7b3180c4e12a16b96ac52b15d">ONOFF_FLAG_ONOFF</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>

<p>Value exposed by ONOFF_STATE_MASK when service is on. </p>

</div>
</div>
<a id="gacc0438b5c81c639e0035ada5caec940b" name="gacc0438b5c81c639e0035ada5caec940b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacc0438b5c81c639e0035ada5caec940b">&#9670;&nbsp;</a></span>ONOFF_STATE_RESETTING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ONOFF_STATE_RESETTING&#160;&#160;&#160;(<a class="el" href="group__resource__mgmt__onoff__apis.html#gabfee74d3339efe10acc40603c73954bb">ONOFF_FLAG_TRANSITION</a> | <a class="el" href="group__resource__mgmt__onoff__apis.html#gac005a25d149568208a6fbaa2ceaa1ac6">ONOFF_STATE_ERROR</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>

<p>Value exposed by ONOFF_STATE_MASK when service is in the process of resetting. </p>

</div>
</div>
<a id="ga235a04122763f1a2cbb849c56df65d26" name="ga235a04122763f1a2cbb849c56df65d26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga235a04122763f1a2cbb849c56df65d26">&#9670;&nbsp;</a></span>ONOFF_STATE_TO_OFF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ONOFF_STATE_TO_OFF&#160;&#160;&#160;(<a class="el" href="group__resource__mgmt__onoff__apis.html#gabfee74d3339efe10acc40603c73954bb">ONOFF_FLAG_TRANSITION</a> | <a class="el" href="group__resource__mgmt__onoff__apis.html#gab9e5380dce026a5dfea770f999400484">ONOFF_STATE_OFF</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>

<p>Value exposed by ONOFF_STATE_MASK when service is transitioning to off. </p>

</div>
</div>
<a id="gac4a0d8a7b501adb011aa1c4c4da3f2a3" name="gac4a0d8a7b501adb011aa1c4c4da3f2a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac4a0d8a7b501adb011aa1c4c4da3f2a3">&#9670;&nbsp;</a></span>ONOFF_STATE_TO_ON</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ONOFF_STATE_TO_ON&#160;&#160;&#160;(<a class="el" href="group__resource__mgmt__onoff__apis.html#gabfee74d3339efe10acc40603c73954bb">ONOFF_FLAG_TRANSITION</a> | <a class="el" href="group__resource__mgmt__onoff__apis.html#ga7cd0fba52afba2e337ab7c830d3058d7">ONOFF_STATE_ON</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>

<p>Value exposed by ONOFF_STATE_MASK when service is transitioning to on. </p>

</div>
</div>
<a id="ga8c1171a844ef1d9d6541d342124492ff" name="ga8c1171a844ef1d9d6541d342124492ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8c1171a844ef1d9d6541d342124492ff">&#9670;&nbsp;</a></span>ONOFF_TRANSITIONS_INITIALIZER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ONOFF_TRANSITIONS_INITIALIZER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_start, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_stop, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_reset&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>
<b>Value:</b><div class="fragment"><div class="line">                { \</div>
<div class="line">                .start = _start,                               \</div>
<div class="line">                .stop = _stop,                                 \</div>
<div class="line">                .reset = _reset,                               \</div>
<div class="line">}</div>
</div><!-- fragment -->
<p>Initializer for a <a class="el" href="structonoff__transitions.html" title="On-off service transition functions.">onoff_transitions</a> object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_start</td><td>a function used to transition from off to on state.</td></tr>
    <tr><td class="paramname">_stop</td><td>a function used to transition from on to off state.</td></tr>
    <tr><td class="paramname">_reset</td><td>a function used to clear errors and force the service to an off state. Can be null. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga41b94526182c5772d7adebb1d1745068" name="ga41b94526182c5772d7adebb1d1745068"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga41b94526182c5772d7adebb1d1745068">&#9670;&nbsp;</a></span>onoff_client_callback</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* onoff_client_callback) (struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *mgr, struct <a class="el" href="structonoff__client.html">onoff_client</a> *cli, <a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> <a class="el" href="http__parser__state_8h.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>, int res)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>

<p>Signature used to notify an on-off service client of the completion of an operation. </p>
<p >These functions may be invoked from any context including pre-kernel, ISR, or cooperative or pre-emptible threads. Compatible functions must be isr-ok and not sleep.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mgr</td><td>the manager for which the operation was initiated. This may be null if the on-off service uses synchronous transitions.</td></tr>
    <tr><td class="paramname">cli</td><td>the client structure passed to the function that initiated the operation.</td></tr>
    <tr><td class="paramname">state</td><td>the state of the machine at the time of completion, restricted by ONOFF_STATE_MASK. ONOFF_FLAG_ERROR must be checked independently of whether res is negative as a machine error may indicate that all future operations except <a class="el" href="group__resource__mgmt__onoff__apis.html#gaf7b46a5f2e43d1bab193c18b8f6c8ba8" title="Clear errors on an on-off service and reset it to its off state.">onoff_reset()</a> will fail.</td></tr>
    <tr><td class="paramname">res</td><td>the result of the operation. Expected values are service-specific, but the value shall be non-negative if the operation succeeded, and negative if the operation failed. If res is negative ONOFF_FLAG_ERROR will be set in state, but if res is non-negative ONOFF_FLAG_ERROR may still be set in state. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaee41b38d408cf5f5efc9cd007f377545" name="gaee41b38d408cf5f5efc9cd007f377545"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaee41b38d408cf5f5efc9cd007f377545">&#9670;&nbsp;</a></span>onoff_monitor_callback</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* onoff_monitor_callback) (struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *mgr, struct <a class="el" href="structonoff__monitor.html">onoff_monitor</a> *mon, <a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> <a class="el" href="http__parser__state_8h.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>, int res)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>

<p>Signature used to notify a monitor of an onoff service of errors or completion of a state transition. </p>
<p >This is similar to onoff_client_callback but provides information about all transitions, not just ones associated with a specific client. Monitor callbacks are invoked before any completion notifications associated with the state change are made.</p>
<p >These functions may be invoked from any context including pre-kernel, ISR, or cooperative or pre-emptible threads. Compatible functions must be isr-ok and not sleep.</p>
<p >The callback is permitted to unregister itself from the manager, but must not register or unregister any other monitors.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mgr</td><td>the manager for which a transition has completed.</td></tr>
    <tr><td class="paramname">mon</td><td>the monitor instance through which this notification arrived.</td></tr>
    <tr><td class="paramname">state</td><td>the state of the machine at the time of completion, restricted by ONOFF_STATE_MASK. All valid states may be observed.</td></tr>
    <tr><td class="paramname">res</td><td>the result of the operation. Expected values are service- and state-specific, but the value shall be non-negative if the operation succeeded, and negative if the operation failed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gac05f7946a14fa23ef67212eba30c98ac" name="gac05f7946a14fa23ef67212eba30c98ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac05f7946a14fa23ef67212eba30c98ac">&#9670;&nbsp;</a></span>onoff_notify_fn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* onoff_notify_fn) (struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *mgr, int res)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>

<p>Signature used to notify an on-off manager that a transition has completed. </p>
<p >Functions of this type are passed to service-specific transition functions to be used to report the completion of the operation. The functions may be invoked from any context.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mgr</td><td>the manager for which transition was requested.</td></tr>
    <tr><td class="paramname">res</td><td>the result of the transition. This shall be non-negative on success, or a negative error code. If an error is indicated the service shall enter an error state. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga51fdf83642c5fa16112ce143382ec5d1" name="ga51fdf83642c5fa16112ce143382ec5d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga51fdf83642c5fa16112ce143382ec5d1">&#9670;&nbsp;</a></span>onoff_transition_fn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* onoff_transition_fn) (struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *mgr, <a class="el" href="group__resource__mgmt__onoff__apis.html#gac05f7946a14fa23ef67212eba30c98ac">onoff_notify_fn</a> notify)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>

<p>Signature used by service implementations to effect a transition. </p>
<p >Service definitions use two required function pointers of this type to be notified that a transition is required, and a third optional one to reset the service when it is in an error state.</p>
<p >The start function will be called only from the off state.</p>
<p >The stop function will be called only from the on state.</p>
<p >The reset function (where supported) will be called only when <a class="el" href="group__resource__mgmt__onoff__apis.html#ga347efda0aa0305c134224c59677fa6cb" title="Test whether an on-off service has recorded an error.">onoff_has_error()</a> returns true.</p>
<dl class="section note"><dt>Note</dt><dd>All transitions functions must be isr-ok.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mgr</td><td>the manager for which transition was requested.</td></tr>
    <tr><td class="paramname">notify</td><td>the function to be invoked when the transition has completed. If the transition is synchronous, notify shall be invoked by the implementation before the transition function returns. Otherwise the implementation shall capture this parameter and invoke it when the transition completes. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gad05d32f1548e56b508628e84ba101554" name="gad05d32f1548e56b508628e84ba101554"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad05d32f1548e56b508628e84ba101554">&#9670;&nbsp;</a></span>onoff_cancel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int onoff_cancel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *&#160;</td>
          <td class="paramname"><em>mgr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structonoff__client.html">onoff_client</a> *&#160;</td>
          <td class="paramname"><em>cli</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>

<p>Attempt to cancel an in-progress client operation. </p>
<p >It may be that a client has initiated an operation but needs to shut down before the operation has completed. For example, when a request was made and the need is no longer present.</p>
<p >Cancelling is supported only for <a class="el" href="group__resource__mgmt__onoff__apis.html#ga20dcb358e405deb87b7fbb7846ef9d68" title="Request a reservation to use an on-off service.">onoff_request()</a> and <a class="el" href="group__resource__mgmt__onoff__apis.html#gaf7b46a5f2e43d1bab193c18b8f6c8ba8" title="Clear errors on an on-off service and reset it to its off state.">onoff_reset()</a> operations, and is a synchronous operation. Be aware that any transition that was initiated on behalf of the client will continue to progress to completion: it is only notification of transition completion that may be eliminated. If there are no active requests when a transition to on completes the manager will initiate a transition to off.</p>
<p >Client notification does not occur for cancelled operations.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mgr</td><td>the manager for which an operation is to be cancelled.</td></tr>
    <tr><td class="paramname">cli</td><td>a pointer to the same client state that was provided when the operation to be cancelled was issued.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-negative</td><td>the observed state of the machine at the time of the cancellation, if the cancellation succeeds. On successful cancellation ownership of <code>*cli</code> reverts to the client. </td></tr>
    <tr><td class="paramname">-EINVAL</td><td>if the parameters are invalid. </td></tr>
    <tr><td class="paramname">-EALREADY</td><td>if cli was not a record of an uncompleted notification at the time the cancellation was processed. This likely indicates that the operation and client notification had already completed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga7aac2aeb66907ec920557f0ef67d6795" name="ga7aac2aeb66907ec920557f0ef67d6795"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7aac2aeb66907ec920557f0ef67d6795">&#9670;&nbsp;</a></span>onoff_cancel_or_release()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int onoff_cancel_or_release </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *&#160;</td>
          <td class="paramname"><em>mgr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structonoff__client.html">onoff_client</a> *&#160;</td>
          <td class="paramname"><em>cli</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>

<p>Helper function to safely cancel a request. </p>
<p >Some applications may want to issue requests on an asynchronous event (such as connection to a USB bus) and to release on a paired event (such as loss of connection to a USB bus). Applications cannot precisely determine that an in-progress request is still pending without using <a class="el" href="structonoff__monitor.html" title="Registration state for notifications of onoff service transitions.">onoff_monitor</a> and carefully avoiding race conditions.</p>
<p >This function is a helper that attempts to cancel the operation and issues a release if cancellation fails because the request was completed. This synchronously ensures that ownership of the client data reverts to the client so is available for a future request.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mgr</td><td>the manager for which an operation is to be cancelled.</td></tr>
    <tr><td class="paramname">cli</td><td>a pointer to the same client state that was provided when <a class="el" href="group__resource__mgmt__onoff__apis.html#ga20dcb358e405deb87b7fbb7846ef9d68" title="Request a reservation to use an on-off service.">onoff_request()</a> was invoked. Behavior is undefined if this is a pointer to client data associated with an <a class="el" href="group__resource__mgmt__onoff__apis.html#gaf7b46a5f2e43d1bab193c18b8f6c8ba8" title="Clear errors on an on-off service and reset it to its off state.">onoff_reset()</a> request.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ONOFF_STATE_TO_ON</td><td>if the cancellation occurred before the transition completed.</td></tr>
    <tr><td class="paramname">ONOFF_STATE_ON</td><td>if the cancellation occurred after the transition completed.</td></tr>
    <tr><td class="paramname">-EINVAL</td><td>if the parameters are invalid.</td></tr>
    <tr><td class="paramname">negative</td><td>other errors produced by <a class="el" href="group__resource__mgmt__onoff__apis.html#ga19da5359f10fa2e2eb034d1e72235ea6" title="Release a reserved use of an on-off service.">onoff_release()</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga347efda0aa0305c134224c59677fa6cb" name="ga347efda0aa0305c134224c59677fa6cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga347efda0aa0305c134224c59677fa6cb">&#9670;&nbsp;</a></span>onoff_has_error()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> onoff_has_error </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *&#160;</td>
          <td class="paramname"><em>mgr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>

<p>Test whether an on-off service has recorded an error. </p>
<p >This function can be used to determine whether the service has recorded an error. Errors may be cleared by invoking <a class="el" href="group__resource__mgmt__onoff__apis.html#gaf7b46a5f2e43d1bab193c18b8f6c8ba8" title="Clear errors on an on-off service and reset it to its off state.">onoff_reset()</a>.</p>
<p >This is an unlocked convenience function suitable for use only when it is known that no other process might invoke an operation that transitions the service between an error and non-error state.</p>
<dl class="section return"><dt>Returns</dt><dd>true if and only if the service has an uncleared error. </dd></dl>

</div>
</div>
<a id="ga73d52272baab03d1df2f267429390978" name="ga73d52272baab03d1df2f267429390978"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga73d52272baab03d1df2f267429390978">&#9670;&nbsp;</a></span>onoff_manager_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int onoff_manager_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *&#160;</td>
          <td class="paramname"><em>mgr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structonoff__transitions.html">onoff_transitions</a> *&#160;</td>
          <td class="paramname"><em>transitions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>

<p>Initialize an on-off service to off state. </p>
<p >This function must be invoked exactly once per service instance, by the infrastructure that provides the service, and before any other on-off service API is invoked on the service.</p>
<p >This function should never be invoked by clients of an on-off service.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mgr</td><td>the manager definition object to be initialized.</td></tr>
    <tr><td class="paramname">transitions</td><td>pointer to a structure providing transition functions. The referenced object must persist as long as the manager can be referenced.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">-EINVAL</td><td>if start, stop, or flags are invalid </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga9897d93359fe58359c0204da46b4c01e" name="ga9897d93359fe58359c0204da46b4c01e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9897d93359fe58359c0204da46b4c01e">&#9670;&nbsp;</a></span>onoff_monitor_register()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int onoff_monitor_register </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *&#160;</td>
          <td class="paramname"><em>mgr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structonoff__monitor.html">onoff_monitor</a> *&#160;</td>
          <td class="paramname"><em>mon</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>

<p>Add a monitor of state changes for a manager. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mgr</td><td>the manager for which a state changes are to be monitored.</td></tr>
    <tr><td class="paramname">mon</td><td>a linkable node providing a non-null callback to be invoked on state changes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>non-negative on successful addition, or a negative error code. </dd></dl>

</div>
</div>
<a id="ga50a51da8e701a3f19f242af5183d807a" name="ga50a51da8e701a3f19f242af5183d807a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga50a51da8e701a3f19f242af5183d807a">&#9670;&nbsp;</a></span>onoff_monitor_unregister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int onoff_monitor_unregister </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *&#160;</td>
          <td class="paramname"><em>mgr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structonoff__monitor.html">onoff_monitor</a> *&#160;</td>
          <td class="paramname"><em>mon</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>

<p>Remove a monitor of state changes from a manager. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mgr</td><td>the manager for which a state changes are to be monitored.</td></tr>
    <tr><td class="paramname">mon</td><td>a linkable node providing the callback to be invoked on state changes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>non-negative on successful removal, or a negative error code. </dd></dl>

</div>
</div>
<a id="ga19da5359f10fa2e2eb034d1e72235ea6" name="ga19da5359f10fa2e2eb034d1e72235ea6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga19da5359f10fa2e2eb034d1e72235ea6">&#9670;&nbsp;</a></span>onoff_release()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int onoff_release </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *&#160;</td>
          <td class="paramname"><em>mgr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>

<p>Release a reserved use of an on-off service. </p>
<p >This synchronously releases the caller's previous request. If the last request is released the manager will initiate a transition to off, which can be observed by registering an <a class="el" href="structonoff__monitor.html" title="Registration state for notifications of onoff service transitions.">onoff_monitor</a>.</p>
<dl class="section note"><dt>Note</dt><dd>Behavior is undefined if this is not paired with a preceding <a class="el" href="group__resource__mgmt__onoff__apis.html#ga20dcb358e405deb87b7fbb7846ef9d68" title="Request a reservation to use an on-off service.">onoff_request()</a> call that completed successfully.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mgr</td><td>the manager for which a request was successful.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-negative</td><td>the observed state (ONOFF_STATE_ON) of the machine at the time of the release, if the release succeeds. </td></tr>
    <tr><td class="paramname">-EIO</td><td>if service has recorded an an error. </td></tr>
    <tr><td class="paramname">-ENOTSUP</td><td>if the machine is not in a state that permits release. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga20dcb358e405deb87b7fbb7846ef9d68" name="ga20dcb358e405deb87b7fbb7846ef9d68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga20dcb358e405deb87b7fbb7846ef9d68">&#9670;&nbsp;</a></span>onoff_request()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int onoff_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *&#160;</td>
          <td class="paramname"><em>mgr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structonoff__client.html">onoff_client</a> *&#160;</td>
          <td class="paramname"><em>cli</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>

<p>Request a reservation to use an on-off service. </p>
<p >The return value indicates the success or failure of an attempt to initiate an operation to request the resource be made available. If initiation of the operation succeeds the result of the request operation is provided through the configured client notification method, possibly before this call returns.</p>
<p >Note that the call to this function may succeed in a case where the actual request fails. Always check the operation completion result.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mgr</td><td>the manager that will be used.</td></tr>
    <tr><td class="paramname">cli</td><td>a non-null pointer to client state providing instructions on synchronous expectations and how to notify the client when the request completes. Behavior is undefined if client passes a pointer object associated with an incomplete service operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-negative</td><td>the observed state of the machine at the time the request was processed, if successful. </td></tr>
    <tr><td class="paramname">-EIO</td><td>if service has recorded an an error. </td></tr>
    <tr><td class="paramname">-EINVAL</td><td>if the parameters are invalid. </td></tr>
    <tr><td class="paramname">-EAGAIN</td><td>if the reference count would overflow. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaf7b46a5f2e43d1bab193c18b8f6c8ba8" name="gaf7b46a5f2e43d1bab193c18b8f6c8ba8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf7b46a5f2e43d1bab193c18b8f6c8ba8">&#9670;&nbsp;</a></span>onoff_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int onoff_reset </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structonoff__manager.html">onoff_manager</a> *&#160;</td>
          <td class="paramname"><em>mgr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structonoff__client.html">onoff_client</a> *&#160;</td>
          <td class="paramname"><em>cli</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>

<p>Clear errors on an on-off service and reset it to its off state. </p>
<p >A service can only be reset when it is in an error state as indicated by <a class="el" href="group__resource__mgmt__onoff__apis.html#ga347efda0aa0305c134224c59677fa6cb" title="Test whether an on-off service has recorded an error.">onoff_has_error()</a>.</p>
<p >The return value indicates the success or failure of an attempt to initiate an operation to reset the resource. If initiation of the operation succeeds the result of the reset operation itself is provided through the configured client notification method, possibly before this call returns. Multiple clients may request a reset; all are notified when it is complete.</p>
<p >Note that the call to this function may succeed in a case where the actual reset fails. Always check the operation completion result.</p>
<dl class="section note"><dt>Note</dt><dd>Due to the conditions on state transition all incomplete asynchronous operations will have been informed of the error when it occurred. There need be no concern about dangling requests left after a reset completes.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mgr</td><td>the manager to be reset.</td></tr>
    <tr><td class="paramname">cli</td><td>pointer to client state, including instructions on how to notify the client when reset completes. Behavior is undefined if cli references an object associated with an incomplete service operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-negative</td><td>the observed state of the machine at the time of the reset, if the reset succeeds. </td></tr>
    <tr><td class="paramname">-ENOTSUP</td><td>if reset is not supported by the service. </td></tr>
    <tr><td class="paramname">-EINVAL</td><td>if the parameters are invalid. </td></tr>
    <tr><td class="paramname">-EALREADY</td><td>if the service does not have a recorded error. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gae3331bdad9d03309ee78e86c487b7f26" name="gae3331bdad9d03309ee78e86c487b7f26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae3331bdad9d03309ee78e86c487b7f26">&#9670;&nbsp;</a></span>onoff_sync_finalize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int onoff_sync_finalize </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structonoff__sync__service.html">onoff_sync_service</a> *&#160;</td>
          <td class="paramname"><em>srv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__spinlock__apis.html#gacacd3d3bbd31416dbbf6a0239be82ef0">k_spinlock_key_t</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structonoff__client.html">onoff_client</a> *&#160;</td>
          <td class="paramname"><em>cli</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>on</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>

<p>Process the completion of a transition in a synchronous service and release lock. </p>
<p >This function updates the service state on the <code>res</code> and <code>on</code> parameters then releases the lock. If <code>cli</code> is not null it finalizes the client notification using <code>res</code>.</p>
<p >If the service was in an error state when locked, and <code>res</code> is non-negative when finalized, the count is reset to zero before completing finalization.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">srv</td><td>pointer to the synchronous service state</td></tr>
    <tr><td class="paramname">key</td><td>the key returned by the preceding invocation of <a class="el" href="group__resource__mgmt__onoff__apis.html#ga174cadf7dfa5d3c4dc5c8185994f3825" title="Lock a synchronous onoff service and provide its state.">onoff_sync_lock()</a>.</td></tr>
    <tr><td class="paramname">cli</td><td>pointer to the onoff client through which completion information is returned. If a null pointer is passed only the state of the service is updated. For compatibility with the behavior of callbacks used with the manager API <code>cli</code> must be null when <code>on</code> is false (the manager does not support callbacks when turning off devices).</td></tr>
    <tr><td class="paramname">res</td><td>the result of the transition. A negative value places the service into an error state. A non-negative value increments or decrements the reference count as specified by <code>on</code>.</td></tr>
    <tr><td class="paramname">on</td><td>Only when <code>res</code> is non-negative, the service reference count will be incremented if<code>on</code> is <code>true</code>, and decremented if <code>on</code> is <code>false</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>negative if the service is left or put into an error state, otherwise the number of active requests at the time the lock was released. </dd></dl>

</div>
</div>
<a id="ga174cadf7dfa5d3c4dc5c8185994f3825" name="ga174cadf7dfa5d3c4dc5c8185994f3825"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga174cadf7dfa5d3c4dc5c8185994f3825">&#9670;&nbsp;</a></span>onoff_sync_lock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int onoff_sync_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structonoff__sync__service.html">onoff_sync_service</a> *&#160;</td>
          <td class="paramname"><em>srv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__spinlock__apis.html#gacacd3d3bbd31416dbbf6a0239be82ef0">k_spinlock_key_t</a> *&#160;</td>
          <td class="paramname"><em>keyp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="onoff_8h.html">include/sys/onoff.h</a>&gt;</code></p>

<p>Lock a synchronous onoff service and provide its state. </p>
<dl class="section note"><dt>Note</dt><dd>If an error state is returned it is the caller's responsibility to decide whether to preserve it (finalize with the same error state) or clear the error (finalize with a non-error result).</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">srv</td><td>pointer to the synchronous service state.</td></tr>
    <tr><td class="paramname">keyp</td><td>pointer to where the lock key should be stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>negative if the service is in an error state, otherwise the number of active requests at the time the lock was taken. The lock is held on return regardless of whether a negative state is returned. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Feb 21 2022 04:59:41 for Zephyr API Documentation by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
<script type="text/javascript">
  $(function() {
    toggleButton = document.createElement('doxygen-awesome-dark-mode-toggle')
    toggleButton.title = "Toggle Light/Dark Mode"
    $(document).ready(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
    // every resize will remove the button, which is why it has to be added again:
    $(window).resize(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
  })
</script>
</body>
</html>

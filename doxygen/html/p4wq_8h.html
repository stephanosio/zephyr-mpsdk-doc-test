<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Zephyr API Documentation: include/sys/p4wq.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-zephyr.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-zephyr.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Zephyr API Documentation
   &#160;<span id="projectnumber">3.0.99</span>
   </div>
   <div id="projectbrief">A Scalable Open Source RTOS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('p4wq_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">p4wq.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;kernel.h&gt;</code><br />
</div>
<p><a href="p4wq_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structk__p4wq__work.html">k_p4wq_work</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">P4 Queue Work Item.  <a href="structk__p4wq__work.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structk__p4wq.html">k_p4wq</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">P4 Queue.  <a href="structk__p4wq.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structk__p4wq__initparam.html">k_p4wq_initparam</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a8a2691219e517a0ac987aeb275b67487"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="p4wq_8h.html#a8a2691219e517a0ac987aeb275b67487">K_P4WQ_QUEUE_PER_THREAD</a>&#160;&#160;&#160;<a class="el" href="group__sys-util.html#ga3a8ea58898cb58fc96013383d39f482c">BIT</a>(0)</td></tr>
<tr class="separator:a8a2691219e517a0ac987aeb275b67487"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e0b60ac0b95772b5f5875669b8d6d01"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="p4wq_8h.html#a8e0b60ac0b95772b5f5875669b8d6d01">K_P4WQ_DELAYED_START</a>&#160;&#160;&#160;<a class="el" href="group__sys-util.html#ga3a8ea58898cb58fc96013383d39f482c">BIT</a>(1)</td></tr>
<tr class="separator:a8e0b60ac0b95772b5f5875669b8d6d01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e6b81f7c3ae916bde3048575cf9708d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="p4wq_8h.html#a9e6b81f7c3ae916bde3048575cf9708d">K_P4WQ_USER_CPU_MASK</a>&#160;&#160;&#160;<a class="el" href="group__sys-util.html#ga3a8ea58898cb58fc96013383d39f482c">BIT</a>(2)</td></tr>
<tr class="separator:a9e6b81f7c3ae916bde3048575cf9708d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af37c37fe046571f9ed99e14325d7a321"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="p4wq_8h.html#af37c37fe046571f9ed99e14325d7a321">K_P4WQ_DEFINE</a>(name,  n_threads,  stack_sz)</td></tr>
<tr class="memdesc:af37c37fe046571f9ed99e14325d7a321"><td class="mdescLeft">&#160;</td><td class="mdescRight">Statically initialize a P4 Work Queue.  <a href="p4wq_8h.html#af37c37fe046571f9ed99e14325d7a321">More...</a><br /></td></tr>
<tr class="separator:af37c37fe046571f9ed99e14325d7a321"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4511892a31c6bb3c315ddacd869eb31"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="p4wq_8h.html#af4511892a31c6bb3c315ddacd869eb31">K_P4WQ_ARRAY_DEFINE</a>(name,  n_threads,  stack_sz,  flg)</td></tr>
<tr class="memdesc:af4511892a31c6bb3c315ddacd869eb31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Statically initialize an array of P4 Work Queues.  <a href="p4wq_8h.html#af4511892a31c6bb3c315ddacd869eb31">More...</a><br /></td></tr>
<tr class="separator:af4511892a31c6bb3c315ddacd869eb31"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aa164250d00319b0d71670e95201e45b0"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="p4wq_8h.html#aa164250d00319b0d71670e95201e45b0">k_p4wq_handler_t</a>) (struct <a class="el" href="structk__p4wq__work.html">k_p4wq_work</a> *<a class="el" href="workq_2work_2src_2main_8c.html#a147e2d2d335d9181395da44aa45b7694">work</a>)</td></tr>
<tr class="separator:aa164250d00319b0d71670e95201e45b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa67be80b892cbe9bf9eab475ac5c2eff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="p4wq_8h.html#aa67be80b892cbe9bf9eab475ac5c2eff">k_p4wq_init</a> (struct <a class="el" href="structk__p4wq.html">k_p4wq</a> *<a class="el" href="test__queue__loop_8c.html#a643b6f9660035f1e1098c9484d214bbd">queue</a>)</td></tr>
<tr class="memdesc:aa67be80b892cbe9bf9eab475ac5c2eff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize P4 Queue.  <a href="p4wq_8h.html#aa67be80b892cbe9bf9eab475ac5c2eff">More...</a><br /></td></tr>
<tr class="separator:aa67be80b892cbe9bf9eab475ac5c2eff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73397b7f22a3b1f0f7660081f9824527"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="p4wq_8h.html#a73397b7f22a3b1f0f7660081f9824527">k_p4wq_add_thread</a> (struct <a class="el" href="structk__p4wq.html">k_p4wq</a> *<a class="el" href="test__queue__loop_8c.html#a643b6f9660035f1e1098c9484d214bbd">queue</a>, struct <a class="el" href="structk__thread.html">k_thread</a> *<a class="el" href="timeout__order_8c.html#a2ff5187d48101eb303964e1b8983beb4">thread</a>, <a class="el" href="arch__interface_8h.html#a3e4bde3075edb41069b258d999333b0e">k_thread_stack_t</a> *<a class="el" href="test__stack__fail_8c.html#a6856ea318b5a9498715e4444b13a1de1">stack</a>, size_t stack_size)</td></tr>
<tr class="memdesc:a73397b7f22a3b1f0f7660081f9824527"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dynamically add a thread object to a P4 Queue pool.  <a href="p4wq_8h.html#a73397b7f22a3b1f0f7660081f9824527">More...</a><br /></td></tr>
<tr class="separator:a73397b7f22a3b1f0f7660081f9824527"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40e7660d999b94c517712d8b499dd157"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="p4wq_8h.html#a40e7660d999b94c517712d8b499dd157">k_p4wq_submit</a> (struct <a class="el" href="structk__p4wq.html">k_p4wq</a> *<a class="el" href="test__queue__loop_8c.html#a643b6f9660035f1e1098c9484d214bbd">queue</a>, struct <a class="el" href="structk__p4wq__work.html">k_p4wq_work</a> *item)</td></tr>
<tr class="memdesc:a40e7660d999b94c517712d8b499dd157"><td class="mdescLeft">&#160;</td><td class="mdescRight">Submit work item to a P4 queue.  <a href="p4wq_8h.html#a40e7660d999b94c517712d8b499dd157">More...</a><br /></td></tr>
<tr class="separator:a40e7660d999b94c517712d8b499dd157"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aede724dfe684f0a4e93845dee342f830"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="p4wq_8h.html#aede724dfe684f0a4e93845dee342f830">k_p4wq_cancel</a> (struct <a class="el" href="structk__p4wq.html">k_p4wq</a> *<a class="el" href="test__queue__loop_8c.html#a643b6f9660035f1e1098c9484d214bbd">queue</a>, struct <a class="el" href="structk__p4wq__work.html">k_p4wq_work</a> *item)</td></tr>
<tr class="memdesc:aede724dfe684f0a4e93845dee342f830"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancel submitted P4 work item.  <a href="p4wq_8h.html#aede724dfe684f0a4e93845dee342f830">More...</a><br /></td></tr>
<tr class="separator:aede724dfe684f0a4e93845dee342f830"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a421ad1ac947495483b414ab89eb6996d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="p4wq_8h.html#a421ad1ac947495483b414ab89eb6996d">k_p4wq_wait</a> (struct <a class="el" href="structk__p4wq__work.html">k_p4wq_work</a> *<a class="el" href="workq_2work_2src_2main_8c.html#a147e2d2d335d9181395da44aa45b7694">work</a>, <a class="el" href="structk__timeout__t.html">k_timeout_t</a> <a class="el" href="timer_2cycle64_2src_2main_8c.html#a8f4b69a82b00d7baf3f1f7d480bb7fa0">timeout</a>)</td></tr>
<tr class="memdesc:a421ad1ac947495483b414ab89eb6996d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Regain ownership of the work item, wait for completion if it's synchronous.  <a href="p4wq_8h.html#a421ad1ac947495483b414ab89eb6996d">More...</a><br /></td></tr>
<tr class="separator:a421ad1ac947495483b414ab89eb6996d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d22a84d473caff84684047e96ed70ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="p4wq_8h.html#a6d22a84d473caff84684047e96ed70ac">k_p4wq_enable_static_thread</a> (struct <a class="el" href="structk__p4wq.html">k_p4wq</a> *<a class="el" href="test__queue__loop_8c.html#a643b6f9660035f1e1098c9484d214bbd">queue</a>, struct <a class="el" href="structk__thread.html">k_thread</a> *<a class="el" href="timeout__order_8c.html#a2ff5187d48101eb303964e1b8983beb4">thread</a>, <a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> cpu_mask)</td></tr>
<tr class="separator:a6d22a84d473caff84684047e96ed70ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="af4511892a31c6bb3c315ddacd869eb31" name="af4511892a31c6bb3c315ddacd869eb31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4511892a31c6bb3c315ddacd869eb31">&#9670;&nbsp;</a></span>K_P4WQ_ARRAY_DEFINE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define K_P4WQ_ARRAY_DEFINE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n_threads, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">stack_sz, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">flg&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">        <span class="keyword">static</span> <a class="code hl_define" href="group__thread__stack__api.html#gaae2471b24bdc574382f083163fb42597">K_THREAD_STACK_ARRAY_DEFINE</a>(_p4stacks_##name,            \</div>
<div class="line">                                           n_threads, stack_sz);        \</div>
<div class="line">        static <span class="keyword">struct </span><a class="code hl_struct" href="structk__thread.html">k_thread</a> _p4threads_##name[n_threads];            \</div>
<div class="line">        static <span class="keyword">struct </span><a class="code hl_struct" href="structk__p4wq.html">k_p4wq</a> name[n_threads];                           \</div>
<div class="line">        static <span class="keyword">const</span> <a class="code hl_define" href="group__iterable__section__apis.html#gabed6642b8cc06863ce97dd536698004d">STRUCT_SECTION_ITERABLE</a>(<a class="code hl_struct" href="structk__p4wq__initparam.html">k_p4wq_initparam</a>,          \</div>
<div class="line">                                             _init_##name) = {          \</div>
<div class="line">                .num = n_threads,                                       \</div>
<div class="line">                .stack_size = stack_sz,                                 \</div>
<div class="line">                .threads = _p4threads_##name,                           \</div>
<div class="line">                .stacks = &amp;(_p4stacks_##name[0][0]),                    \</div>
<div class="line">                .<a class="code hl_variable" href="test__queue__contexts_8c.html#a643b6f9660035f1e1098c9484d214bbd">queue</a> = name,                                          \</div>
<div class="line">                .<a class="code hl_enumeration" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a> = <a class="code hl_define" href="p4wq_8h.html#a8a2691219e517a0ac987aeb275b67487">K_P4WQ_QUEUE_PER_THREAD</a> | flg,                 \</div>
<div class="line">        }</div>
<div class="ttc" id="agroup__iterable__section__apis_html_gabed6642b8cc06863ce97dd536698004d"><div class="ttname"><a href="group__iterable__section__apis.html#gabed6642b8cc06863ce97dd536698004d">STRUCT_SECTION_ITERABLE</a></div><div class="ttdeci">#define STRUCT_SECTION_ITERABLE(struct_type, name)</div><div class="ttdoc">Defines a new iterable section.</div><div class="ttdef"><b>Definition:</b> common.h:210</div></div>
<div class="ttc" id="agroup__thread__stack__api_html_gaae2471b24bdc574382f083163fb42597"><div class="ttname"><a href="group__thread__stack__api.html#gaae2471b24bdc574382f083163fb42597">K_THREAD_STACK_ARRAY_DEFINE</a></div><div class="ttdeci">#define K_THREAD_STACK_ARRAY_DEFINE(sym, nmemb, size)</div><div class="ttdoc">Declare a toplevel array of thread stack memory regions.</div><div class="ttdef"><b>Definition:</b> thread_stack.h:592</div></div>
<div class="ttc" id="ahttp__parser_8h_html_ab6b306ef981f5e21bb41ea2c2dbe8cd9"><div class="ttname"><a href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a></div><div class="ttdeci">flags</div><div class="ttdef"><b>Definition:</b> http_parser.h:131</div></div>
<div class="ttc" id="ap4wq_8h_html_a8a2691219e517a0ac987aeb275b67487"><div class="ttname"><a href="p4wq_8h.html#a8a2691219e517a0ac987aeb275b67487">K_P4WQ_QUEUE_PER_THREAD</a></div><div class="ttdeci">#define K_P4WQ_QUEUE_PER_THREAD</div><div class="ttdef"><b>Definition:</b> p4wq.h:45</div></div>
<div class="ttc" id="astructk__p4wq__initparam_html"><div class="ttname"><a href="structk__p4wq__initparam.html">k_p4wq_initparam</a></div><div class="ttdef"><b>Definition:</b> p4wq.h:78</div></div>
<div class="ttc" id="astructk__p4wq_html"><div class="ttname"><a href="structk__p4wq.html">k_p4wq</a></div><div class="ttdoc">P4 Queue.</div><div class="ttdef"><b>Definition:</b> p4wq.h:54</div></div>
<div class="ttc" id="astructk__thread_html"><div class="ttname"><a href="structk__thread.html">k_thread</a></div><div class="ttdef"><b>Definition:</b> thread.h:216</div></div>
<div class="ttc" id="atest__queue__contexts_8c_html_a643b6f9660035f1e1098c9484d214bbd"><div class="ttname"><a href="test__queue__contexts_8c.html#a643b6f9660035f1e1098c9484d214bbd">queue</a></div><div class="ttdeci">struct k_queue queue</div><div class="ttdef"><b>Definition:</b> test_queue_contexts.c:17</div></div>
</div><!-- fragment -->
<p>Statically initialize an array of P4 Work Queues. </p>
<p >Statically defines an array of struct <a class="el" href="structk__p4wq.html" title="P4 Queue.">k_p4wq</a> objects with the specified number of threads which will be initialized at boot and ready for use on entry to <a class="el" href="fatal_2message__capture_2src_2main_8c.html#a6288eba0f8e8ad3ab1544ad731eb7667">main()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Symbol name of the struct <a class="el" href="structk__p4wq.html" title="P4 Queue.">k_p4wq</a> array that will be defined </td></tr>
    <tr><td class="paramname">n_threads</td><td>Number of threads and work queues </td></tr>
    <tr><td class="paramname">stack_sz</td><td>Requested stack size of each thread, in bytes </td></tr>
    <tr><td class="paramname">flg</td><td>Flags </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af37c37fe046571f9ed99e14325d7a321" name="af37c37fe046571f9ed99e14325d7a321"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af37c37fe046571f9ed99e14325d7a321">&#9670;&nbsp;</a></span>K_P4WQ_DEFINE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define K_P4WQ_DEFINE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n_threads, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">stack_sz&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">        <span class="keyword">static</span> <a class="code hl_define" href="group__thread__stack__api.html#gaae2471b24bdc574382f083163fb42597">K_THREAD_STACK_ARRAY_DEFINE</a>(_p4stacks_##name,            \</div>
<div class="line">                                           n_threads, stack_sz);        \</div>
<div class="line">        static <span class="keyword">struct </span><a class="code hl_struct" href="structk__thread.html">k_thread</a> _p4threads_##name[n_threads];            \</div>
<div class="line">        static <span class="keyword">struct </span><a class="code hl_struct" href="structk__p4wq.html">k_p4wq</a> name;                                      \</div>
<div class="line">        static <span class="keyword">const</span> <a class="code hl_define" href="group__iterable__section__apis.html#gabed6642b8cc06863ce97dd536698004d">STRUCT_SECTION_ITERABLE</a>(<a class="code hl_struct" href="structk__p4wq__initparam.html">k_p4wq_initparam</a>,          \</div>
<div class="line">                                             _init_##name) = {          \</div>
<div class="line">                .num = n_threads,                                       \</div>
<div class="line">                .stack_size = stack_sz,                                 \</div>
<div class="line">                .threads = _p4threads_##name,                           \</div>
<div class="line">                .stacks = &amp;(_p4stacks_##name[0][0]),                    \</div>
<div class="line">                .<a class="code hl_variable" href="test__queue__contexts_8c.html#a643b6f9660035f1e1098c9484d214bbd">queue</a> = &amp;name,                                         \</div>
<div class="line">                .<a class="code hl_enumeration" href="http__parser_8h.html#ab6b306ef981f5e21bb41ea2c2dbe8cd9">flags</a> = 0,                                             \</div>
<div class="line">        }</div>
</div><!-- fragment -->
<p>Statically initialize a P4 Work Queue. </p>
<p >Statically defines a struct <a class="el" href="structk__p4wq.html" title="P4 Queue.">k_p4wq</a> object with the specified number of threads which will be initialized at boot and ready for use on entry to <a class="el" href="fatal_2message__capture_2src_2main_8c.html#a6288eba0f8e8ad3ab1544ad731eb7667">main()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Symbol name of the struct <a class="el" href="structk__p4wq.html" title="P4 Queue.">k_p4wq</a> that will be defined </td></tr>
    <tr><td class="paramname">n_threads</td><td>Number of threads in the work queue pool </td></tr>
    <tr><td class="paramname">stack_sz</td><td>Requested stack size of each thread, in bytes </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8e0b60ac0b95772b5f5875669b8d6d01" name="a8e0b60ac0b95772b5f5875669b8d6d01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e0b60ac0b95772b5f5875669b8d6d01">&#9670;&nbsp;</a></span>K_P4WQ_DELAYED_START</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define K_P4WQ_DELAYED_START&#160;&#160;&#160;<a class="el" href="group__sys-util.html#ga3a8ea58898cb58fc96013383d39f482c">BIT</a>(1)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8a2691219e517a0ac987aeb275b67487" name="a8a2691219e517a0ac987aeb275b67487"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a2691219e517a0ac987aeb275b67487">&#9670;&nbsp;</a></span>K_P4WQ_QUEUE_PER_THREAD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define K_P4WQ_QUEUE_PER_THREAD&#160;&#160;&#160;<a class="el" href="group__sys-util.html#ga3a8ea58898cb58fc96013383d39f482c">BIT</a>(0)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9e6b81f7c3ae916bde3048575cf9708d" name="a9e6b81f7c3ae916bde3048575cf9708d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e6b81f7c3ae916bde3048575cf9708d">&#9670;&nbsp;</a></span>K_P4WQ_USER_CPU_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define K_P4WQ_USER_CPU_MASK&#160;&#160;&#160;<a class="el" href="group__sys-util.html#ga3a8ea58898cb58fc96013383d39f482c">BIT</a>(2)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="aa164250d00319b0d71670e95201e45b0" name="aa164250d00319b0d71670e95201e45b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa164250d00319b0d71670e95201e45b0">&#9670;&nbsp;</a></span>k_p4wq_handler_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* k_p4wq_handler_t) (struct <a class="el" href="structk__p4wq__work.html">k_p4wq_work</a> *<a class="el" href="workq_2work_2src_2main_8c.html#a147e2d2d335d9181395da44aa45b7694">work</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >P4 Queue handler callback </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a73397b7f22a3b1f0f7660081f9824527" name="a73397b7f22a3b1f0f7660081f9824527"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73397b7f22a3b1f0f7660081f9824527">&#9670;&nbsp;</a></span>k_p4wq_add_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void k_p4wq_add_thread </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structk__p4wq.html">k_p4wq</a> *&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structk__thread.html">k_thread</a> *&#160;</td>
          <td class="paramname"><em>thread</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="arch__interface_8h.html#a3e4bde3075edb41069b258d999333b0e">k_thread_stack_t</a> *&#160;</td>
          <td class="paramname"><em>stack</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>stack_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dynamically add a thread object to a P4 Queue pool. </p>
<p >Adds a thread to the pool managed by a P4 queue. The thread object must not be in use. If <a class="el" href="group__thread__apis.html#gad5b0bff3102f1656089f5875d999a367" title="Create a thread.">k_thread_create()</a> has previously been called on it, it must be aborted before being given to the queue.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">queue</td><td>P4 Queue to which to add the thread </td></tr>
    <tr><td class="paramname">thread</td><td>Uninitialized/aborted thread object to add </td></tr>
    <tr><td class="paramname">stack</td><td>Thread stack memory </td></tr>
    <tr><td class="paramname">stack_size</td><td>Thread stack size </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aede724dfe684f0a4e93845dee342f830" name="aede724dfe684f0a4e93845dee342f830"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aede724dfe684f0a4e93845dee342f830">&#9670;&nbsp;</a></span>k_p4wq_cancel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> k_p4wq_cancel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structk__p4wq.html">k_p4wq</a> *&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structk__p4wq__work.html">k_p4wq_work</a> *&#160;</td>
          <td class="paramname"><em>item</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cancel submitted P4 work item. </p>
<p >Cancels a previously-submitted work item and removes it from the queue. Returns true if the item was found in the queue and removed. If the function returns false, either the item was never submitted, has already been executed, or is still running.</p>
<dl class="section return"><dt>Returns</dt><dd>true if the item was successfully removed, otherwise false </dd></dl>

</div>
</div>
<a id="a6d22a84d473caff84684047e96ed70ac" name="a6d22a84d473caff84684047e96ed70ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d22a84d473caff84684047e96ed70ac">&#9670;&nbsp;</a></span>k_p4wq_enable_static_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void k_p4wq_enable_static_thread </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structk__p4wq.html">k_p4wq</a> *&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structk__thread.html">k_thread</a> *&#160;</td>
          <td class="paramname"><em>thread</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>&#160;</td>
          <td class="paramname"><em>cpu_mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa67be80b892cbe9bf9eab475ac5c2eff" name="aa67be80b892cbe9bf9eab475ac5c2eff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa67be80b892cbe9bf9eab475ac5c2eff">&#9670;&nbsp;</a></span>k_p4wq_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void k_p4wq_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structk__p4wq.html">k_p4wq</a> *&#160;</td>
          <td class="paramname"><em>queue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize P4 Queue. </p>
<p >Initializes a P4 Queue object. These objects must be initialized via this function (or statically using K_P4WQ_DEFINE) before any other API calls are made on it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">queue</td><td>P4 Queue to initialize </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a40e7660d999b94c517712d8b499dd157" name="a40e7660d999b94c517712d8b499dd157"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40e7660d999b94c517712d8b499dd157">&#9670;&nbsp;</a></span>k_p4wq_submit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void k_p4wq_submit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structk__p4wq.html">k_p4wq</a> *&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structk__p4wq__work.html">k_p4wq_work</a> *&#160;</td>
          <td class="paramname"><em>item</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Submit work item to a P4 queue. </p>
<p >Submits the specified work item to the queue. The caller must have already initialized the relevant fields of the struct. The queue will execute the handler when CPU time is available and when no higher-priority work items are available. The handler may be invoked on any CPU.</p>
<p >The caller must not mutate the struct while it is stored in the queue. The memory should remain unchanged until <a class="el" href="p4wq_8h.html#aede724dfe684f0a4e93845dee342f830" title="Cancel submitted P4 work item.">k_p4wq_cancel()</a> is called or until the entry to the handler function.</p>
<dl class="section note"><dt>Note</dt><dd>This call is a scheduling point, so if the submitted item (or any other ready thread) has a higher priority than the current thread and the current thread has a preemptible priority then the caller will yield.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">queue</td><td>P4 Queue to which to submit </td></tr>
    <tr><td class="paramname">item</td><td>P4 work item to be submitted </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a421ad1ac947495483b414ab89eb6996d" name="a421ad1ac947495483b414ab89eb6996d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a421ad1ac947495483b414ab89eb6996d">&#9670;&nbsp;</a></span>k_p4wq_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int k_p4wq_wait </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structk__p4wq__work.html">k_p4wq_work</a> *&#160;</td>
          <td class="paramname"><em>work</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structk__timeout__t.html">k_timeout_t</a>&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Regain ownership of the work item, wait for completion if it's synchronous. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_317ea3797c15f4a1d9c156bc812661ca.html">sys</a></li><li class="navelem"><a class="el" href="p4wq_8h.html">p4wq.h</a></li>
    <li class="footer">Generated on Sat Mar 5 2022 05:00:46 for Zephyr API Documentation by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
<script type="text/javascript">
  $(function() {
    toggleButton = document.createElement('doxygen-awesome-dark-mode-toggle')
    toggleButton.title = "Toggle Light/Dark Mode"
    $(document).ready(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
    // every resize will remove the button, which is why it has to be added again:
    $(window).resize(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
  })
</script>
</body>
</html>

<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Zephyr API Documentation: Heap Memory Tests</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-zephyr.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-zephyr.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Zephyr API Documentation
   &#160;<span id="projectnumber">3.0.0-rc3</span>
   </div>
   <div id="projectbrief">A Scalable Open Source RTOS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__kernel__heap__tests.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Heap Memory Tests<div class="ingroups"><a class="el" href="group__all__tests.html">Zephyr Tests</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Heap tests.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaf2837f9f6d78519c726aadfb1901727f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kernel__heap__tests.html#gaf2837f9f6d78519c726aadfb1901727f">test_kheap_alloc_in_isr_nowait</a> (void)</td></tr>
<tr class="memdesc:gaf2837f9f6d78519c726aadfb1901727f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate allocation and free heap memory in isr context.  <a href="group__kernel__heap__tests.html#gaf2837f9f6d78519c726aadfb1901727f">More...</a><br /></td></tr>
<tr class="separator:gaf2837f9f6d78519c726aadfb1901727f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaac7f10d7cd380bf0cea84e08a0d504f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kernel__heap__tests.html#gaac7f10d7cd380bf0cea84e08a0d504f4">test_k_heap_alloc_pending</a> (void)</td></tr>
<tr class="memdesc:gaac7f10d7cd380bf0cea84e08a0d504f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate the <a class="el" href="structk__heap.html">k_heap</a> support wait between different threads.  <a href="group__kernel__heap__tests.html#gaac7f10d7cd380bf0cea84e08a0d504f4">More...</a><br /></td></tr>
<tr class="separator:gaac7f10d7cd380bf0cea84e08a0d504f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa14be175c686f758f0ae1dd75237e819"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kernel__heap__tests.html#gaa14be175c686f758f0ae1dd75237e819">test_k_heap_alloc_pending_null</a> (void)</td></tr>
<tr class="memdesc:gaa14be175c686f758f0ae1dd75237e819"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate the <a class="el" href="structk__heap.html">k_heap</a> alloc_pending_null support.  <a href="group__kernel__heap__tests.html#gaa14be175c686f758f0ae1dd75237e819">More...</a><br /></td></tr>
<tr class="separator:gaa14be175c686f758f0ae1dd75237e819"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa654f7a6ac7167de7dbbfcc2c0358112"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kernel__heap__tests.html#gaa654f7a6ac7167de7dbbfcc2c0358112">test_mheap_malloc_free</a> (void)</td></tr>
<tr class="memdesc:gaa654f7a6ac7167de7dbbfcc2c0358112"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test to demonstrate <a class="el" href="group__heap__apis.html#gaa8edf1e63e5d5dd78d7adcfd787394ee" title="Allocate memory from the heap.">k_malloc()</a> and <a class="el" href="group__heap__apis.html#ga79b63cc93b3358cf82d74f40e73b69d5" title="Free memory allocated from heap.">k_free()</a> API usage.  <a href="group__kernel__heap__tests.html#gaa654f7a6ac7167de7dbbfcc2c0358112">More...</a><br /></td></tr>
<tr class="separator:gaa654f7a6ac7167de7dbbfcc2c0358112"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa6c30663f6376f5ed00daf6b76ae7c64"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kernel__heap__tests.html#gaa6c30663f6376f5ed00daf6b76ae7c64">test_mheap_calloc</a> (void)</td></tr>
<tr class="memdesc:gaa6c30663f6376f5ed00daf6b76ae7c64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test to demonstrate <a class="el" href="group__heap__apis.html#gad031d50ed62d08202a5dcf992c20246c" title="Allocate memory from heap, array style.">k_calloc()</a> API functionality.  <a href="group__kernel__heap__tests.html#gaa6c30663f6376f5ed00daf6b76ae7c64">More...</a><br /></td></tr>
<tr class="separator:gaa6c30663f6376f5ed00daf6b76ae7c64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1fc1b44587fbbac9c871f6e5c01856aa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kernel__heap__tests.html#ga1fc1b44587fbbac9c871f6e5c01856aa">test_sys_heap_mem_pool_assign</a> (void)</td></tr>
<tr class="memdesc:ga1fc1b44587fbbac9c871f6e5c01856aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate allocation and free from system heap memory pool.  <a href="group__kernel__heap__tests.html#ga1fc1b44587fbbac9c871f6e5c01856aa">More...</a><br /></td></tr>
<tr class="separator:ga1fc1b44587fbbac9c871f6e5c01856aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3064c284d543a8a788271139d58e7e91"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kernel__heap__tests.html#ga3064c284d543a8a788271139d58e7e91">test_malloc_in_isr</a> (void)</td></tr>
<tr class="memdesc:ga3064c284d543a8a788271139d58e7e91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate allocation and free from system heap memory pool in isr context.  <a href="group__kernel__heap__tests.html#ga3064c284d543a8a788271139d58e7e91">More...</a><br /></td></tr>
<tr class="separator:ga3064c284d543a8a788271139d58e7e91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4654b80624f77420086d9fd48ad3e551"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kernel__heap__tests.html#ga4654b80624f77420086d9fd48ad3e551">test_malloc_in_thread</a> (void)</td></tr>
<tr class="memdesc:ga4654b80624f77420086d9fd48ad3e551"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate allocation and free failure when thread's resource pool is not assigned.  <a href="group__kernel__heap__tests.html#ga4654b80624f77420086d9fd48ad3e551">More...</a><br /></td></tr>
<tr class="separator:ga4654b80624f77420086d9fd48ad3e551"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad7d14b289bbbdfbd66ad271a8c55ed51"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kernel__heap__tests.html#gad7d14b289bbbdfbd66ad271a8c55ed51">test_mheap_malloc_align4</a> (void)</td></tr>
<tr class="memdesc:gad7d14b289bbbdfbd66ad271a8c55ed51"><td class="mdescLeft">&#160;</td><td class="mdescRight">The test validates <a class="el" href="group__heap__apis.html#gad031d50ed62d08202a5dcf992c20246c" title="Allocate memory from heap, array style.">k_calloc()</a> API.  <a href="group__kernel__heap__tests.html#gad7d14b289bbbdfbd66ad271a8c55ed51">More...</a><br /></td></tr>
<tr class="separator:gad7d14b289bbbdfbd66ad271a8c55ed51"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >Heap tests. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaac7f10d7cd380bf0cea84e08a0d504f4" name="gaac7f10d7cd380bf0cea84e08a0d504f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaac7f10d7cd380bf0cea84e08a0d504f4">&#9670;&nbsp;</a></span>test_k_heap_alloc_pending()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_k_heap_alloc_pending </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="test__kheap__api_8c.html">tests/kernel/mem_heap/k_heap_api/src/test_kheap_api.c</a>&gt;</code></p>

<p>Validate the <a class="el" href="structk__heap.html">k_heap</a> support wait between different threads. </p>
<p >In main thread alloc a buffer from the heap, then run the child thread. If there isn't enough space in the heap, the child thread will wait timeout long until main thread free the buffer to heap. </p>

</div>
</div>
<a id="gaa14be175c686f758f0ae1dd75237e819" name="gaa14be175c686f758f0ae1dd75237e819"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa14be175c686f758f0ae1dd75237e819">&#9670;&nbsp;</a></span>test_k_heap_alloc_pending_null()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_k_heap_alloc_pending_null </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="test__kheap__api_8c.html">tests/kernel/mem_heap/k_heap_api/src/test_kheap_api.c</a>&gt;</code></p>

<p>Validate the <a class="el" href="structk__heap.html">k_heap</a> alloc_pending_null support. </p>
<p >In main thread alloc two buffer from the heap, then run the child thread which alloc a buffer larger than remaining space. The child thread will wait timeout long until main thread free one of the buffer to heap, space in the heap is still not enough and then return null after timeout. </p>

</div>
</div>
<a id="gaf2837f9f6d78519c726aadfb1901727f" name="gaf2837f9f6d78519c726aadfb1901727f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf2837f9f6d78519c726aadfb1901727f">&#9670;&nbsp;</a></span>test_kheap_alloc_in_isr_nowait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_kheap_alloc_in_isr_nowait </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="test__kheap__api_8c.html">tests/kernel/mem_heap/k_heap_api/src/test_kheap_api.c</a>&gt;</code></p>

<p>Validate allocation and free heap memory in isr context. </p>
<p >The test validates <a class="el" href="group__heap__apis.html#ga22b83564e50ae6177388dfe63e32a512" title="Allocate memory from a k_heap.">k_heap_alloc()</a> in isr context, the timeout param should be K_NO_WAIT, because this situation isn't allow to wait. </p>

</div>
</div>
<a id="ga3064c284d543a8a788271139d58e7e91" name="ga3064c284d543a8a788271139d58e7e91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3064c284d543a8a788271139d58e7e91">&#9670;&nbsp;</a></span>test_malloc_in_isr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_malloc_in_isr </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="test__mheap__api_8c.html">tests/kernel/mem_heap/mheap_api_concept/src/test_mheap_api.c</a>&gt;</code></p>

<p>Validate allocation and free from system heap memory pool in isr context. </p>
<p >When in isr context, the kernel will successfully alloc a block of memory because in this situation, the kernel will assign the heap memory as resource pool.</p>
<dl class="section see"><dt>See also</dt><dd>z_thread_malloc(), <a class="el" href="group__heap__apis.html#ga79b63cc93b3358cf82d74f40e73b69d5" title="Free memory allocated from heap.">k_free()</a> </dd></dl>

</div>
</div>
<a id="ga4654b80624f77420086d9fd48ad3e551" name="ga4654b80624f77420086d9fd48ad3e551"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4654b80624f77420086d9fd48ad3e551">&#9670;&nbsp;</a></span>test_malloc_in_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_malloc_in_thread </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="test__mheap__api_8c.html">tests/kernel/mem_heap/mheap_api_concept/src/test_mheap_api.c</a>&gt;</code></p>

<p>Validate allocation and free failure when thread's resource pool is not assigned. </p>
<p >When a thread's resource pool is not assigned, alloc memory will fail.</p>
<dl class="section see"><dt>See also</dt><dd>z_thread_malloc() </dd></dl>

</div>
</div>
<a id="gaa6c30663f6376f5ed00daf6b76ae7c64" name="gaa6c30663f6376f5ed00daf6b76ae7c64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa6c30663f6376f5ed00daf6b76ae7c64">&#9670;&nbsp;</a></span>test_mheap_calloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_mheap_calloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="test__mheap__api_8c.html">tests/kernel/mem_heap/mheap_api_concept/src/test_mheap_api.c</a>&gt;</code></p>

<p>Test to demonstrate <a class="el" href="group__heap__apis.html#gad031d50ed62d08202a5dcf992c20246c" title="Allocate memory from heap, array style.">k_calloc()</a> API functionality. </p>
<p >The test validates <a class="el" href="group__heap__apis.html#gad031d50ed62d08202a5dcf992c20246c" title="Allocate memory from heap, array style.">k_calloc()</a> API. When requesting a huge size of space or a space larger than heap memory, the API will return NULL. The 8 blocks of memory of size 16 bytes are allocated by <a class="el" href="group__heap__apis.html#gad031d50ed62d08202a5dcf992c20246c" title="Allocate memory from heap, array style.">k_calloc()</a> API. When allocated using <a class="el" href="group__heap__apis.html#gad031d50ed62d08202a5dcf992c20246c" title="Allocate memory from heap, array style.">k_calloc()</a> the memory buffers have to be zeroed. Check is done, if the blocks are memset to 0 and read/write is allowed. The test is then teared up by freeing all the blocks allocated.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__heap__apis.html#gad031d50ed62d08202a5dcf992c20246c" title="Allocate memory from heap, array style.">k_calloc()</a> </dd></dl>

</div>
</div>
<a id="gad7d14b289bbbdfbd66ad271a8c55ed51" name="gad7d14b289bbbdfbd66ad271a8c55ed51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad7d14b289bbbdfbd66ad271a8c55ed51">&#9670;&nbsp;</a></span>test_mheap_malloc_align4()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_mheap_malloc_align4 </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="test__mheap__concept_8c.html">tests/kernel/mem_heap/mheap_api_concept/src/test_mheap_concept.c</a>&gt;</code></p>

<p>The test validates <a class="el" href="group__heap__apis.html#gad031d50ed62d08202a5dcf992c20246c" title="Allocate memory from heap, array style.">k_calloc()</a> API. </p>
<p >The 8 blocks of memory of size 16 bytes are allocated by <a class="el" href="group__heap__apis.html#gad031d50ed62d08202a5dcf992c20246c" title="Allocate memory from heap, array style.">k_calloc()</a> API. When allocated using <a class="el" href="group__heap__apis.html#gad031d50ed62d08202a5dcf992c20246c" title="Allocate memory from heap, array style.">k_calloc()</a> the memory buffers have to be zeroed. Check is done, if the blocks are memset to 0 and read/write is allowed. The test is then teared up by freeing all the blocks allocated.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__heap__apis.html#gaa8edf1e63e5d5dd78d7adcfd787394ee" title="Allocate memory from the heap.">k_malloc()</a>, <a class="el" href="group__heap__apis.html#ga79b63cc93b3358cf82d74f40e73b69d5" title="Free memory allocated from heap.">k_free()</a> </dd></dl>
<p >TESTPOINT: The address of the allocated chunk is guaranteed to be aligned on a word boundary (4 or 8 bytes).</p>

</div>
</div>
<a id="gaa654f7a6ac7167de7dbbfcc2c0358112" name="gaa654f7a6ac7167de7dbbfcc2c0358112"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa654f7a6ac7167de7dbbfcc2c0358112">&#9670;&nbsp;</a></span>test_mheap_malloc_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_mheap_malloc_free </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="test__mheap__api_8c.html">tests/kernel/mem_heap/mheap_api_concept/src/test_mheap_api.c</a>&gt;</code></p>

<p>Test to demonstrate <a class="el" href="group__heap__apis.html#gaa8edf1e63e5d5dd78d7adcfd787394ee" title="Allocate memory from the heap.">k_malloc()</a> and <a class="el" href="group__heap__apis.html#ga79b63cc93b3358cf82d74f40e73b69d5" title="Free memory allocated from heap.">k_free()</a> API usage. </p>
<p >The test allocates 4 blocks from heap memory pool using <a class="el" href="group__heap__apis.html#gaa8edf1e63e5d5dd78d7adcfd787394ee" title="Allocate memory from the heap.">k_malloc()</a> API. It also tries to allocate a block of size 64 bytes which fails as all the memory is allocated up. It then validates <a class="el" href="group__heap__apis.html#ga79b63cc93b3358cf82d74f40e73b69d5" title="Free memory allocated from heap.">k_free()</a> API by freeing up all the blocks which were allocated from the heap memory.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__heap__apis.html#gaa8edf1e63e5d5dd78d7adcfd787394ee" title="Allocate memory from the heap.">k_malloc()</a> </dd></dl>
<p >TESTPOINT: This routine provides traditional <a class="el" href="stdlib_8h.html#a9c36d0fe3ec4675cbffdc9b52f5fb399">malloc()</a> semantics. Memory is allocated from the heap memory pool.</p>
<p >TESTPOINT: Return NULL if fail.</p>
<p >TESTPOINT: This routine provides traditional <a class="el" href="stdlib_8h.html#afbedc913aa4651b3c3b4b3aecd9b4711">free()</a> semantics. The memory being returned must have been allocated from the heap memory pool.</p>
<p >TESTPOINT: If ptr is NULL, no operation is performed.</p>
<p >TESTPOINT: Return NULL if fail.</p>

</div>
</div>
<a id="ga1fc1b44587fbbac9c871f6e5c01856aa" name="ga1fc1b44587fbbac9c871f6e5c01856aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1fc1b44587fbbac9c871f6e5c01856aa">&#9670;&nbsp;</a></span>test_sys_heap_mem_pool_assign()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_sys_heap_mem_pool_assign </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="test__mheap__api_8c.html">tests/kernel/mem_heap/mheap_api_concept/src/test_mheap_api.c</a>&gt;</code></p>

<p>Validate allocation and free from system heap memory pool. </p>
<p >Set heap memory as resource pool. It will success when alloc a block of memory smaller than the pool and will fail when alloc a block of memory larger than the pool.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__thread__apis.html#ga220d22dc35115fcdc0badb262e7a019d" title="Assign the system heap as a thread&#39;s resource pool.">k_thread_system_pool_assign()</a>, z_thread_malloc(), <a class="el" href="group__heap__apis.html#ga79b63cc93b3358cf82d74f40e73b69d5" title="Free memory allocated from heap.">k_free()</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Feb 21 2022 04:59:41 for Zephyr API Documentation by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
<script type="text/javascript">
  $(function() {
    toggleButton = document.createElement('doxygen-awesome-dark-mode-toggle')
    toggleButton.title = "Toggle Light/Dark Mode"
    $(document).ready(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
    // every resize will remove the button, which is why it has to be added again:
    $(window).resize(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
  })
</script>
</body>
</html>

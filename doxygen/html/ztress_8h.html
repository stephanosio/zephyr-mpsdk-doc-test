<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Zephyr API Documentation: subsys/testsuite/ztest/include/ztress.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-zephyr.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-zephyr.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Zephyr API Documentation
   &#160;<span id="projectnumber">3.0.0-rc3</span>
   </div>
   <div id="projectbrief">A Scalable Open Source RTOS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('ztress_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">ztress.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="util_8h_source.html">sys/util.h</a>&gt;</code><br />
<code>#include &lt;kernel.h&gt;</code><br />
</div>
<p><a href="ztress_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structztress__context__data.html">ztress_context_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a8752d529cfc4d77b1dd71c4572fd63c3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ztress_8h.html#a8752d529cfc4d77b1dd71c4572fd63c3">ZTRESS_ID_THREAD</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a8752d529cfc4d77b1dd71c4572fd63c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a937803e1398db7d0e10ea60c9c9ef642"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ztress_8h.html#a937803e1398db7d0e10ea60c9c9ef642">ZTRESS_ID_K_TIMER</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a937803e1398db7d0e10ea60c9c9ef642"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abab05b8db44a7024ce23cb34bf999e42"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ztress_8h.html#abab05b8db44a7024ce23cb34bf999e42">ZTRESS_TIMER</a>(<a class="el" href="timer_2starve_2src_2main_8c.html#ab28ee8b6412d992f77f819e17b664869">handler</a>,  <a class="el" href="timer_2timer__api_2src_2main_8c.html#a862de962130decf51321624c10294338">user_data</a>,  exec_cnt,  init_timeout)&#160;&#160;&#160;	(<a class="el" href="ztress_8h.html#a937803e1398db7d0e10ea60c9c9ef642">ZTRESS_ID_K_TIMER</a>, <a class="el" href="timer_2starve_2src_2main_8c.html#ab28ee8b6412d992f77f819e17b664869">handler</a>, <a class="el" href="timer_2timer__api_2src_2main_8c.html#a862de962130decf51321624c10294338">user_data</a>, exec_cnt, 0, init_timeout)</td></tr>
<tr class="memdesc:abab05b8db44a7024ce23cb34bf999e42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Descriptor of a k_timer handler execution context.  <a href="ztress_8h.html#abab05b8db44a7024ce23cb34bf999e42">More...</a><br /></td></tr>
<tr class="separator:abab05b8db44a7024ce23cb34bf999e42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed561641541e8ced6866f2f1227f21c0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ztress_8h.html#aed561641541e8ced6866f2f1227f21c0">ZTRESS_THREAD</a>(<a class="el" href="timer_2starve_2src_2main_8c.html#ab28ee8b6412d992f77f819e17b664869">handler</a>,  <a class="el" href="timer_2timer__api_2src_2main_8c.html#a862de962130decf51321624c10294338">user_data</a>,  exec_cnt,  preempt_cnt,  init_timeout)&#160;&#160;&#160;	(<a class="el" href="ztress_8h.html#a8752d529cfc4d77b1dd71c4572fd63c3">ZTRESS_ID_THREAD</a>, <a class="el" href="timer_2starve_2src_2main_8c.html#ab28ee8b6412d992f77f819e17b664869">handler</a>, <a class="el" href="timer_2timer__api_2src_2main_8c.html#a862de962130decf51321624c10294338">user_data</a>, exec_cnt, preempt_cnt, init_timeout)</td></tr>
<tr class="memdesc:aed561641541e8ced6866f2f1227f21c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Descriptor of a thread execution context.  <a href="ztress_8h.html#aed561641541e8ced6866f2f1227f21c0">More...</a><br /></td></tr>
<tr class="separator:aed561641541e8ced6866f2f1227f21c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5e8bbcecd77db06e7a90631fc0c202b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ztress_8h.html#ab5e8bbcecd77db06e7a90631fc0c202b">ZTRESS_CONTEXT_INITIALIZER</a>(_handler,  _user_data,  _exec_cnt,  _preempt_cnt,  _t)</td></tr>
<tr class="memdesc:ab5e8bbcecd77db06e7a90631fc0c202b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize context structure.  <a href="ztress_8h.html#ab5e8bbcecd77db06e7a90631fc0c202b">More...</a><br /></td></tr>
<tr class="separator:ab5e8bbcecd77db06e7a90631fc0c202b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6acc3a50e0eff7360873006482f5c8e9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ztress_8h.html#a6acc3a50e0eff7360873006482f5c8e9">ZTRESS_EXECUTE</a>(...)</td></tr>
<tr class="memdesc:a6acc3a50e0eff7360873006482f5c8e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup and run stress test.  <a href="ztress_8h.html#a6acc3a50e0eff7360873006482f5c8e9">More...</a><br /></td></tr>
<tr class="separator:a6acc3a50e0eff7360873006482f5c8e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a633439263754bf08baee06c37dddab40"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ztress_8h.html#a633439263754bf08baee06c37dddab40">ztress_handler</a>) (void *<a class="el" href="timer_2timer__api_2src_2main_8c.html#a862de962130decf51321624c10294338">user_data</a>, <a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> cnt, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> last, int prio)</td></tr>
<tr class="memdesc:a633439263754bf08baee06c37dddab40"><td class="mdescLeft">&#160;</td><td class="mdescRight">User handler called in one of the configured contexts.  <a href="ztress_8h.html#a633439263754bf08baee06c37dddab40">More...</a><br /></td></tr>
<tr class="separator:a633439263754bf08baee06c37dddab40"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af706f1af4c42f5925d7545dadf5548fd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ztress_8h.html#af706f1af4c42f5925d7545dadf5548fd">ztress_execute</a> (struct <a class="el" href="structztress__context__data.html">ztress_context_data</a> *<a class="el" href="structtimer__data.html">timer_data</a>, struct <a class="el" href="structztress__context__data.html">ztress_context_data</a> *<a class="el" href="structthread__data.html">thread_data</a>, size_t cnt)</td></tr>
<tr class="separator:af706f1af4c42f5925d7545dadf5548fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57f171e230fba462b3dea6b2d3cf71f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ztress_8h.html#a57f171e230fba462b3dea6b2d3cf71f6">ztress_abort</a> (void)</td></tr>
<tr class="memdesc:a57f171e230fba462b3dea6b2d3cf71f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Abort ongoing stress test.  <a href="ztress_8h.html#a57f171e230fba462b3dea6b2d3cf71f6">More...</a><br /></td></tr>
<tr class="separator:a57f171e230fba462b3dea6b2d3cf71f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b3069bb2aa35ddc64c46c18d2e30091"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ztress_8h.html#a5b3069bb2aa35ddc64c46c18d2e30091">ztress_set_timeout</a> (<a class="el" href="structk__timeout__t.html">k_timeout_t</a> <a class="el" href="test__sched__timeslice__and__lock_8c.html#a858810a6da56663cf4e01aecb4f6e8aa">t</a>)</td></tr>
<tr class="memdesc:a5b3069bb2aa35ddc64c46c18d2e30091"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set test timeout.  <a href="ztress_8h.html#a5b3069bb2aa35ddc64c46c18d2e30091">More...</a><br /></td></tr>
<tr class="separator:a5b3069bb2aa35ddc64c46c18d2e30091"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4db2092eee17d863c9810333ba4c870"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ztress_8h.html#af4db2092eee17d863c9810333ba4c870">ztress_report</a> (void)</td></tr>
<tr class="memdesc:af4db2092eee17d863c9810333ba4c870"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print last test report.  <a href="ztress_8h.html#af4db2092eee17d863c9810333ba4c870">More...</a><br /></td></tr>
<tr class="separator:af4db2092eee17d863c9810333ba4c870"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99eeabcc672fc5ec0b83ce5b8fb4ec5b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ztress_8h.html#a99eeabcc672fc5ec0b83ce5b8fb4ec5b">ztress_exec_count</a> (<a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> id)</td></tr>
<tr class="memdesc:a99eeabcc672fc5ec0b83ce5b8fb4ec5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get number of executions of a given context in the last test.  <a href="ztress_8h.html#a99eeabcc672fc5ec0b83ce5b8fb4ec5b">More...</a><br /></td></tr>
<tr class="separator:a99eeabcc672fc5ec0b83ce5b8fb4ec5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4406b828d170bc19065aaf65aeb4613e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ztress_8h.html#a4406b828d170bc19065aaf65aeb4613e">ztress_preempt_count</a> (<a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> id)</td></tr>
<tr class="memdesc:a4406b828d170bc19065aaf65aeb4613e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get number of preemptions of a given context in the last test.  <a href="ztress_8h.html#a4406b828d170bc19065aaf65aeb4613e">More...</a><br /></td></tr>
<tr class="separator:a4406b828d170bc19065aaf65aeb4613e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbbdb8e7bad532d6dd20c486b3256e21"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ztress_8h.html#acbbdb8e7bad532d6dd20c486b3256e21">ztress_optimized_ticks</a> (<a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> id)</td></tr>
<tr class="memdesc:acbbdb8e7bad532d6dd20c486b3256e21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get optimized timeout base of a given context in the last test.  <a href="ztress_8h.html#acbbdb8e7bad532d6dd20c486b3256e21">More...</a><br /></td></tr>
<tr class="separator:acbbdb8e7bad532d6dd20c486b3256e21"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ab5e8bbcecd77db06e7a90631fc0c202b" name="ab5e8bbcecd77db06e7a90631fc0c202b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5e8bbcecd77db06e7a90631fc0c202b">&#9670;&nbsp;</a></span>ZTRESS_CONTEXT_INITIALIZER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ZTRESS_CONTEXT_INITIALIZER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_handler, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_user_data, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_exec_cnt, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_preempt_cnt, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_t&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">        { \</div>
<div class="line">                .handler = (_handler), \</div>
<div class="line">                .<a class="code hl_variable" href="timer_2timer__api_2src_2main_8c.html#a862de962130decf51321624c10294338">user_data</a> = (_user_data), \</div>
<div class="line">                .exec_cnt = (_exec_cnt), \</div>
<div class="line">                .preempt_cnt = (_preempt_cnt), \</div>
<div class="line">                .t = (_t) \</div>
<div class="line">        }</div>
<div class="ttc" id="atimer_2timer__api_2src_2main_8c_html_a862de962130decf51321624c10294338"><div class="ttname"><a href="timer_2timer__api_2src_2main_8c.html#a862de962130decf51321624c10294338">user_data</a></div><div class="ttdeci">static const intptr_t user_data[5]</div><div class="ttdef"><b>Definition:</b> main.c:590</div></div>
</div><!-- fragment -->
<p>Initialize context structure. </p>
<p >For argument types see <a class="el" href="structztress__context__data.html">ztress_context_data</a>. For more details see <a class="el" href="ztress_8h.html#aed561641541e8ced6866f2f1227f21c0">ZTRESS_THREAD</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_handler</td><td>Handler. </td></tr>
    <tr><td class="paramname">_user_data</td><td>User data passed to the handler. </td></tr>
    <tr><td class="paramname">_exec_cnt</td><td>Execution count limit. </td></tr>
    <tr><td class="paramname">_preempt_cnt</td><td>Preemption count limit. </td></tr>
    <tr><td class="paramname">_t</td><td>Initial timeout. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6acc3a50e0eff7360873006482f5c8e9" name="a6acc3a50e0eff7360873006482f5c8e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6acc3a50e0eff7360873006482f5c8e9">&#9670;&nbsp;</a></span>ZTRESS_EXECUTE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ZTRESS_EXECUTE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">        <span class="keywordflow">do</span> {                                                    \</div>
<div class="line">        Z_ZTRESS_TIMER_CONTEXT_VALIDATE(__VA_ARGS__);                                   \</div>
<div class="line">        int has_timer = Z_ZTRESS_HAS_TIMER(__VA_ARGS__);                                \</div>
<div class="line">        struct <a class="code hl_struct" href="structztress__context__data.html">ztress_context_data</a> <a class="code hl_variable" href="test__fifo__contexts_8c.html#a8b1feab52ee372b1ee1297129329eaad">data</a>[] = {                                           \</div>
<div class="line">                FOR_EACH(Z_ZTRESS_GET_HANDLER_DATA, (,), __VA_ARGS__)                   \</div>
<div class="line">        };                                                                              \</div>
<div class="line">        size_t cnt = <a class="code hl_define" href="group__sys-util.html#ga70c57aae3eb654e205459b4362c8089a">ARRAY_SIZE</a>(<a class="code hl_variable" href="test__fifo__contexts_8c.html#a8b1feab52ee372b1ee1297129329eaad">data</a>) - has_timer;                                      \</div>
<div class="line">        int err = <a class="code hl_function" href="ztress_8h.html#af706f1af4c42f5925d7545dadf5548fd">ztress_execute</a>(has_timer ? &amp;<a class="code hl_variable" href="test__fifo__contexts_8c.html#a8b1feab52ee372b1ee1297129329eaad">data</a>[0] : NULL, &amp;<a class="code hl_variable" href="test__fifo__contexts_8c.html#a8b1feab52ee372b1ee1297129329eaad">data</a>[has_timer], cnt);   <a class="code hl_define" href="group__ztest__assert.html#ga107b470a617e5c398353db398a3424e2">\</a></div>
<div class="line"><a class="code hl_define" href="group__ztest__assert.html#ga107b470a617e5c398353db398a3424e2">											\</a></div>
<div class="line"><a class="code hl_define" href="group__ztest__assert.html#ga107b470a617e5c398353db398a3424e2">	zassert_equal</a>(err, 0, <span class="stringliteral">&quot;ztress_execute failed (err: %d)&quot;</span>, err);                 \</div>
<div class="line">} <span class="keywordflow">while</span> (0)</div>
<div class="ttc" id="agroup__sys-util_html_ga70c57aae3eb654e205459b4362c8089a"><div class="ttname"><a href="group__sys-util.html#ga70c57aae3eb654e205459b4362c8089a">ARRAY_SIZE</a></div><div class="ttdeci">#define ARRAY_SIZE(array)</div><div class="ttdoc">Number of elements in the given array.</div><div class="ttdef"><b>Definition:</b> util.h:108</div></div>
<div class="ttc" id="agroup__ztest__assert_html_ga107b470a617e5c398353db398a3424e2"><div class="ttname"><a href="group__ztest__assert.html#ga107b470a617e5c398353db398a3424e2">zassert_equal</a></div><div class="ttdeci">#define zassert_equal(a, b, msg,...)</div><div class="ttdoc">Assert that a equals b.</div><div class="ttdef"><b>Definition:</b> ztest_assert.h:170</div></div>
<div class="ttc" id="astructztress__context__data_html"><div class="ttname"><a href="structztress__context__data.html">ztress_context_data</a></div><div class="ttdef"><b>Definition:</b> ztress.h:80</div></div>
<div class="ttc" id="atest__fifo__contexts_8c_html_a8b1feab52ee372b1ee1297129329eaad"><div class="ttname"><a href="test__fifo__contexts_8c.html#a8b1feab52ee372b1ee1297129329eaad">data</a></div><div class="ttdeci">static fdata_t data[2]</div><div class="ttdef"><b>Definition:</b> test_fifo_contexts.c:15</div></div>
<div class="ttc" id="aztress_8h_html_af706f1af4c42f5925d7545dadf5548fd"><div class="ttname"><a href="ztress_8h.html#af706f1af4c42f5925d7545dadf5548fd">ztress_execute</a></div><div class="ttdeci">int ztress_execute(struct ztress_context_data *timer_data, struct ztress_context_data *thread_data, size_t cnt)</div></div>
</div><!-- fragment -->
<p>Setup and run stress test. </p>
<p >It initialises all contexts and calls <a class="el" href="ztress_8h.html#af706f1af4c42f5925d7545dadf5548fd">ztress_execute</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">...</td><td>List of contexts. Contexts are configured using <a class="el" href="ztress_8h.html#abab05b8db44a7024ce23cb34bf999e42">ZTRESS_TIMER</a> and <a class="el" href="ztress_8h.html#aed561641541e8ced6866f2f1227f21c0">ZTRESS_THREAD</a> macros. <a class="el" href="ztress_8h.html#abab05b8db44a7024ce23cb34bf999e42">ZTRESS_TIMER</a> must be the first argument if used. Each thread context has an assigned priority. The priority is assigned in a descending order (first listed thread context has the highest priority). The number of supported thread contexts is configurable in Kconfig. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a937803e1398db7d0e10ea60c9c9ef642" name="a937803e1398db7d0e10ea60c9c9ef642"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a937803e1398db7d0e10ea60c9c9ef642">&#9670;&nbsp;</a></span>ZTRESS_ID_K_TIMER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ZTRESS_ID_K_TIMER&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8752d529cfc4d77b1dd71c4572fd63c3" name="a8752d529cfc4d77b1dd71c4572fd63c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8752d529cfc4d77b1dd71c4572fd63c3">&#9670;&nbsp;</a></span>ZTRESS_ID_THREAD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ZTRESS_ID_THREAD&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aed561641541e8ced6866f2f1227f21c0" name="aed561641541e8ced6866f2f1227f21c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed561641541e8ced6866f2f1227f21c0">&#9670;&nbsp;</a></span>ZTRESS_THREAD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ZTRESS_THREAD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="timer_2starve_2src_2main_8c.html#ab28ee8b6412d992f77f819e17b664869">handler</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="timer_2timer__api_2src_2main_8c.html#a862de962130decf51321624c10294338">user_data</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">exec_cnt, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">preempt_cnt, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">init_timeout&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;	(<a class="el" href="ztress_8h.html#a8752d529cfc4d77b1dd71c4572fd63c3">ZTRESS_ID_THREAD</a>, <a class="el" href="timer_2starve_2src_2main_8c.html#ab28ee8b6412d992f77f819e17b664869">handler</a>, <a class="el" href="timer_2timer__api_2src_2main_8c.html#a862de962130decf51321624c10294338">user_data</a>, exec_cnt, preempt_cnt, init_timeout)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Descriptor of a thread execution context. </p>
<p >The handler is executed in the thread context. The priority of the thread is determined based on the order in which contexts are listed in <a class="el" href="ztress_8h.html#a6acc3a50e0eff7360873006482f5c8e9">ZTRESS_EXECUTE</a>.</p>
<dl class="section note"><dt>Note</dt><dd>thread sleeps for random amount of time. Additionally, the thread busy-waits for a random length of time to further increase randomization in the test.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handler</td><td>User handler of type <a class="el" href="ztress_8h.html#a633439263754bf08baee06c37dddab40">ztress_handler</a>.</td></tr>
    <tr><td class="paramname">user_data</td><td>User data passed to the <code>handler</code>.</td></tr>
    <tr><td class="paramname">exec_cnt</td><td>Number of handler executions to complete the test. If 0 then this is not included in completion criteria.</td></tr>
    <tr><td class="paramname">preempt_cnt</td><td>Number of preemptions of that context to complete the test. If 0 then this is not included in completion criteria.</td></tr>
    <tr><td class="paramname">init_timeout</td><td>Initial backoff time base (given in <a class="el" href="structk__timeout__t.html">k_timeout_t</a>). It is adjusted during the test to optimize CPU load. The actual timeout used for sleeping is randomized. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abab05b8db44a7024ce23cb34bf999e42" name="abab05b8db44a7024ce23cb34bf999e42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abab05b8db44a7024ce23cb34bf999e42">&#9670;&nbsp;</a></span>ZTRESS_TIMER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ZTRESS_TIMER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="timer_2starve_2src_2main_8c.html#ab28ee8b6412d992f77f819e17b664869">handler</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="timer_2timer__api_2src_2main_8c.html#a862de962130decf51321624c10294338">user_data</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">exec_cnt, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">init_timeout&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;	(<a class="el" href="ztress_8h.html#a937803e1398db7d0e10ea60c9c9ef642">ZTRESS_ID_K_TIMER</a>, <a class="el" href="timer_2starve_2src_2main_8c.html#ab28ee8b6412d992f77f819e17b664869">handler</a>, <a class="el" href="timer_2timer__api_2src_2main_8c.html#a862de962130decf51321624c10294338">user_data</a>, exec_cnt, 0, init_timeout)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Descriptor of a k_timer handler execution context. </p>
<p >The handler is executed in the k_timer handler context which typically means interrupt context. This context will preempt any other used in the set.</p>
<dl class="section note"><dt>Note</dt><dd>There can only be up to one k_timer context in the set and it must be the first argument of <a class="el" href="ztress_8h.html#a6acc3a50e0eff7360873006482f5c8e9">ZTRESS_EXECUTE</a>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handler</td><td>User handler of type <a class="el" href="ztress_8h.html#a633439263754bf08baee06c37dddab40">ztress_handler</a>.</td></tr>
    <tr><td class="paramname">user_data</td><td>User data passed to the <code>handler</code>.</td></tr>
    <tr><td class="paramname">exec_cnt</td><td>Number of handler executions to complete the test. If 0 then this is not included in completion criteria.</td></tr>
    <tr><td class="paramname">init_timeout</td><td>Initial backoff time base (given in <a class="el" href="structk__timeout__t.html">k_timeout_t</a>). It is adjusted during the test to optimize CPU load. The actual timeout used for the timer is randomized. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a633439263754bf08baee06c37dddab40" name="a633439263754bf08baee06c37dddab40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a633439263754bf08baee06c37dddab40">&#9670;&nbsp;</a></span>ztress_handler</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>(* ztress_handler) (void *<a class="el" href="timer_2timer__api_2src_2main_8c.html#a862de962130decf51321624c10294338">user_data</a>, <a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> cnt, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> last, int prio)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>User handler called in one of the configured contexts. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">user_data</td><td>User data provided in the context descriptor.</td></tr>
    <tr><td class="paramname">cnt</td><td>Current execution counter. Counted from 0.</td></tr>
    <tr><td class="paramname">last</td><td>Flag set to true indicates that it is the last execution because completion criteria are met, test timed out or was aborted.</td></tr>
    <tr><td class="paramname">prio</td><td>Context priority counting from 0 which indicates the highest priority.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>continue test. </td></tr>
    <tr><td class="paramname">false</td><td>stop executing the current context. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a57f171e230fba462b3dea6b2d3cf71f6" name="a57f171e230fba462b3dea6b2d3cf71f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57f171e230fba462b3dea6b2d3cf71f6">&#9670;&nbsp;</a></span>ztress_abort()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ztress_abort </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Abort ongoing stress test. </p>

</div>
</div>
<a id="a99eeabcc672fc5ec0b83ce5b8fb4ec5b" name="a99eeabcc672fc5ec0b83ce5b8fb4ec5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99eeabcc672fc5ec0b83ce5b8fb4ec5b">&#9670;&nbsp;</a></span>ztress_exec_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ztress_exec_count </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get number of executions of a given context in the last test. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Context id. 0 means the highest priority.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of executions. </dd></dl>

</div>
</div>
<a id="af706f1af4c42f5925d7545dadf5548fd" name="af706f1af4c42f5925d7545dadf5548fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af706f1af4c42f5925d7545dadf5548fd">&#9670;&nbsp;</a></span>ztress_execute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ztress_execute </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structztress__context__data.html">ztress_context_data</a> *&#160;</td>
          <td class="paramname"><em>timer_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structztress__context__data.html">ztress_context_data</a> *&#160;</td>
          <td class="paramname"><em>thread_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>cnt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Execute contexts.</p>
<p >The test runs until all completion requirements are met or until the test times out (use <a class="el" href="ztress_8h.html#a5b3069bb2aa35ddc64c46c18d2e30091">ztress_set_timeout</a> to configure timeout) or until the test is aborted (<a class="el" href="ztress_8h.html#a57f171e230fba462b3dea6b2d3cf71f6">ztress_abort</a>).</p>
<p >on test completion a report is printed (<a class="el" href="ztress_8h.html#af4db2092eee17d863c9810333ba4c870">ztress_report</a> is called internally).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"><a class="el" href="structtimer__data.html">timer_data</a></td><td>Timer context. NULL if timer context is not used. </td></tr>
    <tr><td class="paramname"><a class="el" href="structthread__data.html">thread_data</a></td><td>List of thread contexts descriptors in priority descending order. </td></tr>
    <tr><td class="paramname">cnt</td><td>Number of thread contexts.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-EINVAL</td><td>If configuration is invalid. </td></tr>
    <tr><td class="paramname">0</td><td>if test is successfully performed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acbbdb8e7bad532d6dd20c486b3256e21" name="acbbdb8e7bad532d6dd20c486b3256e21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbbdb8e7bad532d6dd20c486b3256e21">&#9670;&nbsp;</a></span>ztress_optimized_ticks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a> ztress_optimized_ticks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get optimized timeout base of a given context in the last test. </p>
<p >Optimized value can be used to update initial value. It will improve the test since optimal CPU load will be reach immediately.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Context id. 0 means the highest priority.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Optimized timeout base. </dd></dl>

</div>
</div>
<a id="a4406b828d170bc19065aaf65aeb4613e" name="a4406b828d170bc19065aaf65aeb4613e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4406b828d170bc19065aaf65aeb4613e">&#9670;&nbsp;</a></span>ztress_preempt_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ztress_preempt_count </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#a0a8582351ac627ee8bde2973c825e47f">uint32_t</a>&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get number of preemptions of a given context in the last test. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Context id. 0 means the highest priority.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of preemptions. </dd></dl>

</div>
</div>
<a id="af4db2092eee17d863c9810333ba4c870" name="af4db2092eee17d863c9810333ba4c870"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4db2092eee17d863c9810333ba4c870">&#9670;&nbsp;</a></span>ztress_report()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ztress_report </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print last test report. </p>
<p >Report contains number of executions and preemptions for each context, initial and adjusted timeouts and CPU load during the test. </p>

</div>
</div>
<a id="a5b3069bb2aa35ddc64c46c18d2e30091" name="a5b3069bb2aa35ddc64c46c18d2e30091"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b3069bb2aa35ddc64c46c18d2e30091">&#9670;&nbsp;</a></span>ztress_set_timeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ztress_set_timeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structk__timeout__t.html">k_timeout_t</a>&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set test timeout. </p>
<p >Test is terminated after timeout disregarding completion criteria. Setting is persistent between executions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>Timeout. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_c85cb826952b1679a37b077c3741c8c1.html">subsys</a></li><li class="navelem"><a class="el" href="dir_1abba8fd2d51532ae0fc663391fcb2bd.html">testsuite</a></li><li class="navelem"><a class="el" href="dir_baac9b2eb462986e22d73d5689d3a238.html">ztest</a></li><li class="navelem"><a class="el" href="dir_c3f97f6cb043cb2f48a1d98a4dc6b6bd.html">include</a></li><li class="navelem"><a class="el" href="ztress_8h.html">ztress.h</a></li>
    <li class="footer">Generated on Mon Feb 21 2022 04:59:40 for Zephyr API Documentation by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
<script type="text/javascript">
  $(function() {
    toggleButton = document.createElement('doxygen-awesome-dark-mode-toggle')
    toggleButton.title = "Toggle Light/Dark Mode"
    $(document).ready(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
    // every resize will remove the button, which is why it has to be added again:
    $(window).resize(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
  })
</script>
</body>
</html>

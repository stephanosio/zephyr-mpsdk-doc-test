<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Zephyr API Documentation: Memory Slab Tests</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-zephyr.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-zephyr.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Zephyr API Documentation
   &#160;<span id="projectnumber">3.0.99</span>
   </div>
   <div id="projectbrief">A Scalable Open Source RTOS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__kernel__memory__slab__tests.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Memory Slab Tests<div class="ingroups"><a class="el" href="group__all__tests.html">Zephyr Tests</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Test memory slab APIs.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8f38866a1e45c2579bf2d05bfb6051b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kernel__memory__slab__tests.html#ga8f38866a1e45c2579bf2d05bfb6051b0">test_mheap_threadsafe</a> (void)</td></tr>
<tr class="memdesc:ga8f38866a1e45c2579bf2d05bfb6051b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify alloc from multiple equal priority threads.  <a href="group__kernel__memory__slab__tests.html#ga8f38866a1e45c2579bf2d05bfb6051b0">More...</a><br /></td></tr>
<tr class="separator:ga8f38866a1e45c2579bf2d05bfb6051b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga560c5f74ce61f9109a78c76ad1b7c4db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kernel__memory__slab__tests.html#ga560c5f74ce61f9109a78c76ad1b7c4db">test_mslab</a> (void)</td></tr>
<tr class="memdesc:ga560c5f74ce61f9109a78c76ad1b7c4db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main task to test memory slab interfaces.  <a href="group__kernel__memory__slab__tests.html#ga560c5f74ce61f9109a78c76ad1b7c4db">More...</a><br /></td></tr>
<tr class="separator:ga560c5f74ce61f9109a78c76ad1b7c4db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga119178edcc474fb7d5c1d33721780b83"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kernel__memory__slab__tests.html#ga119178edcc474fb7d5c1d33721780b83">test_mslab_kinit</a> (void)</td></tr>
<tr class="memdesc:ga119178edcc474fb7d5c1d33721780b83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the memory slab using <a class="el" href="group__mem__slab__apis.html#ga094a8f173f287e29bb287119c26889d1" title="Initialize a memory slab.">k_mem_slab_init()</a> and allocates/frees blocks.  <a href="group__kernel__memory__slab__tests.html#ga119178edcc474fb7d5c1d33721780b83">More...</a><br /></td></tr>
<tr class="separator:ga119178edcc474fb7d5c1d33721780b83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8204f07df44a811cc62136d2977e0fca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kernel__memory__slab__tests.html#ga8204f07df44a811cc62136d2977e0fca">test_mslab_kdefine</a> (void)</td></tr>
<tr class="memdesc:ga8204f07df44a811cc62136d2977e0fca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify <a class="el" href="test__mslab__api_8c.html#a67df826563fb3212d38113e56131b289">K_MEM_SLAB_DEFINE()</a> with allocates/frees blocks.  <a href="group__kernel__memory__slab__tests.html#ga8204f07df44a811cc62136d2977e0fca">More...</a><br /></td></tr>
<tr class="separator:ga8204f07df44a811cc62136d2977e0fca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad286e91e6183fcf4f33d5dd291c5c384"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kernel__memory__slab__tests.html#gad286e91e6183fcf4f33d5dd291c5c384">test_mslab_alloc_free_thread</a> (void)</td></tr>
<tr class="memdesc:gad286e91e6183fcf4f33d5dd291c5c384"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify alloc and free of blocks from mem_slab.  <a href="group__kernel__memory__slab__tests.html#gad286e91e6183fcf4f33d5dd291c5c384">More...</a><br /></td></tr>
<tr class="separator:gad286e91e6183fcf4f33d5dd291c5c384"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac03a1baa471add66003ca7cd4258cf3f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kernel__memory__slab__tests.html#gac03a1baa471add66003ca7cd4258cf3f">test_mslab_alloc_align</a> (void)</td></tr>
<tr class="memdesc:gac03a1baa471add66003ca7cd4258cf3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate memory blocks and check for alignment of 8 bytes.  <a href="group__kernel__memory__slab__tests.html#gac03a1baa471add66003ca7cd4258cf3f">More...</a><br /></td></tr>
<tr class="separator:gac03a1baa471add66003ca7cd4258cf3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga25d58f739a95d0ae6fa95d03eba0b3f5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kernel__memory__slab__tests.html#ga25d58f739a95d0ae6fa95d03eba0b3f5">test_mslab_alloc_timeout</a> (void)</td></tr>
<tr class="memdesc:ga25d58f739a95d0ae6fa95d03eba0b3f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify allocation of memory blocks with timeouts.  <a href="group__kernel__memory__slab__tests.html#ga25d58f739a95d0ae6fa95d03eba0b3f5">More...</a><br /></td></tr>
<tr class="separator:ga25d58f739a95d0ae6fa95d03eba0b3f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga52b74937511303e73307dc6e9f27c157"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kernel__memory__slab__tests.html#ga52b74937511303e73307dc6e9f27c157">test_mslab_used_get</a> (void)</td></tr>
<tr class="memdesc:ga52b74937511303e73307dc6e9f27c157"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify count of allocated blocks.  <a href="group__kernel__memory__slab__tests.html#ga52b74937511303e73307dc6e9f27c157">More...</a><br /></td></tr>
<tr class="separator:ga52b74937511303e73307dc6e9f27c157"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga77591f868e9df6d59a85f4de0aa7fab2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kernel__memory__slab__tests.html#ga77591f868e9df6d59a85f4de0aa7fab2">test_mslab_pending</a> (void)</td></tr>
<tr class="memdesc:ga77591f868e9df6d59a85f4de0aa7fab2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify pending of allocating blocks.  <a href="group__kernel__memory__slab__tests.html#ga77591f868e9df6d59a85f4de0aa7fab2">More...</a><br /></td></tr>
<tr class="separator:ga77591f868e9df6d59a85f4de0aa7fab2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga512d1ead2072c0a9abd990eb29aa0745"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kernel__memory__slab__tests.html#ga512d1ead2072c0a9abd990eb29aa0745">test_mslab_kdefine_extern</a> (void)</td></tr>
<tr class="memdesc:ga512d1ead2072c0a9abd990eb29aa0745"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test mem_slab access outside the module.  <a href="group__kernel__memory__slab__tests.html#ga512d1ead2072c0a9abd990eb29aa0745">More...</a><br /></td></tr>
<tr class="separator:ga512d1ead2072c0a9abd990eb29aa0745"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac0984a2204c92a4254c5c2c16079dd91"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kernel__memory__slab__tests.html#gac0984a2204c92a4254c5c2c16079dd91">test_mslab_alloc_wait_prio</a> (void)</td></tr>
<tr class="memdesc:gac0984a2204c92a4254c5c2c16079dd91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify alloc with multiple threads.  <a href="group__kernel__memory__slab__tests.html#gac0984a2204c92a4254c5c2c16079dd91">More...</a><br /></td></tr>
<tr class="separator:gac0984a2204c92a4254c5c2c16079dd91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga58d6a9fba99ee0e71ee19e7852faf421"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__kernel__memory__slab__tests.html#ga58d6a9fba99ee0e71ee19e7852faf421">test_mslab_threadsafe</a> (void)</td></tr>
<tr class="memdesc:ga58d6a9fba99ee0e71ee19e7852faf421"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify alloc and free from multiple equal priority threads.  <a href="group__kernel__memory__slab__tests.html#ga58d6a9fba99ee0e71ee19e7852faf421">More...</a><br /></td></tr>
<tr class="separator:ga58d6a9fba99ee0e71ee19e7852faf421"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >Test memory slab APIs. </p>
<p >This module tests the following memory slab routines: </p><pre class="fragment">k_mem_slab_alloc
k_mem_slab_free
k_mem_slab_num_used_get
</pre> <dl class="section note"><dt>Note</dt><dd>One should ensure that the block is released to the same memory slab from which it was allocated, and is only released once. Using an invalid pointer will have unpredictable side effects. </dd></dl>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga8f38866a1e45c2579bf2d05bfb6051b0" name="ga8f38866a1e45c2579bf2d05bfb6051b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8f38866a1e45c2579bf2d05bfb6051b0">&#9670;&nbsp;</a></span>test_mheap_threadsafe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_mheap_threadsafe </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="test__mheap__concept_8c.html">tests/kernel/mem_heap/mheap_api_concept/src/test_mheap_concept.c</a>&gt;</code></p>

<p>Verify alloc from multiple equal priority threads. </p>
<p >Test creates three preemptive threads of equal priority. In each child thread , call <a class="el" href="group__heap__apis.html#gaa8edf1e63e5d5dd78d7adcfd787394ee" title="Allocate memory from the heap.">k_malloc()</a> to alloc a block of memory. Check These four threads can share the same heap space without interfering with each other. </p>

</div>
</div>
<a id="ga560c5f74ce61f9109a78c76ad1b7c4db" name="ga560c5f74ce61f9109a78c76ad1b7c4db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga560c5f74ce61f9109a78c76ad1b7c4db">&#9670;&nbsp;</a></span>test_mslab()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_mslab </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="mem__slab_2mslab_2src_2main_8c.html">tests/kernel/mem_slab/mslab/src/main.c</a>&gt;</code></p>

<p>Main task to test memory slab interfaces. </p>
<p >Verify that system allows for the definitions of boot-time memory regions. This routine calls <a class="el" href="mem__slab_2mslab_2src_2main_8c.html#aa1f719b33bc3fc8c291e2ea04f32a30e" title="Get all blocks from the memory slab.">test_slab_get_all_blocks()</a> to get all memory blocks from the map and calls <a class="el" href="mem__slab_2mslab_2src_2main_8c.html#a07285cb4571f19ce465dd7b0637f6aa4" title="Free all memory blocks.">test_slab_free_all_blocks()</a> to free all memory blocks. It also tries to wait (with and without timeout) for a memory block.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__mem__slab__apis.html#gab16a46d8394aca18de740ad044a8734a" title="Allocate memory from a memory slab.">k_mem_slab_alloc()</a>, <a class="el" href="group__mem__slab__apis.html#gac76b96d7055e4ad94765c93530dd0720" title="Get the number of used blocks in a memory slab.">k_mem_slab_num_used_get()</a>, <a class="el" href="string_8h.html#a4137694174d4ca2fad886a1db355015c">memset()</a>, <a class="el" href="group__mem__slab__apis.html#ga97915aee5a59e19f8b28185eed93aac7" title="Free memory allocated from a memory slab.">k_mem_slab_free()</a> </dd></dl>

</div>
</div>
<a id="gac03a1baa471add66003ca7cd4258cf3f" name="gac03a1baa471add66003ca7cd4258cf3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac03a1baa471add66003ca7cd4258cf3f">&#9670;&nbsp;</a></span>test_mslab_alloc_align()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_mslab_alloc_align </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="test__mslab__api_8c.html">tests/kernel/mem_slab/mslab_api/src/test_mslab_api.c</a>&gt;</code></p>

<p>Allocate memory blocks and check for alignment of 8 bytes. </p>
<p >Allocate 3 blocks of memory from 2 memory slabs respectively and check if all blocks are aligned to 8 bytes and free them. </p>

</div>
</div>
<a id="gad286e91e6183fcf4f33d5dd291c5c384" name="gad286e91e6183fcf4f33d5dd291c5c384"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad286e91e6183fcf4f33d5dd291c5c384">&#9670;&nbsp;</a></span>test_mslab_alloc_free_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_mslab_alloc_free_thread </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="test__mslab__api_8c.html">tests/kernel/mem_slab/mslab_api/src/test_mslab_api.c</a>&gt;</code></p>

<p>Verify alloc and free of blocks from mem_slab. </p>

</div>
</div>
<a id="ga25d58f739a95d0ae6fa95d03eba0b3f5" name="ga25d58f739a95d0ae6fa95d03eba0b3f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga25d58f739a95d0ae6fa95d03eba0b3f5">&#9670;&nbsp;</a></span>test_mslab_alloc_timeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_mslab_alloc_timeout </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="test__mslab__api_8c.html">tests/kernel/mem_slab/mslab_api/src/test_mslab_api.c</a>&gt;</code></p>

<p>Verify allocation of memory blocks with timeouts. </p>
<p >Allocate 3 memory blocks from memory slab. Check allocation of another memory block with NO_WAIT set, since there are no blocks left to allocate in the memory slab, the allocation fails with return value -ENOMEM. Then the system up time is obtained, memory block allocation is tried with timeout of 2000 ms. Now the allocation API returns -EAGAIN as the waiting period is timeout. The test case also checks if timeout has really happened by checking delta period between the allocation request was made and return of -EAGAIN. </p>

</div>
</div>
<a id="gac0984a2204c92a4254c5c2c16079dd91" name="gac0984a2204c92a4254c5c2c16079dd91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac0984a2204c92a4254c5c2c16079dd91">&#9670;&nbsp;</a></span>test_mslab_alloc_wait_prio()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_mslab_alloc_wait_prio </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="test__mslab__alloc__wait_8c.html">tests/kernel/mem_slab/mslab_concept/src/test_mslab_alloc_wait.c</a>&gt;</code></p>

<p>Verify alloc with multiple threads. </p>
<p >The test allocates all blocks of memory slab and then spawns 3 threads with lowest priority and 2 more with same priority higher than first thread with delay 10ms and 20ms. Checks the behavior of alloc when requested by multiple threads</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__mem__slab__apis.html#gab16a46d8394aca18de740ad044a8734a" title="Allocate memory from a memory slab.">k_mem_slab_alloc()</a> </dd>
<dd>
<a class="el" href="group__mem__slab__apis.html#ga97915aee5a59e19f8b28185eed93aac7" title="Free memory allocated from a memory slab.">k_mem_slab_free()</a> </dd></dl>
<p >TESTPOINT: Any number of threads may wait on an empty memory slab simultaneously; when a memory block becomes available, it is given to the highest-priority thread that has waited the longest.</p>
<p >TESTPOINT: If all the blocks are currently in use, a thread can optionally wait for one to become available.</p>

</div>
</div>
<a id="ga8204f07df44a811cc62136d2977e0fca" name="ga8204f07df44a811cc62136d2977e0fca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8204f07df44a811cc62136d2977e0fca">&#9670;&nbsp;</a></span>test_mslab_kdefine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_mslab_kdefine </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="test__mslab__api_8c.html">tests/kernel/mem_slab/mslab_api/src/test_mslab_api.c</a>&gt;</code></p>

<p>Verify <a class="el" href="test__mslab__api_8c.html#a67df826563fb3212d38113e56131b289">K_MEM_SLAB_DEFINE()</a> with allocates/frees blocks. </p>
<p >Initialize 3 memory blocks of block size 8 bytes using </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="test__mslab__api_8c.html#a67df826563fb3212d38113e56131b289">K_MEM_SLAB_DEFINE()</a> and check if number of used blocks is 0 and <a class="el" href="stdlib_8h.html#afbedc913aa4651b3c3b4b3aecd9b4711">free</a> blocks is equal to number of blocks initialized. </dd></dl>

</div>
</div>
<a id="ga512d1ead2072c0a9abd990eb29aa0745" name="ga512d1ead2072c0a9abd990eb29aa0745"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga512d1ead2072c0a9abd990eb29aa0745">&#9670;&nbsp;</a></span>test_mslab_kdefine_extern()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_mslab_kdefine_extern </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="test__mslab__extern_8c.html">tests/kernel/mem_slab/mslab_api/src/test_mslab_extern.c</a>&gt;</code></p>

<p>Test mem_slab access outside the module. </p>
<p >The memory slab can be accessed outside the module where it is defined using: </p><div class="fragment"><div class="line"><span class="keyword">extern</span> <span class="keyword">struct </span>k_mem_slab &lt;name&gt;; </div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga119178edcc474fb7d5c1d33721780b83" name="ga119178edcc474fb7d5c1d33721780b83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga119178edcc474fb7d5c1d33721780b83">&#9670;&nbsp;</a></span>test_mslab_kinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_mslab_kinit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="test__mslab__api_8c.html">tests/kernel/mem_slab/mslab_api/src/test_mslab_api.c</a>&gt;</code></p>

<p>Initialize the memory slab using <a class="el" href="group__mem__slab__apis.html#ga094a8f173f287e29bb287119c26889d1" title="Initialize a memory slab.">k_mem_slab_init()</a> and allocates/frees blocks. </p>
<p >Initialize 3 memory blocks of block size 8 bytes using </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="group__mem__slab__apis.html#ga094a8f173f287e29bb287119c26889d1" title="Initialize a memory slab.">k_mem_slab_init()</a> and check if number of used blocks is 0 and <a class="el" href="stdlib_8h.html#afbedc913aa4651b3c3b4b3aecd9b4711">free</a> blocks is equal to number of blocks initialized. </dd></dl>

</div>
</div>
<a id="ga77591f868e9df6d59a85f4de0aa7fab2" name="ga77591f868e9df6d59a85f4de0aa7fab2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga77591f868e9df6d59a85f4de0aa7fab2">&#9670;&nbsp;</a></span>test_mslab_pending()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_mslab_pending </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="test__mslab__api_8c.html">tests/kernel/mem_slab/mslab_api/src/test_mslab_api.c</a>&gt;</code></p>

<p>Verify pending of allocating blocks. </p>
<p >First, helper thread got all memory blocks, and there is no free block left. <a class="el" href="group__mem__slab__apis.html#gab16a46d8394aca18de740ad044a8734a" title="Allocate memory from a memory slab.">k_mem_slab_alloc()</a> with time out will fail and return -EAGAIN. Then <a class="el" href="group__mem__slab__apis.html#gab16a46d8394aca18de740ad044a8734a" title="Allocate memory from a memory slab.">k_mem_slab_alloc()</a> without timeout tries to wait for a memory block until helper thread free one. </p>

</div>
</div>
<a id="ga58d6a9fba99ee0e71ee19e7852faf421" name="ga58d6a9fba99ee0e71ee19e7852faf421"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga58d6a9fba99ee0e71ee19e7852faf421">&#9670;&nbsp;</a></span>test_mslab_threadsafe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_mslab_threadsafe </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="test__mslab__threadsafe_8c.html">tests/kernel/mem_slab/mslab_threadsafe/src/test_mslab_threadsafe.c</a>&gt;</code></p>

<p>Verify alloc and free from multiple equal priority threads. </p>
<p >Test creates 4 preemptive threads of equal priority. Then validates the synchronization of threads by allocating and freeing up the memory blocks in memory slab. </p>

</div>
</div>
<a id="ga52b74937511303e73307dc6e9f27c157" name="ga52b74937511303e73307dc6e9f27c157"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga52b74937511303e73307dc6e9f27c157">&#9670;&nbsp;</a></span>test_mslab_used_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_mslab_used_get </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="test__mslab__api_8c.html">tests/kernel/mem_slab/mslab_api/src/test_mslab_api.c</a>&gt;</code></p>

<p>Verify count of allocated blocks. </p>
<p >The test case allocates 3 blocks one after the other by checking for used block and free blocks in the memory slab - mslab. Once all 3 blocks are allocated, one more block is tried to allocates, which fails with return value -ENOMEM. It also checks the allocation with timeout. Again checks for used block and free blocks number using </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="group__mem__slab__apis.html#gac76b96d7055e4ad94765c93530dd0720" title="Get the number of used blocks in a memory slab.">k_mem_slab_num_used_get()</a> and </dd>
<dd>
<a class="el" href="group__mem__slab__apis.html#gae87577e2873cf746db69216a82f94aea" title="Get the number of unused blocks in a memory slab.">k_mem_slab_num_free_get()</a>. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sat Mar 5 2022 05:00:47 for Zephyr API Documentation by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
<script type="text/javascript">
  $(function() {
    toggleButton = document.createElement('doxygen-awesome-dark-mode-toggle')
    toggleButton.title = "Toggle Light/Dark Mode"
    $(document).ready(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
    // every resize will remove the button, which is why it has to be added again:
    $(window).resize(function(){
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
  })
</script>
</body>
</html>

<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.2" xml:lang="en-US">
  <compounddef id="drivers_2pcie_2controller_8h" kind="file" language="C++">
    <compoundname>controller.h</compoundname>
    <includes refid="include_2zephyr_2types_8h" local="no">zephyr/types.h</includes>
    <includes local="no">device.h</includes>
    <incdepgraph>
      <node id="1">
        <label>include/drivers/pcie/controller.h</label>
        <link refid="drivers_2pcie_2controller_8h"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
      </node>
      <node id="2">
        <label>zephyr/types.h</label>
        <link refid="include_2zephyr_2types_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
      </node>
      <node id="4">
        <label>stdint.h</label>
        <link refid="stdint_8h"/>
      </node>
      <node id="5">
        <label>device.h</label>
      </node>
      <node id="3">
        <label>stddef.h</label>
      </node>
    </incdepgraph>
    <innerclass refid="structpcie__ctrl__driver__api" prot="public">pcie_ctrl_driver_api</innerclass>
    <innerclass refid="structpcie__ctrl__config" prot="public">pcie_ctrl_config</innerclass>
      <sectiondef kind="define">
      <memberdef kind="define" id="group__pcie__controller__interface_1ga91525130b94b07187633abd1e017aa61" prot="public" static="no">
        <name>PCIE_RANGE_FORMAT</name>
        <param><defname>node_id</defname></param>
        <param><defname>idx</defname></param>
        <initializer>{											\
	.<ref refid="http__parser_8h_1ab6b306ef981f5e21bb41ea2c2dbe8cd9" kindref="member">flags</ref> = <ref refid="group__devicetree-ranges-prop_1ga32a9c873d3ec1f5d7922c38eaafd1af8" kindref="member">DT_RANGES_CHILD_BUS_FLAGS_BY_IDX</ref>(node_id, idx),			\
	.pcie_bus_addr = <ref refid="group__devicetree-ranges-prop_1ga449940559213086b15151ec00e46607d" kindref="member">DT_RANGES_CHILD_BUS_ADDRESS_BY_IDX</ref>(node_id, idx),		\
	.host_map_addr = <ref refid="group__devicetree-ranges-prop_1ga48d493ad616438ace2396c0312a242ba" kindref="member">DT_RANGES_PARENT_BUS_ADDRESS_BY_IDX</ref>(node_id, idx),		\
	.map_length = <ref refid="group__devicetree-ranges-prop_1ga52677a5bc86f9132a09b6bc37153afb2" kindref="member">DT_RANGES_LENGTH_BY_IDX</ref>(node_id, idx),				\
},</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/drivers/pcie/controller.h" line="323" column="9" bodyfile="include/drivers/pcie/controller.h" bodystart="323" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="typedef">
      <memberdef kind="typedef" id="group__pcie__controller__interface_1gac3d0f7e90bcc30996ce23324d2d7356a" prot="public" static="no">
        <type><ref refid="stdint_8h_1a0a8582351ac627ee8bde2973c825e47f" kindref="member">uint32_t</ref>(*</type>
        <definition>typedef uint32_t(* pcie_ctrl_conf_read_t) (const struct device *dev, pcie_bdf_t bdf, unsigned int reg)</definition>
        <argsstring>)(const struct device *dev, pcie_bdf_t bdf, unsigned int reg)</argsstring>
        <name>pcie_ctrl_conf_read_t</name>
        <briefdescription>
<para>Function called to read a 32-bit word from an endpoint&apos;s configuration space. </para>
        </briefdescription>
        <detaileddescription>
<para>Read a 32-bit word from an endpoint&apos;s configuration space with the PCI Express Controller configuration space access method (I/O port, memory mapped or custom method)</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>dev</parametername>
</parameternamelist>
<parameterdescription>
<para>PCI Express Controller device pointer </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bdf</parametername>
</parameternamelist>
<parameterdescription>
<para>PCI(e) endpoint </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>reg</parametername>
</parameternamelist>
<parameterdescription>
<para>the configuration word index (not address) </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>the word read (0xFFFFFFFFU if nonexistent endpoint or word) </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/drivers/pcie/controller.h" line="40" column="9" bodyfile="include/drivers/pcie/controller.h" bodystart="40" bodyend="-1"/>
      </memberdef>
      <memberdef kind="typedef" id="group__pcie__controller__interface_1ga3241acc7de4af2b73cf3f47a25349109" prot="public" static="no">
        <type>void(*</type>
        <definition>typedef void(* pcie_ctrl_conf_write_t) (const struct device *dev, pcie_bdf_t bdf, unsigned int reg, uint32_t data)</definition>
        <argsstring>)(const struct device *dev, pcie_bdf_t bdf, unsigned int reg, uint32_t data)</argsstring>
        <name>pcie_ctrl_conf_write_t</name>
        <briefdescription>
<para>Function called to write a 32-bit word to an endpoint&apos;s configuration space. </para>
        </briefdescription>
        <detaileddescription>
<para>Write a 32-bit word to an endpoint&apos;s configuration space with the PCI Express Controller configuration space access method (I/O port, memory mapped or custom method)</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>dev</parametername>
</parameternamelist>
<parameterdescription>
<para>PCI Express Controller device pointer </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bdf</parametername>
</parameternamelist>
<parameterdescription>
<para>PCI(e) endpoint </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>reg</parametername>
</parameternamelist>
<parameterdescription>
<para>the configuration word index (not address) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>data</parametername>
</parameternamelist>
<parameterdescription>
<para>the value to write </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/drivers/pcie/controller.h" line="54" column="9" bodyfile="include/drivers/pcie/controller.h" bodystart="54" bodyend="-1"/>
      </memberdef>
      <memberdef kind="typedef" id="group__pcie__controller__interface_1ga62ce18e7495256c148168b773eabd37d" prot="public" static="no">
        <type><ref refid="stdbool_8h_1abb452686968e48b67397da5f97445f5b" kindref="member">bool</ref>(*</type>
        <definition>typedef bool(* pcie_ctrl_region_allocate_t) (const struct device *dev, pcie_bdf_t bdf, bool mem, bool mem64, size_t bar_size, uintptr_t *bar_bus_addr)</definition>
        <argsstring>)(const struct device *dev, pcie_bdf_t bdf, bool mem, bool mem64, size_t bar_size, uintptr_t *bar_bus_addr)</argsstring>
        <name>pcie_ctrl_region_allocate_t</name>
        <briefdescription>
<para>Function called to allocate a memory region subset for an endpoint Base Address Register. </para>
        </briefdescription>
        <detaileddescription>
<para>When enumerating PCIe Endpoints, Type0 endpoints can require up to 6 memory zones via the Base Address Registers from I/O or Memory types.</para>
<para>This call allocates such zone in the PCI Express Controller memory regions if such region is available and space is still available.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>dev</parametername>
</parameternamelist>
<parameterdescription>
<para>PCI Express Controller device pointer </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bdf</parametername>
</parameternamelist>
<parameterdescription>
<para>PCI(e) endpoint </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>mem</parametername>
</parameternamelist>
<parameterdescription>
<para>True if the BAR is of memory type </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>mem64</parametername>
</parameternamelist>
<parameterdescription>
<para>True if the BAR is of 64bit memory type </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bar_size</parametername>
</parameternamelist>
<parameterdescription>
<para>Size in bytes of the Base Address Register as returned by HW </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bar_bus_addr</parametername>
</parameternamelist>
<parameterdescription>
<para>bus-centric address allocated to be written in the BAR register </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>True if allocation was possible, False if allocation failed </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/drivers/pcie/controller.h" line="74" column="9" bodyfile="include/drivers/pcie/controller.h" bodystart="74" bodyend="-1"/>
      </memberdef>
      <memberdef kind="typedef" id="group__pcie__controller__interface_1gaa9d5bd27c841e36f65e65dec0b057e9a" prot="public" static="no">
        <type><ref refid="stdbool_8h_1abb452686968e48b67397da5f97445f5b" kindref="member">bool</ref>(*</type>
        <definition>typedef bool(* pcie_ctrl_region_get_allocate_base_t) (const struct device *dev, pcie_bdf_t bdf, bool mem, bool mem64, size_t align, uintptr_t *bar_base_addr)</definition>
        <argsstring>)(const struct device *dev, pcie_bdf_t bdf, bool mem, bool mem64, size_t align, uintptr_t *bar_base_addr)</argsstring>
        <name>pcie_ctrl_region_get_allocate_base_t</name>
        <briefdescription>
<para>Function called to get the current allocation base of a memory region subset for an endpoint Base Address Register. </para>
        </briefdescription>
        <detaileddescription>
<para>When enumerating PCIe Endpoints, Type1 bridge endpoints requires a range of memory allocated by all endpoints in the bridged bus.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>dev</parametername>
</parameternamelist>
<parameterdescription>
<para>PCI Express Controller device pointer </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bdf</parametername>
</parameternamelist>
<parameterdescription>
<para>PCI(e) endpoint </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>mem</parametername>
</parameternamelist>
<parameterdescription>
<para>True if the BAR is of memory type </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>mem64</parametername>
</parameternamelist>
<parameterdescription>
<para>True if the BAR is of 64bit memory type </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>align</parametername>
</parameternamelist>
<parameterdescription>
<para>size to take in account for alignment </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bar_base_addr</parametername>
</parameternamelist>
<parameterdescription>
<para>bus-centric address allocation base </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>True if allocation was possible, False if allocation failed </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/drivers/pcie/controller.h" line="93" column="9" bodyfile="include/drivers/pcie/controller.h" bodystart="93" bodyend="-1"/>
      </memberdef>
      <memberdef kind="typedef" id="group__pcie__controller__interface_1gab144356b1c3ec3754aae0008634f2d2f" prot="public" static="no">
        <type><ref refid="stdbool_8h_1abb452686968e48b67397da5f97445f5b" kindref="member">bool</ref>(*</type>
        <definition>typedef bool(* pcie_ctrl_region_translate_t) (const struct device *dev, pcie_bdf_t bdf, bool mem, bool mem64, uintptr_t bar_bus_addr, uintptr_t *bar_addr)</definition>
        <argsstring>)(const struct device *dev, pcie_bdf_t bdf, bool mem, bool mem64, uintptr_t bar_bus_addr, uintptr_t *bar_addr)</argsstring>
        <name>pcie_ctrl_region_translate_t</name>
        <briefdescription>
<para>Function called to translate an endpoint Base Address Register bus-centric address into Physical address. </para>
        </briefdescription>
        <detaileddescription>
<para>When enumerating PCIe Endpoints, Type0 endpoints can require up to 6 memory zones via the Base Address Registers from I/O or Memory types.</para>
<para>The bus-centric address set in this BAR register is not necessarely accessible from the CPU, thus must be translated by using the PCI Express Controller memory regions translation ranges to permit mapping from the CPU.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>dev</parametername>
</parameternamelist>
<parameterdescription>
<para>PCI Express Controller device pointer </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bdf</parametername>
</parameternamelist>
<parameterdescription>
<para>PCI(e) endpoint </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>mem</parametername>
</parameternamelist>
<parameterdescription>
<para>True if the BAR is of memory type </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>mem64</parametername>
</parameternamelist>
<parameterdescription>
<para>True if the BAR is of 64bit memory type </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bar_bus_addr</parametername>
</parameternamelist>
<parameterdescription>
<para>bus-centric address written in the BAR register </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bar_addr</parametername>
</parameternamelist>
<parameterdescription>
<para>CPU-centric address translated from the bus-centric address </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>True if translation was possible, False if translation failed </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/drivers/pcie/controller.h" line="116" column="9" bodyfile="include/drivers/pcie/controller.h" bodystart="116" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="group__pcie__controller__interface_1gaa16b59c39f273a654b72d9e209f3ba2e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="stdint_8h_1a0a8582351ac627ee8bde2973c825e47f" kindref="member">uint32_t</ref></type>
        <definition>uint32_t pcie_generic_ctrl_conf_read</definition>
        <argsstring>(mm_reg_t cfg_addr, pcie_bdf_t bdf, unsigned int reg)</argsstring>
        <name>pcie_generic_ctrl_conf_read</name>
        <param>
          <type><ref refid="sys_2sys__io_8h_1a7bcfa789a44940bccc5b9b98642744b0" kindref="member">mm_reg_t</ref></type>
          <declname>cfg_addr</declname>
        </param>
        <param>
          <type><ref refid="drivers_2pcie_2pcie_8h_1a84bb3c734945ebaee0e9801495eebe90" kindref="member">pcie_bdf_t</ref></type>
          <declname>bdf</declname>
        </param>
        <param>
          <type><ref refid="lib_2libc_2minimal_2include_2sys_2types_8h_1a4089fb16419d359081465355db05f846" kindref="member">unsigned</ref> int</type>
          <declname>reg</declname>
        </param>
        <briefdescription>
<para>Read a 32-bit word from a Memory-Mapped endpoint&apos;s configuration space. </para>
        </briefdescription>
        <detaileddescription>
<para>Read a 32-bit word from an endpoint&apos;s configuration space from a Memory-Mapped configuration space access method, known as PCI Control Access Method (CAM) or PCIe Extended Control Access Method (ECAM).</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>cfg_addr</parametername>
</parameternamelist>
<parameterdescription>
<para>Logical address of Memory-Mapped configuration space </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bdf</parametername>
</parameternamelist>
<parameterdescription>
<para>PCI(e) endpoint </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>reg</parametername>
</parameternamelist>
<parameterdescription>
<para>the configuration word index (not address) </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>the word read (0xFFFFFFFFU if nonexistent endpoint or word) </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/drivers/pcie/controller.h" line="132" column="10" declfile="include/drivers/pcie/controller.h" declline="132" declcolumn="10"/>
      </memberdef>
      <memberdef kind="function" id="group__pcie__controller__interface_1ga709ecedbd0585b4eb17fc2f5923a8f61" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void pcie_generic_ctrl_conf_write</definition>
        <argsstring>(mm_reg_t cfg_addr, pcie_bdf_t bdf, unsigned int reg, uint32_t data)</argsstring>
        <name>pcie_generic_ctrl_conf_write</name>
        <param>
          <type><ref refid="sys_2sys__io_8h_1a7bcfa789a44940bccc5b9b98642744b0" kindref="member">mm_reg_t</ref></type>
          <declname>cfg_addr</declname>
        </param>
        <param>
          <type><ref refid="drivers_2pcie_2pcie_8h_1a84bb3c734945ebaee0e9801495eebe90" kindref="member">pcie_bdf_t</ref></type>
          <declname>bdf</declname>
        </param>
        <param>
          <type><ref refid="lib_2libc_2minimal_2include_2sys_2types_8h_1a4089fb16419d359081465355db05f846" kindref="member">unsigned</ref> int</type>
          <declname>reg</declname>
        </param>
        <param>
          <type><ref refid="stdint_8h_1a0a8582351ac627ee8bde2973c825e47f" kindref="member">uint32_t</ref></type>
          <declname>data</declname>
        </param>
        <briefdescription>
<para>Write a 32-bit word to a Memory-Mapped endpoint&apos;s configuration space. </para>
        </briefdescription>
        <detaileddescription>
<para>Write a 32-bit word to an endpoint&apos;s configuration space from a Memory-Mapped configuration space access method, known as PCI Control Access Method (CAM) or PCIe Extended Control Access Method (ECAM).</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>cfg_addr</parametername>
</parameternamelist>
<parameterdescription>
<para>Logical address of Memory-Mapped configuration space </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bdf</parametername>
</parameternamelist>
<parameterdescription>
<para>PCI(e) endpoint </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>reg</parametername>
</parameternamelist>
<parameterdescription>
<para>the configuration word index (not address) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>data</parametername>
</parameternamelist>
<parameterdescription>
<para>the value to write </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/drivers/pcie/controller.h" line="147" column="6" declfile="include/drivers/pcie/controller.h" declline="147" declcolumn="6"/>
      </memberdef>
      <memberdef kind="function" id="group__pcie__controller__interface_1ga75910ea4255a740b57e35a596a90b7bb" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void pcie_generic_ctrl_enumerate</definition>
        <argsstring>(const struct device *dev, pcie_bdf_t bdf_start)</argsstring>
        <name>pcie_generic_ctrl_enumerate</name>
        <param>
          <type>const struct <ref refid="structdevice" kindref="compound">device</ref> *</type>
          <declname>dev</declname>
        </param>
        <param>
          <type><ref refid="drivers_2pcie_2pcie_8h_1a84bb3c734945ebaee0e9801495eebe90" kindref="member">pcie_bdf_t</ref></type>
          <declname>bdf_start</declname>
        </param>
        <briefdescription>
<para>Start PCIe Endpoints enumeration. </para>
        </briefdescription>
        <detaileddescription>
<para>Start a PCIe Endpoints enumeration from a Bus number. When on non-x86 architecture or when firmware didn&apos;t setup the PCIe Bus hierarchy, the PCIe bus complex must be enumerated to setup the Endpoints Base Address Registers.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>dev</parametername>
</parameternamelist>
<parameterdescription>
<para>PCI Express Controller device pointer </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bdf_start</parametername>
</parameternamelist>
<parameterdescription>
<para>PCI(e) start endpoint (only bus &amp; dev are used to start enumeration) </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/drivers/pcie/controller.h" line="160" column="6" declfile="include/drivers/pcie/controller.h" declline="160" declcolumn="6"/>
      </memberdef>
      <memberdef kind="function" id="group__pcie__controller__interface_1ga1d978b8075191d6e571349684c731a43" prot="public" static="yes" const="no" explicit="no" inline="yes" virt="non-virtual">
        <type><ref refid="stdint_8h_1a0a8582351ac627ee8bde2973c825e47f" kindref="member">uint32_t</ref></type>
        <definition>static uint32_t pcie_ctrl_conf_read</definition>
        <argsstring>(const struct device *dev, pcie_bdf_t bdf, unsigned int reg)</argsstring>
        <name>pcie_ctrl_conf_read</name>
        <param>
          <type>const struct <ref refid="structdevice" kindref="compound">device</ref> *</type>
          <declname>dev</declname>
        </param>
        <param>
          <type><ref refid="drivers_2pcie_2pcie_8h_1a84bb3c734945ebaee0e9801495eebe90" kindref="member">pcie_bdf_t</ref></type>
          <declname>bdf</declname>
        </param>
        <param>
          <type><ref refid="lib_2libc_2minimal_2include_2sys_2types_8h_1a4089fb16419d359081465355db05f846" kindref="member">unsigned</ref> int</type>
          <declname>reg</declname>
        </param>
        <briefdescription>
<para>Read a 32-bit word from an endpoint&apos;s configuration space. </para>
        </briefdescription>
        <detaileddescription>
<para>Read a 32-bit word from an endpoint&apos;s configuration space with the PCI Express Controller configuration space access method (I/O port, memory mapped or custom method)</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>dev</parametername>
</parameternamelist>
<parameterdescription>
<para>PCI Express Controller device pointer </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bdf</parametername>
</parameternamelist>
<parameterdescription>
<para>PCI(e) endpoint </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>reg</parametername>
</parameternamelist>
<parameterdescription>
<para>the configuration word index (not address) </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>the word read (0xFFFFFFFFU if nonexistent endpoint or word) </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/drivers/pcie/controller.h" line="184" column="24" bodyfile="include/drivers/pcie/controller.h" bodystart="184" bodyend="191"/>
      </memberdef>
      <memberdef kind="function" id="group__pcie__controller__interface_1ga5cfe01762e5af8dc0cc5fbd550ff7e74" prot="public" static="yes" const="no" explicit="no" inline="yes" virt="non-virtual">
        <type>void</type>
        <definition>static void pcie_ctrl_conf_write</definition>
        <argsstring>(const struct device *dev, pcie_bdf_t bdf, unsigned int reg, uint32_t data)</argsstring>
        <name>pcie_ctrl_conf_write</name>
        <param>
          <type>const struct <ref refid="structdevice" kindref="compound">device</ref> *</type>
          <declname>dev</declname>
        </param>
        <param>
          <type><ref refid="drivers_2pcie_2pcie_8h_1a84bb3c734945ebaee0e9801495eebe90" kindref="member">pcie_bdf_t</ref></type>
          <declname>bdf</declname>
        </param>
        <param>
          <type><ref refid="lib_2libc_2minimal_2include_2sys_2types_8h_1a4089fb16419d359081465355db05f846" kindref="member">unsigned</ref> int</type>
          <declname>reg</declname>
        </param>
        <param>
          <type><ref refid="stdint_8h_1a0a8582351ac627ee8bde2973c825e47f" kindref="member">uint32_t</ref></type>
          <declname>data</declname>
        </param>
        <briefdescription>
<para>Write a 32-bit word to an endpoint&apos;s configuration space. </para>
        </briefdescription>
        <detaileddescription>
<para>Write a 32-bit word to an endpoint&apos;s configuration space with the PCI Express Controller configuration space access method (I/O port, memory mapped or custom method)</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>dev</parametername>
</parameternamelist>
<parameterdescription>
<para>PCI Express Controller device pointer </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bdf</parametername>
</parameternamelist>
<parameterdescription>
<para>PCI(e) endpoint </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>reg</parametername>
</parameternamelist>
<parameterdescription>
<para>the configuration word index (not address) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>data</parametername>
</parameternamelist>
<parameterdescription>
<para>the value to write </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/drivers/pcie/controller.h" line="204" column="20" bodyfile="include/drivers/pcie/controller.h" bodystart="204" bodyend="211"/>
      </memberdef>
      <memberdef kind="function" id="group__pcie__controller__interface_1ga1de030e2e8b07509d75de5a348297f42" prot="public" static="yes" const="no" explicit="no" inline="yes" virt="non-virtual">
        <type><ref refid="stdbool_8h_1abb452686968e48b67397da5f97445f5b" kindref="member">bool</ref></type>
        <definition>static bool pcie_ctrl_region_allocate</definition>
        <argsstring>(const struct device *dev, pcie_bdf_t bdf, bool mem, bool mem64, size_t bar_size, uintptr_t *bar_bus_addr)</argsstring>
        <name>pcie_ctrl_region_allocate</name>
        <param>
          <type>const struct <ref refid="structdevice" kindref="compound">device</ref> *</type>
          <declname>dev</declname>
        </param>
        <param>
          <type><ref refid="drivers_2pcie_2pcie_8h_1a84bb3c734945ebaee0e9801495eebe90" kindref="member">pcie_bdf_t</ref></type>
          <declname>bdf</declname>
        </param>
        <param>
          <type><ref refid="stdbool_8h_1abb452686968e48b67397da5f97445f5b" kindref="member">bool</ref></type>
          <declname>mem</declname>
        </param>
        <param>
          <type><ref refid="stdbool_8h_1abb452686968e48b67397da5f97445f5b" kindref="member">bool</ref></type>
          <declname>mem64</declname>
        </param>
        <param>
          <type>size_t</type>
          <declname>bar_size</declname>
        </param>
        <param>
          <type><ref refid="stdint_8h_1a4788399d1d0b37ccf098a7da82254808" kindref="member">uintptr_t</ref> *</type>
          <declname>bar_bus_addr</declname>
        </param>
        <briefdescription>
<para>Allocate a memory region subset for an endpoint Base Address Register. </para>
        </briefdescription>
        <detaileddescription>
<para>When enumerating PCIe Endpoints, Type0 endpoints can require up to 6 memory zones via the Base Address Registers from I/O or Memory types.</para>
<para>This call allocates such zone in the PCI Express Controller memory regions if such region is available and space is still available.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>dev</parametername>
</parameternamelist>
<parameterdescription>
<para>PCI Express Controller device pointer </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bdf</parametername>
</parameternamelist>
<parameterdescription>
<para>PCI(e) endpoint </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>mem</parametername>
</parameternamelist>
<parameterdescription>
<para>True if the BAR is of memory type </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>mem64</parametername>
</parameternamelist>
<parameterdescription>
<para>True if the BAR is of 64bit memory type </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bar_size</parametername>
</parameternamelist>
<parameterdescription>
<para>Size in bytes of the Base Address Register as returned by HW </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bar_bus_addr</parametername>
</parameternamelist>
<parameterdescription>
<para>bus-centric address allocated to be written in the BAR register </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>True if allocation was possible, False if allocation failed </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/drivers/pcie/controller.h" line="230" column="20" bodyfile="include/drivers/pcie/controller.h" bodystart="230" bodyend="238"/>
      </memberdef>
      <memberdef kind="function" id="group__pcie__controller__interface_1gae7c109ca138adfd906fef5b6f3dca385" prot="public" static="yes" const="no" explicit="no" inline="yes" virt="non-virtual">
        <type><ref refid="stdbool_8h_1abb452686968e48b67397da5f97445f5b" kindref="member">bool</ref></type>
        <definition>static bool pcie_ctrl_region_get_allocate_base</definition>
        <argsstring>(const struct device *dev, pcie_bdf_t bdf, bool mem, bool mem64, size_t align, uintptr_t *bar_base_addr)</argsstring>
        <name>pcie_ctrl_region_get_allocate_base</name>
        <param>
          <type>const struct <ref refid="structdevice" kindref="compound">device</ref> *</type>
          <declname>dev</declname>
        </param>
        <param>
          <type><ref refid="drivers_2pcie_2pcie_8h_1a84bb3c734945ebaee0e9801495eebe90" kindref="member">pcie_bdf_t</ref></type>
          <declname>bdf</declname>
        </param>
        <param>
          <type><ref refid="stdbool_8h_1abb452686968e48b67397da5f97445f5b" kindref="member">bool</ref></type>
          <declname>mem</declname>
        </param>
        <param>
          <type><ref refid="stdbool_8h_1abb452686968e48b67397da5f97445f5b" kindref="member">bool</ref></type>
          <declname>mem64</declname>
        </param>
        <param>
          <type>size_t</type>
          <declname>align</declname>
        </param>
        <param>
          <type><ref refid="stdint_8h_1a4788399d1d0b37ccf098a7da82254808" kindref="member">uintptr_t</ref> *</type>
          <declname>bar_base_addr</declname>
        </param>
        <briefdescription>
<para>Function called to get the current allocation base of a memory region subset for an endpoint Base Address Register. </para>
        </briefdescription>
        <detaileddescription>
<para>When enumerating PCIe Endpoints, Type1 bridge endpoints requires a range of memory allocated by all endpoints in the bridged bus.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>dev</parametername>
</parameternamelist>
<parameterdescription>
<para>PCI Express Controller device pointer </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bdf</parametername>
</parameternamelist>
<parameterdescription>
<para>PCI(e) endpoint </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>mem</parametername>
</parameternamelist>
<parameterdescription>
<para>True if the BAR is of memory type </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>mem64</parametername>
</parameternamelist>
<parameterdescription>
<para>True if the BAR is of 64bit memory type </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>align</parametername>
</parameternamelist>
<parameterdescription>
<para>size to take in account for alignment </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bar_base_addr</parametername>
</parameternamelist>
<parameterdescription>
<para>bus-centric address allocation base </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>True if allocation was possible, False if allocation failed </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/drivers/pcie/controller.h" line="255" column="20" bodyfile="include/drivers/pcie/controller.h" bodystart="255" bodyend="263"/>
      </memberdef>
      <memberdef kind="function" id="group__pcie__controller__interface_1gae6fa104ea2cc85912ebb1cfe0a1a3ddf" prot="public" static="yes" const="no" explicit="no" inline="yes" virt="non-virtual">
        <type><ref refid="stdbool_8h_1abb452686968e48b67397da5f97445f5b" kindref="member">bool</ref></type>
        <definition>static bool pcie_ctrl_region_translate</definition>
        <argsstring>(const struct device *dev, pcie_bdf_t bdf, bool mem, bool mem64, uintptr_t bar_bus_addr, uintptr_t *bar_addr)</argsstring>
        <name>pcie_ctrl_region_translate</name>
        <param>
          <type>const struct <ref refid="structdevice" kindref="compound">device</ref> *</type>
          <declname>dev</declname>
        </param>
        <param>
          <type><ref refid="drivers_2pcie_2pcie_8h_1a84bb3c734945ebaee0e9801495eebe90" kindref="member">pcie_bdf_t</ref></type>
          <declname>bdf</declname>
        </param>
        <param>
          <type><ref refid="stdbool_8h_1abb452686968e48b67397da5f97445f5b" kindref="member">bool</ref></type>
          <declname>mem</declname>
        </param>
        <param>
          <type><ref refid="stdbool_8h_1abb452686968e48b67397da5f97445f5b" kindref="member">bool</ref></type>
          <declname>mem64</declname>
        </param>
        <param>
          <type><ref refid="stdint_8h_1a4788399d1d0b37ccf098a7da82254808" kindref="member">uintptr_t</ref></type>
          <declname>bar_bus_addr</declname>
        </param>
        <param>
          <type><ref refid="stdint_8h_1a4788399d1d0b37ccf098a7da82254808" kindref="member">uintptr_t</ref> *</type>
          <declname>bar_addr</declname>
        </param>
        <briefdescription>
<para>Translate an endpoint Base Address Register bus-centric address into Physical address. </para>
        </briefdescription>
        <detaileddescription>
<para>When enumerating PCIe Endpoints, Type0 endpoints can require up to 6 memory zones via the Base Address Registers from I/O or Memory types.</para>
<para>The bus-centric address set in this BAR register is not necessarely accessible from the CPU, thus must be translated by using the PCI Express Controller memory regions translation ranges to permit mapping from the CPU.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>dev</parametername>
</parameternamelist>
<parameterdescription>
<para>PCI Express Controller device pointer </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bdf</parametername>
</parameternamelist>
<parameterdescription>
<para>PCI(e) endpoint </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>mem</parametername>
</parameternamelist>
<parameterdescription>
<para>True if the BAR is of memory type </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>mem64</parametername>
</parameternamelist>
<parameterdescription>
<para>True if the BAR is of 64bit memory type </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bar_bus_addr</parametername>
</parameternamelist>
<parameterdescription>
<para>bus-centric address written in the BAR register </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>bar_addr</parametername>
</parameternamelist>
<parameterdescription>
<para>CPU-centric address translated from the bus-centric address </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>True if translation was possible, False if translation failed </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/drivers/pcie/controller.h" line="283" column="20" bodyfile="include/drivers/pcie/controller.h" bodystart="283" bodyend="296"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
<para>Public APIs for the PCIe Controllers drivers. </para>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="8"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(c)<sp/>2021<sp/>BayLibre,<sp/>SAS</highlight></codeline>
<codeline lineno="9"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="10"><highlight class="comment"><sp/>*<sp/>SPDX-License-Identifier:<sp/>Apache-2.0</highlight></codeline>
<codeline lineno="11"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>ZEPHYR_INCLUDE_DRIVERS_PCIE_CONTROLLERS_H_</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>ZEPHYR_INCLUDE_DRIVERS_PCIE_CONTROLLERS_H_</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;<ref refid="include_2zephyr_2types_8h" kindref="compound">zephyr/types.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;device.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>__cplusplus</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;C&quot;</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight></codeline>
<codeline lineno="40" refid="group__pcie__controller__interface_1gac3d0f7e90bcc30996ce23324d2d7356a" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/><ref refid="stdint_8h_1a0a8582351ac627ee8bde2973c825e47f" kindref="member">uint32_t</ref><sp/>(*<ref refid="group__pcie__controller__interface_1gac3d0f7e90bcc30996ce23324d2d7356a" kindref="member">pcie_ctrl_conf_read_t</ref>)(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structdevice" kindref="compound">device</ref><sp/>*dev,<sp/><ref refid="drivers_2pcie_2pcie_8h_1a84bb3c734945ebaee0e9801495eebe90" kindref="member">pcie_bdf_t</ref><sp/>bdf,</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="mem__heap_2shared__multi__heap_2src_2main_8c_1a698b4ae5d990c4030b61afb7e057cb03" kindref="member">reg</ref>);</highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight></codeline>
<codeline lineno="54" refid="group__pcie__controller__interface_1ga3241acc7de4af2b73cf3f47a25349109" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/>void<sp/>(*<ref refid="group__pcie__controller__interface_1ga3241acc7de4af2b73cf3f47a25349109" kindref="member">pcie_ctrl_conf_write_t</ref>)(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structdevice" kindref="compound">device</ref><sp/>*dev,<sp/><ref refid="drivers_2pcie_2pcie_8h_1a84bb3c734945ebaee0e9801495eebe90" kindref="member">pcie_bdf_t</ref><sp/>bdf,</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="mem__heap_2shared__multi__heap_2src_2main_8c_1a698b4ae5d990c4030b61afb7e057cb03" kindref="member">reg</ref>,<sp/><ref refid="stdint_8h_1a0a8582351ac627ee8bde2973c825e47f" kindref="member">uint32_t</ref><sp/><ref refid="test__fifo__contexts_8c_1a8b1feab52ee372b1ee1297129329eaad" kindref="member">data</ref>);</highlight></codeline>
<codeline lineno="56"><highlight class="normal"></highlight></codeline>
<codeline lineno="74" refid="group__pcie__controller__interface_1ga62ce18e7495256c148168b773eabd37d" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/><ref refid="stdbool_8h_1abb452686968e48b67397da5f97445f5b" kindref="member">bool</ref><sp/>(*<ref refid="group__pcie__controller__interface_1ga62ce18e7495256c148168b773eabd37d" kindref="member">pcie_ctrl_region_allocate_t</ref>)(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structdevice" kindref="compound">device</ref><sp/>*dev,<sp/><ref refid="drivers_2pcie_2pcie_8h_1a84bb3c734945ebaee0e9801495eebe90" kindref="member">pcie_bdf_t</ref><sp/>bdf,</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>mem,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>mem64,<sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>bar_size,</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="stdint_8h_1a4788399d1d0b37ccf098a7da82254808" kindref="member">uintptr_t</ref><sp/>*bar_bus_addr);</highlight></codeline>
<codeline lineno="77"><highlight class="normal"></highlight></codeline>
<codeline lineno="93" refid="group__pcie__controller__interface_1gaa9d5bd27c841e36f65e65dec0b057e9a" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/><ref refid="stdbool_8h_1abb452686968e48b67397da5f97445f5b" kindref="member">bool</ref><sp/>(*<ref refid="group__pcie__controller__interface_1gaa9d5bd27c841e36f65e65dec0b057e9a" kindref="member">pcie_ctrl_region_get_allocate_base_t</ref>)(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structdevice" kindref="compound">device</ref><sp/>*dev,<sp/><ref refid="drivers_2pcie_2pcie_8h_1a84bb3c734945ebaee0e9801495eebe90" kindref="member">pcie_bdf_t</ref><sp/>bdf,</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>mem,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>mem64,<sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>align,</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="stdint_8h_1a4788399d1d0b37ccf098a7da82254808" kindref="member">uintptr_t</ref><sp/>*bar_base_addr);</highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight></codeline>
<codeline lineno="116" refid="group__pcie__controller__interface_1gab144356b1c3ec3754aae0008634f2d2f" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/><ref refid="stdbool_8h_1abb452686968e48b67397da5f97445f5b" kindref="member">bool</ref><sp/>(*<ref refid="group__pcie__controller__interface_1gab144356b1c3ec3754aae0008634f2d2f" kindref="member">pcie_ctrl_region_translate_t</ref>)(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structdevice" kindref="compound">device</ref><sp/>*dev,<sp/><ref refid="drivers_2pcie_2pcie_8h_1a84bb3c734945ebaee0e9801495eebe90" kindref="member">pcie_bdf_t</ref><sp/>bdf,</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>mem,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>mem64,<sp/><ref refid="stdint_8h_1a4788399d1d0b37ccf098a7da82254808" kindref="member">uintptr_t</ref><sp/>bar_bus_addr,</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="stdint_8h_1a4788399d1d0b37ccf098a7da82254808" kindref="member">uintptr_t</ref><sp/>*bar_addr);</highlight></codeline>
<codeline lineno="119"><highlight class="normal"></highlight></codeline>
<codeline lineno="132" refid="group__pcie__controller__interface_1gaa16b59c39f273a654b72d9e209f3ba2e" refkind="member"><highlight class="normal"><ref refid="stdint_8h_1a0a8582351ac627ee8bde2973c825e47f" kindref="member">uint32_t</ref><sp/><ref refid="group__pcie__controller__interface_1gaa16b59c39f273a654b72d9e209f3ba2e" kindref="member">pcie_generic_ctrl_conf_read</ref>(<ref refid="sys_2sys__io_8h_1a7bcfa789a44940bccc5b9b98642744b0" kindref="member">mm_reg_t</ref><sp/>cfg_addr,<sp/><ref refid="drivers_2pcie_2pcie_8h_1a84bb3c734945ebaee0e9801495eebe90" kindref="member">pcie_bdf_t</ref><sp/>bdf,<sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="mem__heap_2shared__multi__heap_2src_2main_8c_1a698b4ae5d990c4030b61afb7e057cb03" kindref="member">reg</ref>);</highlight></codeline>
<codeline lineno="133"><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"></highlight></codeline>
<codeline lineno="147" refid="group__pcie__controller__interface_1ga709ecedbd0585b4eb17fc2f5923a8f61" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__pcie__controller__interface_1ga709ecedbd0585b4eb17fc2f5923a8f61" kindref="member">pcie_generic_ctrl_conf_write</ref>(<ref refid="sys_2sys__io_8h_1a7bcfa789a44940bccc5b9b98642744b0" kindref="member">mm_reg_t</ref><sp/>cfg_addr,<sp/><ref refid="drivers_2pcie_2pcie_8h_1a84bb3c734945ebaee0e9801495eebe90" kindref="member">pcie_bdf_t</ref><sp/>bdf,</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="mem__heap_2shared__multi__heap_2src_2main_8c_1a698b4ae5d990c4030b61afb7e057cb03" kindref="member">reg</ref>,<sp/><ref refid="stdint_8h_1a0a8582351ac627ee8bde2973c825e47f" kindref="member">uint32_t</ref><sp/><ref refid="test__fifo__contexts_8c_1a8b1feab52ee372b1ee1297129329eaad" kindref="member">data</ref>);</highlight></codeline>
<codeline lineno="149"><highlight class="normal"></highlight></codeline>
<codeline lineno="160" refid="group__pcie__controller__interface_1ga75910ea4255a740b57e35a596a90b7bb" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__pcie__controller__interface_1ga75910ea4255a740b57e35a596a90b7bb" kindref="member">pcie_generic_ctrl_enumerate</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="structdevice" kindref="compound">device</ref><sp/>*dev,<sp/><ref refid="drivers_2pcie_2pcie_8h_1a84bb3c734945ebaee0e9801495eebe90" kindref="member">pcie_bdf_t</ref><sp/>bdf_start);</highlight></codeline>
<codeline lineno="161"><highlight class="normal"></highlight></codeline>
<codeline lineno="165" refid="structpcie__ctrl__driver__api" refkind="compound"><highlight class="normal">__subsystem<sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structpcie__ctrl__driver__api" kindref="compound">pcie_ctrl_driver_api</ref><sp/>{</highlight></codeline>
<codeline lineno="166" refid="structpcie__ctrl__driver__api_1a20c1faf02c71e88da165c889550a76ae" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__pcie__controller__interface_1gac3d0f7e90bcc30996ce23324d2d7356a" kindref="member">pcie_ctrl_conf_read_t</ref><sp/><ref refid="structpcie__ctrl__driver__api_1a20c1faf02c71e88da165c889550a76ae" kindref="member">conf_read</ref>;</highlight></codeline>
<codeline lineno="167" refid="structpcie__ctrl__driver__api_1a46fa0fd3a759fe2dc960546b49c53979" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__pcie__controller__interface_1ga3241acc7de4af2b73cf3f47a25349109" kindref="member">pcie_ctrl_conf_write_t</ref><sp/><ref refid="structpcie__ctrl__driver__api_1a46fa0fd3a759fe2dc960546b49c53979" kindref="member">conf_write</ref>;</highlight></codeline>
<codeline lineno="168" refid="structpcie__ctrl__driver__api_1a46191bf9aad7ab7ac1319918873b8b29" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__pcie__controller__interface_1ga62ce18e7495256c148168b773eabd37d" kindref="member">pcie_ctrl_region_allocate_t</ref><sp/><ref refid="structpcie__ctrl__driver__api_1a46191bf9aad7ab7ac1319918873b8b29" kindref="member">region_allocate</ref>;</highlight></codeline>
<codeline lineno="169" refid="structpcie__ctrl__driver__api_1a5d7687cd738bd86a785fc281781d2759" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__pcie__controller__interface_1gaa9d5bd27c841e36f65e65dec0b057e9a" kindref="member">pcie_ctrl_region_get_allocate_base_t</ref><sp/><ref refid="structpcie__ctrl__driver__api_1a5d7687cd738bd86a785fc281781d2759" kindref="member">region_get_allocate_base</ref>;</highlight></codeline>
<codeline lineno="170" refid="structpcie__ctrl__driver__api_1a71a4d13492bb3098bdb2c0e0ff7b94cf" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__pcie__controller__interface_1gab144356b1c3ec3754aae0008634f2d2f" kindref="member">pcie_ctrl_region_translate_t</ref><sp/><ref refid="structpcie__ctrl__driver__api_1a71a4d13492bb3098bdb2c0e0ff7b94cf" kindref="member">region_translate</ref>;</highlight></codeline>
<codeline lineno="171"><highlight class="normal">};</highlight></codeline>
<codeline lineno="172"><highlight class="normal"></highlight></codeline>
<codeline lineno="184" refid="group__pcie__controller__interface_1ga1d978b8075191d6e571349684c731a43" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/><ref refid="stdint_8h_1a0a8582351ac627ee8bde2973c825e47f" kindref="member">uint32_t</ref><sp/><ref refid="group__pcie__controller__interface_1ga1d978b8075191d6e571349684c731a43" kindref="member">pcie_ctrl_conf_read</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="structdevice" kindref="compound">device</ref><sp/>*dev,<sp/><ref refid="drivers_2pcie_2pcie_8h_1a84bb3c734945ebaee0e9801495eebe90" kindref="member">pcie_bdf_t</ref><sp/>bdf,</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="mem__heap_2shared__multi__heap_2src_2main_8c_1a698b4ae5d990c4030b61afb7e057cb03" kindref="member">reg</ref>)</highlight></codeline>
<codeline lineno="186"><highlight class="normal">{</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structpcie__ctrl__driver__api" kindref="compound">pcie_ctrl_driver_api</ref><sp/>*api<sp/>=</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structpcie__ctrl__driver__api" kindref="compound">pcie_ctrl_driver_api</ref><sp/>*)dev-&gt;<ref refid="structdevice_1a4a2e6a2cfeb6efed7d5383c33458f46d" kindref="member">api</ref>;</highlight></codeline>
<codeline lineno="189"><highlight class="normal"></highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>api-&gt;<ref refid="structpcie__ctrl__driver__api_1a20c1faf02c71e88da165c889550a76ae" kindref="member">conf_read</ref>(dev,<sp/>bdf,<sp/><ref refid="mem__heap_2shared__multi__heap_2src_2main_8c_1a698b4ae5d990c4030b61afb7e057cb03" kindref="member">reg</ref>);</highlight></codeline>
<codeline lineno="191"><highlight class="normal">}</highlight></codeline>
<codeline lineno="192"><highlight class="normal"></highlight></codeline>
<codeline lineno="204" refid="group__pcie__controller__interface_1ga5cfe01762e5af8dc0cc5fbd550ff7e74" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__pcie__controller__interface_1ga5cfe01762e5af8dc0cc5fbd550ff7e74" kindref="member">pcie_ctrl_conf_write</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="structdevice" kindref="compound">device</ref><sp/>*dev,<sp/><ref refid="drivers_2pcie_2pcie_8h_1a84bb3c734945ebaee0e9801495eebe90" kindref="member">pcie_bdf_t</ref><sp/>bdf,</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="mem__heap_2shared__multi__heap_2src_2main_8c_1a698b4ae5d990c4030b61afb7e057cb03" kindref="member">reg</ref>,<sp/><ref refid="stdint_8h_1a0a8582351ac627ee8bde2973c825e47f" kindref="member">uint32_t</ref><sp/><ref refid="test__fifo__contexts_8c_1a8b1feab52ee372b1ee1297129329eaad" kindref="member">data</ref>)</highlight></codeline>
<codeline lineno="206"><highlight class="normal">{</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structpcie__ctrl__driver__api" kindref="compound">pcie_ctrl_driver_api</ref><sp/>*api<sp/>=</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structpcie__ctrl__driver__api" kindref="compound">pcie_ctrl_driver_api</ref><sp/>*)dev-&gt;<ref refid="structdevice_1a4a2e6a2cfeb6efed7d5383c33458f46d" kindref="member">api</ref>;</highlight></codeline>
<codeline lineno="209"><highlight class="normal"></highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>api-&gt;<ref refid="structpcie__ctrl__driver__api_1a46fa0fd3a759fe2dc960546b49c53979" kindref="member">conf_write</ref>(dev,<sp/>bdf,<sp/><ref refid="mem__heap_2shared__multi__heap_2src_2main_8c_1a698b4ae5d990c4030b61afb7e057cb03" kindref="member">reg</ref>,<sp/><ref refid="test__fifo__contexts_8c_1a8b1feab52ee372b1ee1297129329eaad" kindref="member">data</ref>);</highlight></codeline>
<codeline lineno="211"><highlight class="normal">}</highlight></codeline>
<codeline lineno="212"><highlight class="normal"></highlight></codeline>
<codeline lineno="230" refid="group__pcie__controller__interface_1ga1de030e2e8b07509d75de5a348297f42" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="group__pcie__controller__interface_1ga1de030e2e8b07509d75de5a348297f42" kindref="member">pcie_ctrl_region_allocate</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="structdevice" kindref="compound">device</ref><sp/>*dev,<sp/><ref refid="drivers_2pcie_2pcie_8h_1a84bb3c734945ebaee0e9801495eebe90" kindref="member">pcie_bdf_t</ref><sp/>bdf,</highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>mem,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>mem64,<sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>bar_size,</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="stdint_8h_1a4788399d1d0b37ccf098a7da82254808" kindref="member">uintptr_t</ref><sp/>*bar_bus_addr)</highlight></codeline>
<codeline lineno="233"><highlight class="normal">{</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structpcie__ctrl__driver__api" kindref="compound">pcie_ctrl_driver_api</ref><sp/>*api<sp/>=</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structpcie__ctrl__driver__api" kindref="compound">pcie_ctrl_driver_api</ref><sp/>*)dev-&gt;<ref refid="structdevice_1a4a2e6a2cfeb6efed7d5383c33458f46d" kindref="member">api</ref>;</highlight></codeline>
<codeline lineno="236"><highlight class="normal"></highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>api-&gt;<ref refid="structpcie__ctrl__driver__api_1a46191bf9aad7ab7ac1319918873b8b29" kindref="member">region_allocate</ref>(dev,<sp/>bdf,<sp/>mem,<sp/>mem64,<sp/>bar_size,<sp/>bar_bus_addr);</highlight></codeline>
<codeline lineno="238"><highlight class="normal">}</highlight></codeline>
<codeline lineno="239"><highlight class="normal"></highlight></codeline>
<codeline lineno="255" refid="group__pcie__controller__interface_1gae7c109ca138adfd906fef5b6f3dca385" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="group__pcie__controller__interface_1gae7c109ca138adfd906fef5b6f3dca385" kindref="member">pcie_ctrl_region_get_allocate_base</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="structdevice" kindref="compound">device</ref><sp/>*dev,<sp/><ref refid="drivers_2pcie_2pcie_8h_1a84bb3c734945ebaee0e9801495eebe90" kindref="member">pcie_bdf_t</ref><sp/>bdf,</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>mem,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>mem64,<sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>align,</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="stdint_8h_1a4788399d1d0b37ccf098a7da82254808" kindref="member">uintptr_t</ref><sp/>*bar_base_addr)</highlight></codeline>
<codeline lineno="258"><highlight class="normal">{</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structpcie__ctrl__driver__api" kindref="compound">pcie_ctrl_driver_api</ref><sp/>*api<sp/>=</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structpcie__ctrl__driver__api" kindref="compound">pcie_ctrl_driver_api</ref><sp/>*)dev-&gt;<ref refid="structdevice_1a4a2e6a2cfeb6efed7d5383c33458f46d" kindref="member">api</ref>;</highlight></codeline>
<codeline lineno="261"><highlight class="normal"></highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>api-&gt;<ref refid="structpcie__ctrl__driver__api_1a5d7687cd738bd86a785fc281781d2759" kindref="member">region_get_allocate_base</ref>(dev,<sp/>bdf,<sp/>mem,<sp/>mem64,<sp/>align,<sp/>bar_base_addr);</highlight></codeline>
<codeline lineno="263"><highlight class="normal">}</highlight></codeline>
<codeline lineno="264"><highlight class="normal"></highlight></codeline>
<codeline lineno="283" refid="group__pcie__controller__interface_1gae6fa104ea2cc85912ebb1cfe0a1a3ddf" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="group__pcie__controller__interface_1gae6fa104ea2cc85912ebb1cfe0a1a3ddf" kindref="member">pcie_ctrl_region_translate</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="structdevice" kindref="compound">device</ref><sp/>*dev,<sp/><ref refid="drivers_2pcie_2pcie_8h_1a84bb3c734945ebaee0e9801495eebe90" kindref="member">pcie_bdf_t</ref><sp/>bdf,</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>mem,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>mem64,<sp/><ref refid="stdint_8h_1a4788399d1d0b37ccf098a7da82254808" kindref="member">uintptr_t</ref><sp/>bar_bus_addr,</highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="stdint_8h_1a4788399d1d0b37ccf098a7da82254808" kindref="member">uintptr_t</ref><sp/>*bar_addr)</highlight></codeline>
<codeline lineno="286"><highlight class="normal">{</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structpcie__ctrl__driver__api" kindref="compound">pcie_ctrl_driver_api</ref><sp/>*api<sp/>=</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structpcie__ctrl__driver__api" kindref="compound">pcie_ctrl_driver_api</ref><sp/>*)dev-&gt;<ref refid="structdevice_1a4a2e6a2cfeb6efed7d5383c33458f46d" kindref="member">api</ref>;</highlight></codeline>
<codeline lineno="289"><highlight class="normal"></highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>(!api-&gt;<ref refid="structpcie__ctrl__driver__api_1a71a4d13492bb3098bdb2c0e0ff7b94cf" kindref="member">region_translate</ref>)<sp/>{</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*bar_addr<sp/>=<sp/>bar_bus_addr;</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>api-&gt;<ref refid="structpcie__ctrl__driver__api_1a71a4d13492bb3098bdb2c0e0ff7b94cf" kindref="member">region_translate</ref>(dev,<sp/>bdf,<sp/>mem,<sp/>mem64,<sp/>bar_bus_addr,<sp/>bar_addr);</highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="296"><highlight class="normal">}</highlight></codeline>
<codeline lineno="297"><highlight class="normal"></highlight></codeline>
<codeline lineno="300" refid="structpcie__ctrl__config" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structpcie__ctrl__config" kindref="compound">pcie_ctrl_config</ref><sp/>{</highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Configuration<sp/>space<sp/>physical<sp/>address<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="302" refid="structpcie__ctrl__config_1a3de0f32aaf3ddb377897974dfdfe67bd" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="stdint_8h_1a4788399d1d0b37ccf098a7da82254808" kindref="member">uintptr_t</ref><sp/><ref refid="structpcie__ctrl__config_1a3de0f32aaf3ddb377897974dfdfe67bd" kindref="member">cfg_addr</ref>;</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Configuration<sp/>space<sp/>physical<sp/>size<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="304" refid="structpcie__ctrl__config_1adb1b8ed76f3f994f2da72c8e8b40d4f0" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/><ref refid="structpcie__ctrl__config_1adb1b8ed76f3f994f2da72c8e8b40d4f0" kindref="member">cfg_size</ref>;</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>BAR<sp/>regions<sp/>translation<sp/>ranges<sp/>count<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="306" refid="structpcie__ctrl__config_1a4a620f03546490b65ba4d097329928e8" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/><ref refid="structpcie__ctrl__config_1a4a620f03546490b65ba4d097329928e8" kindref="member">ranges_count</ref>;</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>BAR<sp/>regions<sp/>translation<sp/>ranges<sp/>table<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Flags<sp/>as<sp/>defined<sp/>in<sp/>the<sp/>PCI<sp/>Bus<sp/>Binding<sp/>to<sp/>IEEE<sp/>Std<sp/>1275-1994<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="310" refid="structpcie__ctrl__config_1a90e48aaca78a8284caa449ee3972d87b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="stdint_8h_1a0a8582351ac627ee8bde2973c825e47f" kindref="member">uint32_t</ref><sp/><ref refid="structpcie__ctrl__config_1a90e48aaca78a8284caa449ee3972d87b" kindref="member">flags</ref>;</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>bus-centric<sp/>offset<sp/>from<sp/>the<sp/>start<sp/>of<sp/>the<sp/>region<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="312" refid="structpcie__ctrl__config_1a45f9fa1124aa64bbfd7ff2c5519cbb4b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="stdint_8h_1a4788399d1d0b37ccf098a7da82254808" kindref="member">uintptr_t</ref><sp/><ref refid="structpcie__ctrl__config_1a45f9fa1124aa64bbfd7ff2c5519cbb4b" kindref="member">pcie_bus_addr</ref>;</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>CPU-centric<sp/>offset<sp/>from<sp/>the<sp/>start<sp/>of<sp/>the<sp/>region<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="314" refid="structpcie__ctrl__config_1ace0b3505edc0aff3678a91b630244963" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="stdint_8h_1a4788399d1d0b37ccf098a7da82254808" kindref="member">uintptr_t</ref><sp/><ref refid="structpcie__ctrl__config_1ace0b3505edc0aff3678a91b630244963" kindref="member">host_map_addr</ref>;</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>region<sp/>size<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="316" refid="structpcie__ctrl__config_1ae3dd8d3d72a1597ee135b49e46e31bec" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/><ref refid="structpcie__ctrl__config_1ae3dd8d3d72a1597ee135b49e46e31bec" kindref="member">map_length</ref>;</highlight></codeline>
<codeline lineno="317" refid="structpcie__ctrl__config_1a927f6a04995fae5f265638cac90bf0b6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/><ref refid="structpcie__ctrl__config_1a927f6a04995fae5f265638cac90bf0b6" kindref="member">ranges</ref>[];</highlight></codeline>
<codeline lineno="318"><highlight class="normal">};</highlight></codeline>
<codeline lineno="319"><highlight class="normal"></highlight></codeline>
<codeline lineno="320"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="321"><highlight class="comment"><sp/>*<sp/>Fills<sp/>the<sp/>pcie_ctrl_config.ranges<sp/>table<sp/>from<sp/>DT</highlight></codeline>
<codeline lineno="322"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="323" refid="group__pcie__controller__interface_1ga91525130b94b07187633abd1e017aa61" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>PCIE_RANGE_FORMAT(node_id,<sp/>idx)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\</highlight></codeline>
<codeline lineno="324"><highlight class="preprocessor">{<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\</highlight></codeline>
<codeline lineno="325"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.flags<sp/>=<sp/>DT_RANGES_CHILD_BUS_FLAGS_BY_IDX(node_id,<sp/>idx),<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\</highlight></codeline>
<codeline lineno="326"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.pcie_bus_addr<sp/>=<sp/>DT_RANGES_CHILD_BUS_ADDRESS_BY_IDX(node_id,<sp/>idx),<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\</highlight></codeline>
<codeline lineno="327"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.host_map_addr<sp/>=<sp/>DT_RANGES_PARENT_BUS_ADDRESS_BY_IDX(node_id,<sp/>idx),<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\</highlight></codeline>
<codeline lineno="328"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.map_length<sp/>=<sp/>DT_RANGES_LENGTH_BY_IDX(node_id,<sp/>idx),<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\</highlight></codeline>
<codeline lineno="329"><highlight class="preprocessor">},</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="330"><highlight class="normal"></highlight></codeline>
<codeline lineno="331"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>__cplusplus</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="332"><highlight class="normal">}</highlight></codeline>
<codeline lineno="333"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="334"><highlight class="normal"></highlight></codeline>
<codeline lineno="339"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>ZEPHYR_INCLUDE_DRIVERS_PCIE_CONTROLLERS_H_<sp/>*/</highlight><highlight class="preprocessor"></highlight></codeline>
    </programlisting>
    <location file="include/drivers/pcie/controller.h"/>
  </compounddef>
</doxygen>

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Monitor Network Traffic &mdash; Zephyr Project Documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script type="module" src="../../_static/js/dark-mode-toggle.min.mjs"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-831873-47"></script>
        <script src="../../_static/js/ga-tracker.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="Using with PlatformIO" href="../platformio/index.html" />
    <link rel="prev" title="Networking with QEMU and IEEE 802.15.4" href="qemu_802154_setup.html" />
  <meta name="color-scheme" content="dark light">
  
  <link rel="stylesheet" href="../../_static/css/light.css" type="text/css" media="(prefers-color-scheme: light)"/>
  <link rel="stylesheet" href="../../_static/css/dark.css" type="text/css" media="(prefers-color-scheme: dark)"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html">
            <img src="../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.0-rc3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Zephyr Project</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Release Versions</dt>
        
          <dd><a href="/">latest</a></dd>
        
          <dd><a href="/2.7.0/">2.7.0</a></dd>
        
          <dd><a href="/2.6.0/">2.6.0</a></dd>
        
          <dd><a href="/2.5.0/">2.5.0</a></dd>
        
          <dd><a href="/2.4.0/">2.4.0</a></dd>
        
          <dd><a href="/2.3.0/">2.3.0</a></dd>
        
          <dd><a href="/1.14.1/">1.14.1</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="/latest/zephyr.pdf">PDF</a></dd>
      </dl>
      <dl>
        <dt>zephyrproject.org Links</dt>
          <dd>
            <a href="https://www.zephyrproject.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/sdk-ng/releases">SDK</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/zephyr/releases">Releases</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development_process/index.html">Development and Contribution Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build/index.html">Build and Configuration Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../application/index.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">API Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User and Developer Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../beyond-GSG.html">Beyond the Getting Started Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../arch/index.html">Architecture-related Guides</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bluetooth/index.html">Bluetooth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../docs/index.html">Documentation Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../coccinelle.html">Coccinelle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code-relocation.html">Code And Data Relocation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../crypto/index.html">Cryptography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flash_debug/index.html">Flashing and Hardware Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debug_tools/index.html">Debugging and Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../device_mgmt/index.html">Device Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dts/index.html">Devicetree Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../env_vars.html">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pinctrl/index.html">Pin Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pm/index.html">Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../emulator/index.html">Peripheral and Hardware Emulators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules.html">Modules (External projects)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Networking</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="net-stack-architecture.html">Network Stack Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="networking-api-usage.html">Network Connectivity API</a></li>
<li class="toctree-l3"><a class="reference internal" href="networking_with_host.html">Networking with the host system</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Monitor Network Traffic</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#host-configuration">Host Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#zephyr-configuration">Zephyr Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#wireshark-configuration">Wireshark Configuration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../platformio/index.html">Using with PlatformIO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../portability/index.html">OS Abstraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../porting/index.html">Porting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../smf/index.html">State Machine Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../test/index.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tfm/index.html">Trusted Firmware-M</a></li>
<li class="toctree-l2"><a class="reference internal" href="../west/index.html">West (Zephyr’s meta-tool)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimizations/index.html">Optimizations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zephyr_cmake_package.html">Zephyr CMake Package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../samples/index.html">Samples and Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../boards/index.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/index.html">Release Notes</a></li>
</ul>

  
  <div class="toctree-wrapper compound">
    <p class="caption"><span class="caption-text">Reference</span></p>
    <ul>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/doxygen/html/index.html">API</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/kconfig/index.html">Kconfig Options</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/devicetree/bindings.html">Devicetree Bindings</a>
      </li>
      
    </ul>
  </div>
  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Zephyr Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Docs / Latest -->
  
  

  <li><a href="../../index.html">Docs / Latest</a> &raquo;</li>
  
     <li><a href="../index.html">User and Developer Guides</a> &raquo;</li>
  
     <li><a href="index.html">Networking</a> &raquo;</li>
  
  <li>Monitor Network Traffic</li>


  <li class="wy-breadcrumbs-aside">
    <dark-mode-toggle id="dark-mode-toggle" appearance="toggle" permanent="true"/>
  </li>
  <li class="wy-breadcrumbs-aside">
      
      
        <a href="https://github.com/zephyrproject-rtos/zephyr/blob/main/doc/guides/networking/network_monitoring.rst" class="fa fa-github"> Open on GitHub</a>
      
    
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="wy-alert wy-alert-danger">
     This is the documentation for the latest (main) development branch of
     Zephyr. If you are looking for the documentation of previous releases, use
     the drop-down menu on the left and select the desired version.
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="monitor-network-traffic">
<span id="network-monitoring"></span><h1>Monitor Network Traffic<a class="headerlink" href="#monitor-network-traffic" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#host-configuration" id="id1">Host Configuration</a></p></li>
<li><p><a class="reference internal" href="#zephyr-configuration" id="id2">Zephyr Configuration</a></p></li>
<li><p><a class="reference internal" href="#wireshark-configuration" id="id3">Wireshark Configuration</a></p></li>
</ul>
</div>
<p>It is useful to be able to monitor the network traffic especially when
debugging a connectivity issues or when developing new protocol support in
Zephyr. This page describes how to set up a way to capture network traffic so
that user is able to use Wireshark or similar tool in remote host to see the
network packets sent or received by a Zephyr device.</p>
<p>See also the <a class="reference internal" href="../../samples/net/capture/README.html#net-capture-sample"><span class="std std-ref">Network Packet Capture</span></a> sample application from the Zephyr
source distribution for configuration options that need to be enabled.</p>
<div class="section" id="host-configuration">
<h2><a class="toc-backref" href="#id1">Host Configuration</a><a class="headerlink" href="#host-configuration" title="Permalink to this headline">¶</a></h2>
<p>The instructions here describe how to setup a Linux host to capture Zephyr
network RX and TX traffic. Similar instructions should work also in other
operating systems.
On the Linux Host, fetch the Zephyr <code class="docutils literal notranslate"><span class="pre">net-tools</span></code> project, which is located
in a separate Git repository:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git clone https://github.com/zephyrproject-rtos/net-tools</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">net-tools</span></code> project provides a configure file to setup IP-to-IP tunnel
interface so that we can transfer monitoring data from Zephyr to host.</p>
<p>In terminal #1, type:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">./net-setup.sh -c zeth-tunnel.conf</span>
</pre></div>
</div>
<p>This script will create following IPIP tunnel interfaces:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Interface name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">zeth-ip6ip</span></code></p></td>
<td><p>IPv6-over-IPv4 tunnel</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">zeth-ipip</span></code></p></td>
<td><p>IPv4-over-IPv4 tunnel</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">zeth-ipip6</span></code></p></td>
<td><p>IPv4-over-IPv6 tunnel</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">zeth-ip6ip6</span></code></p></td>
<td><p>IPv6-over-IPv6 tunnel</p></td>
</tr>
</tbody>
</table>
<p>Zephyr will send captured network packets to one of these interfaces.
The actual interface will depend on how the capturing is configured.
You can then use Wireshark to monitor the proper network interface.</p>
<p>After the tunneling interfaces have been created, you can use for example
<code class="docutils literal notranslate"><span class="pre">net-capture.py</span></code> script from <code class="docutils literal notranslate"><span class="pre">net-tools</span></code> project to print or save the
captured network packets. The <code class="docutils literal notranslate"><span class="pre">net-capture.py</span></code> provides an UDP listener,
it can print the captured data to screen and optionally can also save the
data to a pcap file.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>./net-capture.py -i zeth-ip6ip -w capture.pcap
<span class="go">[20210408Z14:33:08.959589] Ether / IP / ICMP 192.0.2.1 &gt; 192.0.2.2 echo-request 0 / Raw</span>
<span class="go">[20210408Z14:33:08.976178] Ether / IP / ICMP 192.0.2.2 &gt; 192.0.2.1 echo-reply 0 / Raw</span>
<span class="go">[20210408Z14:33:16.176303] Ether / IPv6 / ICMPv6 Echo Request (id: 0x9feb seq: 0x0)</span>
<span class="go">[20210408Z14:33:16.195326] Ether / IPv6 / ICMPv6 Echo Reply (id: 0x9feb seq: 0x0)</span>
<span class="go">[20210408Z14:33:21.194979] Ether / IPv6 / ICMPv6ND_NS / ICMPv6 Neighbor Discovery Option - Source Link-Layer Address 02:00:5e:00:53:3b</span>
<span class="go">[20210408Z14:33:21.217528] Ether / IPv6 / ICMPv6ND_NA / ICMPv6 Neighbor Discovery Option - Destination Link-Layer Address 00:00:5e:00:53:ff</span>
<span class="go">[20210408Z14:34:10.245408] Ether / IPv6 / UDP 2001:db8::2:47319 &gt; 2001:db8::1:4242 / Raw</span>
<span class="go">[20210408Z14:34:10.266542] Ether / IPv6 / UDP 2001:db8::1:4242 &gt; 2001:db8::2:47319 / Raw</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">net-capture.py</span></code> has following command line options:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Listen captured network data from Zephyr and save it optionally to pcap file.</span>
<span class="go">./net-capture.py \</span>
<span class="go">     -i | --interface &lt;network interface&gt;</span>
<span class="go">             Listen this inferface for the data</span>
<span class="go">     [-p | --port &lt;UDP port&gt;]</span>
<span class="go">             UDP port (default is 4242) where the capture data is received</span>
<span class="go">     [-q | --quiet]</span>
<span class="go">             Do not print packet information</span>
<span class="go">     [-t | --type &lt;L2 type of the data&gt;]</span>
<span class="go">             Scapy L2 type name of the UDP payload, default is Ether</span>
<span class="go">     [-w | --write &lt;pcap file name&gt;]</span>
<span class="go">             Write the received data to file in PCAP format</span>
</pre></div>
</div>
<p>Instead of the <code class="docutils literal notranslate"><span class="pre">net-capture.py</span></code> script, you can for example use <code class="docutils literal notranslate"><span class="pre">netcat</span></code>
to provide an UDP listener so that the host will not send port unreachable
message to Zephyr:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">nc -l -u 2001:db8:200::2 4242 &gt; /dev/null</span>
</pre></div>
</div>
<p>The IP address above is the inner tunnel endpoint, and can be changed and
it depends on how the Zephyr is configured. Zephyr will send UDP packets
containing the captured network packets to the configured IP tunnel, so we
need to terminate the network connection like this.</p>
</div>
<div class="section" id="zephyr-configuration">
<h2><a class="toc-backref" href="#id2">Zephyr Configuration</a><a class="headerlink" href="#zephyr-configuration" title="Permalink to this headline">¶</a></h2>
<p>In this example, we use <code class="docutils literal notranslate"><span class="pre">native_posix</span></code> board. You can also use any other board
that supports networking.</p>
<p>In terminal #3, type:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -b native_posix samples/net/capture -- -DCONFIG_NATIVE_UART_AUTOATTACH_DEFAULT_CMD=\&quot;&quot;gnome-terminal -- screen %s&quot;\&quot;</span>
</pre></div>
</div>
<p>To see the Zephyr console and shell, start Zephyr instance like this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">build/zephyr/zephyr.exe -attach_uart</span>
</pre></div>
</div>
<p>Any other application can be used too, just make sure that suitable
configuration options are enabled (see <code class="docutils literal notranslate"><span class="pre">samples/net/capture/prj.conf</span></code> file
for examples).</p>
<p>The network capture can be configured automatically if needed, but
currently the <code class="docutils literal notranslate"><span class="pre">capture</span></code> sample application does not do that. User has to use
<code class="docutils literal notranslate"><span class="pre">net-shell</span></code> to setup and enable the monitoring.</p>
<p>The network packet monitoring needs to be setup first. The <code class="docutils literal notranslate"><span class="pre">net-shell</span></code> has
<code class="docutils literal notranslate"><span class="pre">net</span> <span class="pre">capture</span> <span class="pre">setup</span></code> command for doing that. The command syntax is</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">net capture setup &lt;remote-ip-addr&gt; &lt;local-ip-addr&gt; &lt;peer-ip-addr&gt;</span>
<span class="go">     &lt;remote&gt; is the (outer) endpoint IP address</span>
<span class="go">     &lt;local&gt; is the (inner) local IP address</span>
<span class="go">     &lt;peer&gt; is the (inner) peer IP address</span>
<span class="go">     Local and Peer IP addresses can have UDP port number in them (optional)</span>
<span class="go">     like 198.0.51.2:9000 or [2001:db8:100::2]:4242</span>
</pre></div>
</div>
<p>In Zephyr console, type:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">net capture setup 192.0.2.2 2001:db8:200::1 2001:db8:200::2</span>
</pre></div>
</div>
<p>This command will create the tunneling interface. The <code class="docutils literal notranslate"><span class="pre">192.0.2.2</span></code> is the
remote host where the tunnel is terminated. The address is used to select
the local network interface where the tunneling interface is attached to.
The <code class="docutils literal notranslate"><span class="pre">2001:db8:200::1</span></code> tells the local IP address for the tunnel,
the <code class="docutils literal notranslate"><span class="pre">2001:db8:200::2</span></code> is the peer IP address where the captured network
packets are sent. The port numbers for UDP packet can be given in the
setup command like this for IPv6-over-IPv4 tunnel</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">net capture setup 192.0.2.2 [2001:db8:200::1]:9999 [2001:db8:200::2]:9998</span>
</pre></div>
</div>
<p>and like this for IPv4-over-IPv4 tunnel</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">net capture setup 192.0.2.2 198.51.100.1:9999 198.51.100.2:9998</span>
</pre></div>
</div>
<p>If the port number is omitted, then <code class="docutils literal notranslate"><span class="pre">4242</span></code> UDP port is used as a default.</p>
<p>The current monitoring configuration can be checked like this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>net capture
<span class="go">Network packet capture disabled</span>
<span class="go">                Capture  Tunnel</span>
<span class="go">Device          iface    iface   Local                  Peer</span>
<span class="go">NET_CAPTURE0    -        1      [2001:db8:200::1]:4242  [2001:db8:200::2]:4242</span>
</pre></div>
</div>
<p>which will print the current configuration. As we have not yet enabled
monitoring, the <code class="docutils literal notranslate"><span class="pre">Capture</span> <span class="pre">iface</span></code> is not set.</p>
<p>Then we need to enable the network packet monitoring like this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">net capture enable 2</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">2</span></code> tells the network interface which traffic we want to capture. In
this example, the <code class="docutils literal notranslate"><span class="pre">2</span></code> is the <code class="docutils literal notranslate"><span class="pre">native_posix</span></code> board Ethernet interface.
Note that we send the network traffic to the same interface that we are
monitoring in this example. The monitoring system avoids to capture already
captured network traffic as that would lead to recursion.
You can use <code class="docutils literal notranslate"><span class="pre">net</span> <span class="pre">iface</span></code> command to see what network interfaces are available.
Note that you cannot capture traffic from the tunnel interface as that would
cause recursion loop.
The captured network traffic can be sent to some other network interface
if configured so. Just set the <code class="docutils literal notranslate"><span class="pre">&lt;remote-ip-addr&gt;</span></code> option properly in
<code class="docutils literal notranslate"><span class="pre">net</span> <span class="pre">capture</span> <span class="pre">setup</span></code> so that the IP tunnel is attached to desired network
interface.
The capture status can be checked again like this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">uart:~$ </span>net capture
<span class="go">Network packet capture enabled</span>
<span class="go">                Capture  Tunnel</span>
<span class="go">Device          iface    iface   Local                  Peer</span>
<span class="go">NET_CAPTURE0    2        1      [2001:db8:200::1]:4242  [2001:db8:200::2]:4242</span>
</pre></div>
</div>
<p>After enabling the monitoring, the system will send captured (either received
or sent) network packets to the tunnel interface for further processing.</p>
<p>The monitoring can be disabled like this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">net capture disable</span>
</pre></div>
</div>
<p>which will turn currently running monitoring off. The monitoring setup can
be cleared like this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">net capture cleanup</span>
</pre></div>
</div>
<p>It is not necessary to use <code class="docutils literal notranslate"><span class="pre">net-shell</span></code> for configuring the monitoring.
The <a class="reference internal" href="../../reference/networking/capture.html#net-capture-interface"><span class="std std-ref">network capture API</span></a> functions can be called
by the application if needed.</p>
</div>
<div class="section" id="wireshark-configuration">
<h2><a class="toc-backref" href="#id3">Wireshark Configuration</a><a class="headerlink" href="#wireshark-configuration" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="https://www.wireshark.org/">Wireshark</a> tool can be used to monitor the
captured network traffic in a useful way.</p>
<p>You can monitor either the tunnel interfaces or the <code class="docutils literal notranslate"><span class="pre">zeth</span></code> interface.
In order to see the actual captured data inside an UDP packet,
see <a class="reference external" href="https://osqa-ask.wireshark.org/questions/28138/decoding-ethernet-encapsulated-in-tcp-or-udp/">Wireshark decapsulate UDP</a> document for instructions.</p>
</div>
</div>


           </div>
          </div>

          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../copyright.html">Copyright</a> 2015-2021 Zephyr Project members and individual contributors.
      <span class="lastupdated">Last updated on Feb 21, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Networking with multiple Zephyr instances &mdash; Zephyr Project Documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script type="module" src="../../_static/js/dark-mode-toggle.min.mjs"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-831873-47"></script>
        <script src="../../_static/js/ga-tracker.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="Networking with QEMU and IEEE 802.15.4" href="qemu_802154_setup.html" />
    <link rel="prev" title="Networking with QEMU User" href="qemu_user_setup.html" />
  <meta name="color-scheme" content="dark light">
  
  <link rel="stylesheet" href="../../_static/css/light.css" type="text/css" media="(prefers-color-scheme: light)"/>
  <link rel="stylesheet" href="../../_static/css/dark.css" type="text/css" media="(prefers-color-scheme: dark)"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html">
            <img src="../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.0-rc3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Zephyr Project</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Release Versions</dt>
        
          <dd><a href="/">latest</a></dd>
        
          <dd><a href="/2.7.0/">2.7.0</a></dd>
        
          <dd><a href="/2.6.0/">2.6.0</a></dd>
        
          <dd><a href="/2.5.0/">2.5.0</a></dd>
        
          <dd><a href="/2.4.0/">2.4.0</a></dd>
        
          <dd><a href="/2.3.0/">2.3.0</a></dd>
        
          <dd><a href="/1.14.1/">1.14.1</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="/latest/zephyr.pdf">PDF</a></dd>
      </dl>
      <dl>
        <dt>zephyrproject.org Links</dt>
          <dd>
            <a href="https://www.zephyrproject.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/sdk-ng/releases">SDK</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/zephyr/releases">Releases</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development_process/index.html">Development and Contribution Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build/index.html">Build and Configuration Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../application/index.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">API Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User and Developer Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../beyond-GSG.html">Beyond the Getting Started Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../arch/index.html">Architecture-related Guides</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bluetooth/index.html">Bluetooth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../docs/index.html">Documentation Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../coccinelle.html">Coccinelle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code-relocation.html">Code And Data Relocation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../crypto/index.html">Cryptography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flash_debug/index.html">Flashing and Hardware Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debug_tools/index.html">Debugging and Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../device_mgmt/index.html">Device Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dts/index.html">Devicetree Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../env_vars.html">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pinctrl/index.html">Pin Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pm/index.html">Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../emulator/index.html">Peripheral and Hardware Emulators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules.html">Modules (External projects)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Networking</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="net-stack-architecture.html">Network Stack Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="networking-api-usage.html">Network Connectivity API</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="networking_with_host.html">Networking with the host system</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="native_posix_setup.html">Networking with native_posix board</a></li>
<li class="toctree-l4"><a class="reference internal" href="qemu_eth_setup.html">Networking with QEMU Ethernet</a></li>
<li class="toctree-l4"><a class="reference internal" href="qemu_setup.html">Networking with QEMU</a></li>
<li class="toctree-l4"><a class="reference internal" href="usbnet_setup.html">USB Device Networking</a></li>
<li class="toctree-l4"><a class="reference internal" href="qemu_user_setup.html">Networking with QEMU User</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Networking with multiple Zephyr instances</a></li>
<li class="toctree-l4"><a class="reference internal" href="qemu_802154_setup.html">Networking with QEMU and IEEE 802.15.4</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="network_monitoring.html">Monitor Network Traffic</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../platformio/index.html">Using with PlatformIO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../portability/index.html">OS Abstraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../porting/index.html">Porting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../smf/index.html">State Machine Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../test/index.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tfm/index.html">Trusted Firmware-M</a></li>
<li class="toctree-l2"><a class="reference internal" href="../west/index.html">West (Zephyrâ€™s meta-tool)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimizations/index.html">Optimizations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zephyr_cmake_package.html">Zephyr CMake Package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../samples/index.html">Samples and Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../boards/index.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/index.html">Release Notes</a></li>
</ul>

  
  <div class="toctree-wrapper compound">
    <p class="caption"><span class="caption-text">Reference</span></p>
    <ul>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/doxygen/html/index.html">API</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/kconfig/index.html">Kconfig Options</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/devicetree/bindings.html">Devicetree Bindings</a>
      </li>
      
    </ul>
  </div>
  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Zephyr Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Docs / Latest -->
  
  

  <li><a href="../../index.html">Docs / Latest</a> &raquo;</li>
  
     <li><a href="../index.html">User and Developer Guides</a> &raquo;</li>
  
     <li><a href="index.html">Networking</a> &raquo;</li>
  
     <li><a href="networking_with_host.html">Networking with the host system</a> &raquo;</li>
  
  <li>Networking with multiple Zephyr instances</li>


  <li class="wy-breadcrumbs-aside">
    <dark-mode-toggle id="dark-mode-toggle" appearance="toggle" permanent="true"/>
  </li>
  <li class="wy-breadcrumbs-aside">
      
      
        <a href="https://github.com/zephyrproject-rtos/zephyr/blob/main/doc/guides/networking/networking_with_multiple_instances.rst" class="fa fa-github"> Open on GitHub</a>
      
    
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="wy-alert wy-alert-danger">
     This is the documentation for the latest (main) development branch of
     Zephyr. If you are looking for the documentation of previous releases, use
     the drop-down menu on the left and select the desired version.
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="networking-with-multiple-zephyr-instances">
<span id="networking-with-multiple-instances"></span><h1>Networking with multiple Zephyr instances<a class="headerlink" href="#networking-with-multiple-zephyr-instances" title="Permalink to this headline">Â¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#prerequisites" id="id1">Prerequisites</a></p></li>
<li><p><a class="reference internal" href="#basic-setup" id="id2">Basic Setup</a></p>
<ul>
<li><p><a class="reference internal" href="#step-1-create-configuration-files" id="id3">Step 1 - Create configuration files</a></p></li>
<li><p><a class="reference internal" href="#step-2-create-ethernet-interfaces" id="id4">Step 2 - Create Ethernet interfaces</a></p></li>
<li><p><a class="reference internal" href="#step-3-setup-network-bridging" id="id5">Step 3 - Setup network bridging</a></p></li>
<li><p><a class="reference internal" href="#step-4-start-zephyr-instances" id="id6">Step 4 - Start Zephyr instances</a></p></li>
</ul>
</li>
</ul>
</div>
<p>This page describes how to set up a virtual network between multiple
Zephyr instances. The Zephyr instances could be running inside QEMU
or could be native_posix board processes. The Linux host can be used
to route network traffic between these systems.</p>
<div class="section" id="prerequisites">
<h2><a class="toc-backref" href="#id1">Prerequisites</a><a class="headerlink" href="#prerequisites" title="Permalink to this headline">Â¶</a></h2>
<p>On the Linux Host, fetch the Zephyr <code class="docutils literal notranslate"><span class="pre">net-tools</span></code> project, which is located
in a separate Git repository:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git clone https://github.com/zephyrproject-rtos/net-tools</span>
</pre></div>
</div>
</div>
<div class="section" id="basic-setup">
<h2><a class="toc-backref" href="#id2">Basic Setup</a><a class="headerlink" href="#basic-setup" title="Permalink to this headline">Â¶</a></h2>
<p>For the steps below, you will need five terminal windows:</p>
<ul class="simple">
<li><p>Terminal #1 and #2 are terminal windows with net-tools being the current
directory (<code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">net-tools</span></code>)</p></li>
<li><p>Terminal #3, where you setup bridging in Linux host</p></li>
<li><p>Terminal #4 and #5 are your usual Zephyr development terminal,
with the Zephyr environment initialized.</p></li>
</ul>
<p>As there are multiple ways to setup the Zephyr network, the example below uses
<code class="docutils literal notranslate"><span class="pre">qemu_x86</span></code> board with <code class="docutils literal notranslate"><span class="pre">e1000</span></code> Ethernet controller and native_posix board
to simplify the setup instructions. You can use other QEMU boards and drivers
if needed, see <a class="reference internal" href="qemu_eth_setup.html#networking-with-eth-qemu"><span class="std std-ref">Networking with QEMU Ethernet</span></a> for details. You can also use
two or more native_posix board Zephyr instances and connect them together.</p>
<div class="section" id="step-1-create-configuration-files">
<h3><a class="toc-backref" href="#id3">Step 1 - Create configuration files</a><a class="headerlink" href="#step-1-create-configuration-files" title="Permalink to this headline">Â¶</a></h3>
<p>Before starting QEMU with network connectivity, a network interfaces for each
Zephyr instance should be created in the host system. The default setup for
creating network interface cannot be used here as that is for connecting one
Zephyr instance to Linux host.</p>
<p>For Zephyr instance #1, create file called <code class="docutils literal notranslate"><span class="pre">zephyr1.conf</span></code> to <code class="docutils literal notranslate"><span class="pre">net-tools</span></code>
project, or to some other suitable directory.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Configuration file <span class="k">for</span> setting IP addresses <span class="k">for</span> a network interface.
<span class="go">INTERFACE=&quot;$1&quot;</span>
<span class="go">HWADDR=&quot;00:00:5e:00:53:11&quot;</span>
<span class="go">IPV6_ADDR_1=&quot;2001:db8:100::2&quot;</span>
<span class="go">IPV6_ROUTE_1=&quot;2001:db8:100::/64&quot;</span>
<span class="go">IPV4_ADDR_1=&quot;198.51.100.2/24&quot;</span>
<span class="go">IPV4_ROUTE_1=&quot;198.51.100.0/24&quot;</span>
<span class="go">ip link set dev $INTERFACE up</span>
<span class="go">ip link set dev $INTERFACE address $HWADDR</span>
<span class="go">ip -6 address add $IPV6_ADDR_1 dev $INTERFACE nodad</span>
<span class="go">ip -6 route add $IPV6_ROUTE_1 dev $INTERFACE</span>
<span class="go">ip address add $IPV4_ADDR_1 dev $INTERFACE</span>
<span class="go">ip route add $IPV4_ROUTE_1 dev $INTERFACE &gt; /dev/null 2&gt;&amp;1</span>
</pre></div>
</div>
<p>For Zephyr instance #2, create file called <code class="docutils literal notranslate"><span class="pre">zephyr2.conf</span></code> to <code class="docutils literal notranslate"><span class="pre">net-tools</span></code>
project, or to some other suitable directory.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Configuration file <span class="k">for</span> setting IP addresses <span class="k">for</span> a network interface.
<span class="go">INTERFACE=&quot;$1&quot;</span>
<span class="go">HWADDR=&quot;00:00:5e:00:53:22&quot;</span>
<span class="go">IPV6_ADDR_1=&quot;2001:db8:200::2&quot;</span>
<span class="go">IPV6_ROUTE_1=&quot;2001:db8:200::/64&quot;</span>
<span class="go">IPV4_ADDR_1=&quot;203.0.113.2/24&quot;</span>
<span class="go">IPV4_ROUTE_1=&quot;203.0.113.0/24&quot;</span>
<span class="go">ip link set dev $INTERFACE up</span>
<span class="go">ip link set dev $INTERFACE address $HWADDR</span>
<span class="go">ip -6 address add $IPV6_ADDR_1 dev $INTERFACE nodad</span>
<span class="go">ip -6 route add $IPV6_ROUTE_1 dev $INTERFACE</span>
<span class="go">ip address add $IPV4_ADDR_1 dev $INTERFACE</span>
<span class="go">ip route add $IPV4_ROUTE_1 dev $INTERFACE &gt; /dev/null 2&gt;&amp;1</span>
</pre></div>
</div>
</div>
<div class="section" id="step-2-create-ethernet-interfaces">
<h3><a class="toc-backref" href="#id4">Step 2 - Create Ethernet interfaces</a><a class="headerlink" href="#step-2-create-ethernet-interfaces" title="Permalink to this headline">Â¶</a></h3>
<p>The following <code class="docutils literal notranslate"><span class="pre">net-setup.sh</span></code> commands should be typed in net-tools
directory (<code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">net-tools</span></code>).</p>
<p>In terminal #1, type:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">./net-setup.sh -c zephyr1.conf -i zeth.1</span>
</pre></div>
</div>
<p>In terminal #2, type:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">./net-setup.sh -c zephyr2.conf -i zeth.2</span>
</pre></div>
</div>
</div>
<div class="section" id="step-3-setup-network-bridging">
<h3><a class="toc-backref" href="#id5">Step 3 - Setup network bridging</a><a class="headerlink" href="#step-3-setup-network-bridging" title="Permalink to this headline">Â¶</a></h3>
<p>In terminal #3, type:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo brctl addbr zeth-br</span>
<span class="go">sudo brctl addif zeth-br zeth.1</span>
<span class="go">sudo brctl addif zeth-br zeth.2</span>
<span class="go">sudo ifconfig zeth-br up</span>
</pre></div>
</div>
</div>
<div class="section" id="step-4-start-zephyr-instances">
<h3><a class="toc-backref" href="#id6">Step 4 - Start Zephyr instances</a><a class="headerlink" href="#step-4-start-zephyr-instances" title="Permalink to this headline">Â¶</a></h3>
<p>In this example we start <a class="reference internal" href="../../samples/net/sockets/echo_server/README.html#sockets-echo-server-sample"><span class="std std-ref">Socket Echo Server</span></a> and
<a class="reference internal" href="../../samples/net/sockets/echo_client/README.html#sockets-echo-client-sample"><span class="std std-ref">Socket Echo Client</span></a> applications. You can use other applications
too as needed.</p>
<p>In terminal #4, if you are using QEMU, type this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -d build/server -b qemu_x86 -t run \</span>
<span class="go">   samples/net/sockets/echo_server -- \</span>
<span class="go">   -DOVERLAY_CONFIG=overlay-e1000.conf \</span>
<span class="go">   -DCONFIG_NET_CONFIG_MY_IPV4_ADDR=\&quot;198.51.100.1\&quot; \</span>
<span class="go">   -DCONFIG_NET_CONFIG_PEER_IPV4_ADDR=\&quot;203.0.113.1\&quot; \</span>
<span class="go">   -DCONFIG_NET_CONFIG_MY_IPV6_ADDR=\&quot;2001:db8:100::1\&quot; \</span>
<span class="go">   -DCONFIG_NET_CONFIG_PEER_IPV6_ADDR=\&quot;2001:db8:200::1\&quot; \</span>
<span class="go">   -DCONFIG_NET_CONFIG_MY_IPV4_GW=\&quot;203.0.113.1\&quot; \</span>
<span class="go">   -DCONFIG_ETH_QEMU_IFACE_NAME=\&quot;zeth.1\&quot; \</span>
<span class="go">   -DCONFIG_ETH_QEMU_EXTRA_ARGS=\&quot;mac=00:00:5e:00:53:01\&quot;</span>
</pre></div>
</div>
<p>or if you want to use native_posix board, type this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -d build/server -b native_posix -t run \</span>
<span class="go">   samples/net/sockets/echo_server -- \</span>
<span class="go">   -DCONFIG_NET_CONFIG_MY_IPV4_ADDR=\&quot;198.51.100.1\&quot; \</span>
<span class="go">   -DCONFIG_NET_CONFIG_PEER_IPV4_ADDR=\&quot;203.0.113.1\&quot; \</span>
<span class="go">   -DCONFIG_NET_CONFIG_MY_IPV6_ADDR=\&quot;2001:db8:100::1\&quot; \</span>
<span class="go">   -DCONFIG_NET_CONFIG_PEER_IPV6_ADDR=\&quot;2001:db8:200::1\&quot; \</span>
<span class="go">   -DCONFIG_NET_CONFIG_MY_IPV4_GW=\&quot;203.0.113.1\&quot; \</span>
<span class="go">   -DCONFIG_ETH_NATIVE_POSIX_DRV_NAME=\&quot;zeth.1\&quot; \</span>
<span class="go">   -DCONFIG_ETH_NATIVE_POSIX_MAC_ADDR=\&quot;00:00:5e:00:53:01\&quot; \</span>
<span class="go">   -DCONFIG_ETH_NATIVE_POSIX_RANDOM_MAC=n</span>
</pre></div>
</div>
<p>In terminal #5, if you are using QEMU, type this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -d build/client -b qemu_x86 -t run \</span>
<span class="go">   samples/net/sockets/echo_client -- \</span>
<span class="go">   -DOVERLAY_CONFIG=overlay-e1000.conf \</span>
<span class="go">   -DCONFIG_NET_CONFIG_MY_IPV4_ADDR=\&quot;203.0.113.1\&quot; \</span>
<span class="go">   -DCONFIG_NET_CONFIG_PEER_IPV4_ADDR=\&quot;198.51.100.1\&quot; \</span>
<span class="go">   -DCONFIG_NET_CONFIG_MY_IPV6_ADDR=\&quot;2001:db8:200::1\&quot; \</span>
<span class="go">   -DCONFIG_NET_CONFIG_PEER_IPV6_ADDR=\&quot;2001:db8:100::1\&quot; \</span>
<span class="go">   -DCONFIG_NET_CONFIG_MY_IPV4_GW=\&quot;198.51.100.1\&quot; \</span>
<span class="go">   -DCONFIG_ETH_QEMU_IFACE_NAME=\&quot;zeth.2\&quot; \</span>
<span class="go">   -DCONFIG_ETH_QEMU_EXTRA_ARGS=\&quot;mac=00:00:5e:00:53:02\&quot;</span>
</pre></div>
</div>
<p>or if you want to use native_posix board, type this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -d build/client -b native_posix -t run \</span>
<span class="go">   samples/net/sockets/echo_client -- \</span>
<span class="go">   -DCONFIG_NET_CONFIG_MY_IPV4_ADDR=\&quot;203.0.113.1\&quot; \</span>
<span class="go">   -DCONFIG_NET_CONFIG_PEER_IPV4_ADDR=\&quot;198.51.100.1\&quot; \</span>
<span class="go">   -DCONFIG_NET_CONFIG_MY_IPV6_ADDR=\&quot;2001:db8:200::1\&quot; \</span>
<span class="go">   -DCONFIG_NET_CONFIG_PEER_IPV6_ADDR=\&quot;2001:db8:100::1\&quot; \</span>
<span class="go">   -DCONFIG_NET_CONFIG_MY_IPV4_GW=\&quot;198.51.100.1\&quot; \</span>
<span class="go">   -DCONFIG_ETH_NATIVE_POSIX_DRV_NAME=\&quot;zeth.2\&quot; \</span>
<span class="go">   -DCONFIG_ETH_NATIVE_POSIX_MAC_ADDR=\&quot;00:00:5e:00:53:02\&quot; \</span>
<span class="go">   -DCONFIG_ETH_NATIVE_POSIX_RANDOM_MAC=n</span>
</pre></div>
</div>
<p>Also if you have firewall enabled in your host, you need to allow traffic
between <code class="docutils literal notranslate"><span class="pre">zeth.1</span></code>, <code class="docutils literal notranslate"><span class="pre">zeth.2</span></code> and <code class="docutils literal notranslate"><span class="pre">zeth-br</span></code> interfaces.</p>
</div>
</div>
</div>


           </div>
          </div>

          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../copyright.html">Copyright</a> 2015-2021 Zephyr Project members and individual contributors.
      <span class="lastupdated">Last updated on Feb 21, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
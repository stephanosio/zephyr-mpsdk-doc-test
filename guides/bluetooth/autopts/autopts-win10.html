<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AutoPTS on Windows 10 with nRF52 board &mdash; Zephyr Project Documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script type="module" src="../../../_static/js/dark-mode-toggle.min.mjs"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-831873-47"></script>
        <script src="../../../_static/js/ga-tracker.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="copyright" title="Copyright" href="../../../copyright.html" />
    <link rel="next" title="AutoPTS on Linux" href="autopts-linux.html" />
    <link rel="prev" title="Developing Bluetooth Applications" href="../bluetooth-dev.html" />
  <meta name="color-scheme" content="dark light">
  
  <link rel="stylesheet" href="../../../_static/css/light.css" type="text/css" media="(prefers-color-scheme: light)"/>
  <link rel="stylesheet" href="../../../_static/css/dark.css" type="text/css" media="(prefers-color-scheme: dark)"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html">
            <img src="../../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.99
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Zephyr Project</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Release Versions</dt>
        
          <dd><a href="/">latest</a></dd>
        
          <dd><a href="/3.0.0/">3.0.0</a></dd>
        
          <dd><a href="/2.7.0/">2.7.0</a></dd>
        
          <dd><a href="/2.6.0/">2.6.0</a></dd>
        
          <dd><a href="/2.5.0/">2.5.0</a></dd>
        
          <dd><a href="/2.4.0/">2.4.0</a></dd>
        
          <dd><a href="/2.3.0/">2.3.0</a></dd>
        
          <dd><a href="/1.14.1/">1.14.1</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="/latest/zephyr.pdf">PDF</a></dd>
      </dl>
      <dl>
        <dt>zephyrproject.org Links</dt>
          <dd>
            <a href="https://www.zephyrproject.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/sdk-ng/releases">SDK</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/zephyr/releases">Releases</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute/index.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../development_process/index.html">Development and Contribution Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../build/index.html">Build and Configuration Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../application/index.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">User and Developer Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../beyond-GSG.html">Beyond the Getting Started Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../arch/index.html">Architecture-related Guides</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Bluetooth</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../bluetooth-arch.html">Bluetooth Stack Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../bluetooth-qual.html">Bluetooth Qualification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../bluetooth-tools.html">Bluetooth tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../bluetooth-dev.html">Developing Bluetooth Applications</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">AutoPTS on Windows 10 with nRF52 board</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#update-windows-and-drivers">Update Windows and drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#install-python-3">Install Python 3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#install-git">Install Git</a></li>
<li class="toctree-l4"><a class="reference internal" href="#install-pts-8">Install PTS 8</a></li>
<li class="toctree-l4"><a class="reference internal" href="#setup-zephyr-project-for-windows">Setup Zephyr project for Windows</a></li>
<li class="toctree-l4"><a class="reference internal" href="#setup-wsl-with-ubuntu">Setup WSL with Ubuntu</a></li>
<li class="toctree-l4"><a class="reference internal" href="#install-nrftools">Install nrftools</a></li>
<li class="toctree-l4"><a class="reference internal" href="#connect-devices">Connect devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="#flash-board">Flash board</a></li>
<li class="toctree-l4"><a class="reference internal" href="#setup-auto-pts-project">Setup auto-pts project</a></li>
<li class="toctree-l4"><a class="reference internal" href="#install-socat-exe">Install socat.exe</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-autopts">Running AutoPTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="autopts-linux.html">AutoPTS on Linux</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../docs/index.html">Documentation Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../coccinelle.html">Coccinelle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../code-relocation.html">Code And Data Relocation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../crypto/index.html">Cryptography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flash_debug/index.html">Flashing and Hardware Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../debug_tools/index.html">Debugging and Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../device_mgmt/index.html">Device Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dts/index.html">Devicetree Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../env_vars.html">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pinctrl/index.html">Pin Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pm/index.html">Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../emulator/index.html">Peripheral and Hardware Emulators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modules.html">Modules (External projects)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../networking/index.html">Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../platformio/index.html">Using with PlatformIO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../portability/index.html">OS Abstraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../porting/index.html">Porting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../smf/index.html">State Machine Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../test/index.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tfm/index.html">Trusted Firmware-M</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../west/index.html">West (Zephyr’s meta-tool)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../optimizations/index.html">Optimizations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../zephyr_cmake_package.html">Zephyr CMake Package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../security/index.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../samples/index.html">Samples and Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../boards/index.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/index.html">Release Notes</a></li>
</ul>

  
  <div class="toctree-wrapper compound">
    <p class="caption"><span class="caption-text">Reference</span></p>
    <ul>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/doxygen/html/index.html">API</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/kconfig.html">Kconfig Options</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/devicetree/bindings.html">Devicetree Bindings</a>
      </li>
      
    </ul>
  </div>
  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Zephyr Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Docs / Latest -->
  
  

  <li><a href="../../../index.html">Docs / Latest</a> &raquo;</li>
  
     <li><a href="../../index.html">User and Developer Guides</a> &raquo;</li>
  
     <li><a href="../index.html">Bluetooth</a> &raquo;</li>
  
  <li>AutoPTS on Windows 10 with nRF52 board</li>


  <li class="wy-breadcrumbs-aside">
    <dark-mode-toggle id="dark-mode-toggle" appearance="toggle" permanent="true"/>
  </li>
  <li class="wy-breadcrumbs-aside">
      
      
        <a href="https://github.com/zephyrproject-rtos/zephyr/blob/main/doc/guides/bluetooth/autopts/autopts-win10.rst" class="fa fa-github"> Open on GitHub</a>
      
    
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="wy-alert wy-alert-danger">
     This is the documentation for the latest (main) development branch of
     Zephyr. If you are looking for the documentation of previous releases, use
     the drop-down menu on the left and select the desired version.
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="autopts-on-windows-10-with-nrf52-board">
<span id="autopts-win10"></span><h1>AutoPTS on Windows 10 with nRF52 board<a class="headerlink" href="#autopts-on-windows-10-with-nrf52-board" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This tutorial shows how to setup AutoPTS client and server to run both on
Windows 10. We use WSL1 with Ubuntu only to build a Zephyr project to
an elf file, because Zephyr SDK is not available on Windows yet.
Tutorial covers only nrf52840dk.</p>
</div>
<div class="section" id="update-windows-and-drivers">
<h2>Update Windows and drivers<a class="headerlink" href="#update-windows-and-drivers" title="Permalink to this headline">¶</a></h2>
<p>Update Windows in:</p>
<p>Start -&gt; Settings -&gt; Update &amp; Security -&gt; Windows Update</p>
<p>Update drivers, following the instructions from your hardware vendor.</p>
</div>
<div class="section" id="install-python-3">
<h2>Install Python 3<a class="headerlink" href="#install-python-3" title="Permalink to this headline">¶</a></h2>
<p>Download and install <a class="reference external" href="https://www.python.org/downloads/">Python 3</a>.
Setup was tested with versions &gt;=3.8. Let the installer add the Python
installation directory to the PATH and disable the path length limitation.</p>
<a class="reference internal image-reference" href="../../../_images/install_python1.png"><img alt="../../../_images/install_python1.png" class="align-center" src="../../../_images/install_python1.png" style="width: 450px; height: 300px;" /></a>
<a class="reference internal image-reference" href="../../../_images/install_python2.png"><img alt="../../../_images/install_python2.png" class="align-center" src="../../../_images/install_python2.png" style="width: 450px; height: 300px;" /></a>
</div>
<div class="section" id="install-git">
<h2>Install Git<a class="headerlink" href="#install-git" title="Permalink to this headline">¶</a></h2>
<p>Download and install <a class="reference external" href="https://git-scm.com/downloads">Git</a>.
During installation enable option: Enable experimental support for pseudo
consoles. We will use Git Bash as Windows terminal.</p>
<a class="reference internal image-reference" href="../../../_images/install_git.png"><img alt="../../../_images/install_git.png" class="align-center" src="../../../_images/install_git.png" style="width: 400px; height: 350px;" /></a>
</div>
<div class="section" id="install-pts-8">
<h2>Install PTS 8<a class="headerlink" href="#install-pts-8" title="Permalink to this headline">¶</a></h2>
<p>Install latest PTS from <a class="reference external" href="https://www.bluetooth.org">https://www.bluetooth.org</a>. Remember to install
drivers from installation directory
“C:/Program Files (x86)/Bluetooth SIG/Bluetooth PTS/PTS Driver/win64/CSRBlueCoreUSB.inf”</p>
<a class="reference internal image-reference" href="../../../_images/install_pts_drivers.png"><img alt="../../../_images/install_pts_drivers.png" class="align-center" src="../../../_images/install_pts_drivers.png" style="width: 850px; height: 250px;" /></a>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Starting with PTS 8.0.1 the Bluetooth Protocol Viewer is no longer included.
So to capture Bluetooth events, you have to download it separately.</p>
</div>
</div>
<div class="section" id="setup-zephyr-project-for-windows">
<h2>Setup Zephyr project for Windows<a class="headerlink" href="#setup-zephyr-project-for-windows" title="Permalink to this headline">¶</a></h2>
<p>Brief of setup <a class="reference external" href="https://docs.zephyrproject.org/latest/getting_started/index.html">Getting Started Guide</a>:</p>
<p>Open Git Bash and go to home:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~</span>
</pre></div>
</div>
<p>Install west:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">install</span> <span class="n">west</span>
</pre></div>
</div>
<p>Get the Zephyr source code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">west</span> <span class="n">init</span> <span class="n">zephyrproject</span>
</pre></div>
</div>
<p>Go into freshly created folder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">zephyrproject</span>
</pre></div>
</div>
<p>Run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">west</span> <span class="n">update</span>
</pre></div>
</div>
<p>Export a Zephyr CMake package. This allows CMake to automatically load
boilerplate code required for building Zephyr applications:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">west</span> <span class="n">zephyr</span><span class="o">-</span><span class="n">export</span>
</pre></div>
</div>
<p>Zephyr’s scripts/requirements.txt file declares additional Python
dependencies. Install them with pip:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="o">~</span>\<span class="n">zephyrproject</span>\<span class="n">zephyr</span>\<span class="n">scripts</span>\<span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
</div>
<div class="section" id="setup-wsl-with-ubuntu">
<h2>Setup WSL with Ubuntu<a class="headerlink" href="#setup-wsl-with-ubuntu" title="Permalink to this headline">¶</a></h2>
<p>Install Ubuntu 20.4 on <a class="reference external" href="https://docs.microsoft.com/en-us/windows/wsl/install-win10">WSL</a>.</p>
<p>When finished, perform the Ubuntu setup from <a class="reference external" href="https://docs.zephyrproject.org/latest/getting_started/index.html">Getting Started Guide</a>,
but skip west init and west update commands, as you can use the previously downloaded
Zephyr source code at mounted Windows folder /mnt/c/Users/&lt;user&gt;/zephyrproject.
Skip install of udev rules also, because we won’t flash the board from wsl.</p>
<p>Remember to run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">c</span><span class="o">/</span><span class="n">Users</span><span class="o">/&lt;</span><span class="n">user</span><span class="o">&gt;/</span><span class="n">zephyrproject</span>
<span class="n">west</span> <span class="n">zephyr</span><span class="o">-</span><span class="n">export</span>
<span class="n">pip3</span> <span class="n">install</span> <span class="o">--</span><span class="n">user</span> <span class="o">-</span><span class="n">r</span> <span class="n">zephyr</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>Restart the Ubuntu machine. You may want to shutdown all WSL consoles from
Windows’s Git Bash:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wsl</span> <span class="o">--</span><span class="n">shutdown</span>
</pre></div>
</div>
<p>After Ubuntu restart, go to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">c</span><span class="o">/</span><span class="n">Users</span><span class="o">/&lt;</span><span class="n">user</span><span class="o">&gt;/</span><span class="n">zephyrproject</span>
</pre></div>
</div>
<p>and test if west can build:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">west</span> <span class="n">build</span> <span class="o">-</span><span class="n">p</span> <span class="n">auto</span> <span class="o">-</span><span class="n">b</span> <span class="n">nrf52840dk_nrf52840</span> <span class="n">zephyr</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">bluetooth</span><span class="o">/</span><span class="n">tester</span><span class="o">/</span>
</pre></div>
</div>
<p>From now on, you can build projects by typing in Windows’s Git Bash:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wsl</span> <span class="o">-</span><span class="n">d</span> <span class="n">Ubuntu</span><span class="o">-</span><span class="mf">20.04</span> <span class="o">-</span><span class="n">u</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span> <span class="o">--</span> <span class="n">bash</span> <span class="o">-</span><span class="n">c</span> <span class="o">-</span><span class="n">i</span> <span class="s2">&quot;cd /mnt/c/Users/&lt;user&gt;/zephyrproject/ ; west build -p auto -b nrf52840dk_nrf52840 zephyr/tests/bluetooth/tester/&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="install-nrftools">
<h2>Install nrftools<a class="headerlink" href="#install-nrftools" title="Permalink to this headline">¶</a></h2>
<p>On Windows download latest nrftools (version &gt;= 10.12.1) from site
<a class="reference external" href="https://www.nordicsemi.com/Software-and-tools/Development-Tools/nRF-Command-Line-Tools/Download">https://www.nordicsemi.com/Software-and-tools/Development-Tools/nRF-Command-Line-Tools/Download</a>
and run default install.</p>
<a class="reference internal image-reference" href="../../../_images/download_nrftools_windows.png"><img alt="../../../_images/download_nrftools_windows.png" class="align-center" src="../../../_images/download_nrftools_windows.png" style="width: 500px; height: 350px;" /></a>
</div>
<div class="section" id="connect-devices">
<h2>Connect devices<a class="headerlink" href="#connect-devices" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="../../../_images/devices_1.png"><img alt="../../../_images/devices_1.png" class="align-center" src="../../../_images/devices_1.png" style="width: 600px; height: 400px;" /></a>
<a class="reference internal image-reference" href="../../../_images/devices_2.png"><img alt="../../../_images/devices_2.png" class="align-center" src="../../../_images/devices_2.png" style="width: 500px; height: 700px;" /></a>
</div>
<div class="section" id="flash-board">
<h2>Flash board<a class="headerlink" href="#flash-board" title="Permalink to this headline">¶</a></h2>
<p>In Device Manager find COM port of your nrf board. In my case it is COM3.</p>
<a class="reference internal image-reference" href="../../../_images/device_manager.png"><img alt="../../../_images/device_manager.png" class="align-center" src="../../../_images/device_manager.png" style="width: 450px; height: 400px;" /></a>
<p>In Git Bash, go to zephyrproject</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">zephyrproject</span>
</pre></div>
</div>
<p>You can display flashing options with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">west</span> <span class="n">flash</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<p>and flash board with built earlier elf file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">west</span> <span class="n">flash</span> <span class="o">--</span><span class="n">skip</span><span class="o">-</span><span class="n">rebuild</span> <span class="o">--</span><span class="n">board</span><span class="o">-</span><span class="nb">dir</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyS2</span> <span class="o">--</span><span class="n">elf</span><span class="o">-</span><span class="n">file</span> <span class="o">~/</span><span class="n">zephyrproject</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">zephyr</span><span class="o">/</span><span class="n">zephyr</span><span class="o">.</span><span class="n">elf</span>
</pre></div>
</div>
<p>Note that west does not accept COMs, so use /dev/ttyS2 as the COM3 equivalent,
/dev/ttyS2 as the COM3 equivalent, etc.(/dev/ttyS + decremented COM number).</p>
</div>
<div class="section" id="setup-auto-pts-project">
<h2>Setup auto-pts project<a class="headerlink" href="#setup-auto-pts-project" title="Permalink to this headline">¶</a></h2>
<p>In Git Bash, clone project repo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">intel</span><span class="o">/</span><span class="n">auto</span><span class="o">-</span><span class="n">pts</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>Go into the project folder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">auto</span><span class="o">-</span><span class="n">pts</span>
</pre></div>
</div>
<p>Install required python modules:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">install</span> <span class="o">--</span><span class="n">user</span> <span class="n">wheel</span>
<span class="n">pip3</span> <span class="n">install</span> <span class="o">--</span><span class="n">user</span> <span class="o">-</span><span class="n">r</span> <span class="n">autoptsserver_requirements</span><span class="o">.</span><span class="n">txt</span>
<span class="n">pip3</span> <span class="n">install</span> <span class="o">--</span><span class="n">user</span> <span class="o">-</span><span class="n">r</span> <span class="n">autoptsclient_requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
</div>
<div class="section" id="install-socat-exe">
<h2>Install socat.exe<a class="headerlink" href="#install-socat-exe" title="Permalink to this headline">¶</a></h2>
<p>Download and extract socat.exe from <a class="reference external" href="https://sourceforge.net/projects/unix-utils/files/socat/1.7.3.2/">https://sourceforge.net/projects/unix-utils/files/socat/1.7.3.2/</a>
into folder ~/socat-1.7.3.2-1-x86_64/.</p>
<a class="reference internal image-reference" href="../../../_images/download_socat.png"><img alt="../../../_images/download_socat.png" class="align-center" src="../../../_images/download_socat.png" style="width: 450px; height: 400px;" /></a>
<p>Add path to directory of socat.exe to PATH:</p>
<a class="reference internal image-reference" href="../../../_images/add_socat_to_path.png"><img alt="../../../_images/add_socat_to_path.png" class="align-center" src="../../../_images/add_socat_to_path.png" style="width: 450px; height: 400px;" /></a>
</div>
<div class="section" id="running-autopts">
<h2>Running AutoPTS<a class="headerlink" href="#running-autopts" title="Permalink to this headline">¶</a></h2>
<p>Server and client by default will run on localhost address. Run server:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">./</span><span class="n">autoptsserver</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">S</span> <span class="mi">65000</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../../../_images/autoptsserver_run.png"><img alt="../../../_images/autoptsserver_run.png" class="align-center" src="../../../_images/autoptsserver_run.png" style="width: 800px; height: 200px;" /></a>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the error “ImportError: No module named pywintypes” appeared after the fresh setup,
uninstall and install the pywin32 module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="o">--</span><span class="n">force</span><span class="o">-</span><span class="n">reinstall</span> <span class="n">pywin32</span>
</pre></div>
</div>
</div>
<p>Run client:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">./</span><span class="n">autoptsclient</span><span class="o">-</span><span class="n">zephyr</span><span class="o">.</span><span class="n">py</span> <span class="n">zephyr</span><span class="o">-</span><span class="n">master</span> <span class="o">~/</span><span class="n">zephyrproject</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">zephyr</span><span class="o">/</span><span class="n">zephyr</span><span class="o">.</span><span class="n">elf</span> <span class="o">-</span><span class="n">t</span> <span class="n">COM3</span> <span class="o">-</span><span class="n">b</span> <span class="n">nrf52</span> <span class="o">-</span><span class="n">S</span> <span class="mi">65000</span> <span class="o">-</span><span class="n">C</span> <span class="mi">65001</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../../../_images/autoptsclient_run.png"><img alt="../../../_images/autoptsclient_run.png" class="align-center" src="../../../_images/autoptsclient_run.png" style="width: 800px; height: 200px;" /></a>
<p>At the first run, when Windows asks, enable connection through firewall:</p>
<a class="reference internal image-reference" href="../../../_images/allow_firewall.png"><img alt="../../../_images/allow_firewall.png" class="align-center" src="../../../_images/allow_firewall.png" style="width: 600px; height: 450px;" /></a>
</div>
<div class="section" id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>“When running actual hardware test mode, I have only BTP TIMEOUTs.”</p></li>
</ul>
<p>This is a problem with connection between auto-pts client and board. There are many possible causes. Try:</p>
<ul class="simple">
<li><p>Clean your auto-pts and zephyr repos with</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This command will force the irreversible removal of all uncommitted files in the repo.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clean</span> <span class="o">-</span><span class="n">fdx</span>
</pre></div>
</div>
<p>then build and flash tester elf again.</p>
<ul class="simple">
<li><p>If you have set up Windows on virtual machine, check if guest extensions are installed properly or change USB compatibility mode in VM settings to USB 2.0.</p></li>
<li><p>Check, if firewall in not blocking python.exe or socat.exe.</p></li>
<li><p>Check if board sends ready event after restart (hex 00 00 80 ff 00 00). Open serial connection to board with e.g. PuTTy with proper COM and baud rate. After board reset you should see some strings in console.</p></li>
<li><p>Check if socat.exe creates tunel to board. Run in console</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">socat</span><span class="o">.</span><span class="n">exe</span> <span class="o">-</span><span class="n">x</span> <span class="o">-</span><span class="n">v</span> <span class="n">tcp</span><span class="o">-</span><span class="n">listen</span><span class="p">:</span><span class="mi">65123</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyS2</span><span class="p">,</span><span class="n">raw</span><span class="p">,</span><span class="n">b115200</span>
</pre></div>
</div>
<p>where /dev/ttyS2 is the COM3 equivalent. Open PuTTY, set connection type to Raw, IP to 127.0.0.1, port to 65123. After board reset you should see some strings in console.</p>
</div>
</div>


           </div>
          </div>

          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../../copyright.html">Copyright</a> 2015-2022 Zephyr Project members and individual contributors.
      <span class="lastupdated">Last updated on Mar 05, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
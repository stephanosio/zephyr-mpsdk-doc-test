<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Devicetree bindings &mdash; Zephyr Project Documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script type="module" src="../../_static/js/dark-mode-toggle.min.mjs"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-831873-47"></script>
        <script src="../../_static/js/ga-tracker.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="Devicetree access from C/C++" href="api-usage.html" />
    <link rel="prev" title="Design goals" href="design.html" />
  <meta name="color-scheme" content="dark light">
  
  <link rel="stylesheet" href="../../_static/css/light.css" type="text/css" media="(prefers-color-scheme: light)"/>
  <link rel="stylesheet" href="../../_static/css/dark.css" type="text/css" media="(prefers-color-scheme: dark)"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html">
            <img src="../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.0-rc3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Zephyr Project</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Release Versions</dt>
        
          <dd><a href="/">latest</a></dd>
        
          <dd><a href="/2.7.0/">2.7.0</a></dd>
        
          <dd><a href="/2.6.0/">2.6.0</a></dd>
        
          <dd><a href="/2.5.0/">2.5.0</a></dd>
        
          <dd><a href="/2.4.0/">2.4.0</a></dd>
        
          <dd><a href="/2.3.0/">2.3.0</a></dd>
        
          <dd><a href="/1.14.1/">1.14.1</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="/latest/zephyr.pdf">PDF</a></dd>
      </dl>
      <dl>
        <dt>zephyrproject.org Links</dt>
          <dd>
            <a href="https://www.zephyrproject.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/sdk-ng/releases">SDK</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/zephyr/releases">Releases</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development_process/index.html">Development and Contribution Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build/index.html">Build and Configuration Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../application/index.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">API Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User and Developer Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../beyond-GSG.html">Beyond the Getting Started Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../arch/index.html">Architecture-related Guides</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bluetooth/index.html">Bluetooth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../docs/index.html">Documentation Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../coccinelle.html">Coccinelle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code-relocation.html">Code And Data Relocation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../crypto/index.html">Cryptography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flash_debug/index.html">Flashing and Hardware Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debug_tools/index.html">Debugging and Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../device_mgmt/index.html">Device Management</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Devicetree Guide</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="intro.html">Introduction to devicetree</a></li>
<li class="toctree-l3"><a class="reference internal" href="design.html">Design goals</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Devicetree bindings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bindings-file-syntax">Bindings file syntax</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rules-for-mainline-bindings">Rules for mainline bindings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#inferred-bindings">Inferred bindings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api-usage.html">Devicetree access from C/C++</a></li>
<li class="toctree-l3"><a class="reference internal" href="howtos.html">Devicetree HOWTOs</a></li>
<li class="toctree-l3"><a class="reference internal" href="troubleshooting.html">Troubleshooting devicetree</a></li>
<li class="toctree-l3"><a class="reference internal" href="dt-vs-kconfig.html">Devicetree versus Kconfig</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../env_vars.html">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pinctrl/index.html">Pin Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pm/index.html">Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../emulator/index.html">Peripheral and Hardware Emulators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules.html">Modules (External projects)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../networking/index.html">Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../platformio/index.html">Using with PlatformIO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../portability/index.html">OS Abstraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../porting/index.html">Porting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../smf/index.html">State Machine Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../test/index.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tfm/index.html">Trusted Firmware-M</a></li>
<li class="toctree-l2"><a class="reference internal" href="../west/index.html">West (Zephyr’s meta-tool)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimizations/index.html">Optimizations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zephyr_cmake_package.html">Zephyr CMake Package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../samples/index.html">Samples and Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../boards/index.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/index.html">Release Notes</a></li>
</ul>

  
  <div class="toctree-wrapper compound">
    <p class="caption"><span class="caption-text">Reference</span></p>
    <ul>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/doxygen/html/index.html">API</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/kconfig/index.html">Kconfig Options</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/devicetree/bindings.html">Devicetree Bindings</a>
      </li>
      
    </ul>
  </div>
  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Zephyr Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Docs / Latest -->
  
  

  <li><a href="../../index.html">Docs / Latest</a> &raquo;</li>
  
     <li><a href="../index.html">User and Developer Guides</a> &raquo;</li>
  
     <li><a href="index.html">Devicetree Guide</a> &raquo;</li>
  
  <li>Devicetree bindings</li>


  <li class="wy-breadcrumbs-aside">
    <dark-mode-toggle id="dark-mode-toggle" appearance="toggle" permanent="true"/>
  </li>
  <li class="wy-breadcrumbs-aside">
      
      
        <a href="https://github.com/zephyrproject-rtos/zephyr/blob/main/doc/guides/dts/bindings.rst" class="fa fa-github"> Open on GitHub</a>
      
    
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="wy-alert wy-alert-danger">
     This is the documentation for the latest (main) development branch of
     Zephyr. If you are looking for the documentation of previous releases, use
     the drop-down menu on the left and select the desired version.
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="devicetree-bindings">
<span id="dt-bindings"></span><h1>Devicetree bindings<a class="headerlink" href="#devicetree-bindings" title="Permalink to this headline">¶</a></h1>
<p>A devicetree on its own is only half the story for describing hardware, as it
is a relatively unstructured format. <em>Devicetree bindings</em> provide the other
half.</p>
<p>A devicetree binding declares requirements on the contents of nodes, and
provides semantic information about the contents of valid nodes. Zephyr
devicetree bindings are YAML files in a custom format (Zephyr does not use the
dt-schema tools used by the Linux kernel).</p>
<p>This page introduces bindings, describes what they do, notes where they are
found, and explains their data format.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See the <a class="reference internal" href="../../reference/devicetree/bindings.html#devicetree-binding-index"><span class="std std-ref">Bindings index</span></a> for reference information on
bindings built in to Zephyr.</p>
</div>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id1">Introduction</a></p>
<ul>
<li><p><a class="reference internal" href="#a-simple-example" id="id2">A simple example</a></p></li>
<li><p><a class="reference internal" href="#what-the-build-system-does-with-bindings" id="id3">What the build system does with bindings</a></p></li>
<li><p><a class="reference internal" href="#other-ways-nodes-are-matched-to-bindings" id="id4">Other ways nodes are matched to bindings</a></p></li>
<li><p><a class="reference internal" href="#where-bindings-are-located" id="id5">Where bindings are located</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#bindings-file-syntax" id="id6">Bindings file syntax</a></p>
<ul>
<li><p><a class="reference internal" href="#description" id="id7">Description</a></p></li>
<li><p><a class="reference internal" href="#compatible" id="id8">Compatible</a></p></li>
<li><p><a class="reference internal" href="#properties" id="id9">Properties</a></p></li>
<li><p><a class="reference internal" href="#child-binding" id="id10">Child-binding</a></p></li>
<li><p><a class="reference internal" href="#bus" id="id11">Bus</a></p></li>
<li><p><a class="reference internal" href="#on-bus" id="id12">On-bus</a></p></li>
<li><p><a class="reference internal" href="#specifier-cell-names-cells" id="id13">Specifier cell names (*-cells)</a></p></li>
<li><p><a class="reference internal" href="#include" id="id14">Include</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#rules-for-mainline-bindings" id="id15">Rules for mainline bindings</a></p>
<ul>
<li><p><a class="reference internal" href="#check-for-existing-bindings" id="id16">Check for existing bindings</a></p></li>
<li><p><a class="reference internal" href="#general-rules" id="id17">General rules</a></p></li>
<li><p><a class="reference internal" href="#vendor-prefixes" id="id18">Vendor prefixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#inferred-bindings" id="id19">Inferred bindings</a></p></li>
</ul>
</div>
<div class="section" id="introduction">
<span id="dt-binding-compat"></span><h2><a class="toc-backref" href="#id1">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Devicetree nodes are matched to bindings using their <a class="reference internal" href="intro.html#dt-important-props"><span class="std std-ref">compatible
properties</span></a>.</p>
<p>During the <a class="reference internal" href="../build/index.html#build-configuration-phase"><span class="std std-ref">Configuration Phase</span></a>, the build system tries to match
each node in the devicetree to a binding file. When this succeeds, the build
system uses the information in the binding file both when validating the node’s
contents and when generating macros for the node.</p>
<div class="section" id="a-simple-example">
<span id="dt-bindings-simple-example"></span><h3><a class="toc-backref" href="#id2">A simple example</a><a class="headerlink" href="#a-simple-example" title="Permalink to this headline">¶</a></h3>
<p>Here is an example devicetree node:</p>
<div class="highlight-devicetree notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Node in a DTS file */</span><span class="w"></span>
<span class="nf">bar-device</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="kr">compatible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;foo-company,bar-device&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">     </span><span class="n">num-foos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">3</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>Here is a minimal binding file which matches the node:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># A YAML binding matching the node</span><span class="w"></span>

<span class="nt">compatible</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;foo-company,bar-device&quot;</span><span class="w"></span>

<span class="nt">properties</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">num-foos</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int</span><span class="w"></span>
<span class="w">    </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
</pre></div>
</div>
<p>The build system matches the <code class="docutils literal notranslate"><span class="pre">bar-device</span></code> node to its YAML binding because
the node’s <code class="docutils literal notranslate"><span class="pre">compatible</span></code> property matches the binding’s <code class="docutils literal notranslate"><span class="pre">compatible:</span></code> line.</p>
</div>
<div class="section" id="what-the-build-system-does-with-bindings">
<h3><a class="toc-backref" href="#id3">What the build system does with bindings</a><a class="headerlink" href="#what-the-build-system-does-with-bindings" title="Permalink to this headline">¶</a></h3>
<p>The build system uses bindings both to validate devicetree nodes and to convert
the devicetree’s contents into the generated <a class="reference internal" href="intro.html#dt-outputs"><span class="std std-ref">devicetree_unfixed.h</span></a> header file.</p>
<p>For example, the build system would use the above binding to check that the
required <code class="docutils literal notranslate"><span class="pre">num-foos</span></code> property is present in the <code class="docutils literal notranslate"><span class="pre">bar-device</span></code> node, and that
its value, <code class="docutils literal notranslate"><span class="pre">&lt;3&gt;</span></code>, has the correct type.</p>
<p>The build system will then generate a macro for the <code class="docutils literal notranslate"><span class="pre">bar-device</span></code> node’s
<code class="docutils literal notranslate"><span class="pre">num-foos</span></code> property, which will expand to the integer literal <code class="docutils literal notranslate"><span class="pre">3</span></code>. This
macro lets you get the value of the property in C code using the API which is
discussed later in this guide in <a class="reference internal" href="api-usage.html#dt-from-c"><span class="std std-ref">Devicetree access from C/C++</span></a>.</p>
<p>For another example, the following node would cause a build error, because it
has no <code class="docutils literal notranslate"><span class="pre">num-foos</span></code> property, and this property is marked required in the
binding:</p>
<div class="highlight-devicetree notranslate"><div class="highlight"><pre><span></span><span class="nf">bad-node</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="kr">compatible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;foo-company,bar-device&quot;</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="other-ways-nodes-are-matched-to-bindings">
<h3><a class="toc-backref" href="#id4">Other ways nodes are matched to bindings</a><a class="headerlink" href="#other-ways-nodes-are-matched-to-bindings" title="Permalink to this headline">¶</a></h3>
<p>If a node has more than one string in its <code class="docutils literal notranslate"><span class="pre">compatible</span></code> property, the build
system looks for compatible bindings in the listed order and uses the first
match.</p>
<p>Take this node as an example:</p>
<div class="highlight-devicetree notranslate"><div class="highlight"><pre><span></span><span class="nf">baz-device</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="kr">compatible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;foo-company,baz-device&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;generic-baz-device&quot;</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">baz-device</span></code> node would get matched to a binding with a <code class="docutils literal notranslate"><span class="pre">compatible:</span>
<span class="pre">&quot;generic-baz-device&quot;</span></code> line if the build system can’t find a binding with a
<code class="docutils literal notranslate"><span class="pre">compatible:</span> <span class="pre">&quot;foo-company,baz-device&quot;</span></code> line.</p>
<p>Nodes without compatible properties can be matched to bindings associated with
their parent nodes. These are called “child bindings”. If a node describes
hardware on a bus, like I2C or SPI, then the bus type is also taken into
account when matching nodes to bindings. (The <a class="reference internal" href="#dt-bindings-file-syntax"><span class="std std-ref">Bindings file syntax</span></a>
section below describes how to write child bindings and bus-specific bindings.)</p>
<p>Some special nodes without <code class="docutils literal notranslate"><span class="pre">compatible</span></code> properties are matched to
<a class="reference internal" href="#dt-inferred-bindings"><span class="std std-ref">Inferred bindings</span></a>. For these nodes, the build system generates macros
based on the properties in the final devicetree.</p>
</div>
<div class="section" id="where-bindings-are-located">
<span id="dt-where-bindings-are-located"></span><h3><a class="toc-backref" href="#id5">Where bindings are located</a><a class="headerlink" href="#where-bindings-are-located" title="Permalink to this headline">¶</a></h3>
<p>Binding file names usually match their <code class="docutils literal notranslate"><span class="pre">compatible:</span></code> lines. For example, the
above example binding would be named <code class="file docutils literal notranslate"><span class="pre">foo-company,bar-device.yaml</span></code> by
convention.</p>
<p>The build system looks for bindings in <code class="file docutils literal notranslate"><span class="pre">dts/bindings</span></code>
subdirectories of the following places:</p>
<ul class="simple">
<li><p>the zephyr repository</p></li>
<li><p>your <a class="reference internal" href="../../application/index.html#application"><span class="std std-ref">application source directory</span></a></p></li>
<li><p>your <a class="reference internal" href="../porting/board_porting.html#board-porting-guide"><span class="std std-ref">board directory</span></a></p></li>
<li><p>any directories in the <a class="reference internal" href="../../application/index.html#dts-root"><span class="std std-ref">DTS_ROOT</span></a> CMake variable</p></li>
<li><p>any <a class="reference internal" href="../modules.html#modules"><span class="std std-ref">module</span></a> that defines a <code class="docutils literal notranslate"><span class="pre">dts_root</span></code> in its
<a class="reference internal" href="../modules.html#modules-build-settings"><span class="std std-ref">Build settings</span></a></p></li>
</ul>
<p>The build system will consider any YAML file in any of these, including in any
subdirectories, when matching nodes to bindings. A file is considered YAML if
its name ends with <code class="docutils literal notranslate"><span class="pre">.yaml</span></code> or <code class="docutils literal notranslate"><span class="pre">.yml</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The binding files must be located somewhere inside the <code class="file docutils literal notranslate"><span class="pre">dts/bindings</span></code>
subdirectory of the above places.</p>
<p>For example, if <code class="file docutils literal notranslate"><span class="pre">my-app</span></code> is your application directory, then you must
place application-specific bindings inside <code class="file docutils literal notranslate"><span class="pre">my-app/dts/bindings</span></code>. So
<code class="file docutils literal notranslate"><span class="pre">my-app/dts/bindings/serial/my-company,my-serial-port.yaml</span></code> would be
found, but <code class="file docutils literal notranslate"><span class="pre">my-app/my-company,my-serial-port.yaml</span></code> would be ignored.</p>
</div>
</div>
</div>
<div class="section" id="bindings-file-syntax">
<span id="dt-bindings-file-syntax"></span><h2><a class="toc-backref" href="#id6">Bindings file syntax</a><a class="headerlink" href="#bindings-file-syntax" title="Permalink to this headline">¶</a></h2>
<p>Zephyr bindings files are YAML files. The top-level value in the file is a
mapping. A <a class="reference internal" href="#dt-bindings-simple-example"><span class="std std-ref">simple example</span></a> is given above.</p>
<p>The top-level keys in the mapping look like this:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># A high level description of the device the binding applies to:</span><span class="w"></span>
<span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span><span class="w"></span>
<span class="w">   </span><span class="no">This is the Vendomatic company&#39;s foo-device.</span><span class="w"></span>

<span class="w">   </span><span class="no">Descriptions which span multiple lines (like this) are OK,</span><span class="w"></span>
<span class="w">   </span><span class="no">and are encouraged for complex bindings.</span><span class="w"></span>

<span class="w">   </span><span class="no">See https://yaml-multiline.info/ for formatting help.</span><span class="w"></span>

<span class="c1"># You can include definitions from other bindings using this syntax:</span><span class="w"></span>
<span class="nt">include</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">other.yaml</span><span class="w"></span>

<span class="c1"># Used to match nodes to this binding as discussed above:</span><span class="w"></span>
<span class="nt">compatible</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;manufacturer,foo-device&quot;</span><span class="w"></span>

<span class="nt">properties</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="c1"># Requirements for and descriptions of the properties that this</span><span class="w"></span>
<span class="w">  </span><span class="c1"># binding&#39;s nodes need to satisfy go here.</span><span class="w"></span>

<span class="nt">child-binding</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="c1"># You can constrain the children of the nodes matching this binding</span><span class="w"></span>
<span class="w">  </span><span class="c1"># using this key.</span><span class="w"></span>

<span class="c1"># If the node describes bus hardware, like an SPI bus controller</span><span class="w"></span>
<span class="c1"># on an SoC, use &#39;bus:&#39; to say which one, like this:</span><span class="w"></span>
<span class="nt">bus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spi</span><span class="w"></span>

<span class="c1"># If the node instead appears as a device on a bus, like an external</span><span class="w"></span>
<span class="c1"># SPI memory chip, use &#39;on-bus:&#39; to say what type of bus, like this.</span><span class="w"></span>
<span class="c1"># Like &#39;compatible&#39;, this key also influences the way nodes match</span><span class="w"></span>
<span class="c1"># bindings.</span><span class="w"></span>
<span class="nt">on-bus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spi</span><span class="w"></span>

<span class="nt">foo-cells</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="c1"># &quot;Specifier&quot; cell names for the &#39;foo&#39; domain go here; example &#39;foo&#39;</span><span class="w"></span>
<span class="w">  </span><span class="c1"># values are &#39;gpio&#39;, &#39;pwm&#39;, and &#39;dma&#39;. See below for more information.</span><span class="w"></span>
</pre></div>
</div>
<p>The following sections describe these keys in more detail:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#dt-bindings-description"><span class="std std-ref">Description</span></a></p></li>
<li><p><a class="reference internal" href="#dt-bindings-compatible"><span class="std std-ref">Compatible</span></a></p></li>
<li><p><a class="reference internal" href="#dt-bindings-properties"><span class="std std-ref">Properties</span></a></p></li>
<li><p><a class="reference internal" href="#dt-bindings-child"><span class="std std-ref">Child-binding</span></a></p></li>
<li><p><a class="reference internal" href="#dt-bindings-bus"><span class="std std-ref">Bus</span></a></p></li>
<li><p><a class="reference internal" href="#dt-bindings-on-bus"><span class="std std-ref">On-bus</span></a></p></li>
<li><p><a class="reference internal" href="#dt-bindings-cells"><span class="std std-ref">Specifier cell names (*-cells)</span></a></p></li>
<li><p><a class="reference internal" href="#dt-bindings-include"><span class="std std-ref">Include</span></a></p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">include:</span></code> key usually appears early in the binding file, but it is
documented last here because you need to know how the other keys work before
understanding <code class="docutils literal notranslate"><span class="pre">include:</span></code>.</p>
<div class="section" id="description">
<span id="dt-bindings-description"></span><h3><a class="toc-backref" href="#id7">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h3>
<p>A free-form description of node hardware goes here. You can put links to
datasheets or example nodes or properties as well.</p>
</div>
<div class="section" id="compatible">
<span id="dt-bindings-compatible"></span><h3><a class="toc-backref" href="#id8">Compatible</a><a class="headerlink" href="#compatible" title="Permalink to this headline">¶</a></h3>
<p>This key is used to match nodes to this binding as described above.
It should look like this in a binding file:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="c1"># Note the comma-separated vendor prefix and device name</span><span class="w"></span>
<span class="nt">compatible</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;manufacturer,device&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>This devicetree node would match the above binding:</p>
<div class="highlight-devicetree notranslate"><div class="highlight"><pre><span></span><span class="nf">device</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="kr">compatible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;manufacturer,device&quot;</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>Assuming no binding has <code class="docutils literal notranslate"><span class="pre">compatible:</span> <span class="pre">&quot;manufacturer,device-v2&quot;</span></code>, it would also
match this node:</p>
<div class="highlight-devicetree notranslate"><div class="highlight"><pre><span></span><span class="nf">device-2</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kr">compatible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;manufacturer,device-v2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;manufacturer,device&quot;</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>Each node’s <code class="docutils literal notranslate"><span class="pre">compatible</span></code> property is tried in order. The first matching
binding is used. The <a class="reference internal" href="#dt-bindings-on-bus"><span class="std std-ref">on-bus:</span></a> key can be used to
refine the search.</p>
<p>If more than one binding for a compatible is found, an error is raised.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">manufacturer</span></code> prefix identifies the device vendor. See
<a class="reference external" href="https://github.com/zephyrproject-rtos/zephyr/blob/main/dts/bindings/vendor-prefixes.txt">dts/bindings/vendor-prefixes.txt</a> for a list of accepted vendor
prefixes. The <code class="docutils literal notranslate"><span class="pre">device</span></code> part is usually from the datasheet.</p>
<p>Some bindings apply to a generic class of devices which do not have a specific
vendor. In these cases, there is no vendor prefix. One example is the
<a class="reference internal" href="../../reference/devicetree/bindings/gpio/gpio-leds.html#std-dtcompatible-gpio-leds"><code class="xref std std-dtcompatible docutils literal notranslate"><span class="pre">gpio-leds</span></code></a> compatible which is commonly used to describe board
LEDs connected to GPIOs.</p>
<p>If more than one binding for a compatible is found, an error is raised.</p>
</div>
<div class="section" id="properties">
<span id="dt-bindings-properties"></span><h3><a class="toc-backref" href="#id9">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">properties:</span></code> key describes the properties that nodes which match the
binding can contain.</p>
<p>For example, a binding for a UART peripheral might look something like this:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">compatible</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;manufacturer,serial&quot;</span><span class="w"></span>

<span class="nt">properties</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">reg</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span><span class="w"></span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">UART peripheral MMIO register space</span><span class="w"></span>
<span class="w">    </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="w">  </span><span class="nt">current-speed</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int</span><span class="w"></span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">current baud rate</span><span class="w"></span>
<span class="w">    </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="w">  </span><span class="nt">label</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w"></span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">human-readable name</span><span class="w"></span>
<span class="w">    </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
</pre></div>
</div>
<p>The properties in the following node would be validated by the above binding:</p>
<div class="highlight-devicetree notranslate"><div class="highlight"><pre><span></span><span class="nf">my-serial</span><span class="o">@</span><span class="mi">deadbeef</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="kr">compatible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;manufacturer,serial&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">     </span><span class="kr">reg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="mh">0xdeadbeef</span><span class="w"> </span><span class="mh">0x1000</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">     </span><span class="n">current-speed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">115200</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">     </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;UART_0&quot;</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>This is used to check that required properties appear, and to control the
format of output generated for them.</p>
<p>Except for some special properties, like <code class="docutils literal notranslate"><span class="pre">reg</span></code>, whose meaning is defined by
the devicetree specification itself, only properties listed in the
<code class="docutils literal notranslate"><span class="pre">properties:</span></code> key will have generated macros.</p>
<div class="section" id="example-property-definitions">
<span id="dt-bindings-example-properties"></span><h4>Example property definitions<a class="headerlink" href="#example-property-definitions" title="Permalink to this headline">¶</a></h4>
<p>Here are some more examples.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">properties</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Describes a property like &#39;current-speed = &lt;115200&gt;;&#39;. We pretend that</span><span class="w"></span>
<span class="w">    </span><span class="c1"># it&#39;s obligatory for the example node and set &#39;required: true&#39;.</span><span class="w"></span>
<span class="w">    </span><span class="nt">current-speed</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int</span><span class="w"></span>
<span class="w">        </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Initial baud rate for bar-device</span><span class="w"></span>

<span class="w">    </span><span class="c1"># Describes an optional property like &#39;keys = &quot;foo&quot;, &quot;bar&quot;;&#39;</span><span class="w"></span>
<span class="w">    </span><span class="nt">keys</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string-array</span><span class="w"></span>
<span class="w">        </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Keys for bar-device</span><span class="w"></span>

<span class="w">    </span><span class="c1"># Describes an optional property like &#39;maximum-speed = &quot;full-speed&quot;;&#39;</span><span class="w"></span>
<span class="w">    </span><span class="c1"># the enum specifies known values that the string property may take</span><span class="w"></span>
<span class="w">    </span><span class="nt">maximum-speed</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w"></span>
<span class="w">        </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Configures USB controllers to work up to a specific speed.</span><span class="w"></span>
<span class="w">        </span><span class="nt">enum</span><span class="p">:</span><span class="w"></span>
<span class="w">           </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;low-speed&quot;</span><span class="w"></span>
<span class="w">           </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;full-speed&quot;</span><span class="w"></span>
<span class="w">           </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;high-speed&quot;</span><span class="w"></span>
<span class="w">           </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;super-speed&quot;</span><span class="w"></span>

<span class="w">    </span><span class="c1"># Describes an optional property like &#39;resolution = &lt;16&gt;;&#39;</span><span class="w"></span>
<span class="w">    </span><span class="c1"># the enum specifies known values that the int property may take</span><span class="w"></span>
<span class="w">    </span><span class="nt">resolution</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int</span><span class="w"></span>
<span class="w">      </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="w">      </span><span class="nt">enum</span><span class="p">:</span><span class="w"></span>
<span class="w">       </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span><span class="w"></span>
<span class="w">       </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">16</span><span class="w"></span>
<span class="w">       </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">24</span><span class="w"></span>
<span class="w">       </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">32</span><span class="w"></span>

<span class="w">    </span><span class="c1"># Describes a required property &#39;#address-cells = &lt;1&gt;&#39;;  the const</span><span class="w"></span>
<span class="w">    </span><span class="c1"># specifies that the value for the property is expected to be the value 1</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;#address-cells&quot;</span><span class="p p-Indicator">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int</span><span class="w"></span>
<span class="w">        </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="w">        </span><span class="nt">const</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w"></span>

<span class="w">    </span><span class="nt">int-with-default</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int</span><span class="w"></span>
<span class="w">        </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="w">        </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">123</span><span class="w"></span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Value for int register, default is power-up configuration.</span><span class="w"></span>

<span class="w">    </span><span class="nt">array-with-default</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">array</span><span class="w"></span>
<span class="w">        </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="w">        </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">3</span><span class="p p-Indicator">]</span><span class="w"> </span><span class="c1"># Same as &#39;array-with-default = &lt;1 2 3&gt;&#39;</span><span class="w"></span>

<span class="w">    </span><span class="nt">string-with-default</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w"></span>
<span class="w">        </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="w">        </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="w"></span>

<span class="w">    </span><span class="nt">string-array-with-default</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string-array</span><span class="w"></span>
<span class="w">        </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="w">        </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;foo&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;bar&quot;</span><span class="p p-Indicator">]</span><span class="w"> </span><span class="c1"># Same as &#39;string-array-with-default = &quot;foo&quot;, &quot;bar&quot;&#39;</span><span class="w"></span>

<span class="w">    </span><span class="nt">uint8-array-with-default</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uint8-array</span><span class="w"></span>
<span class="w">        </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="w">        </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0x12</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0x34</span><span class="p p-Indicator">]</span><span class="w"> </span><span class="c1"># Same as &#39;uint8-array-with-default = [12 34]&#39;</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="property-entry-syntax">
<h4>Property entry syntax<a class="headerlink" href="#property-entry-syntax" title="Permalink to this headline">¶</a></h4>
<p>As shown by the above examples, each property entry in a binding looks like
this:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;property name&gt;:
  required: &lt;true | false&gt;
  type: &lt;string | int | boolean | array | uint8-array | string-array |
         phandle | phandles | phandle-array | path | compound&gt;
  deprecated: &lt;true | false&gt;
  default: &lt;default&gt;
  description: &lt;description of the property&gt;
  enum:
    - &lt;item1&gt;
    - &lt;item2&gt;
    ...
    - &lt;itemN&gt;
  const: &lt;string | int&gt;
</pre></div>
</div>
</div>
<div class="section" id="required-properties">
<h4>Required properties<a class="headerlink" href="#required-properties" title="Permalink to this headline">¶</a></h4>
<p>If a node matches a binding but is missing any property which the binding
defines with <code class="docutils literal notranslate"><span class="pre">required:</span> <span class="pre">true</span></code>, the build fails.</p>
</div>
<div class="section" id="property-types">
<h4>Property types<a class="headerlink" href="#property-types" title="Permalink to this headline">¶</a></h4>
<p>The type of a property constrains its values.
The following types are available. See <a class="reference internal" href="intro.html#dt-writing-property-values"><span class="std std-ref">Writing property values</span></a>
for more details about writing values of each type in a DTS file.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 50%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Example in DTS</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>exactly one string</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">label</span> <span class="pre">=</span> <span class="pre">&quot;UART_0&quot;;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span></code></p></td>
<td><p>exactly one 32-bit value (cell)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">current-speed</span> <span class="pre">=</span> <span class="pre">&lt;115200&gt;;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></td>
<td><p>flags that don’t take a value when true, and are absent if false</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hw-flow-control;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">array</span></code></p></td>
<td><p>zero or more 32-bit values (cells)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">offsets</span> <span class="pre">=</span> <span class="pre">&lt;0x100</span> <span class="pre">0x200</span> <span class="pre">0x300&gt;;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">uint8-array</span></code></p></td>
<td><p>zero or more bytes, in hex (‘bytestring’ in the Devicetree specification)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">local-mac-address</span> <span class="pre">=</span> <span class="pre">[de</span> <span class="pre">ad</span> <span class="pre">be</span> <span class="pre">ef</span> <span class="pre">12</span> <span class="pre">34];</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">string-array</span></code></p></td>
<td><p>zero or more strings</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">dma-names</span> <span class="pre">=</span> <span class="pre">&quot;tx&quot;,</span> <span class="pre">&quot;rx&quot;;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">phandle</span></code></p></td>
<td><p>exactly one phandle</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">interrupt-parent</span> <span class="pre">=</span> <span class="pre">&lt;&amp;gic&gt;;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">phandles</span></code></p></td>
<td><p>zero or more phandles</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pinctrl-0</span> <span class="pre">=</span> <span class="pre">&lt;&amp;usart2_tx_pd5</span> <span class="pre">&amp;usart2_rx_pd6&gt;;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">phandle-array</span></code></p></td>
<td><p>a list of phandles and 32-bit cells (usually specifiers)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">dmas</span> <span class="pre">=</span> <span class="pre">&lt;&amp;dma0</span> <span class="pre">2&gt;,</span> <span class="pre">&lt;&amp;dma0</span> <span class="pre">3&gt;;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>a path to a node as a phandle path reference or path string</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">zephyr,bt-c2h-uart</span> <span class="pre">=</span> <span class="pre">&amp;uart0;</span></code> or
<code class="docutils literal notranslate"><span class="pre">foo</span> <span class="pre">=</span> <span class="pre">&quot;/path/to/some/node&quot;;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">compound</span></code></p></td>
<td><p>a catch-all for more complex types (no macros will be generated)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">foo</span> <span class="pre">=</span> <span class="pre">&lt;&amp;label&gt;,</span> <span class="pre">[01</span> <span class="pre">02];</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="deprecated-properties">
<h4>Deprecated properties<a class="headerlink" href="#deprecated-properties" title="Permalink to this headline">¶</a></h4>
<p>A property with <code class="docutils literal notranslate"><span class="pre">deprecated:</span> <span class="pre">true</span></code> indicates to both the user and the tooling
that the property is meant to be phased out.</p>
<p>The tooling will report a warning if the devicetree includes the property that
is flagged as deprecated. (This warning is upgraded to an error in the
<a class="reference internal" href="../test/twister.html#twister-script"><span class="std std-ref">Test Runner (Twister)</span></a> for upstream pull requests.)</p>
</div>
<div class="section" id="default-values-for-properties">
<span id="dt-bindings-default"></span><h4>Default values for properties<a class="headerlink" href="#default-values-for-properties" title="Permalink to this headline">¶</a></h4>
<p>The optional <code class="docutils literal notranslate"><span class="pre">default:</span></code> setting gives a value that will be used if the
property is missing from the devicetree node.</p>
<p>For example, with this binding fragment:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">properties</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">foo</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int</span><span class="w"></span>
<span class="w">    </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span><span class="w"></span>
</pre></div>
</div>
<p>If property <code class="docutils literal notranslate"><span class="pre">foo</span></code> is missing in a matching node, then the output will be as
if <code class="docutils literal notranslate"><span class="pre">foo</span> <span class="pre">=</span> <span class="pre">&lt;3&gt;;</span></code> had appeared in the DTS (except YAML data types are used for
the default value).</p>
<p>Note that it only makes sense to combine <code class="docutils literal notranslate"><span class="pre">default:</span></code> with <code class="docutils literal notranslate"><span class="pre">required:</span> <span class="pre">false</span></code>.
Combining it with <code class="docutils literal notranslate"><span class="pre">required:</span> <span class="pre">true</span></code> will raise an error.</p>
<p>There is a risk in using <code class="docutils literal notranslate"><span class="pre">default:</span></code> when the value in the binding may be
incorrect for a particular board or hardware configuration.  For example,
defaulting the capacity of the connected power cell in a charging IC binding
is likely to be incorrect.  For such properties it’s better to make the
property <code class="docutils literal notranslate"><span class="pre">required:</span> <span class="pre">true</span></code>, forcing the devicetree maintainer into an explicit
and witting choice.</p>
<p>Driver developers should use their best judgment as to whether a value can be
safely defaulted. Candidates for default values include:</p>
<ul class="simple">
<li><p>delays that would be different only under unusual conditions
(such as intervening hardware)</p></li>
<li><p>configuration for devices that have a standard initial configuration (such as
a USB audio headset)</p></li>
<li><p>defaults which match the vendor-specified power-on reset value
(as long as they are independent from other properties)</p></li>
</ul>
<p>Power-on reset values may be used for defaults as long as they’re independent.
If changing one property would require changing another to create a consistent
configuration, then those properties should be made required.</p>
<p>In any case where <code class="docutils literal notranslate"><span class="pre">default:</span></code> is used, the property documentation should
explain why the value was selected and any conditions that would make it
necessary to provide a different value. (This is mandatory for built-in
bindings.)</p>
<p>See <a class="reference internal" href="#dt-bindings-example-properties"><span class="std std-ref">Example property definitions</span></a> for examples. Putting <code class="docutils literal notranslate"><span class="pre">default:</span></code> on
any property type besides those used in the examples will raise an error.</p>
</div>
<div class="section" id="enum-values">
<h4>Enum values<a class="headerlink" href="#enum-values" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">enum:</span></code> line is followed by a list of values the property may contain. If
a property value in DTS is not in the <code class="docutils literal notranslate"><span class="pre">enum:</span></code> list in the binding, an error
is raised. See <a class="reference internal" href="#dt-bindings-example-properties"><span class="std std-ref">Example property definitions</span></a> for examples.</p>
</div>
<div class="section" id="const">
<h4>Const<a class="headerlink" href="#const" title="Permalink to this headline">¶</a></h4>
<p>This specifies a constant value the property must take. It is mainly useful for
constraining the values of common properties for a particular piece of
hardware.</p>
</div>
</div>
<div class="section" id="child-binding">
<span id="dt-bindings-child"></span><h3><a class="toc-backref" href="#id10">Child-binding</a><a class="headerlink" href="#child-binding" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">child-binding</span></code> can be used when a node has children that all share the same
properties. Each child gets the contents of <code class="docutils literal notranslate"><span class="pre">child-binding</span></code> as its binding,
though an explicit <code class="docutils literal notranslate"><span class="pre">compatible</span> <span class="pre">=</span> <span class="pre">...</span></code> on the child node takes precedence, if
a binding is found for it.</p>
<p>Consider a binding for a PWM LED node like this one, where the child nodes are
required to have a <code class="docutils literal notranslate"><span class="pre">pwms</span></code> property:</p>
<div class="highlight-devicetree notranslate"><div class="highlight"><pre><span></span><span class="nf">pwmleds</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kr">compatible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;pwm-leds&quot;</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="nf">red_pwm_led</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">pwms</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;&amp;</span><span class="na">pwm3</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">15625000</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">};</span><span class="w"></span>
<span class="w">        </span><span class="nf">green_pwm_led</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">pwms</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;&amp;</span><span class="na">pwm3</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">15625000</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">};</span><span class="w"></span>
<span class="w">        </span><span class="cm">/* ... */</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>The binding would look like this:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">compatible</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;pwm-leds&quot;</span><span class="w"></span>

<span class="nt">child-binding</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LED that uses PWM</span><span class="w"></span>

<span class="w">  </span><span class="nt">properties</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">pwms</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">phandle-array</span><span class="w"></span>
<span class="w">      </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">child-binding</span></code> also works recursively. For example, this binding:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">compatible</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo</span><span class="w"></span>

<span class="nt">child-binding</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">child-binding</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">properties</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">my-property</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int</span><span class="w"></span>
<span class="w">        </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
</pre></div>
</div>
<p>will apply to the <code class="docutils literal notranslate"><span class="pre">grandchild</span></code> node in this DTS:</p>
<div class="highlight-devicetree notranslate"><div class="highlight"><pre><span></span><span class="nf">parent</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kr">compatible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="nf">child</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="nf">grandchild</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                        </span><span class="n">my-property</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">123</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="p">};</span><span class="w"></span>
<span class="w">        </span><span class="p">};</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="bus">
<span id="dt-bindings-bus"></span><h3><a class="toc-backref" href="#id11">Bus</a><a class="headerlink" href="#bus" title="Permalink to this headline">¶</a></h3>
<p>If the node is a bus controller, use <code class="docutils literal notranslate"><span class="pre">bus:</span></code> in the binding to say what type
of bus. For example, a binding for a SPI peripheral on an SoC would look like
this:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">compatible</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;manufacturer,spi-peripheral&quot;</span><span class="w"></span>
<span class="nt">bus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spi</span><span class="w"></span>
<span class="c1"># ...</span><span class="w"></span>
</pre></div>
</div>
<p>The presence of this key in the binding informs the build system that the
children of any node matching this binding appear on this type of bus.</p>
<p>This in turn influences the way <code class="docutils literal notranslate"><span class="pre">on-bus:</span></code> is used to match bindings for the
child nodes.</p>
</div>
<div class="section" id="on-bus">
<span id="dt-bindings-on-bus"></span><h3><a class="toc-backref" href="#id12">On-bus</a><a class="headerlink" href="#on-bus" title="Permalink to this headline">¶</a></h3>
<p>If the node appears as a device on a bus, use <code class="docutils literal notranslate"><span class="pre">on-bus:</span></code> in the binding to say
what type of bus.</p>
<p>For example, a binding for an external SPI memory chip should include this line:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">on-bus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spi</span><span class="w"></span>
</pre></div>
</div>
<p>And a binding for an I2C based temperature sensor should include this line:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">on-bus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">i2c</span><span class="w"></span>
</pre></div>
</div>
<p>When looking for a binding for a node, the build system checks if the binding
for the parent node contains <code class="docutils literal notranslate"><span class="pre">bus:</span> <span class="pre">&lt;bus</span> <span class="pre">type&gt;</span></code>. If it does, then only
bindings with a matching <code class="docutils literal notranslate"><span class="pre">on-bus:</span> <span class="pre">&lt;bus</span> <span class="pre">type&gt;</span></code> and bindings without an
explicit <code class="docutils literal notranslate"><span class="pre">on-bus</span></code> are considered. Bindings with an explicit <code class="docutils literal notranslate"><span class="pre">on-bus:</span> <span class="pre">&lt;bus</span>
<span class="pre">type&gt;</span></code> are searched for first, before bindings without an explicit <code class="docutils literal notranslate"><span class="pre">on-bus</span></code>.
The search repeats for each item in the node’s <code class="docutils literal notranslate"><span class="pre">compatible</span></code> property, in
order.</p>
<p>This feature allows the same device to have different bindings depending on
what bus it appears on. For example, consider a sensor device with compatible
<code class="docutils literal notranslate"><span class="pre">manufacturer,sensor</span></code> which can be used via either I2C or SPI.</p>
<p>The sensor node may therefore appear in the devicetree as a child node of
either an SPI or an I2C controller, like this:</p>
<div class="highlight-devicetree notranslate"><div class="highlight"><pre><span></span><span class="nf">spi-bus</span><span class="o">@</span><span class="mi">0</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="cm">/* ... some compatible with &#39;bus: spi&#39;, etc. ... */</span><span class="w"></span>

<span class="w">   </span><span class="nf">sensor</span><span class="o">@</span><span class="mi">0</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">       </span><span class="kr">compatible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;manufacturer,sensor&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">       </span><span class="kr">reg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">       </span><span class="cm">/* ... */</span><span class="w"></span>
<span class="w">   </span><span class="p">};</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="nf">i2c-bus</span><span class="o">@</span><span class="mi">0</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="cm">/* ... some compatible with &#39;bus: i2c&#39;, etc. ... */</span><span class="w"></span>

<span class="w">   </span><span class="nf">sensor</span><span class="o">@</span><span class="mi">79</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">       </span><span class="kr">compatible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;manufacturer,sensor&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">       </span><span class="kr">reg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">79</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">       </span><span class="cm">/* ... */</span><span class="w"></span>
<span class="w">   </span><span class="p">};</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>You can write two separate binding files which match these individual sensor
nodes, even though they have the same compatible:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="c1"># manufacturer,sensor-spi.yaml, which matches sensor@0 on the SPI bus:</span><span class="w"></span>
<span class="nt">compatible</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;manufacturer,sensor&quot;</span><span class="w"></span>
<span class="nt">on-bus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spi</span><span class="w"></span>

<span class="c1"># manufacturer,sensor-i2c.yaml, which matches sensor@79 on the I2C bus:</span><span class="w"></span>
<span class="nt">compatible</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;manufacturer,sensor&quot;</span><span class="w"></span>
<span class="nt">properties</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">uses-clock-stretching</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">boolean</span><span class="w"></span>
<span class="w">    </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="nt">on-bus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">i2c</span><span class="w"></span>
</pre></div>
</div>
<p>Only <code class="docutils literal notranslate"><span class="pre">sensor&#64;79</span></code> can have a <code class="docutils literal notranslate"><span class="pre">use-clock-stretching</span></code> property. The
bus-sensitive logic ignores <code class="file docutils literal notranslate"><span class="pre">manufacturer,sensor-i2c.yaml</span></code> when searching
for a binding for <code class="docutils literal notranslate"><span class="pre">sensor&#64;0</span></code>.</p>
</div>
<div class="section" id="specifier-cell-names-cells">
<span id="dt-bindings-cells"></span><h3><a class="toc-backref" href="#id13">Specifier cell names (*-cells)</a><a class="headerlink" href="#specifier-cell-names-cells" title="Permalink to this headline">¶</a></h3>
<p>Specifier cells are usually used with <code class="docutils literal notranslate"><span class="pre">phandle-array</span></code> type properties briefly
introduced above.</p>
<p>To understand the purpose of <code class="docutils literal notranslate"><span class="pre">*-cells</span></code>, assume that some node has the
following <code class="docutils literal notranslate"><span class="pre">pwms</span></code> property with type <code class="docutils literal notranslate"><span class="pre">phandle-array</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>my-device {
     pwms = &lt;&amp;pwm0 1 2&gt;, &lt;&amp;pwm3 4&gt;;
};
</pre></div>
</div>
<p>The tooling strips the final <code class="docutils literal notranslate"><span class="pre">s</span></code> from the property name of such properties,
resulting in <code class="docutils literal notranslate"><span class="pre">pwm</span></code>. Then the value of the <code class="docutils literal notranslate"><span class="pre">#pwm-cells</span></code> property is
looked up in each of the PWM controller nodes <code class="docutils literal notranslate"><span class="pre">pwm0</span></code> and <code class="docutils literal notranslate"><span class="pre">pwm3</span></code>, like so:</p>
<div class="highlight-devicetree notranslate"><div class="highlight"><pre><span></span><span class="nl">pwm0</span><span class="p">:</span><span class="w"> </span><span class="nf">pwm</span><span class="o">@</span><span class="mi">0</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="kr">compatible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;foo,pwm&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">     </span><span class="o">#</span><span class="n">pwm-cells</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">2</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="nl">pwm3</span><span class="p">:</span><span class="w"> </span><span class="nf">pwm</span><span class="o">@</span><span class="mi">3</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="kr">compatible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;bar,pwm&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">     </span><span class="o">#</span><span class="n">pwm-cells</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">&amp;pwm0</span> <span class="pre">1</span> <span class="pre">2</span></code> part of the property value has two cells, <code class="docutils literal notranslate"><span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">2</span></code>,
which matches <code class="docutils literal notranslate"><span class="pre">#pwm-cells</span> <span class="pre">=</span> <span class="pre">&lt;2&gt;;</span></code>, so these cells are considered the
<em>specifier</em> associated with <code class="docutils literal notranslate"><span class="pre">pwm0</span></code> in the phandle array.</p>
<p>Similarly, the cell <code class="docutils literal notranslate"><span class="pre">4</span></code> is the specifier associated with <code class="docutils literal notranslate"><span class="pre">pwm3</span></code>.</p>
<p>The number of PWM cells in the specifiers in <code class="docutils literal notranslate"><span class="pre">pwms</span></code> must match the
<code class="docutils literal notranslate"><span class="pre">#pwm-cells</span></code> values, as shown above. If there is a mismatch, an error is
raised. For example, this node would result in an error:</p>
<div class="highlight-devicetree notranslate"><div class="highlight"><pre><span></span><span class="nf">my-bad-device</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="cm">/* wrong: 2 cells given in the specifier, but #pwm-cells is 1 in pwm3. */</span><span class="w"></span>
<span class="w">     </span><span class="n">pwms</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;&amp;</span><span class="na">pwm3</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>The binding for each PWM controller must also have a <code class="docutils literal notranslate"><span class="pre">*-cells</span></code> key, in this
case <code class="docutils literal notranslate"><span class="pre">pwm-cells</span></code>, giving names to the cells in each specifier:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="c1"># foo,pwm.yaml</span><span class="w"></span>
<span class="nt">compatible</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;foo,pwm&quot;</span><span class="w"></span>
<span class="nn">...</span><span class="w"></span>
<span class="nt">pwm-cells</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">channel</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">period</span><span class="w"></span>

<span class="c1"># bar,pwm.yaml</span><span class="w"></span>
<span class="nt">compatible</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bar,pwm&quot;</span><span class="w"></span>
<span class="nn">...</span><span class="w"></span>
<span class="nt">pwm-cells</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">period</span><span class="w"></span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">*-names</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">pwm-names</span></code>) property can appear on the node as well,
giving a name to each entry.</p>
<p>This allows the cells in the specifiers to be accessed by name, e.g. using APIs
like <a class="reference internal" href="../../reference/devicetree/api.html#c.DT_PWMS_CHANNEL_BY_NAME" title="DT_PWMS_CHANNEL_BY_NAME"><code class="xref c c-macro docutils literal notranslate"><span class="pre">DT_PWMS_CHANNEL_BY_NAME</span></code></a>.</p>
<p>Because other property names are derived from the name of the property by
removing the final <code class="docutils literal notranslate"><span class="pre">s</span></code>, the property name must end in <code class="docutils literal notranslate"><span class="pre">s</span></code>. An error is
raised if it doesn’t.</p>
<p>An alternative is using a <code class="docutils literal notranslate"><span class="pre">specifier-space</span></code> property to indicate the base
property name for <code class="docutils literal notranslate"><span class="pre">*-names</span></code> and <code class="docutils literal notranslate"><span class="pre">*-cells</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">*-gpios</span></code> properties are special-cased so that e.g. <code class="docutils literal notranslate"><span class="pre">foo-gpios</span></code> resolves to
<code class="docutils literal notranslate"><span class="pre">#gpio-cells</span></code> rather than <code class="docutils literal notranslate"><span class="pre">#foo-gpio-cells</span></code>.</p>
<p>If the specifier is empty (e.g. <code class="docutils literal notranslate"><span class="pre">#clock-cells</span> <span class="pre">=</span> <span class="pre">&lt;0&gt;</span></code>), then <code class="docutils literal notranslate"><span class="pre">*-cells</span></code> can
either be omitted (recommended) or set to an empty array. Note that an empty
array is specified as e.g. <code class="docutils literal notranslate"><span class="pre">clock-cells:</span> <span class="pre">[]</span></code> in YAML.</p>
<p>All <code class="docutils literal notranslate"><span class="pre">phandle-array</span></code> type properties support mapping through <code class="docutils literal notranslate"><span class="pre">*-map</span></code>
properties, e.g. <code class="docutils literal notranslate"><span class="pre">gpio-map</span></code>, as defined by the Devicetree specification.</p>
</div>
<div class="section" id="include">
<span id="dt-bindings-include"></span><h3><a class="toc-backref" href="#id14">Include</a><a class="headerlink" href="#include" title="Permalink to this headline">¶</a></h3>
<p>Bindings can include other files, which can be used to share common property
definitions between bindings. Use the <code class="docutils literal notranslate"><span class="pre">include:</span></code> key for this. Its value is
either a string or a list.</p>
<p>In the simplest case, you can include another file by giving its name as a
string, like this:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">include</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo.yaml</span><span class="w"></span>
</pre></div>
</div>
<p>If any file named <code class="file docutils literal notranslate"><span class="pre">foo.yaml</span></code> is found (see
<a class="reference internal" href="#dt-where-bindings-are-located"><span class="std std-ref">Where bindings are located</span></a> for the search process), it will be
included into this binding.</p>
<p>Included files are merged into bindings with a simple recursive dictionary
merge. The build system will check that the resulting merged binding is
well-formed.</p>
<p>It is an error if a key appears with a different value in a binding and in a
file it includes, with one exception: a binding can have <code class="docutils literal notranslate"><span class="pre">required:</span> <span class="pre">true</span></code> for
a <a class="reference internal" href="#dt-bindings-properties"><span class="std std-ref">property definition</span></a> for which the included
file has <code class="docutils literal notranslate"><span class="pre">required:</span> <span class="pre">false</span></code>. The <code class="docutils literal notranslate"><span class="pre">required:</span> <span class="pre">true</span></code> takes precedence, allowing
bindings to strengthen requirements from included files.</p>
<p>Note that weakening requirements by having <code class="docutils literal notranslate"><span class="pre">required:</span> <span class="pre">false</span></code> where the
included file has <code class="docutils literal notranslate"><span class="pre">required:</span> <span class="pre">true</span></code> is an error. This is meant to keep the
organization clean.</p>
<p>The file <a class="reference external" href="https://github.com/zephyrproject-rtos/zephyr/blob/main/dts/bindings/base/base.yaml">base.yaml </a> contains
definitions for many common properties. When writing a new binding, it is a
good idea to check if <code class="file docutils literal notranslate"><span class="pre">base.yaml</span></code> already defines some of the needed
properties, and include it if it does.</p>
<p>Note that you can make a property defined in base.yaml obligatory like this,
taking <a class="reference internal" href="intro.html#dt-important-props"><span class="std std-ref">reg</span></a> as an example:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">reg</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
</pre></div>
</div>
<p>This relies on the dictionary merge to fill in the other keys for <code class="docutils literal notranslate"><span class="pre">reg</span></code>, like
<code class="docutils literal notranslate"><span class="pre">type</span></code>.</p>
<p>To include multiple files, you can use a list of strings:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">include</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo.yaml</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bar.yaml</span><span class="w"></span>
</pre></div>
</div>
<p>This includes the files <code class="file docutils literal notranslate"><span class="pre">foo.yaml</span></code> and <code class="file docutils literal notranslate"><span class="pre">bar.yaml</span></code>. (You can
write this list in a single line of YAML as <code class="docutils literal notranslate"><span class="pre">include:</span> <span class="pre">[foo.yaml,</span> <span class="pre">bar.yaml]</span></code>.)</p>
<p>When including multiple files, any overlapping <code class="docutils literal notranslate"><span class="pre">required</span></code> keys on properties
in the included files are ORed together. This makes sure that a <code class="docutils literal notranslate"><span class="pre">required:</span>
<span class="pre">true</span></code> is always respected.</p>
<p>In some cases, you may want to include some property definitions from a file,
but not all of them. In this case, <code class="docutils literal notranslate"><span class="pre">include:</span></code> should be a list, and you can
filter out just the definitions you want by putting a mapping in the list, like
this:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">include</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo.yaml</span><span class="w"></span>
<span class="w">    </span><span class="nt">property-allowlist</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">i-want-this-one</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">and-this-one</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bar.yaml</span><span class="w"></span>
<span class="w">    </span><span class="nt">property-blocklist</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">do-not-include-this-one</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">or-this-one</span><span class="w"></span>
</pre></div>
</div>
<p>Each map element must have a <code class="docutils literal notranslate"><span class="pre">name</span></code> key which is the filename to include, and
may have <code class="docutils literal notranslate"><span class="pre">property-allowlist</span></code> and <code class="docutils literal notranslate"><span class="pre">property-blocklist</span></code> keys that filter
which properties are included.</p>
<p>You cannot have a single map element with both <code class="docutils literal notranslate"><span class="pre">property-allowlist</span></code> and
<code class="docutils literal notranslate"><span class="pre">property-blocklist</span></code> keys. A map element with neither <code class="docutils literal notranslate"><span class="pre">property-allowlist</span></code>
nor <code class="docutils literal notranslate"><span class="pre">property-blocklist</span></code> is valid; no additional filtering is done.</p>
<p>You can freely intermix strings and mappings in a single <code class="docutils literal notranslate"><span class="pre">include:</span></code> list:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">include</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo.yaml</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bar.yaml</span><span class="w"></span>
<span class="w">    </span><span class="nt">property-blocklist</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">do-not-include-this-one</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">or-this-one</span><span class="w"></span>
</pre></div>
</div>
<p>Finally, you can filter from a child binding like this:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">include</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bar.yaml</span><span class="w"></span>
<span class="w">    </span><span class="nt">child-binding</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">property-allowlist</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">child-prop-to-allow</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="rules-for-mainline-bindings">
<span id="dt-writing-bindings"></span><h2><a class="toc-backref" href="#id15">Rules for mainline bindings</a><a class="headerlink" href="#rules-for-mainline-bindings" title="Permalink to this headline">¶</a></h2>
<p>This section includes general rules for writing bindings that you want to
submit to the mainline Zephyr Project. (You don’t need to follow these rules
for bindings you don’t intend to contribute to the Zephyr Project, but it’s a
good idea.)</p>
<p>Decisions made by the Zephyr devicetree maintainer override the contents of
this section. If that happens, though, please let them know so they can update
this page, or you can send a patch yourself.</p>
<div class="section" id="check-for-existing-bindings">
<h3><a class="toc-backref" href="#id16">Check for existing bindings</a><a class="headerlink" href="#check-for-existing-bindings" title="Permalink to this headline">¶</a></h3>
<p>Zephyr aims for devicetree <a class="reference internal" href="design.html#dt-source-compatibility"><span class="std std-ref">Source compatibility with other operating systems</span></a>. Therefore, if there
is an existing binding for your device in an authoritative location, you should
try to replicate its properties when writing a Zephyr binding, and you must
justify any Zephyr-specific divergences.</p>
<p>In particular, this rule applies if:</p>
<ul class="simple">
<li><p>There is an existing binding in the mainline Linux kernel. See
<code class="file docutils literal notranslate"><span class="pre">Documentation/devicetree/bindings</span></code> in <a class="reference external" href="https://github.com/torvalds/linux/">Linus’s tree</a> for existing
bindings and the <a class="reference external" href="https://www.kernel.org/doc/html/latest/devicetree/index.html">Linux devicetree documentation</a> for more information.</p></li>
<li><p>Your hardware vendor provides an official binding outside of the Linux
kernel.</p></li>
</ul>
</div>
<div class="section" id="general-rules">
<h3><a class="toc-backref" href="#id17">General rules</a><a class="headerlink" href="#general-rules" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Bindings which match a compatible must have file names based on the compatible.</p>
<ul class="simple">
<li><p>For example, a binding for compatible <code class="docutils literal notranslate"><span class="pre">vnd,foo</span></code> must be named <code class="docutils literal notranslate"><span class="pre">vnd,foo.yaml</span></code>.</p></li>
<li><p>If the binding is bus-specific, you can append the bus to the file name;
for example, if the binding YAML has <code class="docutils literal notranslate"><span class="pre">on-bus:</span> <span class="pre">bar</span></code>, you may name the file
<code class="docutils literal notranslate"><span class="pre">vnd,foo-bar.yaml</span></code>.</p></li>
</ul>
</li>
<li><p>All recommendations in <a class="reference internal" href="#dt-bindings-default"><span class="std std-ref">Default values for properties</span></a> are requirements when
submitting the binding.</p>
<p>In particular, if you use the <code class="docutils literal notranslate"><span class="pre">default:</span></code> feature, you must justify the
value in the property’s description.</p>
</li>
<li><p>There are two ways to write property <code class="docutils literal notranslate"><span class="pre">description:</span></code> strings that are always
OK.</p>
<p>If your description is short, it’s fine to use this style:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my short string</span><span class="w"></span>
</pre></div>
</div>
<p>If your description is long or spans multiple lines, you must use this
style:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span><span class="w"></span>
<span class="w">  </span><span class="no">My very long string</span><span class="w"></span>
<span class="w">  </span><span class="no">goes here.</span><span class="w"></span>
<span class="w">  </span><span class="no">Look at all these lines!</span><span class="w"></span>
</pre></div>
</div>
<p>This <code class="docutils literal notranslate"><span class="pre">|</span></code> style prevents YAML parsers from removing the newlines in
multi-line descriptions. This in turn makes these long strings
display propertly in the <a class="reference internal" href="../../reference/devicetree/bindings.html#devicetree-binding-index"><span class="std std-ref">Bindings index</span></a>.</p>
<p>Do not use any other style for long or multi-line strings.</p>
</li>
</ul>
</div>
<div class="section" id="vendor-prefixes">
<h3><a class="toc-backref" href="#id18">Vendor prefixes</a><a class="headerlink" href="#vendor-prefixes" title="Permalink to this headline">¶</a></h3>
<p>The following general rules apply to vendor prefixes in <a class="reference internal" href="intro.html#dt-important-props"><span class="std std-ref">compatible</span></a> properties.</p>
<ul>
<li><p>If your device is manufactured by a specific vendor, then its compatible
should have a vendor prefix.</p>
<p>If your binding describes hardware with a well known vendor from the list in
<a class="reference external" href="https://github.com/zephyrproject-rtos/zephyr/blob/main/dts/bindings/vendor-prefixes.txt">dts/bindings/vendor-prefixes.txt</a>, you must use that vendor
prefix.</p>
</li>
<li><p>If your device is not manufactured by a specific hardware vendor, do <strong>not</strong>
invent a vendor prefix. Vendor prefixes are not mandatory parts of compatible
properties, and compatibles should not include them unless they refer to an
actual vendor. There are some exceptions to this rule, but the practice is
strongly discouraged.</p></li>
<li><p>Do not submit additions to Zephyr’s <code class="file docutils literal notranslate"><span class="pre">dts/bindings/vendor-prefixes.txt</span></code>
file unless you also include users of the new prefix. This means at least a
binding and a devicetree using the vendor prefix, and should ideally include
a device driver handling that compatible.</p>
<p>For custom bindings, you can add a custom
<code class="file docutils literal notranslate"><span class="pre">dts/bindings/vendor-prefixes.txt</span></code> file to any directory in your
<a class="reference internal" href="../../application/index.html#dts-root"><span class="std std-ref">DTS_ROOT</span></a>. The devicetree tooling will respect these
prefixes, and will not generate warnings or errors if you use them in your
own bindings or devicetrees.</p>
</li>
<li><p>We sometimes synchronize Zephyr’s vendor-prefixes.txt file with the Linux
kernel’s equivalent file; this process is exempt from the previous rule.</p></li>
<li><p>If your binding is describing an abstract class of hardware with Zephyr
specific drivers handling the nodes, it’s usually best to use <code class="docutils literal notranslate"><span class="pre">zephyr</span></code> as
the vendor prefix. See <a class="reference internal" href="../../reference/devicetree/bindings.html#dt-vendor-zephyr"><span class="std std-ref">Zephyr-specific binding (zephyr)</span></a> for examples.</p></li>
</ul>
</div>
</div>
<div class="section" id="inferred-bindings">
<span id="dt-zephyr-user"></span><span id="dt-inferred-bindings"></span><h2><a class="toc-backref" href="#id19">Inferred bindings</a><a class="headerlink" href="#inferred-bindings" title="Permalink to this headline">¶</a></h2>
<p>Zephyr’s devicetree scripts can “infer” a binding for the special
<code class="docutils literal notranslate"><span class="pre">/zephyr,user</span></code> node based on the values observed in its properties.</p>
<p>This node matches a binding which is dynamically created by the build system
based on the values of its properties in the final devicetree. It does not have
a <code class="docutils literal notranslate"><span class="pre">compatible</span></code> property.</p>
<p>This node is meant for sample code and applications. The devicetree API
provides it as a convenient container when only a few simple properties are
needed, such as storing a hardware-dependent value, phandle(s), or GPIO pin.</p>
<p>For example, with this DTS fragment:</p>
<div class="highlight-devicetree notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="cm"> </span><span class="cpf">&lt;dt-bindings/gpio/gpio.h&gt;</span><span class="w"></span>

<span class="nf">/</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="nf">zephyr,user</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">             </span><span class="n">boolean</span><span class="p">;</span><span class="w"></span>
<span class="w">             </span><span class="n">bytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">81</span><span class="w"> </span><span class="mi">82</span><span class="w"> </span><span class="mi">83</span><span class="p">];</span><span class="w"></span>
<span class="w">             </span><span class="n">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">23</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">             </span><span class="n">numbers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">2</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">3</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">             </span><span class="n">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;text&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">             </span><span class="n">strings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="p">;</span><span class="w"></span>

<span class="w">             </span><span class="n">handle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;&amp;</span><span class="na">gpio0</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">             </span><span class="n">handles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;&amp;</span><span class="na">gpio0</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;&amp;</span><span class="na">gpio1</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">             </span><span class="n">signal-gpios</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;&amp;</span><span class="na">gpio0</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="na">GPIO_ACTIVE_HIGH</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">     </span><span class="p">};</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>You can get the simple values like this:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="cp">#define ZEPHYR_USER_NODE DT_PATH(zephyr_user)</span>

<span class="n">DT_PROP</span><span class="p">(</span><span class="n">ZEPHYR_USER_NODE</span><span class="p">,</span><span class="w"> </span><span class="n">boolean</span><span class="p">)</span><span class="w"> </span><span class="c1">// 1</span>
<span class="n">DT_PROP</span><span class="p">(</span><span class="n">ZEPHYR_USER_NODE</span><span class="p">,</span><span class="w"> </span><span class="n">bytes</span><span class="p">)</span><span class="w">   </span><span class="c1">// {0x81, 0x82, 0x83}</span>
<span class="n">DT_PROP</span><span class="p">(</span><span class="n">ZEPHYR_USER_NODE</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="p">)</span><span class="w">  </span><span class="c1">// 23</span>
<span class="n">DT_PROP</span><span class="p">(</span><span class="n">ZEPHYR_USER_NODE</span><span class="p">,</span><span class="w"> </span><span class="n">numbers</span><span class="p">)</span><span class="w"> </span><span class="c1">// {1, 2, 3}</span>
<span class="n">DT_PROP</span><span class="p">(</span><span class="n">ZEPHYR_USER_NODE</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="p">)</span><span class="w">  </span><span class="c1">// &quot;text&quot;</span>
<span class="n">DT_PROP</span><span class="p">(</span><span class="n">ZEPHYR_USER_NODE</span><span class="p">,</span><span class="w"> </span><span class="n">strings</span><span class="p">)</span><span class="w"> </span><span class="c1">// {&quot;a&quot;, &quot;b&quot;, &quot;c&quot;}</span>
</pre></div>
</div>
<p>You can convert the phandles in the <code class="docutils literal notranslate"><span class="pre">handle</span></code> and <code class="docutils literal notranslate"><span class="pre">handles</span></code> properties to
device pointers like this:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm"> * Same thing as:</span>
<span class="cm"> *</span>
<span class="cm"> * ... my_dev = DEVICE_DT_GET(DT_NODELABEL(gpio0));</span>
<span class="cm"> */</span><span class="w"></span>
<span class="k">const</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">device</span><span class="w"> </span><span class="o">*</span><span class="n">my_device</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">     </span><span class="n">DEVICE_DT_GET</span><span class="p">(</span><span class="n">DT_PROP</span><span class="p">(</span><span class="n">ZEPHYR_USER_NODE</span><span class="p">,</span><span class="w"> </span><span class="n">handle</span><span class="p">));</span><span class="w"></span>

<span class="cp">#define PHANDLE_TO_DEVICE(node_id, prop, idx) \</span>
<span class="cp">     DEVICE_DT_GET(DT_PHANDLE_BY_IDX(node_id, prop, idx)),</span>

<span class="cm">/*</span>
<span class="cm"> * Same thing as:</span>
<span class="cm"> *</span>
<span class="cm"> * ... *my_devices[] = {</span>
<span class="cm"> *         DEVICE_DT_GET(DT_NODELABEL(gpio0)),</span>
<span class="cm"> *         DEVICE_DT_GET(DT_NODELABEL(gpio1)),</span>
<span class="cm"> * };</span>
<span class="cm"> */</span><span class="w"></span>
<span class="k">const</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">device</span><span class="w"> </span><span class="o">*</span><span class="n">my_devices</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="n">DT_FOREACH_PROP_ELEM</span><span class="p">(</span><span class="n">ZEPHYR_USER_NODE</span><span class="p">,</span><span class="w"> </span><span class="n">handles</span><span class="p">,</span><span class="w"> </span><span class="n">PHANDLE_TO_DEVICE</span><span class="p">)</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>And you can convert the pin defined in <code class="docutils literal notranslate"><span class="pre">signal-gpios</span></code> to a <code class="docutils literal notranslate"><span class="pre">struct</span>
<span class="pre">gpio_dt_spec</span></code>, then use it like this:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;drivers/gpio.h&gt;</span><span class="cp"></span>

<span class="cp">#define ZEPHYR_USER_NODE DT_PATH(zephyr_user)</span>

<span class="k">const</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">gpio_dt_spec</span><span class="w"> </span><span class="n">signal</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">        </span><span class="n">GPIO_DT_SPEC_GET</span><span class="p">(</span><span class="n">ZEPHYR_USER_NODE</span><span class="p">,</span><span class="w"> </span><span class="n">signal_gpios</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* Configure the pin */</span><span class="w"></span>
<span class="n">gpio_pin_configure_dt</span><span class="p">(</span><span class="o">&amp;</span><span class="n">signal</span><span class="p">,</span><span class="w"> </span><span class="n">GPIO_OUTPUT_INACTIVE</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* Set the pin to its active level */</span><span class="w"></span>
<span class="n">gpio_pin_set</span><span class="p">(</span><span class="n">signal</span><span class="p">.</span><span class="n">port</span><span class="p">,</span><span class="w"> </span><span class="n">signal</span><span class="p">.</span><span class="n">pin</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>(See <a class="reference internal" href="../../reference/peripherals/gpio.html#c.gpio_dt_spec" title="gpio_dt_spec"><code class="xref c c-struct docutils literal notranslate"><span class="pre">gpio_dt_spec</span></code></a>, <a class="reference internal" href="../../reference/peripherals/gpio.html#c.GPIO_DT_SPEC_GET" title="GPIO_DT_SPEC_GET"><code class="xref c c-macro docutils literal notranslate"><span class="pre">GPIO_DT_SPEC_GET</span></code></a>, and
<a class="reference internal" href="../../reference/peripherals/gpio.html#c.gpio_pin_configure_dt" title="gpio_pin_configure_dt"><code class="xref c c-func docutils literal notranslate"><span class="pre">gpio_pin_configure_dt()</span></code></a> for details on these APIs.)</p>
</div>
</div>


           </div>
          </div>

          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../copyright.html">Copyright</a> 2015-2021 Zephyr Project members and individual contributors.
      <span class="lastupdated">Last updated on Feb 21, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
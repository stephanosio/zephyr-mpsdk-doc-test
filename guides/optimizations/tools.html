<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Optimization Tools &mdash; Zephyr Project Documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script type="module" src="../../_static/js/dark-mode-toggle.min.mjs"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-831873-47"></script>
        <script src="../../_static/js/ga-tracker.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="Zephyr CMake Package" href="../zephyr_cmake_package.html" />
    <link rel="prev" title="Optimizing for Footprint" href="footprint.html" />
  <meta name="color-scheme" content="dark light">
  
  <link rel="stylesheet" href="../../_static/css/light.css" type="text/css" media="(prefers-color-scheme: light)"/>
  <link rel="stylesheet" href="../../_static/css/dark.css" type="text/css" media="(prefers-color-scheme: dark)"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html">
            <img src="../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.0-rc3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Zephyr Project</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Release Versions</dt>
        
          <dd><a href="/">latest</a></dd>
        
          <dd><a href="/2.7.0/">2.7.0</a></dd>
        
          <dd><a href="/2.6.0/">2.6.0</a></dd>
        
          <dd><a href="/2.5.0/">2.5.0</a></dd>
        
          <dd><a href="/2.4.0/">2.4.0</a></dd>
        
          <dd><a href="/2.3.0/">2.3.0</a></dd>
        
          <dd><a href="/1.14.1/">1.14.1</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="/latest/zephyr.pdf">PDF</a></dd>
      </dl>
      <dl>
        <dt>zephyrproject.org Links</dt>
          <dd>
            <a href="https://www.zephyrproject.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/sdk-ng/releases">SDK</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/zephyr/releases">Releases</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development_process/index.html">Development and Contribution Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build/index.html">Build and Configuration Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../application/index.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">API Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User and Developer Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../beyond-GSG.html">Beyond the Getting Started Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../arch/index.html">Architecture-related Guides</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bluetooth/index.html">Bluetooth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../docs/index.html">Documentation Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../coccinelle.html">Coccinelle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code-relocation.html">Code And Data Relocation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../crypto/index.html">Cryptography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flash_debug/index.html">Flashing and Hardware Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debug_tools/index.html">Debugging and Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../device_mgmt/index.html">Device Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dts/index.html">Devicetree Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../env_vars.html">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pinctrl/index.html">Pin Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pm/index.html">Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../emulator/index.html">Peripheral and Hardware Emulators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules.html">Modules (External projects)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../networking/index.html">Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../platformio/index.html">Using with PlatformIO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../portability/index.html">OS Abstraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../porting/index.html">Porting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../smf/index.html">State Machine Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../test/index.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tfm/index.html">Trusted Firmware-M</a></li>
<li class="toctree-l2"><a class="reference internal" href="../west/index.html">West (Zephyr’s meta-tool)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Optimizations</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="footprint.html">Optimizing for Footprint</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Optimization Tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#footprint-and-memory-usage">Footprint and Memory Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#data-structures">Data Structures</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../zephyr_cmake_package.html">Zephyr CMake Package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../samples/index.html">Samples and Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../boards/index.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/index.html">Release Notes</a></li>
</ul>

  
  <div class="toctree-wrapper compound">
    <p class="caption"><span class="caption-text">Reference</span></p>
    <ul>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/doxygen/html/index.html">API</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/kconfig/index.html">Kconfig Options</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/devicetree/bindings.html">Devicetree Bindings</a>
      </li>
      
    </ul>
  </div>
  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Zephyr Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Docs / Latest -->
  
  

  <li><a href="../../index.html">Docs / Latest</a> &raquo;</li>
  
     <li><a href="../index.html">User and Developer Guides</a> &raquo;</li>
  
     <li><a href="index.html">Optimizations</a> &raquo;</li>
  
  <li>Optimization Tools</li>


  <li class="wy-breadcrumbs-aside">
    <dark-mode-toggle id="dark-mode-toggle" appearance="toggle" permanent="true"/>
  </li>
  <li class="wy-breadcrumbs-aside">
      
      
        <a href="https://github.com/zephyrproject-rtos/zephyr/blob/main/doc/guides/optimizations/tools.rst" class="fa fa-github"> Open on GitHub</a>
      
    
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="wy-alert wy-alert-danger">
     This is the documentation for the latest (main) development branch of
     Zephyr. If you are looking for the documentation of previous releases, use
     the drop-down menu on the left and select the desired version.
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="optimization-tools">
<span id="id1"></span><h1>Optimization Tools<a class="headerlink" href="#optimization-tools" title="Permalink to this headline">¶</a></h1>
<div class="section" id="footprint-and-memory-usage">
<span id="footprint-tools"></span><h2>Footprint and Memory Usage<a class="headerlink" href="#footprint-and-memory-usage" title="Permalink to this headline">¶</a></h2>
<p>The build system offers 3 targets to view and analyse RAM, ROM and stack usage
in generated images. The tools run on the final image and give information
about size of symbols and code being used in both RAM and ROM. Additionally,
with features available through the compiler, we can also generate worst-case
stack usage analysis:</p>
<p>Tools that are available as build system targets:</p>
<div class="section" id="build-target-puncover">
<h3>Build Target: puncover<a class="headerlink" href="#build-target-puncover" title="Permalink to this headline">¶</a></h3>
<p>This target uses a 3rd party tools called puncover which can be found <a class="reference external" href="https://github.com/HBehrens/puncover">here</a>. When this target is built, it will
launch a local web server which will allow you to open a web client and browse
the files and view their ROM, RAM and stack usage. Before you can use this
target, you will have to install the puncover python module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">install</span> <span class="n">git</span><span class="o">+</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">HBehrens</span><span class="o">/</span><span class="n">puncover</span> <span class="o">--</span><span class="n">user</span>
</pre></div>
</div>
<p>Then:</p>
<p>Using west:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -b reel_board samples/hello_world</span>
<span class="go">west build -t puncover</span>
</pre></div>
</div>
<p>Using CMake and ninja:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Use cmake to configure a Ninja-based buildsystem:
<span class="go">cmake -B build -GNinja -DBOARD=reel_board samples/hello_world</span>

<span class="gp"># </span>Now run ninja on the generated build system:
<span class="go">ninja -C build puncover</span>
</pre></div>
</div>
<p>To view worst-case stack usage analysis, build this with the
<a class="reference internal" href="../../reference/kconfig/dummy-syms.html#std-kconfig-CONFIG_STACK_USAGE"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_STACK_USAGE</span></code></a> enabled.</p>
<p>Using west:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -b reel_board samples/hello_world -- -DCONFIG_STACK_USAGE=y</span>
<span class="go">west build -t puncover</span>
</pre></div>
</div>
<p>Using CMake and ninja:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Use cmake to configure a Ninja-based buildsystem:
<span class="go">cmake -B build -GNinja -DBOARD=reel_board -DCONFIG_STACK_USAGE=y samples/hello_world</span>

<span class="gp"># </span>Now run ninja on the generated build system:
<span class="go">ninja -C build puncover</span>
</pre></div>
</div>
</div>
<div class="section" id="build-target-ram-report">
<h3>Build Target: ram_report<a class="headerlink" href="#build-target-ram-report" title="Permalink to this headline">¶</a></h3>
<p>List all compiled objects and their RAM usage in a tabular form with bytes
per symbol and the percentage it uses. The data is grouped based on the file
system location of the object in the tree and the file containing the symbol.</p>
<p>Use the <code class="docutils literal notranslate"><span class="pre">ram_report</span></code> target with your board:</p>
<p>Using west:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -b reel_board samples/hello_world</span>
<span class="go">west build -t ram_report</span>
</pre></div>
</div>
<p>Using CMake and ninja:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Use cmake to configure a Ninja-based buildsystem:
<span class="go">cmake -B build -GNinja -DBOARD=reel_board samples/hello_world</span>

<span class="gp"># </span>Now run ninja on the generated build system:
<span class="go">ninja -C build ram_report</span>
</pre></div>
</div>
<p>which will generate something similar to the output below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Path</span>                                                                                    <span class="n">Size</span>       <span class="o">%</span>
<span class="o">==============================================================================================================</span>
<span class="o">...</span>
<span class="o">...</span>
<span class="n">SystemCoreClock</span>                                                                          <span class="mi">4</span>     <span class="mf">0.08</span><span class="o">%</span>
<span class="n">_kernel</span>                                                                                 <span class="mi">48</span>     <span class="mf">0.99</span><span class="o">%</span>
<span class="n">_sw_isr_table</span>                                                                          <span class="mi">384</span>     <span class="mf">7.94</span><span class="o">%</span>
<span class="n">cli</span><span class="mf">.10544</span>                                                                               <span class="mi">16</span>     <span class="mf">0.33</span><span class="o">%</span>
<span class="n">gpio_initialized</span><span class="mf">.9765</span>                                                                    <span class="mi">1</span>     <span class="mf">0.02</span><span class="o">%</span>
<span class="n">on</span><span class="mf">.10543</span>                                                                                 <span class="mi">4</span>     <span class="mf">0.08</span><span class="o">%</span>
<span class="n">poll_out_lock</span><span class="mf">.9764</span>                                                                       <span class="mi">4</span>     <span class="mf">0.08</span><span class="o">%</span>
<span class="n">z_idle_threads</span>                                                                         <span class="mi">128</span>     <span class="mf">2.65</span><span class="o">%</span>
<span class="n">z_interrupt_stacks</span>                                                                    <span class="mi">2048</span>    <span class="mf">42.36</span><span class="o">%</span>
<span class="n">z_main_thread</span>                                                                          <span class="mi">128</span>     <span class="mf">2.65</span><span class="o">%</span>
<span class="n">arch</span>                                                                                       <span class="mi">1</span>     <span class="mf">0.02</span><span class="o">%</span>
<span class="n">arm</span>                                                                                      <span class="mi">1</span>     <span class="mf">0.02</span><span class="o">%</span>
    <span class="n">core</span>                                                                                   <span class="mi">1</span>     <span class="mf">0.02</span><span class="o">%</span>
    <span class="n">aarch32</span>                                                                              <span class="mi">1</span>     <span class="mf">0.02</span><span class="o">%</span>
        <span class="n">cortex_m</span>                                                                           <span class="mi">1</span>     <span class="mf">0.02</span><span class="o">%</span>
        <span class="n">mpu</span>                                                                              <span class="mi">1</span>     <span class="mf">0.02</span><span class="o">%</span>
            <span class="n">arm_mpu</span><span class="o">.</span><span class="n">c</span>                                                                      <span class="mi">1</span>     <span class="mf">0.02</span><span class="o">%</span>
            <span class="n">static_regions_num</span>                                                           <span class="mi">1</span>     <span class="mf">0.02</span><span class="o">%</span>
<span class="n">drivers</span>                                                                                  <span class="mi">536</span>    <span class="mf">11.09</span><span class="o">%</span>
<span class="n">clock_control</span>                                                                          <span class="mi">100</span>     <span class="mf">2.07</span><span class="o">%</span>
    <span class="n">nrf_power_clock</span><span class="o">.</span><span class="n">c</span>                                                                    <span class="mi">100</span>     <span class="mf">2.07</span><span class="o">%</span>
    <span class="n">__device_clock_nrf</span>                                                                  <span class="mi">16</span>     <span class="mf">0.33</span><span class="o">%</span>
    <span class="n">data</span>                                                                                <span class="mi">80</span>     <span class="mf">1.65</span><span class="o">%</span>
    <span class="n">hfclk_users</span>                                                                          <span class="mi">4</span>     <span class="mf">0.08</span><span class="o">%</span>
<span class="o">...</span>
<span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="build-target-rom-report">
<h3>Build Target: rom_report<a class="headerlink" href="#build-target-rom-report" title="Permalink to this headline">¶</a></h3>
<p>List all compiled objects and their ROM usage in a tabular form with bytes
per symbol and the percentage it uses. The data is grouped based on the file
system location of the object in the tree and the file containing the symbol.</p>
<p>Use the <code class="docutils literal notranslate"><span class="pre">rom_report</span></code> to get the ROM report:</p>
<p>Using west:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -b reel_board samples/hello_world</span>
<span class="go">west build -t rom_report</span>
</pre></div>
</div>
<p>Using CMake and ninja:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Use cmake to configure a Ninja-based buildsystem:
<span class="go">cmake -B build -GNinja -DBOARD=reel_board samples/hello_world</span>

<span class="gp"># </span>Now run ninja on the generated build system:
<span class="go">ninja -C build rom_report</span>
</pre></div>
</div>
<p>which will generate something similar to the output below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Path</span>                                                                                    <span class="n">Size</span>       <span class="o">%</span>
<span class="o">==============================================================================================================</span>
<span class="o">...</span>
<span class="o">...</span>
<span class="n">CSWTCH</span><span class="mf">.5</span>                                                                                 <span class="mi">4</span>     <span class="mf">0.02</span><span class="o">%</span>
<span class="n">SystemCoreClock</span>                                                                          <span class="mi">4</span>     <span class="mf">0.02</span><span class="o">%</span>
<span class="n">__aeabi_idiv0</span>                                                                            <span class="mi">2</span>     <span class="mf">0.01</span><span class="o">%</span>
<span class="n">__udivmoddi4</span>                                                                           <span class="mi">702</span>     <span class="mf">3.37</span><span class="o">%</span>
<span class="n">_sw_isr_table</span>                                                                          <span class="mi">384</span>     <span class="mf">1.85</span><span class="o">%</span>
<span class="n">delay_machine_code</span><span class="mf">.9114</span>                                                                  <span class="mi">6</span>     <span class="mf">0.03</span><span class="o">%</span>
<span class="n">levels</span><span class="mf">.8826</span>                                                                             <span class="mi">20</span>     <span class="mf">0.10</span><span class="o">%</span>
<span class="n">mpu_config</span>                                                                               <span class="mi">8</span>     <span class="mf">0.04</span><span class="o">%</span>
<span class="n">transitions</span><span class="mf">.10558</span>                                                                       <span class="mi">12</span>     <span class="mf">0.06</span><span class="o">%</span>
<span class="n">arch</span>                                                                                    <span class="mi">1194</span>     <span class="mf">5.74</span><span class="o">%</span>
<span class="n">arm</span>                                                                                   <span class="mi">1194</span>     <span class="mf">5.74</span><span class="o">%</span>
    <span class="n">core</span>                                                                                <span class="mi">1194</span>     <span class="mf">5.74</span><span class="o">%</span>
    <span class="n">aarch32</span>                                                                           <span class="mi">1194</span>     <span class="mf">5.74</span><span class="o">%</span>
        <span class="n">cortex_m</span>                                                                         <span class="mi">852</span>     <span class="mf">4.09</span><span class="o">%</span>
        <span class="n">fault</span><span class="o">.</span><span class="n">c</span>                                                                        <span class="mi">400</span>     <span class="mf">1.92</span><span class="o">%</span>
            <span class="n">bus_fault</span><span class="o">.</span><span class="n">isra</span><span class="mf">.0</span>                                                              <span class="mi">60</span>     <span class="mf">0.29</span><span class="o">%</span>
            <span class="n">mem_manage_fault</span><span class="o">.</span><span class="n">isra</span><span class="mf">.0</span>                                                       <span class="mi">56</span>     <span class="mf">0.27</span><span class="o">%</span>
            <span class="n">usage_fault</span><span class="o">.</span><span class="n">isra</span><span class="mf">.0</span>                                                            <span class="mi">36</span>     <span class="mf">0.17</span><span class="o">%</span>
            <span class="n">z_arm_fault</span>                                                                  <span class="mi">232</span>     <span class="mf">1.11</span><span class="o">%</span>
            <span class="n">z_arm_fault_init</span>                                                              <span class="mi">16</span>     <span class="mf">0.08</span><span class="o">%</span>
        <span class="n">irq_init</span><span class="o">.</span><span class="n">c</span>                                                                      <span class="mi">24</span>     <span class="mf">0.12</span><span class="o">%</span>
            <span class="n">z_arm_interrupt_init</span>                                                          <span class="mi">24</span>     <span class="mf">0.12</span><span class="o">%</span>
        <span class="n">mpu</span>                                                                            <span class="mi">352</span>     <span class="mf">1.69</span><span class="o">%</span>
            <span class="n">arm_core_mpu</span><span class="o">.</span><span class="n">c</span>                                                                <span class="mi">56</span>     <span class="mf">0.27</span><span class="o">%</span>
            <span class="n">z_arm_configure_static_mpu_regions</span>                                          <span class="mi">56</span>     <span class="mf">0.27</span><span class="o">%</span>
            <span class="n">arm_mpu</span><span class="o">.</span><span class="n">c</span>                                                                    <span class="mi">296</span>     <span class="mf">1.42</span><span class="o">%</span>
            <span class="n">__init_sys_init_arm_mpu_init0</span>                                                <span class="mi">8</span>     <span class="mf">0.04</span><span class="o">%</span>
            <span class="n">arm_core_mpu_configure_static_mpu_regions</span>                                   <span class="mi">20</span>     <span class="mf">0.10</span><span class="o">%</span>
            <span class="n">arm_core_mpu_disable</span>                                                        <span class="mi">16</span>     <span class="mf">0.08</span><span class="o">%</span>
            <span class="n">arm_core_mpu_enable</span>                                                         <span class="mi">20</span>     <span class="mf">0.10</span><span class="o">%</span>
            <span class="n">arm_mpu_init</span>                                                                <span class="mi">92</span>     <span class="mf">0.44</span><span class="o">%</span>
            <span class="n">mpu_configure_regions</span>                                                      <span class="mi">140</span>     <span class="mf">0.67</span><span class="o">%</span>
        <span class="n">thread_abort</span><span class="o">.</span><span class="n">c</span>                                                                  <span class="mi">76</span>     <span class="mf">0.37</span><span class="o">%</span>
            <span class="n">z_impl_k_thread_abort</span>
            <span class="mi">76</span>     <span class="mf">0.37</span><span class="o">%</span>
<span class="o">...</span>
<span class="o">...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="data-structures">
<h2>Data Structures<a class="headerlink" href="#data-structures" title="Permalink to this headline">¶</a></h2>
<div class="section" id="build-target-pahole">
<h3>Build Target: pahole<a class="headerlink" href="#build-target-pahole" title="Permalink to this headline">¶</a></h3>
<p>Poke-a-hole (pahole) is an object-file analysis tool to find the size of
the data structures, and the holes caused due to aligning the data
elements to the word-size of the CPU by the compiler.</p>
<p>Poke-a-hole (pahole) must be installed prior to using this target. It can be
obtained from <a class="reference external" href="https://git.kernel.org/pub/scm/devel/pahole/pahole.git">https://git.kernel.org/pub/scm/devel/pahole/pahole.git</a> and is
available in the dwarves package in both fedora and ubuntu:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">dwarves</span>
</pre></div>
</div>
<p>or in fedora:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dnf</span> <span class="n">install</span> <span class="n">dwarves</span>
</pre></div>
</div>
<p>Using west:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -b reel_board samples/hello_world</span>
<span class="go">west build -t pahole</span>
</pre></div>
</div>
<p>Using CMake and ninja:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Use cmake to configure a Ninja-based buildsystem:
<span class="go">cmake -B build -GNinja -DBOARD=reel_board samples/hello_world</span>

<span class="gp"># </span>Now run ninja on the generated build system:
<span class="go">ninja -C build pahole</span>
</pre></div>
</div>
<p>After running this target, pahole will output the results to the console:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/*</span> <span class="n">Used</span> <span class="n">at</span><span class="p">:</span> <span class="n">zephyr</span><span class="o">/</span><span class="n">isr_tables</span><span class="o">.</span><span class="n">c</span> <span class="o">*/</span>
<span class="o">/*</span> <span class="o">&lt;</span><span class="mi">80</span><span class="o">&gt;</span> <span class="o">../</span><span class="n">include</span><span class="o">/</span><span class="n">sw_isr_table</span><span class="o">.</span><span class="n">h</span><span class="p">:</span><span class="mi">30</span> <span class="o">*/</span>
<span class="n">struct</span> <span class="n">_isr_table_entry</span> <span class="p">{</span>
        <span class="n">void</span> <span class="o">*</span>                     <span class="n">arg</span><span class="p">;</span>                  <span class="o">/*</span>     <span class="mi">0</span>     <span class="mi">4</span> <span class="o">*/</span>
        <span class="n">void</span>                       <span class="p">(</span><span class="o">*</span><span class="n">isr</span><span class="p">)(</span><span class="n">void</span> <span class="o">*</span><span class="p">);</span>       <span class="o">/*</span>     <span class="mi">4</span>     <span class="mi">4</span> <span class="o">*/</span>

        <span class="o">/*</span> <span class="n">size</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="n">cachelines</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">members</span><span class="p">:</span> <span class="mi">2</span> <span class="o">*/</span>
        <span class="o">/*</span> <span class="n">last</span> <span class="n">cacheline</span><span class="p">:</span> <span class="mi">8</span> <span class="nb">bytes</span> <span class="o">*/</span>
<span class="p">};</span>
<span class="o">/*</span> <span class="n">Used</span> <span class="n">at</span><span class="p">:</span> <span class="n">zephyr</span><span class="o">/</span><span class="n">isr_tables</span><span class="o">.</span><span class="n">c</span> <span class="o">*/</span>
<span class="o">/*</span> <span class="o">&lt;</span><span class="n">eb</span><span class="o">&gt;</span> <span class="o">../</span><span class="n">include</span><span class="o">/</span><span class="n">arch</span><span class="o">/</span><span class="n">arm</span><span class="o">/</span><span class="n">aarch32</span><span class="o">/</span><span class="n">cortex_m</span><span class="o">/</span><span class="n">mpu</span><span class="o">/</span><span class="n">arm_mpu_v7m</span><span class="o">.</span><span class="n">h</span><span class="p">:</span><span class="mi">134</span> <span class="o">*/</span>
<span class="n">struct</span> <span class="n">arm_mpu_region_attr</span> <span class="p">{</span>
        <span class="n">uint32_t</span>                   <span class="n">rasr</span><span class="p">;</span>                 <span class="o">/*</span>     <span class="mi">0</span>     <span class="mi">4</span> <span class="o">*/</span>

        <span class="o">/*</span> <span class="n">size</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="n">cachelines</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">members</span><span class="p">:</span> <span class="mi">1</span> <span class="o">*/</span>
        <span class="o">/*</span> <span class="n">last</span> <span class="n">cacheline</span><span class="p">:</span> <span class="mi">4</span> <span class="nb">bytes</span> <span class="o">*/</span>
<span class="p">};</span>
<span class="o">/*</span> <span class="n">Used</span> <span class="n">at</span><span class="p">:</span> <span class="n">zephyr</span><span class="o">/</span><span class="n">isr_tables</span><span class="o">.</span><span class="n">c</span> <span class="o">*/</span>
<span class="o">/*</span> <span class="o">&lt;</span><span class="mi">112</span><span class="o">&gt;</span> <span class="o">../</span><span class="n">include</span><span class="o">/</span><span class="n">arch</span><span class="o">/</span><span class="n">arm</span><span class="o">/</span><span class="n">aarch32</span><span class="o">/</span><span class="n">cortex_m</span><span class="o">/</span><span class="n">mpu</span><span class="o">/</span><span class="n">arm_mpu</span><span class="o">.</span><span class="n">h</span><span class="p">:</span><span class="mi">24</span> <span class="o">*/</span>
<span class="n">struct</span> <span class="n">arm_mpu_region</span> <span class="p">{</span>
        <span class="n">uint32_t</span>                   <span class="n">base</span><span class="p">;</span>                 <span class="o">/*</span>     <span class="mi">0</span>     <span class="mi">4</span> <span class="o">*/</span>
        <span class="n">const</span> <span class="n">char</span>  <span class="o">*</span>              <span class="n">name</span><span class="p">;</span>                 <span class="o">/*</span>     <span class="mi">4</span>     <span class="mi">4</span> <span class="o">*/</span>
        <span class="n">arm_mpu_region_attr_t</span>      <span class="n">attr</span><span class="p">;</span>                 <span class="o">/*</span>     <span class="mi">8</span>     <span class="mi">4</span> <span class="o">*/</span>

        <span class="o">/*</span> <span class="n">size</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="n">cachelines</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">members</span><span class="p">:</span> <span class="mi">3</span> <span class="o">*/</span>
        <span class="o">/*</span> <span class="n">last</span> <span class="n">cacheline</span><span class="p">:</span> <span class="mi">12</span> <span class="nb">bytes</span> <span class="o">*/</span>
<span class="p">};</span>
<span class="o">...</span>
<span class="o">...</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>

          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../copyright.html">Copyright</a> 2015-2021 Zephyr Project members and individual contributors.
      <span class="lastupdated">Last updated on Feb 21, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
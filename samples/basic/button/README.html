<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Button &mdash; Zephyr Project Documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script type="module" src="../../../_static/js/dark-mode-toggle.min.mjs"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-831873-47"></script>
        <script src="../../../_static/js/ga-tracker.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="copyright" title="Copyright" href="../../../copyright.html" />
    <link rel="next" title="Fade LED" href="../fade_led/README.html" />
    <link rel="prev" title="PWM Blinky" href="../blinky_pwm/README.html" />
  <meta name="color-scheme" content="dark light">
  
  <link rel="stylesheet" href="../../../_static/css/light.css" type="text/css" media="(prefers-color-scheme: light)"/>
  <link rel="stylesheet" href="../../../_static/css/dark.css" type="text/css" media="(prefers-color-scheme: dark)"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html">
            <img src="../../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.99
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Zephyr Project</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Release Versions</dt>
        
          <dd><a href="/">latest</a></dd>
        
          <dd><a href="/3.0.0/">3.0.0</a></dd>
        
          <dd><a href="/2.7.0/">2.7.0</a></dd>
        
          <dd><a href="/2.6.0/">2.6.0</a></dd>
        
          <dd><a href="/2.5.0/">2.5.0</a></dd>
        
          <dd><a href="/2.4.0/">2.4.0</a></dd>
        
          <dd><a href="/2.3.0/">2.3.0</a></dd>
        
          <dd><a href="/1.14.1/">1.14.1</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="/latest/zephyr.pdf">PDF</a></dd>
      </dl>
      <dl>
        <dt>zephyrproject.org Links</dt>
          <dd>
            <a href="https://www.zephyrproject.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/sdk-ng/releases">SDK</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/zephyr/releases">Releases</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute/index.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../development_process/index.html">Development and Contribution Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/build/index.html">Build and Configuration Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../application/index.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/index.html">User and Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security/index.html">Security</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Samples and Demos</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../classic.html">Classic Samples</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../basic.html">Basic Samples</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../blinky/README.html">Blinky</a></li>
<li class="toctree-l3"><a class="reference internal" href="../blinky_pwm/README.html">PWM Blinky</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Button</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-and-running">Building and Running</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../fade_led/README.html">Fade LED</a></li>
<li class="toctree-l3"><a class="reference internal" href="../minimal/README.html">Minimal footprint</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rgb_led/README.html">PWM: RGB LED</a></li>
<li class="toctree-l3"><a class="reference internal" href="../servo_motor/README.html">Servomotor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../threads/README.html">Basic Thread Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../userspace/index.html">Userspace Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../subsys/subsys.html">Various Subsystems Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../net/net.html">Networking Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bluetooth/bluetooth.html">Bluetooth samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sensor/sensor.html">Sensor Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../arch/index.html">Architecture Dependent Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../boards/boards.html">Board-specific samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../drivers/drivers.html">Driver Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../application_development/application_development.html">Application development samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shields/shields.html">Shields Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../posix/posix.html">POSIX Subsystem Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../kernel/index.html">Various Kernel and Scheduler Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tfm_integration/tfm_integration.html">TF-M Integration Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tfm_integration/tfm_integration.html#trusted-firmware-m-tf-m">Trusted Firmware-M (TF-M)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modules/index.html">External Module Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../compression/compression.html">Compression Samples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../boards/index.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/index.html">Release Notes</a></li>
</ul>

  
  <div class="toctree-wrapper compound">
    <p class="caption"><span class="caption-text">Reference</span></p>
    <ul>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/doxygen/html/index.html">API</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/kconfig.html">Kconfig Options</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/devicetree/bindings.html">Devicetree Bindings</a>
      </li>
      
    </ul>
  </div>
  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Zephyr Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Docs / Latest -->
  
  

  <li><a href="../../../index.html">Docs / Latest</a> &raquo;</li>
  
     <li><a href="../../index.html">Samples and Demos</a> &raquo;</li>
  
     <li><a href="../basic.html">Basic Samples</a> &raquo;</li>
  
  <li>Button</li>


  <li class="wy-breadcrumbs-aside">
    <dark-mode-toggle id="dark-mode-toggle" appearance="toggle" permanent="true"/>
  </li>
  <li class="wy-breadcrumbs-aside">
      
      
        <a href="https://github.com/zephyrproject-rtos/zephyr/blob/main//samples/basic/button/README.rst" class="fa fa-github"> Open on GitHub</a>
      
    
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="wy-alert wy-alert-danger">
     This is the documentation for the latest (main) development branch of
     Zephyr. If you are looking for the documentation of previous releases, use
     the drop-down menu on the left and select the desired version.
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="button">
<span id="button-sample"></span><h1>Button<a class="headerlink" href="#button" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>A simple button demo showcasing the use of GPIO input with interrupts.
The sample prints a message to the console each time a button is pressed.</p>
</div>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>The board hardware must have a push button connected via a GPIO pin. These are
called “User buttons” on many of Zephyr’s <a class="reference internal" href="../../../boards/index.html#boards"><span class="std std-ref">Supported Boards</span></a>.</p>
<p>The button must be configured using the <code class="docutils literal notranslate"><span class="pre">sw0</span></code> <a class="reference internal" href="../../../guides/dts/index.html#dt-guide"><span class="std std-ref">devicetree</span></a>
alias, usually in the <a class="reference internal" href="../../../guides/dts/intro.html#devicetree-in-out-files"><span class="std std-ref">BOARD.dts file</span></a>. You will
see this error if you try to build this sample for an unsupported board:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Unsupported board: sw0 devicetree alias is not defined
</pre></div>
</div>
<p>You may see additional build errors if the <code class="docutils literal notranslate"><span class="pre">sw0</span></code> alias exists, but is not
properly defined.</p>
<p>The sample additionally supports an optional <code class="docutils literal notranslate"><span class="pre">led0</span></code> devicetree alias. This is
the same alias used by the <a class="reference internal" href="../blinky/README.html#blinky-sample"><span class="std std-ref">Blinky</span></a>. If this is provided, the LED
will be turned on when the button is pressed, and turned off off when it is
released.</p>
<div class="section" id="devicetree-details">
<h3>Devicetree details<a class="headerlink" href="#devicetree-details" title="Permalink to this headline">¶</a></h3>
<p>This section provides more details on devicetree configuration.</p>
<p>Here is a minimal devicetree fragment which supports this sample. This only
includes a <code class="docutils literal notranslate"><span class="pre">sw0</span></code> alias; the optional <code class="docutils literal notranslate"><span class="pre">led0</span></code> alias is left out for
simplicity.</p>
<div class="highlight-devicetree notranslate"><div class="highlight"><pre><span></span><span class="nf">/</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="nf">aliases</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">             </span><span class="n">sw0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">button0</span><span class="p">;</span><span class="w"></span>
<span class="w">     </span><span class="p">};</span><span class="w"></span>

<span class="w">     </span><span class="nf">soc</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">             </span><span class="nl">gpio0</span><span class="p">:</span><span class="w"> </span><span class="nf">gpio</span><span class="o">@</span><span class="mi">0</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                     </span><span class="kr">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;okay&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">                     </span><span class="n">gpio-controller</span><span class="p">;</span><span class="w"></span>
<span class="w">                     </span><span class="o">#</span><span class="n">gpio-cells</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">2</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">                     </span><span class="cm">/* ... */</span><span class="w"></span>
<span class="w">             </span><span class="p">};</span><span class="w"></span>
<span class="w">     </span><span class="p">};</span><span class="w"></span>

<span class="w">     </span><span class="nf">buttons</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">             </span><span class="kr">compatible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;gpio-keys&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">             </span><span class="nl">button0</span><span class="p">:</span><span class="w"> </span><span class="nf">button_0</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                     </span><span class="n">gpios</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="o">&amp;</span><span class="na">gpio0</span><span class="w"> </span><span class="na">PIN</span><span class="w"> </span><span class="na">FLAGS</span><span class="w"> </span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">                     </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;User button&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">             </span><span class="p">};</span><span class="w"></span>
<span class="w">             </span><span class="cm">/* ... other buttons ... */</span><span class="w"></span>
<span class="w">     </span><span class="p">};</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>As shown, the <code class="docutils literal notranslate"><span class="pre">sw0</span></code> devicetree alias must point to a child node of a node
with a “gpio-keys” <a class="reference internal" href="../../../guides/dts/intro.html#dt-important-props"><span class="std std-ref">compatible</span></a>.</p>
<p>The above situation is for the common case where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">gpio0</span></code> is an example node label referring to a GPIO controller</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PIN</span></code> should be a pin number, like <code class="docutils literal notranslate"><span class="pre">8</span></code> or <code class="docutils literal notranslate"><span class="pre">0</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FLAGS</span></code> should be a logical OR of <a class="reference internal" href="../../../reference/peripherals/gpio.html#gpio-api"><span class="std std-ref">GPIO configuration flags</span></a>
meant to apply to the button, such as <code class="docutils literal notranslate"><span class="pre">(GPIO_PULL_UP</span> <span class="pre">|</span> <span class="pre">GPIO_ACTIVE_LOW)</span></code></p></li>
</ul>
<p>This assumes the common case, where <code class="docutils literal notranslate"><span class="pre">#gpio-cells</span> <span class="pre">=</span> <span class="pre">&lt;2&gt;</span></code> in the <code class="docutils literal notranslate"><span class="pre">gpio0</span></code>
node, and that the GPIO controller’s devicetree binding names those two cells
“pin” and “flags” like so:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">gpio-cells</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pin</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flags</span><span class="w"></span>
</pre></div>
</div>
<p>This sample requires a <code class="docutils literal notranslate"><span class="pre">pin</span></code> cell in the <code class="docutils literal notranslate"><span class="pre">gpios</span></code> property. The <code class="docutils literal notranslate"><span class="pre">flags</span></code>
cell is optional, however, and the sample still works if the GPIO cells
do not contain <code class="docutils literal notranslate"><span class="pre">flags</span></code>.</p>
</div>
</div>
<div class="section" id="building-and-running">
<h2>Building and Running<a class="headerlink" href="#building-and-running" title="Permalink to this headline">¶</a></h2>
<p>This sample can be built for multiple boards, in this example we will build it
for the nucleo_f103rb board:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -b nucleo_f103rb samples/basic/button</span>
</pre></div>
</div>
<p>After startup, the program looks up a predefined GPIO device, and configures the
pin in input mode, enabling interrupt generation on falling edge. During each
iteration of the main loop, the state of GPIO line is monitored and printed to
the serial console. When the input button gets pressed, the interrupt handler
will print an information about this event along with its timestamp.</p>
</div>
</div>


           </div>
          </div>

          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../../copyright.html">Copyright</a> 2015-2022 Zephyr Project members and individual contributors.
      <span class="lastupdated">Last updated on Mar 05, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
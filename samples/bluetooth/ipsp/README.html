<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bluetooth: IPSP Sample &mdash; Zephyr Project Documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script type="module" src="../../../_static/js/dark-mode-toggle.min.mjs"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-831873-47"></script>
        <script src="../../../_static/js/ga-tracker.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="copyright" title="Copyright" href="../../../copyright.html" />
    <link rel="next" title="Bluetooth: Isochronous Broadcaster" href="../iso_broadcast/README.html" />
    <link rel="prev" title="Bluetooth: iBeacon" href="../ibeacon/README.html" />
  <meta name="color-scheme" content="dark light">
  
  <link rel="stylesheet" href="../../../_static/css/light.css" type="text/css" media="(prefers-color-scheme: light)"/>
  <link rel="stylesheet" href="../../../_static/css/dark.css" type="text/css" media="(prefers-color-scheme: dark)"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html">
            <img src="../../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.99
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Zephyr Project</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Release Versions</dt>
        
          <dd><a href="/">latest</a></dd>
        
          <dd><a href="/3.0.0/">3.0.0</a></dd>
        
          <dd><a href="/2.7.0/">2.7.0</a></dd>
        
          <dd><a href="/2.6.0/">2.6.0</a></dd>
        
          <dd><a href="/2.5.0/">2.5.0</a></dd>
        
          <dd><a href="/2.4.0/">2.4.0</a></dd>
        
          <dd><a href="/2.3.0/">2.3.0</a></dd>
        
          <dd><a href="/1.14.1/">1.14.1</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="/latest/zephyr.pdf">PDF</a></dd>
      </dl>
      <dl>
        <dt>zephyrproject.org Links</dt>
          <dd>
            <a href="https://www.zephyrproject.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/sdk-ng/releases">SDK</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/zephyr/releases">Releases</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute/index.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../development_process/index.html">Development and Contribution Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/build/index.html">Build and Configuration Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../application/index.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/index.html">User and Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security/index.html">Security</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Samples and Demos</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../classic.html">Classic Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basic/basic.html">Basic Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../userspace/index.html">Userspace Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../subsys/subsys.html">Various Subsystems Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../net/net.html">Networking Samples</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../bluetooth.html">Bluetooth samples</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../beacon/README.html">Bluetooth: Beacon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../broadcaster/README.html">Bluetooth: Broadcaster</a></li>
<li class="toctree-l3"><a class="reference internal" href="../central/README.html">Bluetooth: Central</a></li>
<li class="toctree-l3"><a class="reference internal" href="../central_hr/README.html">Bluetooth: Central / Heart-rate Monitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../central_ht/README.html">Bluetooth: Central / Health Thermometer sensor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../central_iso/README.html">Bluetooth: Central ISO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../central_multilink/README.html">Bluetooth: Central</a></li>
<li class="toctree-l3"><a class="reference internal" href="../central_past/README.html">Bluetooth: Central Periodic Advertising Sync Transfer (PAST)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../direction_finding_central/README.html">Bluetooth: Direction Finding Central</a></li>
<li class="toctree-l3"><a class="reference internal" href="../direction_finding_connectionless_rx/README.html">Bluetooth: Direction Finding Periodic Advertising Locator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../direction_finding_connectionless_tx/README.html">Bluetooth: Direction Finding Periodic Advertising Beacon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../direction_finding_peripheral/README.html">Bluetooth: Direction Finding Peripheral</a></li>
<li class="toctree-l3"><a class="reference internal" href="../eddystone/README.html">Bluetooth: Eddystone</a></li>
<li class="toctree-l3"><a class="reference internal" href="../handsfree/README.html">Bluetooth: Handsfree</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hci_pwr_ctrl/README.html">Bluetooth: HCI Power Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hci_rpmsg/README.html">Bluetooth: HCI RPMsg</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hci_spi/README.html">Bluetooth: HCI SPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hci_uart/README.html">Bluetooth: HCI UART</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hci_usb/README.html">Bluetooth: HCI USB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hci_usb_h4/README.html">Bluetooth: HCI H4 over USB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ibeacon/README.html">Bluetooth: iBeacon</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Bluetooth: IPSP Sample</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-and-running">Building and Running</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../iso_broadcast/README.html">Bluetooth: Isochronous Broadcaster</a></li>
<li class="toctree-l3"><a class="reference internal" href="../iso_broadcast_benchmark/README.html">Bluetooth: Throughput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../iso_connected_benchmark/README.html">Bluetooth: Throughput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../iso_receive/README.html">Bluetooth: Synchronized Receiver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mesh/README.html">Bluetooth: Mesh</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mesh_demo/README.html">Bluetooth: Mesh Demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mesh_provisioner/README.html">Bluetooth: Mesh Provisioner</a></li>
<li class="toctree-l3"><a class="reference internal" href="../observer/README.html">Bluetooth: Observer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../periodic_adv/README.html">Bluetooth: Periodic Advertising</a></li>
<li class="toctree-l3"><a class="reference internal" href="../periodic_sync/README.html">Bluetooth: Periodic Advertising Synchronization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral/README.html">Bluetooth: Peripheral</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_csc/README.html">Bluetooth: Peripheral CSC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_dis/README.html">Bluetooth: Peripheral DIS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_esp/README.html">Bluetooth: Peripheral ESP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_hids/README.html">Bluetooth: Peripheral HIDs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_hr/README.html">Bluetooth: Peripheral HR</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_ht/README.html">Bluetooth: Peripheral HT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_identity/README.html">Bluetooth: Peripheral Identity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_iso/README.html">Bluetooth: Peripheral ISO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_ots/README.html">Bluetooth: Peripheral OTS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_past/README.html">Bluetooth: Periodic Advertising Synchronization Transfer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peripheral_sc_only/README.html">Bluetooth: Peripheral SC-only</a></li>
<li class="toctree-l3"><a class="reference internal" href="../scan_adv/README.html">Bluetooth: Scan &amp; Advertise</a></li>
<li class="toctree-l3"><a class="reference internal" href="../st_ble_sensor/README.html">Bluetooth: ST BLE Sensor Demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../unicast_audio_client/README.html">Bluetooth: Unicast Audio CLient</a></li>
<li class="toctree-l3"><a class="reference internal" href="../unicast_audio_server/README.html">Bluetooth: Unicast Audio Server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../sensor/sensor.html">Sensor Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../arch/index.html">Architecture Dependent Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../boards/boards.html">Board-specific samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../drivers/drivers.html">Driver Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../application_development/application_development.html">Application development samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shields/shields.html">Shields Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../posix/posix.html">POSIX Subsystem Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../kernel/index.html">Various Kernel and Scheduler Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tfm_integration/tfm_integration.html">TF-M Integration Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tfm_integration/tfm_integration.html#trusted-firmware-m-tf-m">Trusted Firmware-M (TF-M)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modules/index.html">External Module Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../compression/compression.html">Compression Samples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../boards/index.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/index.html">Release Notes</a></li>
</ul>

  
  <div class="toctree-wrapper compound">
    <p class="caption"><span class="caption-text">Reference</span></p>
    <ul>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/doxygen/html/index.html">API</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/kconfig.html">Kconfig Options</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/devicetree/bindings.html">Devicetree Bindings</a>
      </li>
      
    </ul>
  </div>
  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Zephyr Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Docs / Latest -->
  
  

  <li><a href="../../../index.html">Docs / Latest</a> &raquo;</li>
  
     <li><a href="../../index.html">Samples and Demos</a> &raquo;</li>
  
     <li><a href="../bluetooth.html">Bluetooth samples</a> &raquo;</li>
  
  <li>Bluetooth: IPSP Sample</li>


  <li class="wy-breadcrumbs-aside">
    <dark-mode-toggle id="dark-mode-toggle" appearance="toggle" permanent="true"/>
  </li>
  <li class="wy-breadcrumbs-aside">
      
      
        <a href="https://github.com/zephyrproject-rtos/zephyr/blob/main//samples/bluetooth/ipsp/README.rst" class="fa fa-github"> Open on GitHub</a>
      
    
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="wy-alert wy-alert-danger">
     This is the documentation for the latest (main) development branch of
     Zephyr. If you are looking for the documentation of previous releases, use
     the drop-down menu on the left and select the desired version.
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="bluetooth-ipsp-sample">
<span id="id1"></span><h1>Bluetooth: IPSP Sample<a class="headerlink" href="#bluetooth-ipsp-sample" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Application demonstrating the IPSP (Internet Protocol Support Profile) Node
role. IPSP is the Bluetooth profile that underneath utilizes 6LoWPAN, i.e. gives
you IPv6 connectivity over BLE.</p>
</div>
<div class="section" id="building-and-running">
<h2>Building and Running<a class="headerlink" href="#building-and-running" title="Permalink to this headline">¶</a></h2>
<p>This sample can be found under <a class="reference external" href="https://github.com/zephyrproject-rtos/zephyr/blob/main/samples/bluetooth/ipsp">samples/bluetooth/ipsp</a> in the
Zephyr tree.
Sample can be built and executed for the nRF52840 DK NRF52840 as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -b nrf52840dk_nrf52840 samples/bluetooth/ipsp</span>
<span class="go">west flash</span>
</pre></div>
</div>
<p>To build a debug version, with logging and shell support, use the config file
<code class="file docutils literal notranslate"><span class="pre">prj_dbg.conf</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -b nrf52840dk_nrf52840 samples/bluetooth/ipsp -- -DCONF_FILE=prj_dbg.conf</span>
<span class="go">west flash</span>
</pre></div>
</div>
<div class="section" id="building-and-running-for-linux-kernels-released-before-4-12">
<h3>Building and Running for Linux kernels released before 4.12<a class="headerlink" href="#building-and-running-for-linux-kernels-released-before-4-12" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For hosts using kernels released before 4.12,
option <a class="reference internal" href="../../../kconfig.html#CONFIG_NET_L2_BT_ZEP1656" title="CONFIG_NET_L2_BT_ZEP1656"><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_NET_L2_BT_ZEP1656</span></code></a>
must be selected. For more information, see <a class="reference external" href="https://github.com/zephyrproject-rtos/zephyr/issues/3111">Zephyr issue #3111</a>.</p>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -b nrf52840dk_nrf52840 samples/bluetooth/ipsp -- -DCONF_FILE=&quot;prj_zep1656.conf&quot;</span>
<span class="go">west flash</span>
</pre></div>
</div>
</div>
<div class="section" id="testing-with-a-linux-host">
<h3>Testing with a Linux host<a class="headerlink" href="#testing-with-a-linux-host" title="Permalink to this headline">¶</a></h3>
<p>Make sure the Linux kernel has been built with Bluetooth 6LoWPAN module
(CONFIG_BT_6LOWPAN=y) then proceed to enable it with with the following commands
(as root):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>modprobe bluetooth_6lowpan
<span class="gp"># </span><span class="nb">echo</span> <span class="m">1</span> &gt; /sys/kernel/debug/bluetooth/6lowpan_enable
</pre></div>
</div>
<p>If you connected your board to a UART console, you will see an output similar to
(may vary slightly by application and Zephyr versions):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[bt] [WRN] set_static_addr: Using temporary static random address</span>
<span class="go">[bt] [INF] show_dev_info: Identity: cb:af:14:57:d8:6e (random)</span>
<span class="go">[bt] [INF] show_dev_info: HCI: version 5.0 (0x09) revision 0x0000, manufacturer 0xffff</span>
<span class="go">[bt] [INF] show_dev_info: LMP: version 5.0 (0x09) subver 0xffff</span>
<span class="go">[bt] [WRN] bt_pub_key_gen: ECC HCI commands not available</span>
<span class="go">[ipsp] [INF] init_app: Run IPSP sample</span>
<span class="go">[ipsp] [INF] listen: Starting to wait</span>
</pre></div>
</div>
<p>The output above shows the BLE address assigned to your board for the
current session; the address will be different on subsequent sessions.</p>
<p>Alternatively, you may scan for your board on the host. The modern way to do
that is using <code class="docutils literal notranslate"><span class="pre">bluetoothctl</span></code> utility (included in the recent versions of
BlueZ package) and its <code class="docutils literal notranslate"><span class="pre">scan</span> <span class="pre">on</span></code> command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>bluetoothctl
<span class="go">[NEW] Controller A3:24:97:EB:D6:23 ubuntu-0 [default]</span>
<span class="go">[NEW] Device D7:5C:D6:18:14:87 Zephyr</span>
<span class="go">[NEW] Device E1:E7:F9:56:EC:06 Zephyr</span>
<span class="go">[NEW] Device C8:12:C5:08:86:E1 Zephyr</span>
<span class="gp">[bluetooth]# </span>scan on
<span class="go">Discovery started</span>
<span class="go">[NEW] Device DC:98:FB:22:CA:3A Zephyr</span>
</pre></div>
</div>
<p>When started, <code class="docutils literal notranslate"><span class="pre">bluetoothctl</span></code> shows all BLE (and likely, BT/EDR) devices it
knows about. As discussed above, the IPSP uses static random addresses, so
entries for previously connected devices, as shown above, can accumulate and
become stale. You need to be extra careful to find an entry for the active
address. The best approach may be to reset your board after issuing
<code class="docutils literal notranslate"><span class="pre">scan</span> <span class="pre">on</span></code> command. This way it will reinitialize with the BLE address
which will be discovered after the command.</p>
<p>As an alternative to <code class="docutils literal notranslate"><span class="pre">bluetoothctl</span></code>, you can use the legacy <code class="docutils literal notranslate"><span class="pre">hcitool</span></code>
utility which talks directly to hardware and always shows fresh scan results:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo hcitool lescan
<span class="go">LE Scan ...</span>
<span class="go">CB:AF:14:57:D8:6E (unknown)</span>
<span class="go">CB:AF:14:57:D8:6E Test IPSP node</span>
</pre></div>
</div>
<p>After you have found the board’s BLE address, connect to the board (as root):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span><span class="nb">echo</span> <span class="s2">&quot;connect &lt;bdaddr&gt; &lt;type&gt;&quot;</span> &gt; /sys/kernel/debug/bluetooth/6lowpan_control
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">&lt;bdaddr&gt;</span></code> is the BLE address and <code class="docutils literal notranslate"><span class="pre">&lt;type&gt;</span></code> is BLE address type:
1 for public address and 2 for random address. As you can see from
the IPSP sample output above, it uses a static random address. So, with the
sample output above, the command will be:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span><span class="nb">echo</span> <span class="s2">&quot;connect CB:AF:14:57:D8:6E 2&quot;</span> &gt; /sys/kernel/debug/bluetooth/6lowpan_control
</pre></div>
</div>
<p>Once connected a dedicated interface will be created, usually bt0. You can verify this
with the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>ifconfig
<span class="go">bt0       Link encap:UNSPEC  HWaddr F8-2F-A8-FF-FE-EB-6D-8C-00-00-00-00-00-00-00-00</span>
<span class="go">          inet6 addr: fe80::fa2f:a8ff:feeb:6d8c/64 Scope:Link</span>
<span class="go">          UP POINTOPOINT RUNNING MULTICAST  MTU:1280  Metric:1</span>
<span class="go">          RX packets:2 errors:0 dropped:3 overruns:0 frame:0</span>
<span class="go">          TX packets:6 errors:0 dropped:0 overruns:0 carrier:0</span>
<span class="go">          collisions:0 txqueuelen:1000</span>
<span class="go">          RX bytes:92 (92.0 B)  TX bytes:233 (233.0 B)</span>
</pre></div>
</div>
<p>As can be seen from the output, only a link-local IPv6 address was assigned
to the interface.</p>
<p>At this point, you can test IPv6 connectivity (and discover your board’s IPv6
address) by pinging “All local-link nodes” IPv6 address:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>ping6 -I bt0 ff02::1
<span class="go">PING ff02::1(ff02::1) from fe80::fa54:a8ff:feeb:218f bt0: 56 data bytes</span>
<span class="go">64 bytes from fe80::fa54:a8ff:feeb:218f: icmp_seq=1 ttl=64 time=0.088 ms</span>
<span class="go">64 bytes from fe80::c9af:14ff:fe57:d86e: icmp_seq=1 ttl=64 time=285 ms (DUP!)</span>
</pre></div>
</div>
<p>For each ping packet, both your host and the BLE board send a reply. You
can see the board’s reply marked as <code class="docutils literal notranslate"><span class="pre">(DUP!)</span></code>. You can ping the board
directly with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>ping6 fe80::c9af:14ff:fe57:d86e%bt0
<span class="go">PING fe80::c9af:14ff:fe57:d86e%bt0(fe80::c9af:14ff:fe57:d86e) 56 data bytes</span>
<span class="go">64 bytes from fe80::c9af:14ff:fe57:d86e: icmp_seq=1 ttl=64 time=177 ms</span>
<span class="go">64 bytes from fe80::c9af:14ff:fe57:d86e: icmp_seq=2 ttl=64 time=53.0 ms</span>
</pre></div>
</div>
<p>Note that the command uses a “scoped IPv6 address”, where the scope is
defined by the networking interface, with <code class="docutils literal notranslate"><span class="pre">%bt0</span></code> appended in this case.
A specification like that is an alternative to passing <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">bt0</span></code> to
<code class="docutils literal notranslate"><span class="pre">ping6</span></code> (and works with other networking tools like <code class="docutils literal notranslate"><span class="pre">telnet</span></code>, <code class="docutils literal notranslate"><span class="pre">nc</span></code>,
<code class="docutils literal notranslate"><span class="pre">curl</span></code>, etc.)</p>
<p>While we can use a link-local address, it’s not very convenient, as it must be
scoped and will change on each run. Instead, the IPSP sample is configured with
<code class="docutils literal notranslate"><span class="pre">2001:db8::1</span></code> static address and we’ll configure the host’s interface to
access that address by configuring <code class="docutils literal notranslate"><span class="pre">bt0</span></code> with the complementary address
<code class="docutils literal notranslate"><span class="pre">2001:db8::2</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>ip address add <span class="m">2001</span>:db8::2/64 dev bt0
</pre></div>
</div>
<p>Now we can ping the board’s static address with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>ping6 <span class="m">2001</span>:db8::1
<span class="go">PING 2001:db8::1(2001:db8::1) 56 data bytes</span>
<span class="go">64 bytes from 2001:db8::1: icmp_seq=1 ttl=64 time=282 ms</span>
</pre></div>
</div>
<p>The IPSP sample includes builtin echo server for UDP and TCP on a port 4242,
which we can test with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>telnet <span class="m">2001</span>:db8::1 <span class="m">4242</span>
<span class="go">Trying 2001:db8::1...</span>
<span class="go">Connected to 2001:db8::1.</span>
<span class="go">Escape character is &#39;^]&#39;.</span>
<span class="go">test</span>
<span class="go">test</span>
<span class="go">test2</span>
<span class="go">test2</span>
<span class="go">^]</span>
<span class="go">telnet&gt; quit</span>
<span class="go">Connection closed.</span>
</pre></div>
</div>
<p>In the output above, first <code class="docutils literal notranslate"><span class="pre">test</span></code> line was typed, next was echoed back by
the board. Likewise for <code class="docutils literal notranslate"><span class="pre">test2</span></code>. To quit telnet tool, type Ctrl+], then
“quit” at the prompt.</p>
<p>As an alternative to using well-known networking tools above, and also to
test both TCP and UDP echo, you can use Zephyr’s helper tool in the GitHub
<code class="docutils literal notranslate"><span class="pre">zephyrproject-rtos/net-tools</span></code> repository:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>echo-client -i bt0 &lt;ip&gt;
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>

          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../../copyright.html">Copyright</a> 2015-2022 Zephyr Project members and individual contributors.
      <span class="lastupdated">Last updated on Mar 05, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
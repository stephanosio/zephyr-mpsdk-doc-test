<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LwM2M client &mdash; Zephyr Project Documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script type="module" src="../../../_static/js/dark-mode-toggle.min.mjs"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-831873-47"></script>
        <script src="../../../_static/js/ga-tracker.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="copyright" title="Copyright" href="../../../copyright.html" />
    <link rel="next" title="mDNS Responder Application" href="../mdns_responder/README.html" />
    <link rel="prev" title="LLDP Sample Application" href="../lldp/README.html" />
  <meta name="color-scheme" content="dark light">
  
  <link rel="stylesheet" href="../../../_static/css/light.css" type="text/css" media="(prefers-color-scheme: light)"/>
  <link rel="stylesheet" href="../../../_static/css/dark.css" type="text/css" media="(prefers-color-scheme: dark)"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html">
            <img src="../../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.0-rc3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Zephyr Project</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Release Versions</dt>
        
          <dd><a href="/">latest</a></dd>
        
          <dd><a href="/2.7.0/">2.7.0</a></dd>
        
          <dd><a href="/2.6.0/">2.6.0</a></dd>
        
          <dd><a href="/2.5.0/">2.5.0</a></dd>
        
          <dd><a href="/2.4.0/">2.4.0</a></dd>
        
          <dd><a href="/2.3.0/">2.3.0</a></dd>
        
          <dd><a href="/1.14.1/">1.14.1</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="/latest/zephyr.pdf">PDF</a></dd>
      </dl>
      <dl>
        <dt>zephyrproject.org Links</dt>
          <dd>
            <a href="https://www.zephyrproject.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/sdk-ng/releases">SDK</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/zephyr/releases">Releases</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute/index.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../development_process/index.html">Development and Contribution Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/build/index.html">Build and Configuration Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../application/index.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/index.html">User and Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security/index.html">Security</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Samples and Demos</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../classic.html">Classic Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basic/basic.html">Basic Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../userspace/index.html">Userspace Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../subsys/subsys.html">Various Subsystems Samples</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../net.html">Networking Samples</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../capture/README.html">Network Packet Capture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../civetweb/http_server/README.html">Civetweb sample</a></li>
<li class="toctree-l3"><a class="reference internal" href="../civetweb/websocket_server/README.html">Civetweb WebSocket Server sample</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cloud/google_iot_mqtt/README.html">Google IOT MQTT Sample</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cloud/mqtt_azure/README.html">MQTT Azure Sample</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cloud/tagoio_http_post/README.html">TagoIO IoT Cloud HTTP Sample</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dhcpv4_client/README.html">Sample DHCPv4 client application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dns_resolve/README.html">DNS Resolve Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dsa/README.html">DSA Sample Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../eth_native_posix/README.html">Native Posix Ethernet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gptp/README.html">gPTP Sample Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gsm_modem/README.html">Generic GSM Modem Sample</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ipv4_autoconf/README.html">IPv4 autoconf client application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lldp/README.html">LLDP Sample Application</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">LwM2M client</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-and-running">Building and Running</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../mdns_responder/README.html">mDNS Responder Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mqtt_publisher/README.html">MQTT Publisher</a></li>
<li class="toctree-l3"><a class="reference internal" href="../openthread/coprocessor/README.html">OpenThread Co-Processor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../promiscuous_mode/README.html">Promiscuous Mode Sample Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sockets/big_http_download/README.html">Socket Big HTTP Download Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sockets/can/README.html">Socket CAN</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sockets/coap_client/README.html">CoAP client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sockets/coap_server/README.html">CoAP Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sockets/dumb_http_server/README.html">Socket Dumb HTTP Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sockets/dumb_http_server_mt/README.html">Socket Multithreaded Dumb HTTP Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sockets/echo/README.html">Socket Echo Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sockets/echo_async/README.html">Asynchronous Socket Echo Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sockets/echo_async_select/README.html">Asynchronous Socket Echo Server Using select()</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sockets/echo_client/README.html">Socket Echo Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sockets/echo_server/README.html">Socket Echo Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sockets/http_client/README.html">Socket HTTP Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sockets/http_get/README.html">Socket HTTP GET Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sockets/net_mgmt/README.html">Network Management Socket</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sockets/packet/README.html">Packet socket sample</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sockets/sntp_client/README.html">SNTP client sample</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sockets/socketpair/README.html">Socketpair Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sockets/tcp/README.html">TCP Sample for TTCN-3 based Sanity Check</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sockets/txtime/README.html">SO_TXTIME sample</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sockets/websocket_client/README.html">Socket Websocket Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stats/README.html">Network Statistics Sample Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../syslog_net/README.html">Syslog net Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../telnet/README.html">Sample TELNET console application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../virtual/README.html">Virtual Network Interface Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vlan/README.html">Virtual LAN Sample Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../wifi/README.html">Wi-Fi sample</a></li>
<li class="toctree-l3"><a class="reference internal" href="../wpan_serial/README.html">802.15.4 “serial-radio” sample</a></li>
<li class="toctree-l3"><a class="reference internal" href="../wpanusb/README.html">wpanusb sample</a></li>
<li class="toctree-l3"><a class="reference internal" href="../zperf/README.html">zperf: Network Traffic Generator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../bluetooth/bluetooth.html">Bluetooth samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sensor/sensor.html">Sensor Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../arch/index.html">Architecture Dependent Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../boards/boards.html">Board-specific samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../drivers/drivers.html">Driver Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../application_development/application_development.html">Application development samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shields/shields.html">Shields Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../posix/posix.html">POSIX Subsystem Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../kernel/index.html">Various Kernel and Scheduler Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tfm_integration/tfm_integration.html">TF-M Integration Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tfm_integration/tfm_integration.html#trusted-firmware-m-tf-m">Trusted Firmware-M (TF-M)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modules/index.html">External Module Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../compression/compression.html">Compression Samples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../boards/index.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/index.html">Release Notes</a></li>
</ul>

  
  <div class="toctree-wrapper compound">
    <p class="caption"><span class="caption-text">Reference</span></p>
    <ul>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/doxygen/html/index.html">API</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/kconfig/index.html">Kconfig Options</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/devicetree/bindings.html">Devicetree Bindings</a>
      </li>
      
    </ul>
  </div>
  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Zephyr Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Docs / Latest -->
  
  

  <li><a href="../../../index.html">Docs / Latest</a> &raquo;</li>
  
     <li><a href="../../index.html">Samples and Demos</a> &raquo;</li>
  
     <li><a href="../net.html">Networking Samples</a> &raquo;</li>
  
  <li>LwM2M client</li>


  <li class="wy-breadcrumbs-aside">
    <dark-mode-toggle id="dark-mode-toggle" appearance="toggle" permanent="true"/>
  </li>
  <li class="wy-breadcrumbs-aside">
      
      
        <a href="https://github.com/zephyrproject-rtos/zephyr/blob/main//samples/net/lwm2m_client/README.rst" class="fa fa-github"> Open on GitHub</a>
      
    
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="wy-alert wy-alert-danger">
     This is the documentation for the latest (main) development branch of
     Zephyr. If you are looking for the documentation of previous releases, use
     the drop-down menu on the left and select the desired version.
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="lwm2m-client">
<span id="lwm2m-client-sample"></span><h1>LwM2M client<a class="headerlink" href="#lwm2m-client" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Lightweight Machine to Machine (LwM2M) is an application layer protocol
based on CoAP/UDP, and is designed to expose various resources for reading,
writing and executing via an LwM2M server in a very lightweight environment.</p>
<p>This LwM2M client sample application for Zephyr implements the LwM2M library
and establishes a connection to an LwM2M server using the
<a class="reference external" href="http://www.openmobilealliance.org/release/LightweightM2M/V1_0-20170208-A/OMA-TS-LightweightM2M-V1_0-20170208-A.pdf">Open Mobile Alliance Lightweight Machine to Machine Technical Specification</a>
(Section 5.3: Client Registration Interface).</p>
<p>The source code for this sample application can be found at:
<a class="reference external" href="https://github.com/zephyrproject-rtos/zephyr/blob/main/samples/net/lwm2m_client">samples/net/lwm2m_client</a>.</p>
</div>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../../../guides/networking/qemu_setup.html#networking-with-qemu"><span class="std std-ref">Networking with QEMU</span></a></p></li>
<li><p>Linux machine</p></li>
<li><p>Leshan Demo Server (<a class="reference external" href="https://eclipse.org/leshan/">https://eclipse.org/leshan/</a>)</p></li>
</ul>
</div>
<div class="section" id="building-and-running">
<h2>Building and Running<a class="headerlink" href="#building-and-running" title="Permalink to this headline">¶</a></h2>
<p>There are configuration files for various setups in the
samples/net/lwm2m_client directory:</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">prj.conf</span></code>
This is the standard default config.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">overlay-bootstrap.conf</span></code>
This overlay config can be added to enable LWM2M Bootstrap support.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">overlay-ot.conf</span></code>
This overlay config can be added for OpenThread support.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">overlay-dtls.conf</span></code>
This overlay config can be added for DTLS support via MBEDTLS.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">overlay-bt.conf</span></code>
This overlay config can be added to enable Bluetooth networking support.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">overlay-queue.conf</span></code>
This overlay config can be added to enable LWM2M Queue Mode support.</p></li>
</ul>
<p>Build the lwm2m-client sample application like this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -b &lt;board to use&gt; samples/net/lwm2m_client -- -DCONF_FILE=&lt;config file to use&gt;</span>
</pre></div>
</div>
<p>The easiest way to setup this sample application is to build and run it
via QEMU using the default configuration <code class="file docutils literal notranslate"><span class="pre">prj.conf</span></code>.
This requires a small amount of setup described in <a class="reference internal" href="../../../guides/networking/qemu_setup.html#networking-with-qemu"><span class="std std-ref">Networking with QEMU</span></a>.</p>
<p>Download and run the latest build of the Leshan Demo Server:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>wget https://ci.eclipse.org/leshan/job/leshan/lastSuccessfulBuild/artifact/leshan-server-demo.jar
<span class="gp">$ </span>java -jar ./leshan-server-demo.jar -wp <span class="m">8080</span>
</pre></div>
</div>
<p>You can now open a web browser to: <a class="reference external" href="http://localhost:8080">http://localhost:8080</a> This is where you
can watch and manage connected LwM2M devices.</p>
<p>Build the lwm2m-client sample application for QEMU like this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -b qemu_x86 samples/net/lwm2m_client</span>
<span class="go">west build -t run</span>
</pre></div>
</div>
<p>The sample will start and automatically connect to the Leshan Demo Server with
an IPv6 client endpoint “qemu_x86”.</p>
<p>To change the sample to use IPv4, disable IPv6 by changing these two
configurations in <code class="docutils literal notranslate"><span class="pre">prj.conf</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CONFIG_NET_IPV6</span><span class="o">=</span><span class="n">n</span>
<span class="n">CONFIG_NET_CONFIG_NEED_IPV6</span><span class="o">=</span><span class="n">n</span>
</pre></div>
</div>
<div class="section" id="dtls-support">
<h3>DTLS Support<a class="headerlink" href="#dtls-support" title="Permalink to this headline">¶</a></h3>
<p>To build the lwm2m-client sample for QEMU with DTLS support do the following:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -b qemu_x86 samples/net/lwm2m_client -- -DCONF_FILE=&quot;prj.conf overlay-dtls.conf&quot;</span>
<span class="go">west build -t run</span>
</pre></div>
</div>
<p>Setup DTLS security in Leshan Demo Server:</p>
<ol class="arabic">
<li><p>Open up the Leshan Demo Server web UI</p></li>
<li><p>Click on “Security”</p></li>
<li><p>Click on “Add new client security configuration”</p></li>
<li><p>Enter the following data:</p>
<blockquote>
<div><ul class="simple">
<li><p>Client endpoint: qemu_x86</p></li>
<li><p>Security mode: Pre-Shared Key</p></li>
<li><p>Identity: Client_identity</p></li>
<li><p>Key: 000102030405060708090a0b0c0d0e0f</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Start the Zephyr sample</p></li>
</ol>
</div>
<div class="section" id="bootstrap-support">
<h3>Bootstrap Support<a class="headerlink" href="#bootstrap-support" title="Permalink to this headline">¶</a></h3>
<p>In order to run Bootstrap procedure with the sample, you need to download and
run the Leshan Demo Bootstrap Server:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>wget https://ci.eclipse.org/leshan/job/leshan/lastSuccessfulBuild/artifact/leshan-bsserver-demo.jar
<span class="gp">$ </span>java -jar ./leshan-bsserver-demo.jar -wp <span class="m">8888</span> -lp <span class="m">5783</span> -slp <span class="m">5784</span>
</pre></div>
</div>
<p>You can now open a web browser to: <a class="reference external" href="http://localhost:8888">http://localhost:8888</a> The Demo Bootstrap
Server web UI will open, this is where you can configure your device for
bootstrap.</p>
<p>Configure the lwm2m-client sample in the Demo Bootsrap Server:</p>
<ol class="arabic">
<li><p>Click on “Add new client bootstrap configuration”</p></li>
<li><p>Enter the following data:</p>
<blockquote>
<div><ul class="simple">
<li><p>Client endpoint: qemu_x86</p></li>
</ul>
</div></blockquote>
</li>
<li><p>In the <code class="docutils literal notranslate"><span class="pre">LWM2M</span> <span class="pre">Server</span></code> tab, enter the following data:</p>
<blockquote>
<div><ul class="simple">
<li><p>LWM2M Server URL: coap://[2001:db8::2]:5683 (or coap://192.0.2.2:5683 if IPv4 is used)</p></li>
<li><p>Security mode: No Security</p></li>
</ul>
</div></blockquote>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">LWM2M</span> <span class="pre">Bootstrap</span> <span class="pre">Server</span></code> tab can be left intact in the default
configuration (No Security).</p></li>
</ol>
<p>To build the lwm2m-client sample for QEMU with Bootstrap enabled do the
following:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -b qemu_x86 samples/net/lwm2m_client -- -DCONF_FILE=&quot;prj.conf overlay-bootstrap.conf&quot;</span>
<span class="go">west build -t run</span>
</pre></div>
</div>
<p>The sample will start and automatically connect to the Leshan Demo Bootstrap
Server to obtain the LwM2M Server information. After that, the sample will
automatically connect to the Leshan Demo Sever, as it was indicated in the
Bootstrap Server configuraion.</p>
<p>It is possible to combine overlay files, to enable DTLS and Bootstrap for
instance. In that case, the user should make sure to update the port number in
the overlay file for Bootstrap over DTLS (5784 in case of Leshan Demo Bootstrap
Server) and to configure correct security mode in the <code class="docutils literal notranslate"><span class="pre">LWM2M</span> <span class="pre">Bootstrap</span> <span class="pre">Server</span></code>
tab in the web UI (Pre-shared Key).</p>
</div>
<div class="section" id="bluetooth-support">
<h3>Bluetooth Support<a class="headerlink" href="#bluetooth-support" title="Permalink to this headline">¶</a></h3>
<p>To build the lwm2m-client sample for hardware requiring Bluetooth for
networking (IPSP node connected via 6lowpan) do the following:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -b &lt;board to use&gt; samples/net/lwm2m_client -- -DCONF_FILE=&quot;prj.conf overlay-bt.conf&quot;</span>
</pre></div>
</div>
<p>The overlay-*.conf files can also be combined.  For example, you could build a
DTLS-enabled LwM2M client sample for BLENano2 hardware by using the following
commands (requires Bluetooth for networking):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -b nrf52_blenano2 samples/net/lwm2m_client -- -DCONF_FILE=&quot;prj.conf overlay-bt.conf overlay-dtls.conf&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="openthread-support">
<h3>OpenThread Support<a class="headerlink" href="#openthread-support" title="Permalink to this headline">¶</a></h3>
<p>To build the lwm2m-client sample for hardware requiring OpenThread for
networking do the following:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -b &lt;board to use&gt; samples/net/lwm2m_client -- -DCONF_FILE=&quot;prj.conf overlay-ot.conf&quot;</span>
</pre></div>
</div>
<p>Note: If not provisioned (fully erased before flash), device will form
new OpenThread network and promote itself to leader (Current role: leader).
To join into already existing OT network, either enable CONFIG_OPENTHREAD_JOINER=y
and CONFIG_OPENTHREAD_JOINER_AUTOSTART=y and send join request from other
already joined device with joiner capabilities, or provision it manually
from console:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ot thread stop</span>
<span class="go">ot channel &lt;channel&gt;</span>
<span class="go">ot networkname &lt;network name&gt;</span>
<span class="go">ot masterkey &lt;key&gt;</span>
<span class="go">ot panid &lt;panid&gt;</span>
<span class="go">ot extpanid &lt;extpanid&gt;</span>
<span class="go">ot thread start</span>
</pre></div>
</div>
<p>You could get all parameters for existng OT network from your OTBR with
the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">wpanctl get Thread:ActiveDataset</span>
</pre></div>
</div>
</div>
<div class="section" id="queue-mode-support">
<h3>Queue Mode Support<a class="headerlink" href="#queue-mode-support" title="Permalink to this headline">¶</a></h3>
<p>To build the lwm2m-client sample with LWM2M Queue Mode support do the following:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -b &lt;board to use&gt; samples/net/lwm2m_client -- -DCONF_FILE=&quot;prj.conf overlay-queue.conf&quot;</span>
</pre></div>
</div>
<p>With Queue Mode enabled, the LWM2M client will register with “UDP with Queue
Mode” binding. The LWM2M engine will notify the application with
<code class="docutils literal notranslate"><span class="pre">LWM2M_RD_CLIENT_EVENT_QUEUE_MODE_RX_OFF</span></code> event when the RX window
is closed so it can e. g. turn the radio off. The next RX window will be open
with consecutive <code class="docutils literal notranslate"><span class="pre">LWM2M_RD_CLIENT_EVENT_REG_UPDATE_COMPLETE</span></code> event.</p>
</div>
<div class="section" id="wnc-m14a2a-lte-m-modem-support">
<h3>WNC-M14A2A LTE-M Modem Support<a class="headerlink" href="#wnc-m14a2a-lte-m-modem-support" title="Permalink to this headline">¶</a></h3>
<p>To build the lwm2m-client sample for use with the WNC-M14A2A LTE-M modem
shield do the following:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -b &lt;board to use&gt; samples/net/lwm2m_client -- -DCONF_FILE=&quot;prj.conf overlay-wncm14a2a.conf&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="sample-output-without-dtls-enabled">
<h3>Sample output without DTLS enabled<a class="headerlink" href="#sample-output-without-dtls-enabled" title="Permalink to this headline">¶</a></h3>
<p>The following is sample output from the QEMU console.  First, LwM2M engine is
initialized.  Then, several LwM2M Smart Objects register themselves with the
engine.  The sample app then sets some client values so that they can be seen
in the Leshan Demo Server interface, and finally, the registration request is
sent to the server where the endpoint is initialized.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">To exit from QEMU enter: &#39;CTRL+a, x&#39;</span>
<span class="go">[QEMU] CPU: qemu32,+nx,+pae</span>
<span class="go">qemu-system-i386: warning: Unknown firmware file in legacy mode: genroms/multiboot.bin</span>

<span class="go">shell&gt; [lib/lwm2m_engine] [DBG] lwm2m_engine_init: LWM2M engine thread started</span>
<span class="go">[lwm2m_obj_security] [DBG] security_create: Create LWM2M security instance: 0</span>
<span class="go">[lwm2m_obj_server] [DBG] server_create: Create LWM2M server instance: 0</span>
<span class="go">[lwm2m_obj_device] [DBG] device_create: Create LWM2M device instance: 0</span>
<span class="go">[lwm2m_obj_firmware] [DBG] firmware_create: Create LWM2M firmware instance: 0</span>
<span class="go">[lwm2m-client] [INF] main: Run LWM2M client</span>
<span class="go">[lib/lwm2m_engine] [DBG] lwm2m_engine_set: path:3/0/0, value:0x0001c99e, len:6</span>
<span class="go">[lib/lwm2m_engine] [DBG] lwm2m_engine_set: path:3/0/1, value:0x0001c9ab, len:23</span>
<span class="go">[lib/lwm2m_engine] [DBG] lwm2m_engine_set: path:3/0/2, value:0x0001c9c9, len:9</span>
<span class="go">[lib/lwm2m_engine] [DBG] lwm2m_engine_set: path:3/0/3, value:0x0001c9d9, len:3</span>
<span class="go">[lib/lwm2m_engine] [DBG] lwm2m_engine_set: path:3/0/9, value:0x0041a3a4, len:1</span>
<span class="go">[lib/lwm2m_engine] [DBG] lwm2m_engine_set: path:3/0/10, value:0x0041a3b4, len:4</span>
<span class="go">[lib/lwm2m_engine] [DBG] lwm2m_engine_set: path:3/0/17, value:0x0001c9fc, len:16</span>
<span class="go">[lib/lwm2m_engine] [DBG] lwm2m_engine_set: path:3/0/18, value:0x0001ca14, len:5</span>
<span class="go">[lib/lwm2m_engine] [DBG] lwm2m_engine_set: path:3/0/20, value:0x0041a3a4, len:1</span>
<span class="go">[lib/lwm2m_engine] [DBG] lwm2m_engine_set: path:3/0/21, value:0x0041a3b4, len:4</span>
<span class="go">[lib/lwm2m_engine] [DBG] lwm2m_engine_create_obj_inst: path:3303/0</span>
<span class="go">[ipso_temp_sensor] [DBG] temp_sensor_create: Create IPSO Temperature Sensor instance: 0</span>
<span class="go">[lib/lwm2m_engine] [DBG] lwm2m_engine_set: path:3303/0/5700, value:0x0041a3b8, len:8</span>
<span class="go">[lib/lwm2m_rd_client] [INF] lwm2m_rd_client_start: LWM2M Client: qemu_x86</span>
<span class="go">[lib/lwm2m_rd_client] [INF] sm_do_init: RD Client started with endpoint &#39;qemu_x86&#39; and client lifetime 0</span>
<span class="go">[lib/lwm2m_rd_client] [DBG] sm_send_registration: registration sent [2001:db8::2]</span>
<span class="go">[lib/lwm2m_engine] [DBG] lwm2m_udp_receive: checking for reply from [2001:db8::2]</span>
<span class="go">[lib/lwm2m_rd_client] [DBG] do_registration_reply_cb: Registration callback (code:2.1)</span>
<span class="go">[lwm2m-client] [DBG] rd_client_event: Registration complete</span>
<span class="go">[lib/lwm2m_rd_client] [INF] do_registration_reply_cb: Registration Done (EP=&#39;EZd501ZF26&#39;)</span>
<span class="go">[lib/lwm2m_engine] [DBG] lwm2m_udp_receive: reply 0x004001ec handled and removed</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>

          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../../copyright.html">Copyright</a> 2015-2021 Zephyr Project members and individual contributors.
      <span class="lastupdated">Last updated on Feb 21, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
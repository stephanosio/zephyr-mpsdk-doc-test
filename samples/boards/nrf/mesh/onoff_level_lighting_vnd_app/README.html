<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bluetooth: Mesh Generic OnOff, Generic Level, Lighting &amp; Vendor Models &mdash; Zephyr Project Documentation</title>
      <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/underscore.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script type="module" src="../../../../../_static/js/dark-mode-toggle.min.mjs"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-831873-47"></script>
        <script src="../../../../../_static/js/ga-tracker.js"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="copyright" title="Copyright" href="../../../../../copyright.html" />
    <link rel="next" title="Synchronized RTC" href="../../nrf53_sync_rtc/README.html" />
    <link rel="prev" title="Bluetooth: Mesh OnOff Model" href="../onoff-app/README.html" />
  <meta name="color-scheme" content="dark light">
  
  <link rel="stylesheet" href="../../../../../_static/css/light.css" type="text/css" media="(prefers-color-scheme: light)"/>
  <link rel="stylesheet" href="../../../../../_static/css/dark.css" type="text/css" media="(prefers-color-scheme: dark)"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../../../index.html">
            <img src="../../../../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.0-rc3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Zephyr Project</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Release Versions</dt>
        
          <dd><a href="/">latest</a></dd>
        
          <dd><a href="/2.7.0/">2.7.0</a></dd>
        
          <dd><a href="/2.6.0/">2.6.0</a></dd>
        
          <dd><a href="/2.5.0/">2.5.0</a></dd>
        
          <dd><a href="/2.4.0/">2.4.0</a></dd>
        
          <dd><a href="/2.3.0/">2.3.0</a></dd>
        
          <dd><a href="/1.14.1/">1.14.1</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="/latest/zephyr.pdf">PDF</a></dd>
      </dl>
      <dl>
        <dt>zephyrproject.org Links</dt>
          <dd>
            <a href="https://www.zephyrproject.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/sdk-ng/releases">SDK</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/zephyr/releases">Releases</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../contribute/index.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../development_process/index.html">Development and Contribution Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../guides/build/index.html">Build and Configuration Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../application/index.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../guides/index.html">User and Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../security/index.html">Security</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../index.html">Samples and Demos</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../classic.html">Classic Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../basic/basic.html">Basic Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../userspace/index.html">Userspace Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../subsys/subsys.html">Various Subsystems Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../net/net.html">Networking Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../bluetooth/bluetooth.html">Bluetooth samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sensor/sensor.html">Sensor Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../arch/index.html">Architecture Dependent Samples</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../boards.html">Board-specific samples</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../96b_argonkey/microphone/README.html">ArgonKey Board Microphone</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../96b_argonkey/sensors/README.html">ArgonKey Board Sensors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../arc_secure_services/README.html">ARC Secure Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../bbc_microbit/display/README.html">BBC micro:bit display</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../bbc_microbit/line_follower_robot/README.html">BBC micro:bit line-follower robot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../bbc_microbit/microbit.html">BBC micro:bit Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../bbc_microbit/pong/README.html">BBC micro:bit pong game</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../bbc_microbit/sound/README.html">BBC micro:bit sound</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../esp32/spiram_test/README.html">Espressif ESP32 SPIRAM test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../esp32/wifi_station/README.html">Espressif ESP32 WiFi Station</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../google_kukui/README.html">Kukui general features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../intel_s1000_crb/audio/README.html">Sue Creek 2-Way Audio Sample Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../intel_s1000_crb/dmic/README.html">Intel® S1000 Digital Microphone Sample Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../intel_s1000_crb/i2s/README.html">Intel® S1000 I2S Audio Sample Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../intel_s1000_crb/intel_s1000_crb.html">Intel® S1000 Customer Reference Board Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../mec15xxevb_assy6853/mec15xxevb_assy6853.html">MEC15xxEVB Reference Board Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../mec15xxevb_assy6853/power_management/README.html">MEC15xx sample board test application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../battery/README.html">Battery Voltage Measurement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../clock_skew/README.html">nRF5x Clock Skew Demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dynamic_pinctrl/README.html">Dynamic Pin Control (nRF)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ieee802154/802154_rpmsg/README.html">nRF IEEE 802.15.4: Serialization RPMsg</a></li>
<li class="toctree-l3"><a class="reference internal" href="../onoff-app/README.html">Bluetooth: Mesh OnOff Model</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Bluetooth: Mesh Generic OnOff, Generic Level, Lighting &amp; Vendor Models</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#associations-of-models-with-hardware">Associations of Models with hardware</a></li>
<li class="toctree-l4"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-and-running">Building and Running</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../nrf53_sync_rtc/README.html">Synchronized RTC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../nrf_led_matrix/README.html">nRF LED matrix sample</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../nrfx/README.html">nrfx use example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../nrfx_prs/README.html">nrfx peripheral resource sharing example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../system_off/README.html">nRF5x System Off demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reel_board/mesh_badge/README.html">Mesh Badge</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../sensortile_box/README.html">ST SensorTile.box</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32/backup_sram/README.html">STM32 Backup SRAM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32/ccm/README.html">STM32 CCM example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32/power_mgmt/blinky/README.html">STM32 PM Blinky</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../stm32/power_mgmt/stm32wb_ble/README.html">STM32: PM BLE Power Management (STM32WB)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ti/cc13x2_cc26x2/system_off/README.html">cc13x2_cc26x2 System Off demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../up_squared/gpio_counter/README.html">UP Squared GPIO Counter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../drivers/drivers.html">Driver Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../application_development/application_development.html">Application development samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../shields/shields.html">Shields Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../posix/posix.html">POSIX Subsystem Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../kernel/index.html">Various Kernel and Scheduler Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tfm_integration/tfm_integration.html">TF-M Integration Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tfm_integration/tfm_integration.html#trusted-firmware-m-tf-m">Trusted Firmware-M (TF-M)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/index.html">External Module Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../compression/compression.html">Compression Samples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../boards/index.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../releases/index.html">Release Notes</a></li>
</ul>

  
  <div class="toctree-wrapper compound">
    <p class="caption"><span class="caption-text">Reference</span></p>
    <ul>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/doxygen/html/index.html">API</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/kconfig/index.html">Kconfig Options</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/devicetree/bindings.html">Devicetree Bindings</a>
      </li>
      
    </ul>
  </div>
  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">Zephyr Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Docs / Latest -->
  
  

  <li><a href="../../../../../index.html">Docs / Latest</a> &raquo;</li>
  
     <li><a href="../../../../index.html">Samples and Demos</a> &raquo;</li>
  
     <li><a href="../../../boards.html">Board-specific samples</a> &raquo;</li>
  
  <li>Bluetooth: Mesh Generic OnOff, Generic Level, Lighting &amp; Vendor Models</li>


  <li class="wy-breadcrumbs-aside">
    <dark-mode-toggle id="dark-mode-toggle" appearance="toggle" permanent="true"/>
  </li>
  <li class="wy-breadcrumbs-aside">
      
      
        <a href="https://github.com/zephyrproject-rtos/zephyr/blob/main//samples/boards/nrf/mesh/onoff_level_lighting_vnd_app/README.rst" class="fa fa-github"> Open on GitHub</a>
      
    
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="wy-alert wy-alert-danger">
     This is the documentation for the latest (main) development branch of
     Zephyr. If you are looking for the documentation of previous releases, use
     the drop-down menu on the left and select the desired version.
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="bluetooth-mesh-generic-onoff-generic-level-lighting-vendor-models">
<span id="bluetooth-mesh-onoff-level-lighting-vnd-sample"></span><h1>Bluetooth: Mesh Generic OnOff, Generic Level, Lighting &amp; Vendor Models<a class="headerlink" href="#bluetooth-mesh-generic-onoff-generic-level-lighting-vendor-models" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This is a application demonstrating a Bluetooth mesh node in
which Root element has following models</p>
<ul class="simple">
<li><p>Generic OnOff Server</p></li>
<li><p>Generic OnOff Client</p></li>
<li><p>Generic Level Server</p></li>
<li><p>Generic Level Client</p></li>
<li><p>Generic Default Transition Time Server</p></li>
<li><p>Generic Default Transition Time Client</p></li>
<li><p>Generic Power OnOff Server</p></li>
<li><p>Generic Power OnOff Setup Server</p></li>
<li><p>Generic Power OnOff Client</p></li>
<li><p>Light Lightness Server</p></li>
<li><p>Light Lightness Setup Server</p></li>
<li><p>Light Lightness Client</p></li>
<li><p>Light CTL Server</p></li>
<li><p>Light CTL Setup Server</p></li>
<li><p>Light CTL Client</p></li>
<li><p>Vendor Model</p></li>
</ul>
<p>And Secondary element has following models</p>
<ul class="simple">
<li><p>Generic Level Server</p></li>
<li><p>Generic Level Client</p></li>
<li><p>Light CTL Temperature Server</p></li>
</ul>
<p>Prior to provisioning, an unprovisioned beacon is broadcast that contains
a unique UUID. It is obtained from the device address set by Nordic in the
Factory information configuration register (FICR).</p>
</div>
<div class="section" id="associations-of-models-with-hardware">
<h2>Associations of Models with hardware<a class="headerlink" href="#associations-of-models-with-hardware" title="Permalink to this headline">¶</a></h2>
<p>For the nRF52840-PDK board, these are the model associations:</p>
<ul class="simple">
<li><p>LED1 is associated with generic OnOff Server’s state which is part of Root element</p></li>
<li><p>LED2 is associated with Vendor Model which is part of Root element</p></li>
<li><p>LED3 is associated with generic Level (ROOT) / Light Lightness Actual value</p></li>
<li><p>LED4 is associated with generic Level (Secondary) / Light CTL Temperature value</p></li>
<li><p>Button1 and Button2 are associated with gen. OnOff Client or Vendor Model which is part of Root element</p></li>
<li><p>Button3 and Button4 are associated with gen. Level Client / Light Lightness Client / Light CTL Client which is part of Root element</p></li>
</ul>
<p>States of Servers are bounded as per Bluetooth SIG Mesh Model Specification v1.0</p>
<p>After provisioning, the button clients must
be configured to publish and the LED servers to subscribe.
If a server is provided with a publish address, it will
also publish its relevant status.</p>
</div>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>This sample has been tested on the Nordic nRF52840-PDK board, but would
likely also run on the nrf52dk_nrf52832 board.</p>
</div>
<div class="section" id="building-and-running">
<h2>Building and Running<a class="headerlink" href="#building-and-running" title="Permalink to this headline">¶</a></h2>
<p>This sample can be found under <a class="reference external" href="https://github.com/zephyrproject-rtos/zephyr/blob/main/samples/boards/nrf/mesh/onoff_level_lighting_vnd_app">samples/boards/nrf/mesh/onoff_level_lighting_vnd_app</a> in the
Zephyr tree.</p>
<p>The following commands build the application.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -b nrf52840dk_nrf52840 samples/boards/nrf/mesh/onoff_level_lighting_vnd_app</span>
<span class="go">west flash</span>
</pre></div>
</div>
<p>Provisioning is done using the BlueZ meshctl utility. In this example, we’ll use meshctl commands to bind:</p>
<ul class="simple">
<li><p>Button1, Button2, and LED1 to application key 1. It then configures Button1 and Button2
to publish to group 0xC000 and LED1 to subscribe to that group.</p></li>
<li><p>Button3, Button4, and LED3 to application key 1. It then configures Button3 and Button4
to publish to group 0xC000 and LED3 to subscribe to that group.</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">discover-unprovisioned on</span>
<span class="go">provision &lt;discovered UUID&gt;</span>
<span class="go">menu config</span>
<span class="go">target 0100</span>
<span class="go">appkey-add 1</span>
<span class="go">bind 0 1 1000</span>
<span class="go">bind 0 1 1001</span>
<span class="go">bind 0 1 1002</span>
<span class="go">bind 0 1 1003</span>
<span class="go">sub-add 0100 c000 1000</span>
<span class="go">sub-add 0100 c000 1002</span>
<span class="go">pub-set 0100 c000 1 0 5 1001</span>
<span class="go">pub-set 0100 c000 1 0 5 1003</span>
</pre></div>
</div>
<p>The meshctl utility maintains a persistent JSON database containing
the mesh configuration. As additional nodes (boards) are provisioned, it
assigns sequential unicast addresses based on the number of elements
supported by the node. This example supports 2 elements per node.</p>
<p>The meshctl target for configuration must be the root element’s unicast
address as it is the only one that has a configuration server model. If
meshctl is gracefully exited, it can be restarted and reconnected to
network 0x0.</p>
<p>The meshctl utility also supports a onoff model client that can be used to
change the state of any LED that is bound to application key 0x1.
This is done by setting the target to the unicast address of the element
that has that LED’s model and issuing the onoff command.
Group addresses are not supported.</p>
<p>This application was derived from the sample mesh skeleton at
<a class="reference external" href="https://github.com/zephyrproject-rtos/zephyr/blob/main/samples/bluetooth/mesh">samples/bluetooth/mesh</a>.</p>
<p>See <a class="reference internal" href="../../../../bluetooth/bluetooth.html#bluetooth-samples"><span class="std std-ref">bluetooth samples section</span></a> for details.</p>
</div>
</div>


           </div>
          </div>

          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../../../../copyright.html">Copyright</a> 2015-2021 Zephyr Project members and individual contributors.
      <span class="lastupdated">Last updated on Feb 21, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
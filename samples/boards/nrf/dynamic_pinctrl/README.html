<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dynamic Pin Control (nRF) &mdash; Zephyr Project Documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script type="module" src="../../../../_static/js/dark-mode-toggle.min.mjs"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-831873-47"></script>
        <script src="../../../../_static/js/ga-tracker.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="copyright" title="Copyright" href="../../../../copyright.html" />
    <link rel="next" title="nRF IEEE 802.15.4: Serialization RPMsg" href="../ieee802154/802154_rpmsg/README.html" />
    <link rel="prev" title="nRF5x Clock Skew Demo" href="../clock_skew/README.html" />
  <meta name="color-scheme" content="dark light">
  
  <link rel="stylesheet" href="../../../../_static/css/light.css" type="text/css" media="(prefers-color-scheme: light)"/>
  <link rel="stylesheet" href="../../../../_static/css/dark.css" type="text/css" media="(prefers-color-scheme: dark)"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../../index.html">
            <img src="../../../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.99
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Zephyr Project</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Release Versions</dt>
        
          <dd><a href="/">latest</a></dd>
        
          <dd><a href="/3.0.0/">3.0.0</a></dd>
        
          <dd><a href="/2.7.0/">2.7.0</a></dd>
        
          <dd><a href="/2.6.0/">2.6.0</a></dd>
        
          <dd><a href="/2.5.0/">2.5.0</a></dd>
        
          <dd><a href="/2.4.0/">2.4.0</a></dd>
        
          <dd><a href="/2.3.0/">2.3.0</a></dd>
        
          <dd><a href="/1.14.1/">1.14.1</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="/latest/zephyr.pdf">PDF</a></dd>
      </dl>
      <dl>
        <dt>zephyrproject.org Links</dt>
          <dd>
            <a href="https://www.zephyrproject.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/sdk-ng/releases">SDK</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/zephyr/releases">Releases</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contribute/index.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../development_process/index.html">Development and Contribution Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../guides/build/index.html">Build and Configuration Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../application/index.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../guides/index.html">User and Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../security/index.html">Security</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Samples and Demos</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../classic.html">Classic Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basic/basic.html">Basic Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../userspace/index.html">Userspace Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../subsys/subsys.html">Various Subsystems Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../net/net.html">Networking Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../bluetooth/bluetooth.html">Bluetooth samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sensor/sensor.html">Sensor Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../arch/index.html">Architecture Dependent Samples</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../boards.html">Board-specific samples</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../96b_argonkey/microphone/README.html">ArgonKey Board Microphone</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../96b_argonkey/sensors/README.html">ArgonKey Board Sensors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../arc_secure_services/README.html">ARC Secure Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../bbc_microbit/display/README.html">BBC micro:bit display</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../bbc_microbit/line_follower_robot/README.html">BBC micro:bit line-follower robot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../bbc_microbit/microbit.html">BBC micro:bit Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../bbc_microbit/pong/README.html">BBC micro:bit pong game</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../bbc_microbit/sound/README.html">BBC micro:bit sound</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../esp32/spiram_test/README.html">Espressif ESP32 SPIRAM test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../esp32/wifi_station/README.html">Espressif ESP32 WiFi Station</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../google_kukui/README.html">Kukui general features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../intel_s1000_crb/audio/README.html">Sue Creek 2-Way Audio Sample Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../intel_s1000_crb/dmic/README.html">Intel® S1000 Digital Microphone Sample Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../intel_s1000_crb/i2s/README.html">Intel® S1000 I2S Audio Sample Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../intel_s1000_crb/intel_s1000_crb.html">Intel® S1000 Customer Reference Board Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mec15xxevb_assy6853/mec15xxevb_assy6853.html">MEC15xxEVB Reference Board Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mec15xxevb_assy6853/power_management/README.html">MEC15xx sample board test application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../battery/README.html">Battery Voltage Measurement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../clock_skew/README.html">nRF5x Clock Skew Demo</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Dynamic Pin Control (nRF)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-and-running">Building and Running</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ieee802154/802154_rpmsg/README.html">nRF IEEE 802.15.4: Serialization RPMsg</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mesh/onoff-app/README.html">Bluetooth: Mesh OnOff Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mesh/onoff_level_lighting_vnd_app/README.html">Bluetooth: Mesh Generic OnOff, Generic Level, Lighting &amp; Vendor Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nrf53_sync_rtc/README.html">Synchronized RTC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nrf_led_matrix/README.html">nRF LED matrix sample</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nrfx/README.html">nrfx use example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nrfx_prs/README.html">nrfx peripheral resource sharing example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../system_off/README.html">nRF5x System Off demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reel_board/mesh_badge/README.html">Mesh Badge</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sensortile_box/README.html">ST SensorTile.box</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../stm32/backup_sram/README.html">STM32 Backup SRAM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../stm32/ccm/README.html">STM32 CCM example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../stm32/power_mgmt/blinky/README.html">STM32 PM Blinky</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../stm32/power_mgmt/stm32wb_ble/README.html">STM32: PM BLE Power Management (STM32WB)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ti/cc13x2_cc26x2/system_off/README.html">cc13x2_cc26x2 System Off demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../up_squared/gpio_counter/README.html">UP Squared GPIO Counter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../drivers/drivers.html">Driver Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../application_development/application_development.html">Application development samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../shields/shields.html">Shields Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../posix/posix.html">POSIX Subsystem Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kernel/index.html">Various Kernel and Scheduler Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tfm_integration/tfm_integration.html">TF-M Integration Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tfm_integration/tfm_integration.html#trusted-firmware-m-tf-m">Trusted Firmware-M (TF-M)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../modules/index.html">External Module Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../compression/compression.html">Compression Samples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../boards/index.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../releases/index.html">Release Notes</a></li>
</ul>

  
  <div class="toctree-wrapper compound">
    <p class="caption"><span class="caption-text">Reference</span></p>
    <ul>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/doxygen/html/index.html">API</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/kconfig.html">Kconfig Options</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/devicetree/bindings.html">Devicetree Bindings</a>
      </li>
      
    </ul>
  </div>
  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Zephyr Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Docs / Latest -->
  
  

  <li><a href="../../../../index.html">Docs / Latest</a> &raquo;</li>
  
     <li><a href="../../../index.html">Samples and Demos</a> &raquo;</li>
  
     <li><a href="../../boards.html">Board-specific samples</a> &raquo;</li>
  
  <li>Dynamic Pin Control (nRF)</li>


  <li class="wy-breadcrumbs-aside">
    <dark-mode-toggle id="dark-mode-toggle" appearance="toggle" permanent="true"/>
  </li>
  <li class="wy-breadcrumbs-aside">
      
      
        <a href="https://github.com/zephyrproject-rtos/zephyr/blob/main//samples/boards/nrf/dynamic_pinctrl/README.rst" class="fa fa-github"> Open on GitHub</a>
      
    
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="wy-alert wy-alert-danger">
     This is the documentation for the latest (main) development branch of
     Zephyr. If you are looking for the documentation of previous releases, use
     the drop-down menu on the left and select the desired version.
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="dynamic-pin-control-nrf">
<span id="samples-boards-nrf-dynamic-pinctrl"></span><h1>Dynamic Pin Control (nRF)<a class="headerlink" href="#dynamic-pin-control-nrf" title="Permalink to this headline">¶</a></h1>
<p>The Dynamic Pin Control (nRF) sample demonstrates how to change <code class="docutils literal notranslate"><span class="pre">uart0</span></code> at
early boot stages, depending on the input level on a pin connected to a
push-button.</p>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Slightly different board revisions that implement just small changes (like
improving the PCB layout or changing components to new equivalents) do not
necessarily require changes to the firmware. As such, one firmware image can be
able to boot onto multiple board revisions.</p>
<p>However, if a certain peripheral is routed to different sets of pins between
revisions, the firmware needs to select the appropriate routing when the
system is initialized.</p>
<p>The Dynamic Pin Control (nRF) sample allows you to select the appropriate routing.</p>
<p>If the push button is not pressed, the system does nothing and continues with
the default configuration. If the button is pressed, the alternative
configuration is applied.</p>
<p>Alternative configurations can only be applied if the device driver using the
associated pins has not been initialized yet. Therefore, pay attention to the
initialization priorities set in the <code class="file docutils literal notranslate"><span class="pre">prj.conf</span></code> file.</p>
<div class="section" id="nrf52840-dk">
<h3>nRF52840 DK<a class="headerlink" href="#nrf52840-dk" title="Permalink to this headline">¶</a></h3>
<p>The diagram below shows the pins assigned to the default and alternative
configurations.</p>
<div class="figure align-default" id="id1">
<img alt="../../../../_images/nrf52840dk-dynamic-pinctrl.png" src="../../../../_images/nrf52840dk-dynamic-pinctrl.png" />
<p class="caption"><span class="caption-number">Fig. 43 </span><span class="caption-text">Configuration for nRF52840 DK</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>If you power on the board, the <code class="docutils literal notranslate"><span class="pre">uart0</span></code> peripheral is routed to the default
set of pins. The default set of pins is also exposed through the left USB
connector as a virtual COM port.</p>
<p>If you power on the board while holding Button 1, the <code class="docutils literal notranslate"><span class="pre">uart0</span></code> peripheral is
routed to the alternative set of pins.</p>
</div>
</div>
<div class="section" id="building-and-running">
<h2>Building and Running<a class="headerlink" href="#building-and-running" title="Permalink to this headline">¶</a></h2>
<p>You can build this application for the nRF52840 DK as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -b nrf52840dk_nrf52840 samples/boards/nrf/dynamic_pinctrl</span>
</pre></div>
</div>
<p>The sample can also support other nRF based boards if you provide a Devicetree
overlay file with an alternative configuration for <code class="docutils literal notranslate"><span class="pre">uart0</span></code>. Select <code class="docutils literal notranslate"><span class="pre">uart0</span></code>
for <code class="docutils literal notranslate"><span class="pre">zephyr,console</span></code> to make the sample work as expected.</p>
<div class="section" id="sample-output">
<h3>Sample Output<a class="headerlink" href="#sample-output" title="Permalink to this headline">¶</a></h3>
<p>Follow these steps to test the two configurations :</p>
<ol class="arabic">
<li><p>Connect a USB-to-UART adapter to both sets of pins. If the board routes the
default configuration to a virtual COM port (as in the nRF52840 DK), you can
directly use that port.</p></li>
<li><p>Open two serial terminals, one connected to the default set of pins and the
other connected to the alternative set of pins.</p>
<div class="figure align-default" id="id2">
<img alt="../../../../_images/terminals-empty.png" src="../../../../_images/terminals-empty.png" />
<p class="caption"><span class="caption-number">Fig. 44 </span><span class="caption-text">Two serial terminals (left: default, right: alternative).</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
</li>
<li><p>Turn on the board. You should see a <code class="docutils literal notranslate"><span class="pre">Hello</span> <span class="pre">World!</span></code> message printed on
the first terminal.</p>
<div class="figure align-default" id="id3">
<img alt="../../../../_images/terminals-default.png" src="../../../../_images/terminals-default.png" />
<p class="caption"><span class="caption-number">Fig. 45 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">Hello</span> <span class="pre">World!</span></code> printed on the default set of pins.</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
</li>
<li><p>Press and hold the configuration-selection push-button (button 1 on the
nRF52840 DK) and press the board reset button. You now should see a
<code class="docutils literal notranslate"><span class="pre">Hello</span> <span class="pre">World!</span></code> message on the second terminal.</p>
<div class="figure align-default" id="id4">
<img alt="../../../../_images/terminals-alt.png" src="../../../../_images/terminals-alt.png" />
<p class="caption"><span class="caption-number">Fig. 46 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">Hello</span> <span class="pre">World!</span></code> printed on the alternative set of pins.</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
</li>
</ol>
</div>
</div>
</div>


           </div>
          </div>

          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../../../copyright.html">Copyright</a> 2015-2022 Zephyr Project members and individual contributors.
      <span class="lastupdated">Last updated on Mar 05, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
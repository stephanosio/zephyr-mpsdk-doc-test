<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ARC Secure Service &mdash; Zephyr Project Documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script type="module" src="../../../_static/js/dark-mode-toggle.min.mjs"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-831873-47"></script>
        <script src="../../../_static/js/ga-tracker.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="copyright" title="Copyright" href="../../../copyright.html" />
    <link rel="next" title="BBC micro:bit display" href="../bbc_microbit/display/README.html" />
    <link rel="prev" title="ArgonKey Board Sensors" href="../96b_argonkey/sensors/README.html" />
  <meta name="color-scheme" content="dark light">
  
  <link rel="stylesheet" href="../../../_static/css/light.css" type="text/css" media="(prefers-color-scheme: light)"/>
  <link rel="stylesheet" href="../../../_static/css/dark.css" type="text/css" media="(prefers-color-scheme: dark)"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html">
            <img src="../../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.0-rc3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Zephyr Project</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Release Versions</dt>
        
          <dd><a href="/">latest</a></dd>
        
          <dd><a href="/2.7.0/">2.7.0</a></dd>
        
          <dd><a href="/2.6.0/">2.6.0</a></dd>
        
          <dd><a href="/2.5.0/">2.5.0</a></dd>
        
          <dd><a href="/2.4.0/">2.4.0</a></dd>
        
          <dd><a href="/2.3.0/">2.3.0</a></dd>
        
          <dd><a href="/1.14.1/">1.14.1</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="/latest/zephyr.pdf">PDF</a></dd>
      </dl>
      <dl>
        <dt>zephyrproject.org Links</dt>
          <dd>
            <a href="https://www.zephyrproject.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/sdk-ng/releases">SDK</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/zephyr/releases">Releases</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute/index.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../development_process/index.html">Development and Contribution Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/build/index.html">Build and Configuration Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../application/index.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/index.html">User and Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security/index.html">Security</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Samples and Demos</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../classic.html">Classic Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basic/basic.html">Basic Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../userspace/index.html">Userspace Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../subsys/subsys.html">Various Subsystems Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../net/net.html">Networking Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bluetooth/bluetooth.html">Bluetooth samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sensor/sensor.html">Sensor Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../arch/index.html">Architecture Dependent Samples</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../boards.html">Board-specific samples</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../96b_argonkey/microphone/README.html">ArgonKey Board Microphone</a></li>
<li class="toctree-l3"><a class="reference internal" href="../96b_argonkey/sensors/README.html">ArgonKey Board Sensors</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">ARC Secure Service</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-and-running">Building and Running</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../bbc_microbit/display/README.html">BBC micro:bit display</a></li>
<li class="toctree-l3"><a class="reference internal" href="../bbc_microbit/line_follower_robot/README.html">BBC micro:bit line-follower robot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../bbc_microbit/microbit.html">BBC micro:bit Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../bbc_microbit/pong/README.html">BBC micro:bit pong game</a></li>
<li class="toctree-l3"><a class="reference internal" href="../bbc_microbit/sound/README.html">BBC micro:bit sound</a></li>
<li class="toctree-l3"><a class="reference internal" href="../esp32/spiram_test/README.html">Espressif ESP32 SPIRAM test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../esp32/wifi_station/README.html">Espressif ESP32 WiFi Station</a></li>
<li class="toctree-l3"><a class="reference internal" href="../google_kukui/README.html">Kukui general features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intel_s1000_crb/audio/README.html">Sue Creek 2-Way Audio Sample Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intel_s1000_crb/dmic/README.html">Intel® S1000 Digital Microphone Sample Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intel_s1000_crb/i2s/README.html">Intel® S1000 I2S Audio Sample Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intel_s1000_crb/intel_s1000_crb.html">Intel® S1000 Customer Reference Board Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mec15xxevb_assy6853/mec15xxevb_assy6853.html">MEC15xxEVB Reference Board Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mec15xxevb_assy6853/power_management/README.html">MEC15xx sample board test application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nrf/battery/README.html">Battery Voltage Measurement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nrf/clock_skew/README.html">nRF5x Clock Skew Demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nrf/dynamic_pinctrl/README.html">Dynamic Pin Control (nRF)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nrf/ieee802154/802154_rpmsg/README.html">nRF IEEE 802.15.4: Serialization RPMsg</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nrf/mesh/onoff-app/README.html">Bluetooth: Mesh OnOff Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nrf/mesh/onoff_level_lighting_vnd_app/README.html">Bluetooth: Mesh Generic OnOff, Generic Level, Lighting &amp; Vendor Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nrf/nrf53_sync_rtc/README.html">Synchronized RTC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nrf/nrf_led_matrix/README.html">nRF LED matrix sample</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nrf/nrfx/README.html">nrfx use example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nrf/nrfx_prs/README.html">nrfx peripheral resource sharing example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nrf/system_off/README.html">nRF5x System Off demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reel_board/mesh_badge/README.html">Mesh Badge</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sensortile_box/README.html">ST SensorTile.box</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stm32/backup_sram/README.html">STM32 Backup SRAM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stm32/ccm/README.html">STM32 CCM example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stm32/power_mgmt/blinky/README.html">STM32 PM Blinky</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stm32/power_mgmt/stm32wb_ble/README.html">STM32: PM BLE Power Management (STM32WB)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ti/cc13x2_cc26x2/system_off/README.html">cc13x2_cc26x2 System Off demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../up_squared/gpio_counter/README.html">UP Squared GPIO Counter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../drivers/drivers.html">Driver Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../application_development/application_development.html">Application development samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shields/shields.html">Shields Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../posix/posix.html">POSIX Subsystem Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../kernel/index.html">Various Kernel and Scheduler Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tfm_integration/tfm_integration.html">TF-M Integration Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tfm_integration/tfm_integration.html#trusted-firmware-m-tf-m">Trusted Firmware-M (TF-M)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modules/index.html">External Module Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../compression/compression.html">Compression Samples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../boards/index.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/index.html">Release Notes</a></li>
</ul>

  
  <div class="toctree-wrapper compound">
    <p class="caption"><span class="caption-text">Reference</span></p>
    <ul>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/doxygen/html/index.html">API</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/kconfig/index.html">Kconfig Options</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/devicetree/bindings.html">Devicetree Bindings</a>
      </li>
      
    </ul>
  </div>
  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Zephyr Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Docs / Latest -->
  
  

  <li><a href="../../../index.html">Docs / Latest</a> &raquo;</li>
  
     <li><a href="../../index.html">Samples and Demos</a> &raquo;</li>
  
     <li><a href="../boards.html">Board-specific samples</a> &raquo;</li>
  
  <li>ARC Secure Service</li>


  <li class="wy-breadcrumbs-aside">
    <dark-mode-toggle id="dark-mode-toggle" appearance="toggle" permanent="true"/>
  </li>
  <li class="wy-breadcrumbs-aside">
      
      
        <a href="https://github.com/zephyrproject-rtos/zephyr/blob/main//samples/boards/arc_secure_services/README.rst" class="fa fa-github"> Open on GitHub</a>
      
    
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="wy-alert wy-alert-danger">
     This is the documentation for the latest (main) development branch of
     Zephyr. If you are looking for the documentation of previous releases, use
     the drop-down menu on the left and select the desired version.
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="arc-secure-service">
<span id="id1"></span><h1>ARC Secure Service<a class="headerlink" href="#arc-secure-service" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This sample implements a simple secure service based on ARC SecureShield to
demonstrate how a secure zephyr application runs together with a normal
Zephyr application.</p>
<p>In this sample:</p>
<ul class="simple">
<li><p>Secure application will be in the secure memory space defined in
<code class="docutils literal notranslate"><span class="pre">arc_mpu_regions.c</span></code>. Half of RAM and ROM is allocated to secure world,
the other half is allocated to normal world.</p></li>
<li><p>Memory not allocated to the secure application is allocated to
the normal application.</p></li>
<li><p>By default, all the peripheral space is normal mode accessible, i.e.,
the peripherals are shared between normal mode and secure mode. If some
peripherals are required by secure world, it can be done by adding static
mpu entry in <code class="docutils literal notranslate"><span class="pre">arc_mpu_regions.c</span></code>.</p></li>
<li><p>The interrupts of two internal timers are configure as normal interrupts,
so the normal zephyr’s kernel tick can work correctly.</p></li>
<li><p>Secure interrupts priority &gt; secure threads priority &gt; normal interrupts
priority &gt; normal threads priority.</p></li>
</ul>
</div>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>To use this sample, ARC processor should be equipped with ARC SecureShield. In
Zephyr, the following board configurations are supported:</p>
<ul class="simple">
<li><p>em_starterkit_em7d
* secure application: em_starterkit_em7d_secure
* normal application: em_starterkit_em7d_normal</p></li>
<li><p>nsim_sem
* secure application: nsim_sem
* normal application: nsim_sem_normal</p></li>
</ul>
</div>
<div class="section" id="building-and-running">
<h2>Building and Running<a class="headerlink" href="#building-and-running" title="Permalink to this headline">¶</a></h2>
<div class="section" id="building">
<h3>Building<a class="headerlink" href="#building" title="Permalink to this headline">¶</a></h3>
<div class="section" id="secure-application">
<h4>Secure application<a class="headerlink" href="#secure-application" title="Permalink to this headline">¶</a></h4>
<p>First, you should build the secure application.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -b em_starterkit_em7d_secure nsim_sem samples/boards/arc_secure_services</span>
</pre></div>
</div>
</div>
<div class="section" id="normal-application">
<h4>Normal application<a class="headerlink" href="#normal-application" title="Permalink to this headline">¶</a></h4>
<p>Currently, in normal application, MPU is not accessible, so no user space and
mpu-based stack checking. Please copy the specific dts file and def_config
file to the specific board dir to build normal application.</p>
<p>Here,take :ref:’dining-philosophers-sample’ as an example for normal
application.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -b em_starterkit_em7d_normal nsim_sem_normal samples/philosophers</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="running">
<h3>Running<a class="headerlink" href="#running" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Run using the bootloader</p></li>
</ul>
<p>The bootloader should load the secure and normal application into the correct place,
then jump to the entry of the secure application. The entry of normal application
is hardcoded in secure application. Secure application will boot normal application.</p>
<ul class="simple">
<li><p>Run using the debugger (recommended)</p></li>
</ul>
<p>Use the gdb debugger to load and run the two applications.</p>
<p>For em starter kit, run the following commands</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>load secure application first
<span class="gp">$ </span><span class="nb">cd</span> samples/boards/arc_secure_services/build
<span class="gp">$ </span>west debug
<span class="gp"># </span>load normal application
<span class="gp">$ </span>monitor load_image ../../../philosophers/build/zepher/zephyr.elf
<span class="gp">$ </span>c
</pre></div>
</div>
<p>For nsim sem, you need two consoles: one for application output, and one for
debugger.</p>
<p>In the console for output:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>open debug server
<span class="gp">$ </span><span class="nb">cd</span> samples/boards/arc_secure_services/build
<span class="gp">$ </span>west debugserver
</pre></div>
</div>
<p>In the console for debugger:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>open debug server
<span class="gp">$ </span><span class="nb">cd</span> samples/boards/arc_secure_services/build
<span class="gp">$ </span>arc-elf32-gdb zephyr/zephyr.elf
<span class="gp">$ </span>target remote :3333
<span class="gp"># </span>load normal application
<span class="gp">$ </span>load ../../../philosophers/build/zepher/zephyr.elf
<span class="gp"># </span>load secure application
<span class="gp">$ </span>load
<span class="gp">$ </span>c
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>

          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../../copyright.html">Copyright</a> 2015-2021 Zephyr Project members and individual contributors.
      <span class="lastupdated">Last updated on Feb 21, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
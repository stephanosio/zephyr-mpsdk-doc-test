<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>USB HID mouse Sample Application &mdash; Zephyr Project Documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script type="module" src="../../../../_static/js/dark-mode-toggle.min.mjs"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-831873-47"></script>
        <script src="../../../../_static/js/ga-tracker.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="copyright" title="Copyright" href="../../../../copyright.html" />
    <link rel="next" title="USB HID Sample Application" href="../hid/README.html" />
    <link rel="prev" title="USB HID CDC ACM Application" href="../hid-cdc/README.html" />
  <meta name="color-scheme" content="dark light">
  
  <link rel="stylesheet" href="../../../../_static/css/light.css" type="text/css" media="(prefers-color-scheme: light)"/>
  <link rel="stylesheet" href="../../../../_static/css/dark.css" type="text/css" media="(prefers-color-scheme: dark)"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../../index.html">
            <img src="../../../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.0-rc3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Zephyr Project</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Release Versions</dt>
        
          <dd><a href="/">latest</a></dd>
        
          <dd><a href="/2.7.0/">2.7.0</a></dd>
        
          <dd><a href="/2.6.0/">2.6.0</a></dd>
        
          <dd><a href="/2.5.0/">2.5.0</a></dd>
        
          <dd><a href="/2.4.0/">2.4.0</a></dd>
        
          <dd><a href="/2.3.0/">2.3.0</a></dd>
        
          <dd><a href="/1.14.1/">1.14.1</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="/latest/zephyr.pdf">PDF</a></dd>
      </dl>
      <dl>
        <dt>zephyrproject.org Links</dt>
          <dd>
            <a href="https://www.zephyrproject.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/sdk-ng/releases">SDK</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/zephyr/releases">Releases</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contribute/index.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../development_process/index.html">Development and Contribution Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../guides/build/index.html">Build and Configuration Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../application/index.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../guides/index.html">User and Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../security/index.html">Security</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Samples and Demos</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../classic.html">Classic Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basic/basic.html">Basic Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../userspace/index.html">Userspace Samples</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../subsys.html">Various Subsystems Samples</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../canbus/canbus.html">Controller Area Network (CAN) Bus Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../console/console.html">Console Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cpp/cpp.html">C++ Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../debug/index.html">Debug Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../display/display.html">Display Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../fs/fs.html">FS Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ipc/ipc.html">IPC Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../logging/logging.html">Logging Sample</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mgmt/mgmt.html">Management Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../modbus/modbus.html">Modbus Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../nvs/README.html">NVS: Non-Volatile Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../portability/portability.html">Portability Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../settings/README.html">Settings sample</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../shell/shell.html">Shell System Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../task_wdt/README.html">Task Watchdog Sample</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../usb.html">USB device support samples</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../audio/headphones_microphone/README.html">USB Audio Sample Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="../audio/headset/README.html">USB Audio Sample Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cdc_acm/README.html">USB CDC ACM Sample Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cdc_acm_composite/README.html">USB CDC ACM Sample Composite Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="../console/README.html">Console over CDC ACM UART Sample</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dfu/README.html">USB DFU Sample Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hid-cdc/README.html">USB HID CDC ACM Application</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">USB HID mouse Sample Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hid/README.html">USB HID Sample Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mass/README.html">USB Mass Storage Sample Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="../testusb/README.html">Testusb application sample</a></li>
<li class="toctree-l4"><a class="reference internal" href="../webusb/README.html">WebUSB sample application</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../video/video.html">Video Samples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../net/net.html">Networking Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../bluetooth/bluetooth.html">Bluetooth samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sensor/sensor.html">Sensor Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../arch/index.html">Architecture Dependent Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../boards/boards.html">Board-specific samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../drivers/drivers.html">Driver Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../application_development/application_development.html">Application development samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../shields/shields.html">Shields Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../posix/posix.html">POSIX Subsystem Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kernel/index.html">Various Kernel and Scheduler Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tfm_integration/tfm_integration.html">TF-M Integration Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tfm_integration/tfm_integration.html#trusted-firmware-m-tf-m">Trusted Firmware-M (TF-M)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../modules/index.html">External Module Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../compression/compression.html">Compression Samples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../boards/index.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../releases/index.html">Release Notes</a></li>
</ul>

  
  <div class="toctree-wrapper compound">
    <p class="caption"><span class="caption-text">Reference</span></p>
    <ul>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/doxygen/html/index.html">API</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/kconfig/index.html">Kconfig Options</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/devicetree/bindings.html">Devicetree Bindings</a>
      </li>
      
    </ul>
  </div>
  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Zephyr Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Docs / Latest -->
  
  

  <li><a href="../../../../index.html">Docs / Latest</a> &raquo;</li>
  
     <li><a href="../../../index.html">Samples and Demos</a> &raquo;</li>
  
     <li><a href="../../subsys.html">Various Subsystems Samples</a> &raquo;</li>
  
     <li><a href="../usb.html">USB device support samples</a> &raquo;</li>
  
  <li>USB HID mouse Sample Application</li>


  <li class="wy-breadcrumbs-aside">
    <dark-mode-toggle id="dark-mode-toggle" appearance="toggle" permanent="true"/>
  </li>
  <li class="wy-breadcrumbs-aside">
      
      
        <a href="https://github.com/zephyrproject-rtos/zephyr/blob/main//samples/subsys/usb/hid-mouse/README.rst" class="fa fa-github"> Open on GitHub</a>
      
    
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="wy-alert wy-alert-danger">
     This is the documentation for the latest (main) development branch of
     Zephyr. If you are looking for the documentation of previous releases, use
     the drop-down menu on the left and select the desired version.
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="usb-hid-mouse-sample-application">
<span id="usb-hid-mouse"></span><h1>USB HID mouse Sample Application<a class="headerlink" href="#usb-hid-mouse-sample-application" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This sample app demonstrates use of a USB Human Interface Device (HID) driver
by the Zephyr project. This very simple driver enumerates a board with a button
into a mouse that has a left mouse button and optionally (depending on
the number of buttons on the board) a right mouse button, X-axis movement,
and Y-axis movement.
If the USB peripheral driver supports remote wakeup feature, wakeup request
will be performed on every button click if the bus is in suspended state.
This sample can be found under <a class="reference external" href="https://github.com/zephyrproject-rtos/zephyr/blob/main/samples/subsys/usb/hid-mouse">samples/subsys/usb/hid-mouse</a> in the
Zephyr project tree.</p>
</div>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>This project requires an USB device driver, and there must has at least one
GPIO button in your board.</p>
<p>The board hardware must have a push button connected via a GPIO pin. These are
called “User buttons” on many of Zephyr’s <a class="reference internal" href="../../../../boards/index.html#boards"><span class="std std-ref">Supported Boards</span></a>.</p>
<p>The button must be configured using the <code class="docutils literal notranslate"><span class="pre">sw0</span></code> <a class="reference internal" href="../../../../guides/dts/index.html#dt-guide"><span class="std std-ref">devicetree</span></a>
alias, usually in the <a class="reference internal" href="../../../../guides/dts/intro.html#devicetree-in-out-files"><span class="std std-ref">BOARD.dts file</span></a>. You will
see this error if you try to build this sample for an unsupported board:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Unsupported board: sw0 devicetree alias is not defined
</pre></div>
</div>
<p>You may see additional build errors if the <code class="docutils literal notranslate"><span class="pre">sw0</span></code> alias exists, but is not
properly defined.</p>
<p>If the devicetree aliases <code class="docutils literal notranslate"><span class="pre">sw1</span></code>, <code class="docutils literal notranslate"><span class="pre">sw2</span></code>, and <code class="docutils literal notranslate"><span class="pre">sw3</span></code> are defined, they will
also be used as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sw1</span></code>: right button</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sw2</span></code>: move the mouse along the x-axis</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sw3</span></code>: move the mouse along the y-axis</p></li>
</ul>
<p>An LED must also be configured via the <code class="docutils literal notranslate"><span class="pre">led0</span></code> devicetree alias. You may also
see this error if you try to build this sample for an unsupported board:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Unsupported board: led0 devicetree alias is not defined
</pre></div>
</div>
</div>
<div class="section" id="building-and-running">
<h2>Building and Running<a class="headerlink" href="#building-and-running" title="Permalink to this headline">¶</a></h2>
<p>This sample can be built for multiple boards, in this example we will build it
for the nucleo_f070rb board:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -b nucleo_f070rb samples/subsys/usb/hid-mouse</span>
</pre></div>
</div>
<p>After you have built and flashed the sample app image to your board, plug the
board into a host device, for example, a PC running Linux.
The board will be detected as shown by the Linux dmesg command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">dmesg | tail -10</span>
<span class="go">usb 2-2: new full-speed USB device number 2 using at91_ohci</span>
<span class="go">usb 2-2: New USB device found, idVendor=2fe3, idProduct=0007, bcdDevice= 2.03</span>
<span class="go">usb 2-2: New USB device strings: Mfr=1, Product=2, SerialNumber=3</span>
<span class="go">usb 2-2: Product: Zephyr HID mouse sample</span>
<span class="go">usb 2-2: Manufacturer: ZEPHYR</span>
<span class="go">usb 2-2: SerialNumber: 86FE679A598AC47A</span>
<span class="go">input: ZEPHYR Zephyr HID mouse sample as /devices/soc0/ahb/600000.ohci/usb2/2-2/2-2:1.0/0003:2FE3:0100.0001/input/input0</span>
<span class="go">hid-generic 0003:2FE3:0100.0001: input: USB HID v1.10 Mouse [ZEPHYR Zephyr HID mouse sample] on usb-at91-2/input0</span>
</pre></div>
</div>
<p>You can also monitor mouse events by using the standard Linux <code class="docutils literal notranslate"><span class="pre">evtest</span></code> command
(see the <a class="reference external" href="http://manpages.ubuntu.com/manpages/trusty/man1/evtest.1.html">Ubuntu evtest man page</a> for more information about this tool):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo evtest /dev/input/event0</span>
<span class="go">Input driver version is 1.0.1</span>
<span class="go">Input device ID: bus 0x3 vendor 0x2fe3 product 0x7 version 0x110</span>
<span class="go">Input device name: &quot;ZEPHYR Zephyr HID mouse sample&quot;</span>
<span class="go">Supported events:</span>
<span class="go">  Event type 0 (EV_SYN)</span>
<span class="go">  Event type 1 (EV_KEY)</span>
<span class="go">    Event code 272 (BTN_LEFT)</span>
<span class="go">    Event code 273 (BTN_RIGHT)</span>
<span class="go">    Event code 274 (BTN_MIDDLE)</span>
<span class="go">  Event type 2 (EV_REL)</span>
<span class="go">    Event code 0 (REL_X)</span>
<span class="go">    Event code 1 (REL_Y)</span>
<span class="go">    Event code 8 (REL_WHEEL)</span>
<span class="go">  Event type 4 (EV_MSC)</span>
<span class="go">    Event code 4 (MSC_SCAN)</span>
<span class="go">Properties:</span>
<span class="go">Testing ... (interrupt to exit)</span>
</pre></div>
</div>
<p>When you press the button on your board, it will act as if the left
mouse button was pressed, and this information will be displayed
by <code class="docutils literal notranslate"><span class="pre">evtest</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Event: time 1167609663.618515, type 4 (EV_MSC), code 4 (MSC_SCAN), value 90001</span>
<span class="go">Event: time 1167609663.618515, type 1 (EV_KEY), code 272 (BTN_LEFT), value 1</span>
<span class="go">Event: time 1167609663.618515, -------------- SYN_REPORT ------------</span>
<span class="go">Event: time 1167609663.730510, type 4 (EV_MSC), code 4 (MSC_SCAN), value 90001</span>
<span class="go">Event: time 1167609663.730510, type 1 (EV_KEY), code 272 (BTN_LEFT), value 0</span>
<span class="go">Event: time 1167609663.730510, -------------- SYN_REPORT ------------</span>
</pre></div>
</div>
<p>If your board has more than one button, they will act as right mouse button,
X-axis movement, and Y-axis movement.</p>
</div>
</div>


           </div>
          </div>

          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../../../copyright.html">Copyright</a> 2015-2021 Zephyr Project members and individual contributors.
      <span class="lastupdated">Last updated on Feb 21, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
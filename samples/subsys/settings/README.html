<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Settings sample &mdash; Zephyr Project Documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script type="module" src="../../../_static/js/dark-mode-toggle.min.mjs"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-831873-47"></script>
        <script src="../../../_static/js/ga-tracker.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="copyright" title="Copyright" href="../../../copyright.html" />
    <link rel="next" title="Shell System Samples" href="../shell/shell.html" />
    <link rel="prev" title="Synchronization using CMSI RTOS V2 APIs" href="../portability/cmsis_rtos_v2/timer_synchronization/README.html" />
  <meta name="color-scheme" content="dark light">
  
  <link rel="stylesheet" href="../../../_static/css/light.css" type="text/css" media="(prefers-color-scheme: light)"/>
  <link rel="stylesheet" href="../../../_static/css/dark.css" type="text/css" media="(prefers-color-scheme: dark)"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html">
            <img src="../../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.99
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Zephyr Project</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Release Versions</dt>
        
          <dd><a href="/">latest</a></dd>
        
          <dd><a href="/3.0.0/">3.0.0</a></dd>
        
          <dd><a href="/2.7.0/">2.7.0</a></dd>
        
          <dd><a href="/2.6.0/">2.6.0</a></dd>
        
          <dd><a href="/2.5.0/">2.5.0</a></dd>
        
          <dd><a href="/2.4.0/">2.4.0</a></dd>
        
          <dd><a href="/2.3.0/">2.3.0</a></dd>
        
          <dd><a href="/1.14.1/">1.14.1</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="/latest/zephyr.pdf">PDF</a></dd>
      </dl>
      <dl>
        <dt>zephyrproject.org Links</dt>
          <dd>
            <a href="https://www.zephyrproject.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/sdk-ng/releases">SDK</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/zephyr/releases">Releases</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute/index.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../development_process/index.html">Development and Contribution Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/build/index.html">Build and Configuration Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../application/index.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/index.html">User and Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security/index.html">Security</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Samples and Demos</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../classic.html">Classic Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../basic/basic.html">Basic Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../userspace/index.html">Userspace Samples</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../subsys.html">Various Subsystems Samples</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../canbus/canbus.html">Controller Area Network (CAN) Bus Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../console/console.html">Console Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cpp/cpp.html">C++ Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../debug/index.html">Debug Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../display/display.html">Display Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fs/fs.html">FS Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ipc/ipc.html">IPC Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../logging/logging.html">Logging Sample</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mgmt/mgmt.html">Management Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modbus/modbus.html">Modbus Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nvs/README.html">NVS: Non-Volatile Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../portability/portability.html">Portability Samples</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Settings sample</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-and-running">Building and Running</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../shell/shell.html">Shell System Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task_wdt/README.html">Task Watchdog Sample</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usb/usb.html">USB device support samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../video/video.html">Video Samples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../net/net.html">Networking Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bluetooth/bluetooth.html">Bluetooth samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sensor/sensor.html">Sensor Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../arch/index.html">Architecture Dependent Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../boards/boards.html">Board-specific samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../drivers/drivers.html">Driver Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../application_development/application_development.html">Application development samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shields/shields.html">Shields Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../posix/posix.html">POSIX Subsystem Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../kernel/index.html">Various Kernel and Scheduler Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tfm_integration/tfm_integration.html">TF-M Integration Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tfm_integration/tfm_integration.html#trusted-firmware-m-tf-m">Trusted Firmware-M (TF-M)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modules/index.html">External Module Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../compression/compression.html">Compression Samples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../boards/index.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/index.html">Release Notes</a></li>
</ul>

  
  <div class="toctree-wrapper compound">
    <p class="caption"><span class="caption-text">Reference</span></p>
    <ul>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/doxygen/html/index.html">API</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/kconfig.html">Kconfig Options</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/devicetree/bindings.html">Devicetree Bindings</a>
      </li>
      
    </ul>
  </div>
  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Zephyr Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Docs / Latest -->
  
  

  <li><a href="../../../index.html">Docs / Latest</a> &raquo;</li>
  
     <li><a href="../../index.html">Samples and Demos</a> &raquo;</li>
  
     <li><a href="../subsys.html">Various Subsystems Samples</a> &raquo;</li>
  
  <li>Settings sample</li>


  <li class="wy-breadcrumbs-aside">
    <dark-mode-toggle id="dark-mode-toggle" appearance="toggle" permanent="true"/>
  </li>
  <li class="wy-breadcrumbs-aside">
      
      
        <a href="https://github.com/zephyrproject-rtos/zephyr/blob/main//samples/subsys/settings/README.rst" class="fa fa-github"> Open on GitHub</a>
      
    
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="wy-alert wy-alert-danger">
     This is the documentation for the latest (main) development branch of
     Zephyr. If you are looking for the documentation of previous releases, use
     the drop-down menu on the left and select the desired version.
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="settings-sample">
<span id="settings-subsys-sample"></span><h1>Settings sample<a class="headerlink" href="#settings-sample" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This is a simple application demonstrating use of the settings runtime
configuration module. In this application some configuration values are loaded
from persistent storage and exported to persistent storage using different
settings method. The example shows how to implement module handlers, how to
register them.</p>
</div>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>A board with settings support, for instance: nrf52840dk_nrf52840</p></li>
<li><p>Or qemu_x86 target</p></li>
</ul>
</div>
<div class="section" id="building-and-running">
<h2>Building and Running<a class="headerlink" href="#building-and-running" title="Permalink to this headline">¶</a></h2>
<p>This sample can be found under <a class="reference external" href="https://github.com/zephyrproject-rtos/zephyr/blob/main/samples/subsys/settings">samples/subsys/settings</a> in
the Zephyr tree.</p>
<p>The sample can be build for several platforms, the following commands build the
application for the qemu_x86.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west build -b qemu_x86 samples/subsys/settings</span>
<span class="go">west build -t run</span>
</pre></div>
</div>
<p>After running the image to the board the output on the console shows the
settings manipulation messages.</p>
<div class="section" id="sample-output">
<h3>Sample Output<a class="headerlink" href="#sample-output" title="Permalink to this headline">¶</a></h3>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">***** Booting Zephyr OS build v2.1.0-rc1-123-g41091eb1d5e0 *****</span>

<span class="go">*** Settings usage example ***</span>

<span class="go">settings subsys initialization: OK.</span>
<span class="go">subtree &lt;alpha&gt; handler registered: OK</span>
<span class="go">subtree &lt;alpha/beta&gt; has static handler</span>

<span class="gp">#</span><span class="c1">#############</span>
<span class="gp"># </span>iteration <span class="m">0</span>
<span class="gp">#</span><span class="c1">#############</span>

<span class="go">=================================================</span>
<span class="go">basic load and save using registered handlers</span>

<span class="go">load all key-value pairs using registered handlers</span>
<span class="go">loading all settings under &lt;beta&gt; handler is done</span>
<span class="go">loading all settings under &lt;alpha&gt; handler is done</span>

<span class="go">save &lt;alpha/beta/voltage&gt; key directly: OK.</span>

<span class="go">load &lt;alpha/beta&gt; key-value pairs using registered handlers</span>
<span class="go">&lt;alpha/beta/voltage&gt; = -3025</span>
<span class="go">loading all settings under &lt;beta&gt; handler is done</span>

<span class="go">save all key-value pairs using registered handlers</span>
<span class="go">export keys under &lt;beta&gt; handler</span>
<span class="go">export keys under &lt;alpha&gt; handler</span>

<span class="go">load all key-value pairs using registered handlers</span>
<span class="go">export keys under &lt;beta&gt; handler</span>
<span class="go">export keys under &lt;alpha&gt; handler</span>

<span class="go">=================================================</span>
<span class="go">loading subtree to destination provided by the caller</span>

<span class="go">direct load: &lt;alpha/length/2&gt;</span>
<span class="go">direct load: &lt;alpha/length/1&gt;</span>
<span class="go">direct load: &lt;alpha/length&gt;</span>
<span class="go">  direct.length = 100</span>
<span class="go">  direct.length_1 = 41</span>
<span class="go">  direct.length_2 = 59</span>

<span class="go">=================================================</span>
<span class="go">Delete a key-value pair</span>

<span class="go">immediate load: OK.</span>
<span class="go">  &lt;alpha/length&gt; value exist in the storage</span>
<span class="go">delete &lt;alpha/length&gt;: OK.</span>
<span class="go">  Can&#39;t to load the &lt;alpha/length&gt; value as expected</span>

<span class="go">=================================================</span>
<span class="go">Service a key-value pair without dedicated handlers</span>

<span class="go">&lt;gamma&gt; = 0 (default)</span>
<span class="go">save &lt;gamma&gt; key directly: OK.</span>
<span class="go">...</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>

          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../../copyright.html">Copyright</a> 2015-2022 Zephyr Project members and individual contributors.
      <span class="lastupdated">Last updated on Mar 05, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
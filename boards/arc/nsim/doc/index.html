<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DesignWare(R) ARC(R) Emulation (nsim) &mdash; Zephyr Project Documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script type="module" src="../../../../_static/js/dark-mode-toggle.min.mjs"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-831873-47"></script>
        <script src="../../../../_static/js/ga-tracker.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="copyright" title="Copyright" href="../../../../copyright.html" />
    <link rel="next" title="ARC EM &amp; HS Emulation (QEMU)" href="../../qemu_arc/doc/index.html" />
    <link rel="prev" title="DesignWare(R) ARC(R) IoT Development Kit" href="../../iotdk/doc/index.html" />
  <meta name="color-scheme" content="dark light">
  
  <link rel="stylesheet" href="../../../../_static/css/light.css" type="text/css" media="(prefers-color-scheme: light)"/>
  <link rel="stylesheet" href="../../../../_static/css/dark.css" type="text/css" media="(prefers-color-scheme: dark)"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../../index.html">
            <img src="../../../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.99
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Zephyr Project</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Release Versions</dt>
        
          <dd><a href="/">latest</a></dd>
        
          <dd><a href="/3.0.0/">3.0.0</a></dd>
        
          <dd><a href="/2.7.0/">2.7.0</a></dd>
        
          <dd><a href="/2.6.0/">2.6.0</a></dd>
        
          <dd><a href="/2.5.0/">2.5.0</a></dd>
        
          <dd><a href="/2.4.0/">2.4.0</a></dd>
        
          <dd><a href="/2.3.0/">2.3.0</a></dd>
        
          <dd><a href="/1.14.1/">1.14.1</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="/latest/zephyr.pdf">PDF</a></dd>
      </dl>
      <dl>
        <dt>zephyrproject.org Links</dt>
          <dd>
            <a href="https://www.zephyrproject.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/sdk-ng/releases">SDK</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/zephyr/releases">Releases</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contribute/index.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../development_process/index.html">Development and Contribution Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../guides/build/index.html">Build and Configuration Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../application/index.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../guides/index.html">User and Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../security/index.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../samples/index.html">Samples and Demos</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Supported Boards</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../x86/index.html">x86 Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../arm/index.html">ARM Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../arm64/index.html">ARM64 Boards</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">ARC Boards</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../em_starterkit/doc/index.html">DesignWare(R) ARC(R) EM Starter Kit</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../emsdp/doc/index.html">DesignWare(R) ARC(R) EM Software Development Platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../hsdk/doc/index.html">DesignWare(R) ARC(R) HS Development Kit</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../iotdk/doc/index.html">DesignWare(R) ARC(R) IoT Development Kit</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">DesignWare(R) ARC(R) Emulation (nsim)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hardware">Hardware</a></li>
<li class="toctree-l4"><a class="reference internal" href="#programming-and-debugging">Programming and Debugging</a></li>
<li class="toctree-l4"><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../qemu_arc/doc/index.html">ARC EM &amp; HS Emulation (QEMU)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../mips/index.html">MIPS Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../nios2/index.html">NIOS II Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../xtensa/index.html">XTENSA Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../posix/index.html">POSIX/NATIVE Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../riscv/index.html">RISCV Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sparc/index.html">SPARC Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../shields/index.html">Shields</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../releases/index.html">Release Notes</a></li>
</ul>

  
  <div class="toctree-wrapper compound">
    <p class="caption"><span class="caption-text">Reference</span></p>
    <ul>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/doxygen/html/index.html">API</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/kconfig.html">Kconfig Options</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/devicetree/bindings.html">Devicetree Bindings</a>
      </li>
      
    </ul>
  </div>
  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Zephyr Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Docs / Latest -->
  
  

  <li><a href="../../../../index.html">Docs / Latest</a> &raquo;</li>
  
     <li><a href="../../../index.html">Supported Boards</a> &raquo;</li>
  
     <li><a href="../../index.html">ARC Boards</a> &raquo;</li>
  
  <li>DesignWare(R) ARC(R) Emulation (nsim)</li>


  <li class="wy-breadcrumbs-aside">
    <dark-mode-toggle id="dark-mode-toggle" appearance="toggle" permanent="true"/>
  </li>
  <li class="wy-breadcrumbs-aside">
      
      
        <a href="https://github.com/zephyrproject-rtos/zephyr/blob/main//boards/arc/nsim/doc/index.rst" class="fa fa-github"> Open on GitHub</a>
      
    
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="wy-alert wy-alert-danger">
     This is the documentation for the latest (main) development branch of
     Zephyr. If you are looking for the documentation of previous releases, use
     the drop-down menu on the left and select the desired version.
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="designware-r-arc-r-emulation-nsim">
<span id="nsim"></span><h1>DesignWare(R) ARC(R) Emulation (nsim)<a class="headerlink" href="#designware-r-arc-r-emulation-nsim" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This board configuration can be used to run ARC EM / ARC HS based images in
simulation with <a class="reference external" href="https://www.synopsys.com/dw/ipdir.php?ds=sim_nsim">Designware ARC nSIM</a> or run same images on FPGA based HW
platform <a class="reference external" href="https://www.synopsys.com/verification/prototyping/haps.html">HAPS</a>. The board includes the following features:</p>
<ul class="simple">
<li><p>ARC EM or ARC HS processor</p></li>
<li><p>ARC internal timer</p></li>
<li><p>a virtual console (ns16550 based UART model)</p></li>
</ul>
<p>There are four supported board sub-configurations:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">nsim_em</span></code> which includes normal ARC EM features and ARC MPUv2</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nsim_em_em7d_v22</span></code> which includes normal ARC EM features and ARC MPUv2, specially with one register bank and fast irq</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nsim_sem</span></code> which includes secure ARC EM features and ARC MPUv3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nsim_hs</span></code> which includes base ARC HS features, i.e. w/o PMU and MMU</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nsim_hs_smp</span></code> which includes base ARC HS features in multi-core cluster, still w/o PMU and MMU</p></li>
</ul>
<p>For detailed arc features, please refer to
<a class="reference external" href="https://github.com/zephyrproject-rtos/zephyr/blob/main/boards/arc/nsim/support/nsim_em.props">boards/arc/nsim/support/nsim_em.props</a>,
<a class="reference external" href="https://github.com/zephyrproject-rtos/zephyr/blob/main/boards/arc/nsim/support/nsim_em7d_v22.props">boards/arc/nsim/support/nsim_em7d_v22.props</a>,
<a class="reference external" href="https://github.com/zephyrproject-rtos/zephyr/blob/main/boards/arc/nsim/support/nsim_sem.props">boards/arc/nsim/support/nsim_sem.props</a>,
<a class="reference external" href="https://github.com/zephyrproject-rtos/zephyr/blob/main/boards/arc/nsim/support/nsim_hs.props">boards/arc/nsim/support/nsim_hs.props</a> and
<a class="reference external" href="https://github.com/zephyrproject-rtos/zephyr/blob/main/boards/arc/nsim/support/mdb_hs_smp.args">boards/arc/nsim/support/mdb_hs_smp.args</a></p>
</div>
<div class="section" id="hardware">
<h2>Hardware<a class="headerlink" href="#hardware" title="Permalink to this headline">¶</a></h2>
<div class="section" id="supported-features">
<h3>Supported Features<a class="headerlink" href="#supported-features" title="Permalink to this headline">¶</a></h3>
<p>The following hardware features are supported:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 19%" />
<col style="width: 8%" />
<col style="width: 11%" />
<col style="width: 8%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Interface</p></th>
<th class="head"><p>Controller</p></th>
<th class="head"><p>EM</p></th>
<th class="head"><p>SEM</p></th>
<th class="head"><p>HS</p></th>
<th class="head"><p>Driver/Component</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>INT</p></td>
<td><p>on-chip</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>interrupt_controller</p></td>
</tr>
<tr class="row-odd"><td><p>UART</p></td>
<td><p>ns16550</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>serial port</p></td>
</tr>
<tr class="row-even"><td><p>TIMER</p></td>
<td><p>on-chip</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>system clock</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="programming-and-debugging">
<h2>Programming and Debugging<a class="headerlink" href="#programming-and-debugging" title="Permalink to this headline">¶</a></h2>
<div class="section" id="required-hardware-and-software">
<h3>Required Hardware and Software<a class="headerlink" href="#required-hardware-and-software" title="Permalink to this headline">¶</a></h3>
<p>To run single-core Zephyr RTOS applications in simulation on this board,
<a class="reference external" href="https://www.synopsys.com/dw/ipdir.php?ds=sim_nsim">Designware ARC nSIM</a> or <a class="reference external" href="https://www.synopsys.com/cgi-bin/dwarcnsim/req1.cgi">Designware ARC nSIM Lite</a> is required.</p>
<p>To run multi-core Zephyr RTOS applications in simulation on this board,
<a class="reference external" href="https://www.synopsys.com/dw/ipdir.php?ds=sim_nsim">Designware ARC nSIM</a> and MetaWare Debugger from <a class="reference external" href="https://www.synopsys.com/dw/ipdir.php?ds=sw_metaware">ARC MWDT</a> are required.</p>
<p>To run Zephyr RTOS applications on FPGA-based <a class="reference external" href="https://www.synopsys.com/verification/prototyping/haps.html">HAPS</a> platform,
MetaWare Debugger from <a class="reference external" href="https://www.synopsys.com/dw/ipdir.php?ds=sw_metaware">ARC MWDT</a> is required.</p>
</div>
<div class="section" id="building-sample-applications">
<h3>Building Sample Applications<a class="headerlink" href="#building-sample-applications" title="Permalink to this headline">¶</a></h3>
<p>Use this configuration to run basic Zephyr applications and kernel tests in
nSIM, for example, with the <a class="reference internal" href="../../../../samples/synchronization/README.html#synchronization-sample"><span class="std std-ref">Synchronization Sample</span></a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>From the root of the zephyr repository
<span class="go">west build -b nsim_em samples/synchronization</span>
<span class="go">west flash</span>
</pre></div>
</div>
<p>This will build an image with the synchronization sample app, boot it using
nsim, and display the following console output:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">***** BOOTING ZEPHYR OS v1.12 - BUILD: July 6 2018 15:17:26 *****</span>
<span class="go">threadA: Hello World from arc!</span>
<span class="go">threadB: Hello World from arc!</span>
<span class="go">threadA: Hello World from arc!</span>
<span class="go">threadB: Hello World from arc!</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To exit the simulator, use Ctrl+], then Ctrl+c</p>
</div>
<p>Use this configuration to run same application on <a class="reference external" href="https://www.synopsys.com/verification/prototyping/haps.html">HAPS</a> platform:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>From the root of the zephyr repository
<span class="go">west build -b nsim_em samples/synchronization</span>
<span class="go">west flash</span>
<span class="go">west build -t --runner</span>
<span class="go">west build -t mdb-hw</span>
</pre></div>
</div>
</div>
<div class="section" id="debugging">
<h3>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The normal <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">debug</span></code> command won’t work for debugging
applications using nsim because both the nsim simulator and the
gdb debugger use the console for output. You need to use separate
terminal windows for each tool to avoid intermixing their output.</p>
</div>
<p>After building your application, cd to the build folder and open two
terminal windows. In terminal one, use nsim to start a GDB server
and wait for a remote connection:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span><span class="k">for</span> ninja build system:
<span class="go">ninja debugserver</span>
<span class="gp"># </span><span class="k">for</span> make build system:
<span class="go">make debugserver</span>
</pre></div>
</div>
<p>In terminal two, connect to the GDB server using <code class="file docutils literal notranslate"><span class="pre">arc-elf32-gdb</span></code>.
This command loads the symbol table from the elf binary file, for example
the <code class="file docutils literal notranslate"><span class="pre">./zephyr/zephyr.elf</span></code> file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">..../path/to/arc-elf32-gdb zephyr/zephyr.elf</span>
<span class="gp gp-VirtualEnv">(gdb)</span> <span class="go">target remote : 3333</span>
<span class="gp gp-VirtualEnv">(gdb)</span> <span class="go">load</span>
</pre></div>
</div>
<p>Now the debug environment has been set up, you can debug the application with gdb commands.</p>
</div>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
          </div>

          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../../../copyright.html">Copyright</a> 2015-2022 Zephyr Project members and individual contributors.
      <span class="lastupdated">Last updated on Mar 05, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
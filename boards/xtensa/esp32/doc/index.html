<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ESP32 &mdash; Zephyr Project Documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script type="module" src="../../../../_static/js/dark-mode-toggle.min.mjs"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-831873-47"></script>
        <script src="../../../../_static/js/ga-tracker.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="copyright" title="Copyright" href="../../../../copyright.html" />
    <link rel="next" title="ESP32-S2" href="../../esp32s2_saola/doc/index.html" />
    <link rel="prev" title="XTENSA Boards" href="../../index.html" />
  <meta name="color-scheme" content="dark light">
  
  <link rel="stylesheet" href="../../../../_static/css/light.css" type="text/css" media="(prefers-color-scheme: light)"/>
  <link rel="stylesheet" href="../../../../_static/css/dark.css" type="text/css" media="(prefers-color-scheme: dark)"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../../index.html">
            <img src="../../../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.0-rc3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Zephyr Project</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Release Versions</dt>
        
          <dd><a href="/">latest</a></dd>
        
          <dd><a href="/2.7.0/">2.7.0</a></dd>
        
          <dd><a href="/2.6.0/">2.6.0</a></dd>
        
          <dd><a href="/2.5.0/">2.5.0</a></dd>
        
          <dd><a href="/2.4.0/">2.4.0</a></dd>
        
          <dd><a href="/2.3.0/">2.3.0</a></dd>
        
          <dd><a href="/1.14.1/">1.14.1</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="/latest/zephyr.pdf">PDF</a></dd>
      </dl>
      <dl>
        <dt>zephyrproject.org Links</dt>
          <dd>
            <a href="https://www.zephyrproject.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/sdk-ng/releases">SDK</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/zephyr/releases">Releases</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contribute/index.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../development_process/index.html">Development and Contribution Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../guides/build/index.html">Build and Configuration Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../application/index.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../guides/index.html">User and Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../security/index.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../samples/index.html">Samples and Demos</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Supported Boards</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../x86/index.html">x86 Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../arm/index.html">ARM Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../arm64/index.html">ARM64 Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../arc/index.html">ARC Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../mips/index.html">MIPS Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../nios2/index.html">NIOS II Boards</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">XTENSA Boards</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">ESP32</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#system-requirements">System requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../esp32s2_saola/doc/index.html">ESP32-S2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../esp_wrover_kit/doc/index.html">ESP-WROVER-KIT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../intel_adsp_cavs15/doc/index.html">Up Squared Audio DSP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../intel_adsp_cavs25/doc/index.html">Zephyr Audio DSP Development on Chromebooks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../intel_s1000_crb/doc/index.html">Intel S1000 CRB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../odroid_go/doc/index.html">ODROID-GO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../qemu_xtensa/doc/index.html">Xtensa Emulation (QEMU)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../xt-sim/doc/index.html">Xtensa simulator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../posix/index.html">POSIX/NATIVE Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../riscv/index.html">RISCV Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sparc/index.html">SPARC Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../shields/index.html">Shields</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../releases/index.html">Release Notes</a></li>
</ul>

  
  <div class="toctree-wrapper compound">
    <p class="caption"><span class="caption-text">Reference</span></p>
    <ul>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/doxygen/html/index.html">API</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/kconfig/index.html">Kconfig Options</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/devicetree/bindings.html">Devicetree Bindings</a>
      </li>
      
    </ul>
  </div>
  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Zephyr Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Docs / Latest -->
  
  

  <li><a href="../../../../index.html">Docs / Latest</a> &raquo;</li>
  
     <li><a href="../../../index.html">Supported Boards</a> &raquo;</li>
  
     <li><a href="../../index.html">XTENSA Boards</a> &raquo;</li>
  
  <li>ESP32</li>


  <li class="wy-breadcrumbs-aside">
    <dark-mode-toggle id="dark-mode-toggle" appearance="toggle" permanent="true"/>
  </li>
  <li class="wy-breadcrumbs-aside">
      
      
        <a href="https://github.com/zephyrproject-rtos/zephyr/blob/main//boards/xtensa/esp32/doc/index.rst" class="fa fa-github"> Open on GitHub</a>
      
    
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="wy-alert wy-alert-danger">
     This is the documentation for the latest (main) development branch of
     Zephyr. If you are looking for the documentation of previous releases, use
     the drop-down menu on the left and select the desired version.
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="esp32">
<span id="id1"></span><h1>ESP32<a class="headerlink" href="#esp32" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>ESP32 is a series of low cost, low power system on a chip microcontrollers
with integrated Wi-Fi &amp; dual-mode Bluetooth.  The ESP32 series employs a
Tensilica Xtensa LX6 microprocessor in both dual-core and single-core
variations.  ESP32 is created and developed by Espressif Systems, a
Shanghai-based Chinese company, and is manufactured by TSMC using their 40nm
process. <a class="footnote-reference brackets" href="#id3" id="id2">1</a></p>
<p>The features include the following:</p>
<ul class="simple">
<li><p>Dual core Xtensa microprocessor (LX6), running at 160 or 240MHz</p></li>
<li><p>520KB of SRAM</p></li>
<li><p>802.11b/g/n/e/i</p></li>
<li><p>Bluetooth v4.2 BR/EDR and BLE</p></li>
<li><p>Various peripherals:</p>
<ul>
<li><p>12-bit ADC with up to 18 channels</p></li>
<li><p>2x 8-bit DACs</p></li>
<li><p>10x touch sensors</p></li>
<li><p>Temperature sensor</p></li>
<li><p>4x SPI</p></li>
<li><p>2x I2S</p></li>
<li><p>2x I2C</p></li>
<li><p>3x UART</p></li>
<li><p>SD/SDIO/MMC host</p></li>
<li><p>Slave (SDIO/SPI)</p></li>
<li><p>Ethernet MAC</p></li>
<li><p>CAN bus 2.0</p></li>
<li><p>IR (RX/TX)</p></li>
<li><p>Motor PWM</p></li>
<li><p>LED PWM with up to 16 channels</p></li>
<li><p>Hall effect sensor</p></li>
</ul>
</li>
<li><p>Cryptographic hardware acceleration (RNG, ECC, RSA, SHA-2, AES)</p></li>
<li><p>5uA deep sleep current</p></li>
</ul>
</div>
<div class="section" id="system-requirements">
<h2>System requirements<a class="headerlink" href="#system-requirements" title="Permalink to this headline">¶</a></h2>
<div class="section" id="prerequisites">
<h3>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h3>
<p>The ESP32 toolchain <code class="file docutils literal notranslate"><span class="pre">xtensa-esp32-elf</span></code> is required to build this port.
The toolchain installation can be performed in two ways:</p>
<ol class="arabic">
<li><p>Automatic installation</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west espressif install</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default, the toolchain will be downloaded and installed under $HOME/.espressif directory
(%USERPROFILE%/.espressif on Windows).</p>
</div>
</li>
<li><p>Manual installation</p>
<p>Follow the <a class="reference external" href="https://docs.espressif.com/projects/esp-idf/en/v4.2/esp32/api-guides/tools/idf-tools.html#xtensa-esp32-elf">ESP32 Toolchain</a> link to download proper OS package version.
Unpack the toolchain file to a known location as it will be required for environment path configuration.</p>
</li>
</ol>
</div>
<div class="section" id="build-environment-setup">
<h3>Build Environment Setup<a class="headerlink" href="#build-environment-setup" title="Permalink to this headline">¶</a></h3>
<p>Some variables must be exported into the environment prior to building this port.
Find more information at <a class="reference internal" href="../../../../guides/env_vars.html#env-vars"><span class="std std-ref">Environment Variables</span></a> on how to keep this settings saved in you environment.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In case of manual toolchain installation, set <code class="file docutils literal notranslate"><span class="pre">ESPRESSIF_TOOLCHAIN_PATH</span></code> accordingly.
Otherwise, set toolchain path as below. If necessary, update the version folder path as in <code class="file docutils literal notranslate"><span class="pre">esp-2020r3-8.4.0</span></code>.</p>
</div>
<p>On Linux and macOS:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export ZEPHYR_TOOLCHAIN_VARIANT=&quot;espressif&quot;</span>
<span class="go">export ESPRESSIF_TOOLCHAIN_PATH=&quot;${HOME}/.espressif/tools/zephyr&quot;</span>
</pre></div>
</div>
<p>On Windows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>on CMD:
<span class="go">set ESPRESSIF_TOOLCHAIN_PATH=%USERPROFILE%\.espressif\tools\zephyr</span>
<span class="go">set ZEPHYR_TOOLCHAIN_VARIANT=espressif</span>

<span class="gp"># </span>on PowerShell
<span class="gp">$</span>env:ESPRESSIF_TOOLCHAIN_PATH<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$env</span><span class="s2">:USERPROFILE\.espressif\tools\zephyr&quot;</span>
<span class="gp">$</span>env:ZEPHYR_TOOLCHAIN_VARIANT<span class="o">=</span><span class="s2">&quot;espressif&quot;</span>
</pre></div>
</div>
<p>Finally, retrieve required submodules to build this port. This might take a while for the first time:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west espressif update</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is recommended running the command above after <code class="file docutils literal notranslate"><span class="pre">west</span> <span class="pre">update</span></code> so that submodules also get updated.</p>
</div>
</div>
<div class="section" id="flashing">
<h3>Flashing<a class="headerlink" href="#flashing" title="Permalink to this headline">¶</a></h3>
<p>The usual <code class="docutils literal notranslate"><span class="pre">flash</span></code> target will work with the <code class="docutils literal notranslate"><span class="pre">esp32</span></code> board
configuration. Here is an example for the <a class="reference internal" href="../../../../samples/hello_world/README.html#hello-world"><span class="std std-ref">Hello World</span></a>
application.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>From the root of the zephyr repository
<span class="go">west build -b esp32 samples/hello_world</span>
<span class="go">west flash</span>
</pre></div>
</div>
<p>Refer to <a class="reference internal" href="../../../../application/index.html#build-an-application"><span class="std std-ref">Building an Application</span></a> and <a class="reference internal" href="../../../../application/index.html#application-run"><span class="std std-ref">Run an Application</span></a> for
more details.</p>
<p>It’s impossible to determine which serial port the ESP32 board is
connected to, as it uses a generic RS232-USB converter.  The default of
<code class="docutils literal notranslate"><span class="pre">/dev/ttyUSB0</span></code> is provided as that’s often the assigned name on a Linux
machine without any other such converters.</p>
<p>The baud rate of 921600bps is recommended.  If experiencing issues when
flashing, try halving the value a few times (460800, 230400, 115200,
etc).  It might be necessary to change the flash frequency or the flash
mode; please refer to the <a class="reference external" href="https://github.com/espressif/esptool/blob/master/README.md">esptool documentation</a> for guidance on these
settings.</p>
<p>All flashing options are now handled by the <a class="reference internal" href="../../../../guides/west/index.html#west"><span class="std std-ref">West (Zephyr’s meta-tool)</span></a> tool, including flashing
with custom options such as a different serial port.  The <code class="docutils literal notranslate"><span class="pre">west</span></code> tool supports
specific options for the ESP32 board, as listed here:</p>
<blockquote>
<div><dl class="option-list">
<dt><kbd><span class="option">--esp-idf-path <var>ESP_IDF_PATH</var></span></kbd></dt>
<dd><p>path to ESP-IDF</p>
</dd>
<dt><kbd><span class="option">--esp-device <var>ESP_DEVICE</var></span></kbd></dt>
<dd><p>serial port to flash, default $ESPTOOL_PORT if defined.
If not, esptool will loop over available serial ports until
it finds ESP32 device to flash.</p>
</dd>
<dt><kbd><span class="option">--esp-baud-rate <var>ESP_BAUD_RATE</var></span></kbd></dt>
<dd><p>serial baud rate, default 921600</p>
</dd>
<dt><kbd><span class="option">--esp-flash-size <var>ESP_FLASH_SIZE</var></span></kbd></dt>
<dd><p>flash size, default “detect”</p>
</dd>
<dt><kbd><span class="option">--esp-flash-freq <var>ESP_FLASH_FREQ</var></span></kbd></dt>
<dd><p>flash frequency, default “40m”</p>
</dd>
<dt><kbd><span class="option">--esp-flash-mode <var>ESP_FLASH_MODE</var></span></kbd></dt>
<dd><p>flash mode, default “dio”</p>
</dd>
<dt><kbd><span class="option">--esp-tool <var>ESP_TOOL</var></span></kbd></dt>
<dd><p>if given, complete path to espidf. default is to
search for it in [ESP_IDF_PATH]/components/esptool_py/
esptool/esptool.py</p>
</dd>
<dt><kbd><span class="option">--esp-flash-bootloader <var>ESP_FLASH_BOOTLOADER</var></span></kbd></dt>
<dd><p>Bootloader image to flash</p>
</dd>
<dt><kbd><span class="option">--esp-flash-partition_table <var>ESP_FLASH_PARTITION_TABLE</var></span></kbd></dt>
<dd><p>Partition table to flash</p>
</dd>
</dl>
</div></blockquote>
<p>For example, to flash to <code class="docutils literal notranslate"><span class="pre">/dev/ttyUSB2</span></code>, use the following command after
having build the application in the <code class="docutils literal notranslate"><span class="pre">build</span></code> directory:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">west flash -d build/ --skip-rebuild --esp-device /dev/ttyUSB2</span>
</pre></div>
</div>
</div>
<div class="section" id="using-jtag">
<h3>Using JTAG<a class="headerlink" href="#using-jtag" title="Permalink to this headline">¶</a></h3>
<p>As with much custom hardware, the ESP-32 modules require patches to
OpenOCD that are not upstream.  Espressif maintains their own fork of
the project here.  By convention they put it in <code class="docutils literal notranslate"><span class="pre">~/esp</span></code> next to the
installations of their toolchain and SDK:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~/esp</span>

<span class="go">git clone https://github.com/espressif/openocd-esp32</span>

<span class="go">cd openocd-esp32</span>
<span class="go">./bootstrap</span>
<span class="go">./configure</span>
<span class="go">make</span>
</pre></div>
</div>
<p>On the ESP-WROVER-KIT board, the JTAG pins are connected internally to
a USB serial port on the same device as the console.  These boards
require no external hardware and are debuggable as-is.  The JTAG
signals, however, must be jumpered closed to connect the internal
controller (the default is to leave them disconnected).  The jumper
headers are on the right side of the board as viewed from the power
switch, next to similar headers for SPI and UART.  See
<a class="reference external" href="https://dl.espressif.com/doc/esp-idf/latest/get-started/get-started-wrover-kit.html">ESP-WROVER-32 V3 Getting Started Guide</a> for details.</p>
<p>On the ESP-WROOM-32 DevKitC board, the JTAG pins are not run to a
standard connector (e.g. ARM 20-pin) and need to be manually connected
to the external programmer (e.g. a Flyswatter2):</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 52%" />
<col style="width: 48%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ESP32 pin</p></th>
<th class="head"><p>JTAG pin</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>3V3</p></td>
<td><p>VTRef</p></td>
</tr>
<tr class="row-odd"><td><p>EN</p></td>
<td><p>nTRST</p></td>
</tr>
<tr class="row-even"><td><p>IO14</p></td>
<td><p>TMS</p></td>
</tr>
<tr class="row-odd"><td><p>IO12</p></td>
<td><p>TDI</p></td>
</tr>
<tr class="row-even"><td><p>GND</p></td>
<td><p>GND</p></td>
</tr>
<tr class="row-odd"><td><p>IO13</p></td>
<td><p>TCK</p></td>
</tr>
<tr class="row-even"><td><p>IO15</p></td>
<td><p>TDO</p></td>
</tr>
</tbody>
</table>
<p>Once the device is connected, you should be able to connect with (for
a DevKitC board, replace with esp32-wrover.cfg for WROVER):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~/esp/openocd-esp32</span>
<span class="go">src/openocd -f interface/ftdi/flyswatter2.cfg -c &#39;set ESP32_ONLYCPU 1&#39; -c &#39;set ESP32_RTOS none&#39; -f board/esp-wroom-32.cfg -s tcl</span>
</pre></div>
</div>
<p>The ESP32_ONLYCPU setting is critical: without it OpenOCD will present
only the “APP_CPU” via the gdbserver, and not the “PRO_CPU” on which
Zephyr is running.  It’s currently unexplored as to whether the CPU
can be switched at runtime or if breakpoints can be set for
either/both.</p>
<p>Now you can connect to openocd with gdb and point it to the OpenOCD
gdbserver running (by default) on localhost port 3333.  Note that you
must use the gdb distributed with the ESP-32 SDK.  Builds off of the
FSF mainline get inexplicable protocol errors when connecting.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">~/esp/xtensa-esp32-elf/bin/xtensa-esp32-elf-gdb outdir/esp32/zephyr.elf</span>
<span class="gp gp-VirtualEnv">(gdb)</span> <span class="go">target remote localhost:3333</span>
</pre></div>
</div>
<p>Further documentation can be obtained from the SoC vendor in <a class="reference external" href="http://esp-idf.readthedocs.io/en/latest/api-guides/jtag-debugging/index.html">JTAG debugging
for ESP32</a>.</p>
</div>
<div class="section" id="note-on-debugging-with-gdb-stub">
<h3>Note on Debugging with GDB Stub<a class="headerlink" href="#note-on-debugging-with-gdb-stub" title="Permalink to this headline">¶</a></h3>
<p>GDB stub is enabled on ESP32.</p>
<ul class="simple">
<li><p>When adding breakpoints, please use hardware breakpoints with command
<code class="docutils literal notranslate"><span class="pre">hbreak</span></code>. Command <code class="docutils literal notranslate"><span class="pre">break</span></code> uses software breakpoints which requires
modifying memory content to insert break/trap instructions.
This does not work as the code is on flash which cannot be randomly
accessed for modification.</p></li>
</ul>
</div>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<dl class="footnote brackets">
<dt class="label" id="id3"><span class="brackets"><a class="fn-backref" href="#id2">1</a></span></dt>
<dd><p><a class="reference external" href="https://en.wikipedia.org/wiki/ESP32">https://en.wikipedia.org/wiki/ESP32</a></p>
</dd>
</dl>
</div>
</div>


           </div>
          </div>

          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../../../copyright.html">Copyright</a> 2015-2021 Zephyr Project members and individual contributors.
      <span class="lastupdated">Last updated on Feb 21, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
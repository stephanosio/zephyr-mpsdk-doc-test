<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UP Squared &mdash; Zephyr Project Documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script type="module" src="../../../../_static/js/dark-mode-toggle.min.mjs"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-831873-47"></script>
        <script src="../../../../_static/js/ga-tracker.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="copyright" title="Copyright" href="../../../../copyright.html" />
    <link rel="next" title="ARM Boards" href="../../../arm/index.html" />
    <link rel="prev" title="X86 Emulation (QEMU)" href="../../qemu_x86/doc/index.html" />
  <meta name="color-scheme" content="dark light">
  
  <link rel="stylesheet" href="../../../../_static/css/light.css" type="text/css" media="(prefers-color-scheme: light)"/>
  <link rel="stylesheet" href="../../../../_static/css/dark.css" type="text/css" media="(prefers-color-scheme: dark)"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../../index.html">
            <img src="../../../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.0-rc3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Zephyr Project</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Release Versions</dt>
        
          <dd><a href="/">latest</a></dd>
        
          <dd><a href="/2.7.0/">2.7.0</a></dd>
        
          <dd><a href="/2.6.0/">2.6.0</a></dd>
        
          <dd><a href="/2.5.0/">2.5.0</a></dd>
        
          <dd><a href="/2.4.0/">2.4.0</a></dd>
        
          <dd><a href="/2.3.0/">2.3.0</a></dd>
        
          <dd><a href="/1.14.1/">1.14.1</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="/latest/zephyr.pdf">PDF</a></dd>
      </dl>
      <dl>
        <dt>zephyrproject.org Links</dt>
          <dd>
            <a href="https://www.zephyrproject.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/sdk-ng/releases">SDK</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/zephyr/releases">Releases</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contribute/index.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../development_process/index.html">Development and Contribution Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../guides/build/index.html">Build and Configuration Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../application/index.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../guides/index.html">User and Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../security/index.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../samples/index.html">Samples and Demos</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Supported Boards</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">x86 Boards</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../acrn/doc/index.html">Building and Running Zephyr with ACRN</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ehl_crb/doc/index.html">Elkhart Lake CRB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../qemu_x86/doc/index.html">X86 Emulation (QEMU)</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">UP Squared</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hardware">Hardware</a></li>
<li class="toctree-l4"><a class="reference internal" href="#programming-and-debugging">Programming and Debugging</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../arm/index.html">ARM Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../arm64/index.html">ARM64 Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../arc/index.html">ARC Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../mips/index.html">MIPS Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../nios2/index.html">NIOS II Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../xtensa/index.html">XTENSA Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../posix/index.html">POSIX/NATIVE Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../riscv/index.html">RISCV Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sparc/index.html">SPARC Boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../shields/index.html">Shields</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../releases/index.html">Release Notes</a></li>
</ul>

  
  <div class="toctree-wrapper compound">
    <p class="caption"><span class="caption-text">Reference</span></p>
    <ul>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/doxygen/html/index.html">API</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/kconfig/index.html">Kconfig Options</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/devicetree/bindings.html">Devicetree Bindings</a>
      </li>
      
    </ul>
  </div>
  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Zephyr Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Docs / Latest -->
  
  

  <li><a href="../../../../index.html">Docs / Latest</a> &raquo;</li>
  
     <li><a href="../../../index.html">Supported Boards</a> &raquo;</li>
  
     <li><a href="../../index.html">x86 Boards</a> &raquo;</li>
  
  <li>UP Squared</li>


  <li class="wy-breadcrumbs-aside">
    <dark-mode-toggle id="dark-mode-toggle" appearance="toggle" permanent="true"/>
  </li>
  <li class="wy-breadcrumbs-aside">
      
      
        <a href="https://github.com/zephyrproject-rtos/zephyr/blob/main//boards/x86/up_squared/doc/index.rst" class="fa fa-github"> Open on GitHub</a>
      
    
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="wy-alert wy-alert-danger">
     This is the documentation for the latest (main) development branch of
     Zephyr. If you are looking for the documentation of previous releases, use
     the drop-down menu on the left and select the desired version.
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="up-squared">
<span id="id1"></span><h1>UP Squared<a class="headerlink" href="#up-squared" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>UP² (UP Squared) is an ultra compact single board computer with high
performance and low power consumption. It features the latest Intel® Apollo
Lake Celeron™ and Pentium™ Processors with only 4W of Scenario Design Power and
a powerful and flexible Intel® FPGA Altera MAX 10 onboard.</p>
<div class="figure align-center" id="id3">
<a class="reference internal image-reference" href="../../../../_images/up_squared.png"><img alt="UP Squared" src="../../../../_images/up_squared.png" style="width: 800px;" /></a>
<p class="caption"><span class="caption-number">Fig. 49 </span><span class="caption-text">Up Squared (Credit: <a class="reference external" href="https://up-board.org">https://up-board.org</a>)</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>This board configuration enables kernel support for the <a class="reference external" href="https://www.up-board.org/upsquared/specifications">UP Squared</a> board.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This board configuration works on all three variants of <a class="reference external" href="https://www.up-board.org/upsquared/specifications">UP Squared</a>
boards containing Intel® Pentium™ SoC,
Intel® Celeron™ SoC, or Intel® Atom™ SoC.</p>
</div>
</div>
<div class="section" id="hardware">
<h2>Hardware<a class="headerlink" href="#hardware" title="Permalink to this headline">¶</a></h2>
<p>General information about the board can be found at the <a class="reference external" href="https://www.up-board.org/upsquared/specifications">UP Squared</a> website.</p>
<div class="section" id="supported-features">
<h3>Supported Features<a class="headerlink" href="#supported-features" title="Permalink to this headline">¶</a></h3>
<p>In addition to the standard architecture devices (HPET, local and I/O APICs,
etc.), Zephyr supports the following Apollo Lake-specific SoC devices:</p>
<ul class="simple">
<li><p>HSUART</p></li>
<li><p>GPIO</p></li>
<li><p>I2C</p></li>
</ul>
<div class="section" id="hsuart-high-speed-serial-port-support">
<h4>HSUART High-Speed Serial Port Support<a class="headerlink" href="#hsuart-high-speed-serial-port-support" title="Permalink to this headline">¶</a></h4>
<p>The Apollo Lake UARTs are NS16550-compatible, with “high-speed” capability.</p>
<p>Baud rates beyond 115.2kbps (up to 3.6864Mbps) are supported, with additional
configuration. The UARTs are fed a master clock which is fed into a PLL which
in turn outputs the baud master clock. The PLL is controlled by a per-UART
32-bit register called <code class="docutils literal notranslate"><span class="pre">PRV_CLOCK_PARAMS</span></code> (aka the <code class="docutils literal notranslate"><span class="pre">PCP</span></code>), the format of
which is:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 24%" />
<col style="width: 27%" />
<col style="width: 24%" />
<col style="width: 24%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>[31]</p></th>
<th class="head"><p>[30:16]</p></th>
<th class="head"><p>[15:1]</p></th>
<th class="head"><p>[0]</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>enable</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">m</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>toggle</p></td>
</tr>
</tbody>
</table>
<p>The resulting baud master clock frequency is <code class="docutils literal notranslate"><span class="pre">(n/m)</span></code> * master.</p>
<p>Typically, the master clock is 100MHz, and the firmware by default sets
the <code class="docutils literal notranslate"><span class="pre">PCP</span></code> to <code class="docutils literal notranslate"><span class="pre">0x3d090240</span></code>, i.e., <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">=</span> <span class="pre">288</span></code>, <code class="docutils literal notranslate"><span class="pre">m</span> <span class="pre">=</span>&#160; <span class="pre">15625</span></code>, which
results in the de-facto standard 1.8432MHz master clock and a max baud rate
of 115.2k.  Higher baud rates are enabled by changing the PCP and telling
Zephyr what the resulting master clock is.</p>
<p>Use devicetree to set the value of the <code class="docutils literal notranslate"><span class="pre">PRV_CLOCK_PARAMS</span></code> register in
the UART block of interest. Typically a devicetree overlay file would be
present in the application directory (specific to the board, such as
<code class="docutils literal notranslate"><span class="pre">up_squared.overlay</span></code>), with contents like this:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">/ {</span>
<span class="go">    soc {</span>
<span class="go">        uart@0 {</span>
<span class="go">            pcp = &lt;0x3d090900&gt;;</span>
<span class="go">            clock-frequency = &lt;7372800&gt;;</span>
<span class="go">            current-speed = &lt;230400&gt;;</span>
<span class="go">        };</span>
<span class="go">    };</span>
<span class="go">};</span>
</pre></div>
</div>
</div></blockquote>
<p>The relevant variables are <code class="docutils literal notranslate"><span class="pre">pcp</span></code> (the value to use for <code class="docutils literal notranslate"><span class="pre">PRV_CLOCK_PARAMS</span></code>),
and <code class="docutils literal notranslate"><span class="pre">clock-frequency</span></code> (the resulting baud master clock). The meaning of
<code class="docutils literal notranslate"><span class="pre">current-speed</span></code> is unchanged, and as usual indicates the initial baud rate.</p>
</div>
<div class="section" id="gpio">
<h4>GPIO<a class="headerlink" href="#gpio" title="Permalink to this headline">¶</a></h4>
<p>GPIOs are exposed through the HAT header, and can be referred using
predefined macros such as <code class="docutils literal notranslate"><span class="pre">UP2_HAT_PIN3</span></code>. The physical pins are
connected to the on-board FPGA acting as level shifter. Therefore,
to actually utilize these GPIO pins, the function of the pins and
directions (input/output) must be set in the BIOS. This can be
accomplished in BIOS, under menu <code class="docutils literal notranslate"><span class="pre">Advanced</span></code>, and option
<code class="docutils literal notranslate"><span class="pre">HAT</span> <span class="pre">Configurations</span></code>. When a corresponding pin is set to act as
GPIO, there is an option to set the direction of the pin. This needs
to be set accordingly for the GPIO to function properly.</p>
</div>
</div>
<div class="section" id="connections-and-ios">
<h3>Connections and IOs<a class="headerlink" href="#connections-and-ios" title="Permalink to this headline">¶</a></h3>
<p>Refer to the <a class="reference external" href="https://www.up-board.org/upsquared/specifications">UP Squared</a> website and <a class="reference external" href="https://wiki.up-community.org/Pinout">UP Squared Pinout</a> website
for connection diagrams.</p>
</div>
</div>
<div class="section" id="programming-and-debugging">
<h2>Programming and Debugging<a class="headerlink" href="#programming-and-debugging" title="Permalink to this headline">¶</a></h2>
<p>Use the following procedures for booting an image on a UP Squared board.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#build-zephyr-application" id="id4">Build Zephyr application</a></p></li>
<li><p><a class="reference internal" href="#preparing-the-boot-device" id="id5">Preparing the Boot Device</a></p></li>
<li><p><a class="reference internal" href="#booting-the-up-squared-board" id="id6">Booting the UP Squared Board</a></p></li>
<li><p><a class="reference internal" href="#booting-the-up-squared-board-over-network" id="id7">Booting the UP Squared Board over network</a></p></li>
</ul>
</div>
<div class="section" id="build-zephyr-application">
<h3><a class="toc-backref" href="#contents">Build Zephyr application</a><a class="headerlink" href="#build-zephyr-application" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>Build a Zephyr application; for instance, to build the <code class="docutils literal notranslate"><span class="pre">hello_world</span></code>
application on UP Squared:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>From the root of the zephyr repository
<span class="go">west build -b up_squared samples/hello_world</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A Zephyr EFI image file named <code class="file docutils literal notranslate"><span class="pre">zephyr.efi</span></code> is automatically
created in the build directory after the application is built.</p>
</div>
</li>
</ol>
</div>
<div class="section" id="preparing-the-boot-device">
<h3><a class="toc-backref" href="#contents">Preparing the Boot Device</a><a class="headerlink" href="#preparing-the-boot-device" title="Permalink to this headline">¶</a></h3>
<p>Prepare a USB flash drive to boot the Zephyr application image on
a UP Squared board.</p>
<ol class="arabic">
<li><p>Refer to the <a class="reference external" href="https://wiki.up-community.org/Serial_console">UP Squared Serial Console Wiki page</a> for instructions on how to
connect for serial console.</p></li>
<li><p>Format the USB flash drive as FAT32.</p>
<p>On Windows, open <code class="docutils literal notranslate"><span class="pre">File</span> <span class="pre">Explorer</span></code>, and right-click on the USB flash drive.
Select <code class="docutils literal notranslate"><span class="pre">Format...</span></code>. Make sure in <code class="docutils literal notranslate"><span class="pre">File</span> <span class="pre">System</span></code>, <code class="docutils literal notranslate"><span class="pre">FAT32</span></code> is selected.
Click on the <code class="docutils literal notranslate"><span class="pre">Format</span></code> button and wait for it to finish.</p>
<p>On Linux, graphical utilities such as <code class="docutils literal notranslate"><span class="pre">gparted</span></code> can be used to format
the USB flash drive as FAT32. Alternatively, under terminal, find out
the corresponding device node for the USB flash drive (for example,
<code class="docutils literal notranslate"><span class="pre">/dev/sdd</span></code>). Execute the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>mkfs.vfat -F <span class="m">32</span> &lt;device-node&gt;
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Make sure the device node is the actual device node for
the USB flash drive. Or else you may erase other storage devices
on your system, and will render the system unusable afterwards.</p>
</div>
</li>
<li><p>Copy the Zephyr EFI image file <code class="file docutils literal notranslate"><span class="pre">zephyr/zephyr.efi</span></code> to the USB drive.</p></li>
</ol>
</div>
<div class="section" id="booting-the-up-squared-board">
<h3><a class="toc-backref" href="#contents">Booting the UP Squared Board</a><a class="headerlink" href="#booting-the-up-squared-board" title="Permalink to this headline">¶</a></h3>
<p>Boot the UP Squared board to the EFI shell with USB flash drive connected.</p>
<ol class="arabic">
<li><p>Insert the prepared boot device (USB flash drive) into the UP Squared board.</p></li>
<li><p>Connect the board to the host system using the serial cable and
configure your host system to watch for serial data.  See
<a class="reference external" href="https://wiki.up-community.org/Serial_console">https://wiki.up-community.org/Serial_console</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On Windows, PuTTY has an option to set up configuration for
serial data.  Use a baud rate of 115200.</p>
</div>
</li>
<li><p>Power on the UP Squared board.</p></li>
<li><p>When the following output appears, press <kbd class="kbd docutils literal notranslate">F7</kbd>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Press &lt;DEL&gt; or &lt;ESC&gt; to enter setup.</span>
</pre></div>
</div>
</li>
<li><p>From the menu that appears, select the menu entry that describes
that particular EFI shell.</p></li>
<li><p>From the EFI shell select Zephyr EFI image to boot.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Shell&gt; fs0:zephyr.efi</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can safely ignore this message if it appears:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">WARNING: no console will be available to OS</span>
</pre></div>
</div>
</div>
</li>
</ol>
</div>
<div class="section" id="booting-the-up-squared-board-over-network">
<h3><a class="toc-backref" href="#contents">Booting the UP Squared Board over network</a><a class="headerlink" href="#booting-the-up-squared-board-over-network" title="Permalink to this headline">¶</a></h3>
<div class="section" id="build-zephyr-image">
<h4>Build Zephyr image<a class="headerlink" href="#build-zephyr-image" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>Follow <a class="reference internal" href="#build-zephyr-application">Build Zephyr application</a> steps to build Zephyr image.</p></li>
</ol>
</div>
<div class="section" id="prepare-linux-host">
<h4>Prepare Linux host<a class="headerlink" href="#prepare-linux-host" title="Permalink to this headline">¶</a></h4>
<ol class="arabic">
<li><p>Install DHCP, TFTP servers. For example <code class="docutils literal notranslate"><span class="pre">dnsmasq</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo apt-get install dnsmasq
</pre></div>
</div>
</li>
<li><p>Configure DHCP server. Configuration for <code class="docutils literal notranslate"><span class="pre">dnsmasq</span></code> is below:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Only listen to this interface
<span class="go">interface=eno2</span>
<span class="go">dhcp-range=10.1.1.20,10.1.1.30,12h</span>
</pre></div>
</div>
</li>
<li><p>Configure TFTP server.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>tftp
<span class="go">enable-tftp</span>
<span class="go">tftp-root=/srv/tftp</span>
<span class="go">dhcp-boot=zephyr.efi</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">zephyr.efi</span></code> is a Zephyr EFI binary created above.</p>
</li>
<li><p>Copy the Zephyr EFI image <code class="file docutils literal notranslate"><span class="pre">zephyr/zephyr.efi</span></code> to the
<code class="file docutils literal notranslate"><span class="pre">/srv/tftp</span></code> folder.</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo cp zephyr/zephyr.efi /srv/tftp
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>TFTP root should be looking like:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>tree /srv/tftp
<span class="go">/srv/tftp</span>
<span class="go">└── zephyr.efi</span>
</pre></div>
</div>
</li>
<li><p>Restart <code class="docutils literal notranslate"><span class="pre">dnsmasq</span></code> service:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo systemctl restart dnsmasq.service
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="prepare-up-squared-board-for-network-boot">
<h4>Prepare UP Squared board for network boot<a class="headerlink" href="#prepare-up-squared-board-for-network-boot" title="Permalink to this headline">¶</a></h4>
<ol class="arabic">
<li><p>Enable PXE network from BIOS settings.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Advanced -&gt; Network Stack Configuration -&gt; Enable Network Stack -&gt; Enable Ipv4 PXE Support</span>
</pre></div>
</div>
</li>
<li><p>Make network boot as the first boot option.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Boot -&gt; Boot Option #1 : [Network]</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="booting-up-squared">
<h4>Booting UP Squared<a class="headerlink" href="#booting-up-squared" title="Permalink to this headline">¶</a></h4>
<ol class="arabic">
<li><p>Connect the board to the host system using the serial cable and
configure your host system to watch for serial data.  See
<a class="reference external" href="https://wiki.up-community.org/Serial_console">https://wiki.up-community.org/Serial_console</a>.</p></li>
<li><p>Power on the UP Squared board.</p></li>
<li><p>Verify that the board got an IP address:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>journalctl -f -u dnsmasq
<span class="go">dnsmasq-dhcp[5386]: DHCPDISCOVER(eno2) 00:07:32:52:25:88</span>
<span class="go">dnsmasq-dhcp[5386]: DHCPOFFER(eno2) 10.1.1.28 00:07:32:52:25:88</span>
<span class="go">dnsmasq-dhcp[5386]: DHCPREQUEST(eno2) 10.1.1.28 00:07:32:52:25:88</span>
<span class="go">dnsmasq-dhcp[5386]: DHCPACK(eno2) 10.1.1.28 00:07:32:52:25:88</span>
</pre></div>
</div>
</li>
<li><p>Verify that network booting is started:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>journalctl -f -u dnsmasq
<span class="go">dnsmasq-tftp[5386]: sent /srv/tftp/zephyr.efi to 10.1.1.28</span>
</pre></div>
</div>
</li>
<li><p>When the boot process completes, you have finished booting the
Zephyr application image.</p></li>
</ol>
</div>
</div>
</div>
</div>


           </div>
          </div>

          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../../../copyright.html">Copyright</a> 2015-2021 Zephyr Project members and individual contributors.
      <span class="lastupdated">Last updated on Feb 21, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
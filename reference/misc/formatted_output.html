<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Formatted Output &mdash; Zephyr Project Documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script type="module" src="../../_static/js/dark-mode-toggle.min.mjs"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-831873-47"></script>
        <script src="../../_static/js/ga-tracker.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="Kernel Services" href="../kernel/index.html" />
    <link rel="prev" title="Iterable Sections" href="../iterable_sections/index.html" />
  <meta name="color-scheme" content="dark light">
  
  <link rel="stylesheet" href="../../_static/css/light.css" type="text/css" media="(prefers-color-scheme: light)"/>
  <link rel="stylesheet" href="../../_static/css/dark.css" type="text/css" media="(prefers-color-scheme: dark)"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html">
            <img src="../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.0-rc3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Zephyr Project</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Release Versions</dt>
        
          <dd><a href="/">latest</a></dd>
        
          <dd><a href="/2.7.0/">2.7.0</a></dd>
        
          <dd><a href="/2.6.0/">2.6.0</a></dd>
        
          <dd><a href="/2.5.0/">2.5.0</a></dd>
        
          <dd><a href="/2.4.0/">2.4.0</a></dd>
        
          <dd><a href="/2.3.0/">2.3.0</a></dd>
        
          <dd><a href="/1.14.1/">1.14.1</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="/latest/zephyr.pdf">PDF</a></dd>
      </dl>
      <dl>
        <dt>zephyrproject.org Links</dt>
          <dd>
            <a href="https://www.zephyrproject.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/sdk-ng/releases">SDK</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/zephyr/releases">Releases</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development_process/index.html">Development and Contribution Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/build/index.html">Build and Configuration Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../application/index.html">Application Development</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api/index.html">API Status and Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../audio/index.html">Audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="notify.html">Asynchronous Notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bluetooth/index.html">Bluetooth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canbus/index.html">Controller Area Network (CAN)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../crypto/index.html">Crypto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devicetree/index.html">Devicetree</a></li>
<li class="toctree-l2"><a class="reference internal" href="../drivers/index.html">Device Driver Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../display/index.html">Display Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edac/index.html">Error Detection And Correction (EDAC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../file_system/index.html">File Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iterable_sections/index.html">Iterable Sections</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Formatted Output</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cbprintf-packaging">Cbprintf Packaging</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cbprintf-package-format">Cbprintf package format</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#api-reference">API Reference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../kernel/index.html">Kernel Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libc/index.html">C standard library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging/index.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../memory_management/index.html">Memory Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html">Miscellaneous</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_structures/index.html">Data Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modbus/index.html">Modbus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../networking/index.html">Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../peripherals/index.html">Peripherals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pinctrl/index.html">Pin Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pm/index.html">Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../random/index.html">Random Number Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../resource_management/index.html">Resource Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/index.html">Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/index.html">Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../task_wdt/index.html">Task Watchdog</a></li>
<li class="toctree-l2"><a class="reference internal" href="timeutil.html">Time Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usb/index.html">USB device support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usermode/index.html">User Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../util/index.html">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../settings/index.html">Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../timing_functions/index.html">Executing Time Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../virtualization/index.html">Virtualization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/index.html">User and Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../samples/index.html">Samples and Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../boards/index.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/index.html">Release Notes</a></li>
</ul>

  
  <div class="toctree-wrapper compound">
    <p class="caption"><span class="caption-text">Reference</span></p>
    <ul>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/doxygen/html/index.html">API</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/kconfig/index.html">Kconfig Options</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/devicetree/bindings.html">Devicetree Bindings</a>
      </li>
      
    </ul>
  </div>
  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Zephyr Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Docs / Latest -->
  
  

  <li><a href="../../index.html">Docs / Latest</a> &raquo;</li>
  
     <li><a href="../index.html">API Reference</a> &raquo;</li>
  
  <li>Formatted Output</li>


  <li class="wy-breadcrumbs-aside">
    <dark-mode-toggle id="dark-mode-toggle" appearance="toggle" permanent="true"/>
  </li>
  <li class="wy-breadcrumbs-aside">
      
      
        <a href="https://github.com/zephyrproject-rtos/zephyr/blob/main/doc/reference/misc/formatted_output.rst" class="fa fa-github"> Open on GitHub</a>
      
    
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="wy-alert wy-alert-danger">
     This is the documentation for the latest (main) development branch of
     Zephyr. If you are looking for the documentation of previous releases, use
     the drop-down menu on the left and select the desired version.
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="formatted-output">
<span id="id1"></span><h1>Formatted Output<a class="headerlink" href="#formatted-output" title="Permalink to this headline">¶</a></h1>
<p>Applications as well as Zephyr itself requires infrastructure to format
values for user consumption.  The standard C99 library <code class="docutils literal notranslate"><span class="pre">*printf()</span></code>
functionality fulfills this need for streaming output devices or memory
buffers, but in an embedded system devices may not accept streamed data
and memory may not be available to store the formatted output.</p>
<p>Internal Zephyr API traditionally provided this both for
<code class="xref c c-func docutils literal notranslate"><span class="pre">printk()</span></code> and for Zephyr’s internal minimal libc, but with
separate internal interfaces.  Logging, tracing, shell, and other
applications made use of either these APIs or standard libc routines
based on build options.</p>
<p>The <a class="reference internal" href="#c.cbprintf" title="cbprintf"><code class="xref c c-func docutils literal notranslate"><span class="pre">cbprintf()</span></code></a> public APIs convert C99 format strings and
arguments, providing output produced one character at a time through a
callback mechanism, replacing the original internal functions and
providing support for almost all C99 format specifications.  Existing
use of <code class="docutils literal notranslate"><span class="pre">s*printf()</span></code> C libraries in Zephyr can be converted to
<a class="reference internal" href="#c.snprintfcb" title="snprintfcb"><code class="xref c c-func docutils literal notranslate"><span class="pre">snprintfcb()</span></code></a> to avoid pulling in libc implementations.</p>
<p>Several Kconfig options control the set of features that are enabled,
allowing some control over features and memory usage:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_FULL_INTEGRAL"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_FULL_INTEGRAL</span></code></a>
or <a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_REDUCED_INTEGRAL"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_REDUCED_INTEGRAL</span></code></a></p></li>
<li><p><a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_FP_SUPPORT"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_FP_SUPPORT</span></code></a></p></li>
<li><p><a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_FP_A_SUPPORT"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_FP_A_SUPPORT</span></code></a></p></li>
<li><p><a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_FP_ALWAYS_A"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_FP_ALWAYS_A</span></code></a></p></li>
<li><p><a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_N_SPECIFIER"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_N_SPECIFIER</span></code></a></p></li>
</ul>
<p><a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_LIBC_SUBSTS"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_LIBC_SUBSTS</span></code></a> can be used to provide functions
that behave like standard libc functions but use the selected cbprintf
formatter rather than pulling in another formatter from libc.</p>
<p>In addition <a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_NANO"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_NANO</span></code></a> can be used to revert back to
the very space-optimized but limited formatter used for <code class="xref c c-func docutils literal notranslate"><span class="pre">printk()</span></code>
before this capability was added.</p>
<div class="section" id="cbprintf-packaging">
<span id="id2"></span><h2>Cbprintf Packaging<a class="headerlink" href="#cbprintf-packaging" title="Permalink to this headline">¶</a></h2>
<p>Typically, strings are formatted synchronously when a function from <code class="docutils literal notranslate"><span class="pre">printf</span></code>
family is called. However, there are cases when it is beneficial that formatting
is deferred. In that case, a state (format string and arguments) must be captured.
Such state forms a self-contained package which contains format string and
arguments. Additionally, package contains copies of all strings which are
part of a format string (format string or any <code class="docutils literal notranslate"><span class="pre">%s</span></code> argument) and are identifed
as the one located in the read write memory. Package primary content resembles
va_list stack frame thus standard formatting functions are used to process a
package. Since package contains data which is processed as va_list frame,
strict alignment must be maintained. Due to required padding, size of the
package depends on alignment. When package is copied, it should be copied to a
memory block with the same alignment as origin.</p>
<p>Package can be created using two methods:</p>
<ul class="simple">
<li><p>runtime - using <a class="reference internal" href="#c.cbprintf_package" title="cbprintf_package"><code class="xref c c-func docutils literal notranslate"><span class="pre">cbprintf_package()</span></code></a> or <a class="reference internal" href="#c.cbvprintf_package" title="cbvprintf_package"><code class="xref c c-func docutils literal notranslate"><span class="pre">cbvprintf_package()</span></code></a>. This
method scans format string and based on detected format specifiers builds the
package.</p></li>
<li><p>static - types of arguments are detected at compile time by the preprocessor
and package is created as simple assignments to a provided memory. This method
is significantly faster than runtime (more than 15 times) but has following
limitations: requires <code class="docutils literal notranslate"><span class="pre">_Generic</span></code> keyword (C11 feature) to be supported by
the compiler and can only create a package that is known to have no string
arguments (<code class="docutils literal notranslate"><span class="pre">%s</span></code>). <a class="reference internal" href="#c.CBPRINTF_MUST_RUNTIME_PACKAGE" title="CBPRINTF_MUST_RUNTIME_PACKAGE"><code class="xref c c-macro docutils literal notranslate"><span class="pre">CBPRINTF_MUST_RUNTIME_PACKAGE</span></code></a> can be used to
determine at compile time if static packaging can be applied. Macro determines
need for runtime packaging based on presence of char pointers in the argument
list so there are cases when it will be false positive, e.g. <code class="docutils literal notranslate"><span class="pre">%p</span></code> with char
pointer.</p></li>
</ul>
<p>Several Kconfig options control behavior of the packaging:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_PACKAGE_LONGDOUBLE"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_PACKAGE_LONGDOUBLE</span></code></a></p></li>
<li><p><a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_STATIC_PACKAGE_CHECK_ALIGNMENT"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_STATIC_PACKAGE_CHECK_ALIGNMENT</span></code></a></p></li>
</ul>
<div class="section" id="cbprintf-package-format">
<h3>Cbprintf package format<a class="headerlink" href="#cbprintf-package-format" title="Permalink to this headline">¶</a></h3>
<p>Format of the package contains paddings which are platform specific. Package consists
of header which contains size of package (excluding appended strings) and number of
appended strings. It is followed by the arguments which contains alignment paddings
and resembles <em>va_list</em> stack frame. Finally, package optionally contains appended
strings. Each string contains 1 byte header which contains index of the location
where address argument is stored. During packaging address is set to null and
before string formatting it is updated to point to the current string location
within the package. Updating address argument must happen just before string
formatting since address changes whenever package is copied.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<tbody>
<tr class="row-odd"><td rowspan="4"><p>Header</p>
<div class="line-block">
<div class="line">sizeof(void *)</div>
</div>
</td>
<td><p>1 byte: Argument list size including header and <em>fmt</em> (in 32 bit words)</p></td>
</tr>
<tr class="row-even"><td><p>1 byte: Number of appended strings in writable memory</p></td>
</tr>
<tr class="row-odd"><td><p>1 byte: Number of appended strings in read-only memory</p></td>
</tr>
<tr class="row-even"><td><p>platform specific padding to sizeof(void *)</p></td>
</tr>
<tr class="row-odd"><td rowspan="6"><p>Arguments</p></td>
<td><p>Pointer to <em>fmt</em> (or null if <em>fmt</em> is appended to the package)</p></td>
</tr>
<tr class="row-even"><td><p>(optional padding for platform specific alignment)</p></td>
</tr>
<tr class="row-odd"><td><p>argument 0</p></td>
</tr>
<tr class="row-even"><td><p>(optional padding for platform specific alignment)</p></td>
</tr>
<tr class="row-odd"><td><p>argument 1</p></td>
</tr>
<tr class="row-even"><td><p>…</p></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p>Appended</p>
<p>strings</p>
</td>
<td><p>1 byte: Index within the package to the location of associated argument</p></td>
</tr>
<tr class="row-even"><td><p>Null terminated string</p></td>
</tr>
<tr class="row-odd"><td><p>…</p></td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If <a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_MINIMAL_LIBC"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_MINIMAL_LIBC</span></code></a> is selected in combination with
<a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_NANO"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_NANO</span></code></a> formatting with C standard library
functions like <code class="docutils literal notranslate"><span class="pre">printf</span></code> or <code class="docutils literal notranslate"><span class="pre">snprintf</span></code> is limited.  Among other
things the <code class="docutils literal notranslate"><span class="pre">%n</span></code> specifier, most format flags, precision control, and
floating point are not supported.</p>
</div>
</div>
</div>
<div class="section" id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h2>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__cbprintf__apis"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">cbprintf_apis</span></span></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-defines">Defines</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.CBPRINTF_PACKAGE_ALIGNMENT">
<span class="target" id="group__cbprintf__apis_1ga3b917fb81bb246a0910066e2708dbd78"></span><span class="sig-name descname"><span class="n"><span class="pre">CBPRINTF_PACKAGE_ALIGNMENT</span></span></span><a class="headerlink" href="#c.CBPRINTF_PACKAGE_ALIGNMENT" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Required alignment of the buffer used for packaging. </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.CBPRINTF_MUST_RUNTIME_PACKAGE">
<span class="target" id="group__cbprintf__apis_1ga464cc00d557fa9e8582b809165e2e4c8"></span><span class="sig-name descname"><span class="n"><span class="pre">CBPRINTF_MUST_RUNTIME_PACKAGE</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">skip</span></span>, <span class="n"><span class="pre">flags</span></span>, <span class="p"><span class="pre">...</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.CBPRINTF_MUST_RUNTIME_PACKAGE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Determine if string must be packaged in run time. </p>
<p>Static packaging can be applied if size of the package can be determined at compile time. In general, package size can be determined at compile time if there are no string arguments which might be copied into package body if they are considered transient.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default any char pointers are considered to be pointing at transient strings. This can be narrowed down to non const pointers by using CBPRINTF_MUST_RUNTIME_PACKAGE_CONST_CHAR.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>skip</strong> – number of read only string arguments in the parameter list. It shall be non-zero if there are known read only string arguments present in the string (e.g. function name prefix in the log message).</p></li>
<li><p><strong>...</strong> – String with arguments. </p></li>
<li><p><strong>flags</strong> – option flags. See Package flags..</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>1</strong> – if string must be packaged in run time. </p></li>
<li><p><strong>0</strong> – string can be statically packaged. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.CBPRINTF_STATIC_PACKAGE">
<span class="target" id="group__cbprintf__apis_1ga1ac0f7d0956fc96a9d850d2fef928285"></span><span class="sig-name descname"><span class="n"><span class="pre">CBPRINTF_STATIC_PACKAGE</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">packaged</span></span>, <span class="n"><span class="pre">inlen</span></span>, <span class="n"><span class="pre">outlen</span></span>, <span class="n"><span class="pre">align_offset</span></span>, <span class="n"><span class="pre">flags</span></span>, <span class="p"><span class="pre">...</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.CBPRINTF_STATIC_PACKAGE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Statically package string. </p>
<p>Build string package from formatted string. It assumes that formatted string is in the read only memory.</p>
<p>If _Generic is not supported then runtime packaging is performed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>packaged</strong> – pointer to where the packaged data can be stored. Pass a null pointer to skip packaging but still calculate the total space required. The data stored here is relocatable, that is it can be moved to another contiguous block of memory. It must be aligned to the size of the longest argument. It is recommended to use CBPRINTF_PACKAGE_ALIGNMENT for alignment.</p></li>
<li><p><strong>inlen</strong> – set to the number of bytes available at <code class="docutils literal notranslate"><span class="pre">packaged</span></code>. If <code class="docutils literal notranslate"><span class="pre">packaged</span></code> is NULL the value is ignored.</p></li>
<li><p><strong>outlen</strong> – variable updated to the number of bytes required to completely store the packed information. If input buffer was too small it is set to -ENOSPC.</p></li>
<li><p><strong>align_offset</strong> – input buffer alignment offset in bytes. Where offset 0 means that buffer is aligned to CBPRINTF_PACKAGE_ALIGNMENT. Xtensa requires that <code class="docutils literal notranslate"><span class="pre">packaged</span></code> is aligned to CBPRINTF_PACKAGE_ALIGNMENT so it must be multiply of CBPRINTF_PACKAGE_ALIGNMENT or 0.</p></li>
<li><p><strong>flags</strong> – option flags. See Package flags..</p></li>
<li><p><strong>...</strong> – formatted string with arguments. Format string must be constant. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-typedefs">Typedefs</p>
<dl class="c type">
<dt class="sig sig-object c" id="c.cbprintf_cb">
<span class="target" id="group__cbprintf__apis_1gaca8362dda031a176d96855a604395a83"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">cbprintf_cb</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.cbprintf_cb" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Signature for a cbprintf callback function. </p>
<p>This function expects two parameters:</p>
<p><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">c</span></code> a character to output. The output behavior should be as if this was cast to an unsigned char.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ctx</span></code> a pointer to an object that provides context for the output operation.</p></li>
</ul>
</p>
<p>The declaration does not specify the parameter types. This allows a function like <code class="docutils literal notranslate"><span class="pre">fputc</span></code> to be used without requiring all context pointers to be to a <code class="docutils literal notranslate"><span class="pre">FILE</span></code> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Return</dt>
<dd class="field-odd"><p>the value of <code class="docutils literal notranslate"><span class="pre">c</span></code> cast to an unsigned char then back to int, or a negative error code that will be returned from <a class="reference internal" href="#group__cbprintf__apis_1ga0cebdbf4f142ee28c5bd80a1615647da"><span class="std std-ref">cbprintf()</span></a>. </p>
</dd>
</dl>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.cbvprintf_exteral_formatter_func">
<span class="target" id="group__cbprintf__apis_1gacf080321312296d57ff59d94e26a0dcc"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">cbvprintf_exteral_formatter_func</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#c.cbprintf_cb" title="cbprintf_cb"><span class="n"><span class="pre">cbprintf_cb</span></span></a><span class="w"> </span><span class="n"><span class="pre">out</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ctx</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fmt</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">va_list</span></span><span class="w"> </span><span class="n"><span class="pre">ap</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.cbvprintf_exteral_formatter_func" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Signature for a external formatter function identical to cbvprintf. </p>
<p>This function expects the following parameters:</p>
<dl class="field-list simple">
<dt class="field-odd">Param out</dt>
<dd class="field-odd"><p>the function used to emit each generated character.</p>
</dd>
<dt class="field-even">Param ctx</dt>
<dd class="field-even"><p>a pointer to an object that provides context for the external formatter.</p>
</dd>
<dt class="field-odd">Param fmt</dt>
<dd class="field-odd"><p>a standard ISO C format string with characters and conversion specifications.</p>
</dd>
<dt class="field-even">Param ap</dt>
<dd class="field-even"><p>captured stack arguments corresponding to the conversion specifications found within <code class="docutils literal notranslate"><span class="pre">fmt</span></code>.</p>
</dd>
<dt class="field-odd">Return</dt>
<dd class="field-odd"><p>vprintf like return values: the number of characters printed, or a negative error value returned from external formatter. </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.cbprintf_package">
<span class="target" id="group__cbprintf__apis_1gad9c56f0a84f60cc53fa9e687069a8f1b"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">cbprintf_package</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">packaged</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">len</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">flags</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">format</span></span>, <span class="p"><span class="pre">...</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.cbprintf_package" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Capture state required to output formatted data later. </p>
<p>Like <a class="reference internal" href="#group__cbprintf__apis_1ga0cebdbf4f142ee28c5bd80a1615647da"><span class="std std-ref">cbprintf()</span></a> but instead of processing the arguments and emitting the formatted results immediately all arguments are captured so this can be done in a different context, e.g. when the output function can block.</p>
<p>In addition to the values extracted from arguments this will ensure that copies are made of the necessary portions of any string parameters that are not confirmed to be stored in read-only memory (hence assumed to be safe to refer to directly later).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>packaged</strong> – pointer to where the packaged data can be stored. Pass a null pointer to store nothing but still calculate the total space required. The data stored here is relocatable, that is it can be moved to another contiguous block of memory. However, under condition that alignment is maintained. It must be aligned to at least the size of a pointer.</p></li>
<li><p><strong>len</strong> – this must be set to the number of bytes available at <code class="docutils literal notranslate"><span class="pre">packaged</span></code> if it is not null. If <code class="docutils literal notranslate"><span class="pre">packaged</span></code> is null then it indicates hypothetical buffer alignment offset in bytes compared to CBPRINTF_PACKAGE_ALIGNMENT alignment. Buffer alignment offset impacts returned size of the package. Xtensa requires that buffer is always aligned to CBPRINTF_PACKAGE_ALIGNMENT so it must be multiply of CBPRINTF_PACKAGE_ALIGNMENT or 0 when <code class="docutils literal notranslate"><span class="pre">packaged</span></code> is null.</p></li>
<li><p><strong>flags</strong> – option flags. See Package flags..</p></li>
<li><p><strong>format</strong> – a standard ISO C format string with characters and conversion specifications.</p></li>
<li><p><strong>...</strong> – arguments corresponding to the conversion specifications found within <code class="docutils literal notranslate"><span class="pre">format</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>nonegative</strong> – the number of bytes successfully stored at <code class="docutils literal notranslate"><span class="pre">packaged</span></code>. This will not exceed <code class="docutils literal notranslate"><span class="pre">len</span></code>. </p></li>
<li><p><strong>-EINVAL</strong> – if <code class="docutils literal notranslate"><span class="pre">format</span></code> is not acceptable </p></li>
<li><p><strong>-EFAULT</strong> – if <code class="docutils literal notranslate"><span class="pre">packaged</span></code> alignment is not acceptable </p></li>
<li><p><strong>-ENOSPC</strong> – if <code class="docutils literal notranslate"><span class="pre">packaged</span></code> was not null and the space required to store exceed <code class="docutils literal notranslate"><span class="pre">len</span></code>. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.cbvprintf_package">
<span class="target" id="group__cbprintf__apis_1gaa83f17925daa9747d329b6f1078ab15a"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">cbvprintf_package</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">packaged</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">len</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">flags</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">format</span></span>, <span class="n"><span class="pre">va_list</span></span><span class="w"> </span><span class="n"><span class="pre">ap</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.cbvprintf_package" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Capture state required to output formatted data later. </p>
<p>Like <a class="reference internal" href="#group__cbprintf__apis_1ga0cebdbf4f142ee28c5bd80a1615647da"><span class="std std-ref">cbprintf()</span></a> but instead of processing the arguments and emitting the formatted results immediately all arguments are captured so this can be done in a different context, e.g. when the output function can block.</p>
<p>In addition to the values extracted from arguments this will ensure that copies are made of the necessary portions of any string parameters that are not confirmed to be stored in read-only memory (hence assumed to be safe to refer to directly later).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>packaged</strong> – pointer to where the packaged data can be stored. Pass a null pointer to store nothing but still calculate the total space required. The data stored here is relocatable, that is it can be moved to another contiguous block of memory. The pointer must be aligned to a multiple of the largest element in the argument list.</p></li>
<li><p><strong>len</strong> – this must be set to the number of bytes available at <code class="docutils literal notranslate"><span class="pre">packaged</span></code>. Ignored if <code class="docutils literal notranslate"><span class="pre">packaged</span></code> is NULL.</p></li>
<li><p><strong>flags</strong> – option flags. See Package flags..</p></li>
<li><p><strong>format</strong> – a standard ISO C format string with characters and conversion specifications.</p></li>
<li><p><strong>ap</strong> – captured stack arguments corresponding to the conversion specifications found within <code class="docutils literal notranslate"><span class="pre">format</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>nonegative</strong> – the number of bytes successfully stored at <code class="docutils literal notranslate"><span class="pre">packaged</span></code>. This will not exceed <code class="docutils literal notranslate"><span class="pre">len</span></code>. </p></li>
<li><p><strong>-EINVAL</strong> – if <code class="docutils literal notranslate"><span class="pre">format</span></code> is not acceptable </p></li>
<li><p><strong>-ENOSPC</strong> – if <code class="docutils literal notranslate"><span class="pre">packaged</span></code> was not null and the space required to store exceed <code class="docutils literal notranslate"><span class="pre">len</span></code>. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.cbprintf_fsc_package">
<span class="target" id="group__cbprintf__apis_1ga4f71af38815a9873217fa3a8edc48b0c"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">cbprintf_fsc_package</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">in_packaged</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">in_len</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">packaged</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.cbprintf_fsc_package" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Convert package to fully self-contained (fsc) package. </p>
<p>By default, package does not contain read only strings. However, if needed it may be converted to a fully self-contained package which contains all strings. In order to allow such conversion, original package must be created with CBPRINTF_PACKAGE_ADD_STRING_IDXS flag. Such package will contain necessary data to find read only strings in the package and copy them into package body.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>in_packaged</strong> – pointer to original package created with CBPRINTF_PACKAGE_ADD_STRING_IDXS.</p></li>
<li><p><strong>in_len</strong> – <code class="docutils literal notranslate"><span class="pre">in_packaged</span></code> length.</p></li>
<li><p><strong>packaged</strong> – pointer to location where fully self-contained version of the input package will be written. Pass a null pointer to calculate space required.</p></li>
<li><p><strong>len</strong> – must be set to the number of bytes available at <code class="docutils literal notranslate"><span class="pre">packaged</span></code>. Not used if <code class="docutils literal notranslate"><span class="pre">packaged</span></code> is null.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>nonegative</strong> – the number of bytes successfully stored at <code class="docutils literal notranslate"><span class="pre">packaged</span></code>. This will not exceed <code class="docutils literal notranslate"><span class="pre">len</span></code>. If <code class="docutils literal notranslate"><span class="pre">packaged</span></code> is null, calculated length. </p></li>
<li><p><strong>-ENOSPC</strong> – if <code class="docutils literal notranslate"><span class="pre">packaged</span></code> was not null and the space required to store exceed <code class="docutils literal notranslate"><span class="pre">len</span></code>. </p></li>
<li><p><strong>-EINVAL</strong> – if <code class="docutils literal notranslate"><span class="pre">in_packaged</span></code> is null. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.cbpprintf_external">
<span class="target" id="group__cbprintf__apis_1ga0a419dfaa1873bca5a9f4e0fb3609e7e"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">cbpprintf_external</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.cbprintf_cb" title="cbprintf_cb"><span class="n"><span class="pre">cbprintf_cb</span></span></a><span class="w"> </span><span class="n"><span class="pre">out</span></span>, <a class="reference internal" href="#c.cbvprintf_exteral_formatter_func" title="cbvprintf_exteral_formatter_func"><span class="n"><span class="pre">cbvprintf_exteral_formatter_func</span></span></a><span class="w"> </span><span class="n"><span class="pre">formatter</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ctx</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">packaged</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.cbpprintf_external" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Generate the output for a previously captured format operation using an external formatter. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Memory indicated by <code class="docutils literal notranslate"><span class="pre">packaged</span></code> will be modified in a non-destructive way, meaning that it could still be reused with this function again.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>out</strong> – the function used to emit each generated character.</p></li>
<li><p><strong>formatter</strong> – external formatter function.</p></li>
<li><p><strong>ctx</strong> – a pointer to an object that provides context for the external formatter.</p></li>
<li><p><strong>packaged</strong> – the data required to generate the formatted output, as captured by <a class="reference internal" href="#group__cbprintf__apis_1gad9c56f0a84f60cc53fa9e687069a8f1b"><span class="std std-ref">cbprintf_package()</span></a> or <a class="reference internal" href="#group__cbprintf__apis_1gaa83f17925daa9747d329b6f1078ab15a"><span class="std std-ref">cbvprintf_package()</span></a>. The alignment requirement on this data is the same as when it was initially created.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>printf like return values: the number of characters printed, or a negative error value returned from external formatter. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.cbprintf">
<span class="target" id="group__cbprintf__apis_1ga0cebdbf4f142ee28c5bd80a1615647da"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">cbprintf</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.cbprintf_cb" title="cbprintf_cb"><span class="n"><span class="pre">cbprintf_cb</span></span></a><span class="w"> </span><span class="n"><span class="pre">out</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ctx</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">format</span></span>, <span class="p"><span class="pre">...</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.cbprintf" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>*printf-like output through a callback. </p>
<p>This is essentially printf() except the output is generated character-by-character using the provided <code class="docutils literal notranslate"><span class="pre">out</span></code> function. This allows formatting text of unbounded length without incurring the cost of a temporary buffer.</p>
<p>All formatting specifiers of C99 are recognized, and most are supported if the functionality is enabled.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The functionality of this function is significantly reduced when <span> <a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_NANO"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_NANO</span></code></a> </span> is selected.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>out</strong> – the function used to emit each generated character.</p></li>
<li><p><strong>ctx</strong> – context provided when invoking out</p></li>
<li><p><strong>format</strong> – a standard ISO C format string with characters and conversion specifications.</p></li>
<li><p><strong>...</strong> – arguments corresponding to the conversion specifications found within <code class="docutils literal notranslate"><span class="pre">format</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the number of characters printed, or a negative error value returned from invoking <code class="docutils literal notranslate"><span class="pre">out</span></code>. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.cbvprintf">
<span class="target" id="group__cbprintf__apis_1ga3d4847cb6900851ec11e39a35f833b26"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">cbvprintf</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.cbprintf_cb" title="cbprintf_cb"><span class="n"><span class="pre">cbprintf_cb</span></span></a><span class="w"> </span><span class="n"><span class="pre">out</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ctx</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">format</span></span>, <span class="n"><span class="pre">va_list</span></span><span class="w"> </span><span class="n"><span class="pre">ap</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.cbvprintf" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>varargs-aware *printf-like output through a callback. </p>
<p>This is essentially vsprintf() except the output is generated character-by-character using the provided <code class="docutils literal notranslate"><span class="pre">out</span></code> function. This allows formatting text of unbounded length without incurring the cost of a temporary buffer.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is available only when <span> <a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_LIBC_SUBSTS"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_LIBC_SUBSTS</span></code></a> </span> is selected.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The functionality of this function is significantly reduced when <span> <a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_NANO"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_NANO</span></code></a> </span> is selected.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>out</strong> – the function used to emit each generated character.</p></li>
<li><p><strong>ctx</strong> – context provided when invoking out</p></li>
<li><p><strong>format</strong> – a standard ISO C format string with characters and conversion specifications.</p></li>
<li><p><strong>ap</strong> – a reference to the values to be converted.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the number of characters generated, or a negative error value returned from invoking <code class="docutils literal notranslate"><span class="pre">out</span></code>. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.cbpprintf">
<span class="target" id="group__cbprintf__apis_1ga150fa7bb8dfb96db886006c9115e1dd7"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">cbpprintf</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.cbprintf_cb" title="cbprintf_cb"><span class="n"><span class="pre">cbprintf_cb</span></span></a><span class="w"> </span><span class="n"><span class="pre">out</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ctx</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">packaged</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.cbpprintf" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Generate the output for a previously captured format operation. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Memory indicated by <code class="docutils literal notranslate"><span class="pre">packaged</span></code> will be modified in a non-destructive way, meaning that it could still be reused with this function again.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>out</strong> – the function used to emit each generated character.</p></li>
<li><p><strong>ctx</strong> – context provided when invoking out</p></li>
<li><p><strong>packaged</strong> – the data required to generate the formatted output, as captured by <a class="reference internal" href="#group__cbprintf__apis_1gad9c56f0a84f60cc53fa9e687069a8f1b"><span class="std std-ref">cbprintf_package()</span></a> or <a class="reference internal" href="#group__cbprintf__apis_1gaa83f17925daa9747d329b6f1078ab15a"><span class="std std-ref">cbvprintf_package()</span></a>. The alignment requirement on this data is the same as when it was initially created.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the number of characters printed, or a negative error value returned from invoking <code class="docutils literal notranslate"><span class="pre">out</span></code>. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.fprintfcb">
<span class="target" id="group__cbprintf__apis_1ga2636e91fd5d78835cfaffe5b5012638b"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">fprintfcb</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">FILE</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">stream</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">format</span></span>, <span class="p"><span class="pre">...</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.fprintfcb" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>fprintf using Zephyrs cbprintf infrastructure. </p>
<p>
return The number of characters printed. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is available only when <span> <a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_LIBC_SUBSTS"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_LIBC_SUBSTS</span></code></a> </span> is selected.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The functionality of this function is significantly reduced when <span> <a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_NANO"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_NANO</span></code></a> </span> is selected.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stream</strong> – the stream to which the output should be written.</p></li>
<li><p><strong>format</strong> – a standard ISO C format string with characters and conversion specifications.</p></li>
<li><p><strong>...</strong> – arguments corresponding to the conversion specifications found within <code class="docutils literal notranslate"><span class="pre">format</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.vfprintfcb">
<span class="target" id="group__cbprintf__apis_1ga24d7226976f3acbe579b6d6b5d530ade"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">vfprintfcb</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">FILE</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">stream</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">format</span></span>, <span class="n"><span class="pre">va_list</span></span><span class="w"> </span><span class="n"><span class="pre">ap</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.vfprintfcb" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>vfprintf using Zephyrs cbprintf infrastructure. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is available only when <span> <a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_LIBC_SUBSTS"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_LIBC_SUBSTS</span></code></a> </span> is selected.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The functionality of this function is significantly reduced when <span> <a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_NANO"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_NANO</span></code></a> </span> is selected.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stream</strong> – the stream to which the output should be written.</p></li>
<li><p><strong>format</strong> – a standard ISO C format string with characters and conversion specifications.</p></li>
<li><p><strong>ap</strong> – a reference to the values to be converted.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The number of characters printed. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.printfcb">
<span class="target" id="group__cbprintf__apis_1ga17aa694ea800f8188a3de3babd524c3f"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">printfcb</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">format</span></span>, <span class="p"><span class="pre">...</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.printfcb" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>printf using Zephyrs cbprintf infrastructure. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is available only when <span> <a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_LIBC_SUBSTS"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_LIBC_SUBSTS</span></code></a> </span> is selected.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The functionality of this function is significantly reduced when <span> <a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_NANO"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_NANO</span></code></a> </span> is selected.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>format</strong> – a standard ISO C format string with characters and conversion specifications.</p></li>
<li><p><strong>...</strong> – arguments corresponding to the conversion specifications found within <code class="docutils literal notranslate"><span class="pre">format</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The number of characters printed. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.vprintfcb">
<span class="target" id="group__cbprintf__apis_1gaa70a1b73fb04b88b40c1fa5fd65efd15"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">vprintfcb</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">format</span></span>, <span class="n"><span class="pre">va_list</span></span><span class="w"> </span><span class="n"><span class="pre">ap</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.vprintfcb" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>vprintf using Zephyrs cbprintf infrastructure. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is available only when <span> <a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_LIBC_SUBSTS"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_LIBC_SUBSTS</span></code></a> </span> is selected.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The functionality of this function is significantly reduced when <span> <a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_NANO"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_NANO</span></code></a> </span> is selected.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>format</strong> – a standard ISO C format string with characters and conversion specifications.</p></li>
<li><p><strong>ap</strong> – a reference to the values to be converted.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The number of characters printed. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.snprintfcb">
<span class="target" id="group__cbprintf__apis_1ga909f859afbc2a596cd0174f711a60047"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">snprintfcb</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">str</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">size</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">format</span></span>, <span class="p"><span class="pre">...</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.snprintfcb" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>snprintf using Zephyrs cbprintf infrastructure. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is available only when <span> <a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_LIBC_SUBSTS"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_LIBC_SUBSTS</span></code></a> </span> is selected.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The functionality of this function is significantly reduced when <span> <a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_NANO"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_NANO</span></code></a> </span> is selected.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>str</strong> – where the formatted content should be written</p></li>
<li><p><strong>size</strong> – maximum number of chaacters for the formatted output, including the terminating null byte.</p></li>
<li><p><strong>format</strong> – a standard ISO C format string with characters and conversion specifications.</p></li>
<li><p><strong>...</strong> – arguments corresponding to the conversion specifications found within <code class="docutils literal notranslate"><span class="pre">format</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The number of characters that would have been written to <code class="docutils literal notranslate"><span class="pre">str</span></code>, excluding the terminating null byte. This is greater than the number actually written if <code class="docutils literal notranslate"><span class="pre">size</span></code> is too small. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.vsnprintfcb">
<span class="target" id="group__cbprintf__apis_1ga37b0f96a7b9c025659a902e8fd614b33"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">vsnprintfcb</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">str</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">size</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">format</span></span>, <span class="n"><span class="pre">va_list</span></span><span class="w"> </span><span class="n"><span class="pre">ap</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.vsnprintfcb" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>vsnprintf using Zephyrs cbprintf infrastructure. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is available only when <span> <a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_LIBC_SUBSTS"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_LIBC_SUBSTS</span></code></a> </span> is selected.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The functionality of this function is significantly reduced when <span> <a class="reference internal" href="../kconfig/dummy-syms.html#std-kconfig-CONFIG_CBPRINTF_NANO"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_CBPRINTF_NANO</span></code></a> </span> is selected.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>str</strong> – where the formatted content should be written</p></li>
<li><p><strong>size</strong> – maximum number of chaacters for the formatted output, including the terminating null byte.</p></li>
<li><p><strong>format</strong> – a standard ISO C format string with characters and conversion specifications.</p></li>
<li><p><strong>ap</strong> – a reference to the values to be converted.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The number of characters that would have been written to <code class="docutils literal notranslate"><span class="pre">str</span></code>, excluding the terminating null byte. This is greater than the number actually written if <code class="docutils literal notranslate"><span class="pre">size</span></code> is too small. </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</div>
</div>


           </div>
          </div>

          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../copyright.html">Copyright</a> 2015-2021 Zephyr Project members and individual contributors.
      <span class="lastupdated">Last updated on Feb 21, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
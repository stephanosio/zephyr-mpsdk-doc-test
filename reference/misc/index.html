<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Miscellaneous &mdash; Zephyr Project Documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script type="module" src="../../_static/js/dark-mode-toggle.min.mjs"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-831873-47"></script>
        <script src="../../_static/js/ga-tracker.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="Data Structures" href="../data_structures/index.html" />
    <link rel="prev" title="Memory Blocks Allocator" href="../memory_management/sys_mem_blocks.html" />
  <meta name="color-scheme" content="dark light">
  
  <link rel="stylesheet" href="../../_static/css/light.css" type="text/css" media="(prefers-color-scheme: light)"/>
  <link rel="stylesheet" href="../../_static/css/dark.css" type="text/css" media="(prefers-color-scheme: dark)"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html">
            <img src="../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.99
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Zephyr Project</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Release Versions</dt>
        
          <dd><a href="/">latest</a></dd>
        
          <dd><a href="/3.0.0/">3.0.0</a></dd>
        
          <dd><a href="/2.7.0/">2.7.0</a></dd>
        
          <dd><a href="/2.6.0/">2.6.0</a></dd>
        
          <dd><a href="/2.5.0/">2.5.0</a></dd>
        
          <dd><a href="/2.4.0/">2.4.0</a></dd>
        
          <dd><a href="/2.3.0/">2.3.0</a></dd>
        
          <dd><a href="/1.14.1/">1.14.1</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="/latest/zephyr.pdf">PDF</a></dd>
      </dl>
      <dl>
        <dt>zephyrproject.org Links</dt>
          <dd>
            <a href="https://www.zephyrproject.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/sdk-ng/releases">SDK</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/zephyr/releases">Releases</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development_process/index.html">Development and Contribution Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/build/index.html">Build and Configuration Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../application/index.html">Application Development</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api/index.html">API Status and Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../audio/index.html">Audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="notify.html">Asynchronous Notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bluetooth/index.html">Bluetooth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canbus/index.html">Controller Area Network (CAN)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../crypto/index.html">Crypto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devicetree/index.html">Devicetree</a></li>
<li class="toctree-l2"><a class="reference internal" href="../drivers/index.html">Device Driver Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../display/index.html">Display Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edac/index.html">Error Detection And Correction (EDAC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../file_system/index.html">File Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iterable_sections/index.html">Iterable Sections</a></li>
<li class="toctree-l2"><a class="reference internal" href="formatted_output.html">Formatted Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kernel/index.html">Kernel Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libc/index.html">C standard library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging/index.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../memory_management/index.html">Memory Management</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Miscellaneous</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#checksum-apis">Checksum APIs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#crc">CRC</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#structured-data-apis">Structured Data APIs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#json">JSON</a></li>
<li class="toctree-l4"><a class="reference internal" href="#jwt">JWT</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../data_structures/index.html">Data Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modbus/index.html">Modbus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../networking/index.html">Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../peripherals/index.html">Peripherals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pinctrl/index.html">Pin Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pm/index.html">Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../random/index.html">Random Number Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../resource_management/index.html">Resource Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/index.html">Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/index.html">Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../task_wdt/index.html">Task Watchdog</a></li>
<li class="toctree-l2"><a class="reference internal" href="timeutil.html">Time Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usb/index.html">USB device support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usermode/index.html">User Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../util/index.html">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../settings/index.html">Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../timing_functions/index.html">Executing Time Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../virtualization/index.html">Virtualization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/index.html">User and Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../samples/index.html">Samples and Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../boards/index.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/index.html">Release Notes</a></li>
</ul>

  
  <div class="toctree-wrapper compound">
    <p class="caption"><span class="caption-text">Reference</span></p>
    <ul>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/doxygen/html/index.html">API</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/kconfig.html">Kconfig Options</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/devicetree/bindings.html">Devicetree Bindings</a>
      </li>
      
    </ul>
  </div>
  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Zephyr Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Docs / Latest -->
  
  

  <li><a href="../../index.html">Docs / Latest</a> &raquo;</li>
  
     <li><a href="../index.html">API Reference</a> &raquo;</li>
  
  <li>Miscellaneous</li>


  <li class="wy-breadcrumbs-aside">
    <dark-mode-toggle id="dark-mode-toggle" appearance="toggle" permanent="true"/>
  </li>
  <li class="wy-breadcrumbs-aside">
      
      
        <a href="https://github.com/zephyrproject-rtos/zephyr/blob/main/doc/reference/misc/index.rst" class="fa fa-github"> Open on GitHub</a>
      
    
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="wy-alert wy-alert-danger">
     This is the documentation for the latest (main) development branch of
     Zephyr. If you are looking for the documentation of previous releases, use
     the drop-down menu on the left and select the desired version.
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="miscellaneous">
<span id="misc-api"></span><h1>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline">¶</a></h1>
<div class="section" id="checksum-apis">
<h2>Checksum APIs<a class="headerlink" href="#checksum-apis" title="Permalink to this headline">¶</a></h2>
<div class="section" id="crc">
<h3>CRC<a class="headerlink" href="#crc" title="Permalink to this headline">¶</a></h3>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__crc"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">crc</span></span></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.crc16">
<span class="target" id="group__crc_1ga204a779aa0c1a152763ea8edc6fc3a8c"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">crc16</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">poly</span></span>, <span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">seed</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">src</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.crc16" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Generic function for computing a CRC-16 without input or output reflection. </p>
<p>Compute CRC-16 by passing in the address of the input, the input length and polynomial used in addition to the initial value. This is O(n*8) where n is the length of the buffer provided. No reflection is performed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are planning to use a CRC based on poly 0x1012 the functions <a class="reference internal" href="#group__crc_1ga5502729e443496719de338e8b6692ac1"><span class="std std-ref">crc16_itu_t()</span></a> is faster and thus recommended over this one.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>poly</strong> – The polynomial to use omitting the leading x^16 coefficient </p></li>
<li><p><strong>seed</strong> – Initial value for the CRC computation </p></li>
<li><p><strong>src</strong> – Input bytes for the computation </p></li>
<li><p><strong>len</strong> – Length of the input in bytes</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The computed CRC16 value (without any XOR applied to it) </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.crc16_reflect">
<span class="target" id="group__crc_1gaccbcb5b80cf8deaac252474ecc6d9914"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">crc16_reflect</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">poly</span></span>, <span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">seed</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">src</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.crc16_reflect" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Generic function for computing a CRC-16 with input and output reflection. </p>
<p>Compute CRC-16 by passing in the address of the input, the input length and polynomial used in addition to the initial value. This is O(n*8) where n is the length of the buffer provided. Both input and output are reflected.</p>
<p>
The following checksums can, among others, be calculated by this function, depending on the value provided for the initial seed and the value the final calculated CRC is XORed with:</p>
<p><ul class="simple">
<li><p>CRC-16/ANSI, CRC-16/MODBUS, CRC-16/USB, CRC-16/IBM <a class="reference external" href="https://reveng.sourceforge.io/crc-catalogue/16.htm#crc.cat.crc-16-modbus">https://reveng.sourceforge.io/crc-catalogue/16.htm#crc.cat.crc-16-modbus</a> poly: 0x8005 (0xA001) initial seed: 0xffff, xor output: 0x0000</p></li>
</ul>
</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are planning to use a CRC based on poly 0x1012 the function <a class="reference internal" href="#group__crc_1ga74fa5608612c629291d15bc00b1c411c"><span class="std std-ref">crc16_ccitt()</span></a> is faster and thus recommended over this one.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>poly</strong> – The polynomial to use omitting the leading x^16 coefficient. Important: please reflect the poly. For example, use 0xA001 instead of 0x8005 for CRC-16-MODBUS. </p></li>
<li><p><strong>seed</strong> – Initial value for the CRC computation </p></li>
<li><p><strong>src</strong> – Input bytes for the computation </p></li>
<li><p><strong>len</strong> – Length of the input in bytes</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The computed CRC16 value (without any XOR applied to it) </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.crc8">
<span class="target" id="group__crc_1gaa614e73ee7484ca0424fa7d14a54bbb6"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">crc8</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">src</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">len</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">polynomial</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">initial_value</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n"><span class="pre">reversed</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.crc8" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Generic function for computing CRC 8. </p>
<p>Compute CRC 8 by passing in the address of the input, the input length and polynomial used in addition to the initial value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src</strong> – Input bytes for the computation </p></li>
<li><p><strong>len</strong> – Length of the input in bytes </p></li>
<li><p><strong>polynomial</strong> – The polynomial to use omitting the leading x^8 coefficient </p></li>
<li><p><strong>initial_value</strong> – Initial value for the CRC computation </p></li>
<li><p><strong>reversed</strong> – Should we use reflected/reversed values or not</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The computed CRC8 value </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.crc16_ccitt">
<span class="target" id="group__crc_1ga74fa5608612c629291d15bc00b1c411c"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">crc16_ccitt</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">seed</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">src</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.crc16_ccitt" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Compute the checksum of a buffer with polynomial 0x1021, reflecting input and output. </p>
<p>This function is able to calculate any CRC that uses 0x1021 as it polynomial and requires reflecting both the input and the output. It is a fast variant that runs in O(n) time, where n is the length of the input buffer.</p>
<p>The following checksums can, among others, be calculated by this function, depending on the value provided for the initial seed and the value the final calculated CRC is XORed with:</p>
<p><ul class="simple">
<li><p>CRC-16/CCITT, CRC-16/CCITT-TRUE, CRC-16/KERMIT <a class="reference external" href="https://reveng.sourceforge.io/crc-catalogue/16.htm#crc.cat.crc-16-kermit">https://reveng.sourceforge.io/crc-catalogue/16.htm#crc.cat.crc-16-kermit</a> initial seed: 0x0000, xor output: 0x0000</p></li>
<li><p>CRC-16/X-25, CRC-16/IBM-SDLC, CRC-16/ISO-HDLC <a class="reference external" href="https://reveng.sourceforge.io/crc-catalogue/16.htm#crc.cat.crc-16-ibm-sdlc">https://reveng.sourceforge.io/crc-catalogue/16.htm#crc.cat.crc-16-ibm-sdlc</a> initial seed: 0xffff, xor output: 0xffff</p></li>
</ul>
</p>
<p>
See ITU-T Recommendation V.41 (November 1988).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To calculate the CRC across non-contiguous blocks use the return value from block N-1 as the seed for block N.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>seed</strong> – Value to seed the CRC with </p></li>
<li><p><strong>src</strong> – Input bytes for the computation </p></li>
<li><p><strong>len</strong> – Length of the input in bytes</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The computed CRC16 value (without any XOR applied to it) </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.crc16_itu_t">
<span class="target" id="group__crc_1ga5502729e443496719de338e8b6692ac1"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">crc16_itu_t</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">seed</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">src</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.crc16_itu_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Compute the checksum of a buffer with polynomial 0x1021, no reflection of input or output. </p>
<p>This function is able to calculate any CRC that uses 0x1021 as it polynomial and requires no reflection on both the input and the output. It is a fast variant that runs in O(n) time, where n is the length of the input buffer.</p>
<p>The following checksums can, among others, be calculated by this function, depending on the value provided for the initial seed and the value the final calculated CRC is XORed with:</p>
<p><ul class="simple">
<li><p>CRC-16/XMODEM, CRC-16/ACORN, CRC-16/LTE <a class="reference external" href="https://reveng.sourceforge.io/crc-catalogue/16.htm#crc.cat.crc-16-xmodem">https://reveng.sourceforge.io/crc-catalogue/16.htm#crc.cat.crc-16-xmodem</a> initial seed: 0x0000, xor output: 0x0000</p></li>
<li><p>CRC16/CCITT-FALSE, CRC-16/IBM-3740, CRC-16/AUTOSAR <a class="reference external" href="https://reveng.sourceforge.io/crc-catalogue/16.htm#crc.cat.crc-16-ibm-3740">https://reveng.sourceforge.io/crc-catalogue/16.htm#crc.cat.crc-16-ibm-3740</a> initial seed: 0xffff, xor output: 0x0000</p></li>
<li><p>CRC-16/GSM <a class="reference external" href="https://reveng.sourceforge.io/crc-catalogue/16.htm#crc.cat.crc-16-gsm">https://reveng.sourceforge.io/crc-catalogue/16.htm#crc.cat.crc-16-gsm</a> initial seed: 0x0000, xor output: 0xffff</p></li>
</ul>
</p>
<p>
See ITU-T Recommendation V.41 (November 1988) (MSB first).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To calculate the CRC across non-contiguous blocks use the return value from block N-1 as the seed for block N.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>seed</strong> – Value to seed the CRC with </p></li>
<li><p><strong>src</strong> – Input bytes for the computation </p></li>
<li><p><strong>len</strong> – Length of the input in bytes</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The computed CRC16 value (without any XOR applied to it) </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.crc16_ansi">
<span class="target" id="group__crc_1gaac3ac50c029b656f5cc070e6c742601a"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">crc16_ansi</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">src</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.crc16_ansi" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Compute the ANSI (or Modbus) variant of CRC-16. </p>
<p>The ANSI variant of CRC-16 uses 0x8005 (0xA001 reflected) as its polynomial with the initial * value set to 0xffff.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src</strong> – Input bytes for the computation </p></li>
<li><p><strong>len</strong> – Length of the input in bytes</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The computed CRC16 value </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.crc32_ieee">
<span class="target" id="group__crc_1gafc24e79ed7f978f5bb813091ef318982"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">crc32_ieee</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.crc32_ieee" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Generate IEEE conform CRC32 checksum. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*data</strong> – Pointer to data on which the CRC should be calculated. </p></li>
<li><p><strong>len</strong> – Data length.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>CRC32 value. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.crc32_ieee_update">
<span class="target" id="group__crc_1ga17476d4af14603e322986ef603ce8530"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">crc32_ieee_update</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">crc</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.crc32_ieee_update" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Update an IEEE conforming CRC32 checksum. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>crc</strong> – CRC32 checksum that needs to be updated. </p></li>
<li><p><strong>*data</strong> – Pointer to data on which the CRC should be calculated. </p></li>
<li><p><strong>len</strong> – Data length.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>CRC32 value. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.crc32_c">
<span class="target" id="group__crc_1ga88d510b3958aee0990ca345aba260bc1"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">crc32_c</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">crc</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">len</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n"><span class="pre">first_pkt</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n"><span class="pre">last_pkt</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.crc32_c" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Calculate CRC32C (Castagnoli) checksum. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>crc</strong> – CRC32C checksum that needs to be updated. </p></li>
<li><p><strong>*data</strong> – Pointer to data on which the CRC should be calculated. </p></li>
<li><p><strong>len</strong> – Data length. </p></li>
<li><p><strong>first_pkt</strong> – Whether this is the first packet in the stream. </p></li>
<li><p><strong>last_pkt</strong> – Whether this is the last packet in the stream.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>CRC32 value. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.crc8_ccitt">
<span class="target" id="group__crc_1ga9a925de71cd0255a22c769dc4b130da5"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">crc8_ccitt</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">initial_value</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">buf</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.crc8_ccitt" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Compute CCITT variant of CRC 8. </p>
<p>Normal CCITT variant of CRC 8 is using 0x07.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>initial_value</strong> – Initial value for the CRC computation </p></li>
<li><p><strong>buf</strong> – Input bytes for the computation </p></li>
<li><p><strong>len</strong> – Length of the input in bytes</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The computed CRC8 value </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.crc7_be">
<span class="target" id="group__crc_1ga1169005fd900b2787035044eeea38af1"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">crc7_be</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">seed</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">src</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.crc7_be" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Compute the CRC-7 checksum of a buffer. </p>
<p>See JESD84-A441. Used by the MMC protocol. Uses 0x09 as the polynomial with no reflection. The CRC is left justified, so bit 7 of the result is bit 6 of the CRC.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>seed</strong> – Value to seed the CRC with </p></li>
<li><p><strong>src</strong> – Input bytes for the computation </p></li>
<li><p><strong>len</strong> – Length of the input in bytes</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The computed CRC7 value </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</div>
</div>
<div class="section" id="structured-data-apis">
<h2>Structured Data APIs<a class="headerlink" href="#structured-data-apis" title="Permalink to this headline">¶</a></h2>
<div class="section" id="json">
<h3>JSON<a class="headerlink" href="#json" title="Permalink to this headline">¶</a></h3>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__json"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">json</span></span></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-defines">Defines</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.JSON_OBJ_DESCR_PRIM">
<span class="target" id="group__json_1ga1ed917f5a247ca33f2778afe62ff1a88"></span><span class="sig-name descname"><span class="n"><span class="pre">JSON_OBJ_DESCR_PRIM</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">struct_</span></span>, <span class="n"><span class="pre">field_name_</span></span>, <span class="n"><span class="pre">type_</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.JSON_OBJ_DESCR_PRIM" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Helper macro to declare a descriptor for supported primitive values. </p>
<p>
Here’s an example of use: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">struct</span> <span class="n">foo</span> <span class="p">{</span>
    <span class="nb">int</span> <span class="n">some_int</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">struct</span> <span class="n">json_obj_descr</span> <span class="n">foo</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">JSON_OBJ_DESCR_PRIM</span><span class="p">(</span><span class="n">struct</span> <span class="n">foo</span><span class="p">,</span> <span class="n">some_int</span><span class="p">,</span> <span class="n">JSON_TOK_NUMBER</span><span class="p">),</span>
<span class="p">};</span>
</pre></div>
</div>
 </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>struct_</strong> – Struct packing the values </p></li>
<li><p><strong>field_name_</strong> – Field name in the struct </p></li>
<li><p><strong>type_</strong> – Token type for JSON value corresponding to a primitive type. Must be one of: JSON_TOK_STRING for strings, JSON_TOK_NUMBER for numbers, JSON_TOK_TRUE (or JSON_TOK_FALSE) for booleans.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.JSON_OBJ_DESCR_OBJECT">
<span class="target" id="group__json_1ga4ee365f43cfa86a214973defe81f1e88"></span><span class="sig-name descname"><span class="n"><span class="pre">JSON_OBJ_DESCR_OBJECT</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">struct_</span></span>, <span class="n"><span class="pre">field_name_</span></span>, <span class="n"><span class="pre">sub_descr_</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.JSON_OBJ_DESCR_OBJECT" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Helper macro to declare a descriptor for an object value. </p>
<p>
Here’s an example of use: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">struct</span> <span class="n">nested</span> <span class="p">{</span>
     <span class="nb">int</span> <span class="n">foo</span><span class="p">;</span>
     <span class="n">struct</span> <span class="p">{</span>
        <span class="nb">int</span> <span class="n">baz</span><span class="p">;</span>
     <span class="p">}</span> <span class="n">bar</span><span class="p">;</span>
 <span class="p">};</span>

 <span class="n">struct</span> <span class="n">json_obj_descr</span> <span class="n">nested_bar</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
     <span class="p">{</span> <span class="o">...</span> <span class="n">declare</span> <span class="n">bar</span><span class="o">.</span><span class="n">baz</span> <span class="n">descriptor</span> <span class="o">...</span> <span class="p">},</span>
 <span class="p">};</span>
 <span class="n">struct</span> <span class="n">json_obj_descr</span> <span class="n">nested</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
     <span class="p">{</span> <span class="o">...</span> <span class="n">declare</span> <span class="n">foo</span> <span class="n">descriptor</span> <span class="o">...</span> <span class="p">},</span>
     <span class="n">JSON_OBJ_DESCR_OBJECT</span><span class="p">(</span><span class="n">struct</span> <span class="n">nested</span><span class="p">,</span> <span class="n">bar</span><span class="p">,</span> <span class="n">nested_bar</span><span class="p">),</span>
 <span class="p">};</span>
</pre></div>
</div>
 </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>struct_</strong> – Struct packing the values </p></li>
<li><p><strong>field_name_</strong> – Field name in the struct </p></li>
<li><p><strong>sub_descr_</strong> – Array of <a class="reference internal" href="#structjson__obj__descr"><span class="std std-ref">json_obj_descr</span></a> describing the subobject</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.JSON_OBJ_DESCR_ARRAY">
<span class="target" id="group__json_1ga0b510decbc755c82903b54fcbc4a3b64"></span><span class="sig-name descname"><span class="n"><span class="pre">JSON_OBJ_DESCR_ARRAY</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">struct_</span></span>, <span class="n"><span class="pre">field_name_</span></span>, <span class="n"><span class="pre">max_len_</span></span>, <span class="n"><span class="pre">len_field_</span></span>, <span class="n"><span class="pre">elem_type_</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.JSON_OBJ_DESCR_ARRAY" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Helper macro to declare a descriptor for an array of primitives. </p>
<p>
Here’s an example of use: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">struct</span> <span class="n">example</span> <span class="p">{</span>
     <span class="nb">int</span> <span class="n">foo</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
     <span class="n">size_t</span> <span class="n">foo_len</span><span class="p">;</span>
 <span class="p">};</span>

 <span class="n">struct</span> <span class="n">json_obj_descr</span> <span class="n">array</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">JSON_OBJ_DESCR_ARRAY</span><span class="p">(</span><span class="n">struct</span> <span class="n">example</span><span class="p">,</span> <span class="n">foo</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">foo_len</span><span class="p">,</span>
                           <span class="n">JSON_TOK_NUMBER</span><span class="p">)</span>
 <span class="p">};</span>
</pre></div>
</div>
 </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>struct_</strong> – Struct packing the values </p></li>
<li><p><strong>field_name_</strong> – Field name in the struct </p></li>
<li><p><strong>max_len_</strong> – Maximum number of elements in array </p></li>
<li><p><strong>len_field_</strong> – Field name in the struct for the number of elements in the array </p></li>
<li><p><strong>elem_type_</strong> – Element type, must be a primitive type</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.JSON_OBJ_DESCR_OBJ_ARRAY">
<span class="target" id="group__json_1gae012264df03546a1c01eec4216b52ffd"></span><span class="sig-name descname"><span class="n"><span class="pre">JSON_OBJ_DESCR_OBJ_ARRAY</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">struct_</span></span>, <span class="n"><span class="pre">field_name_</span></span>, <span class="n"><span class="pre">max_len_</span></span>, <span class="n"><span class="pre">len_field_</span></span>, <span class="n"><span class="pre">elem_descr_</span></span>, <span class="n"><span class="pre">elem_descr_len_</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.JSON_OBJ_DESCR_OBJ_ARRAY" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Helper macro to declare a descriptor for an array of objects. </p>
<p>
Here’s an example of use: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">struct</span> <span class="n">person_height</span> <span class="p">{</span>
     <span class="n">const</span> <span class="n">char</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>
     <span class="nb">int</span> <span class="n">height</span><span class="p">;</span>
 <span class="p">};</span>

 <span class="n">struct</span> <span class="n">people_heights</span> <span class="p">{</span>
     <span class="n">struct</span> <span class="n">person_height</span> <span class="n">heights</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
     <span class="n">size_t</span> <span class="n">heights_len</span><span class="p">;</span>
 <span class="p">};</span>

 <span class="n">struct</span> <span class="n">json_obj_descr</span> <span class="n">person_height_descr</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">JSON_OBJ_DESCR_PRIM</span><span class="p">(</span><span class="n">struct</span> <span class="n">person_height</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">JSON_TOK_STRING</span><span class="p">),</span>
      <span class="n">JSON_OBJ_DESCR_PRIM</span><span class="p">(</span><span class="n">struct</span> <span class="n">person_height</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">JSON_TOK_NUMBER</span><span class="p">),</span>
 <span class="p">};</span>

 <span class="n">struct</span> <span class="n">json_obj_descr</span> <span class="n">array</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">JSON_OBJ_DESCR_OBJ_ARRAY</span><span class="p">(</span><span class="n">struct</span> <span class="n">people_heights</span><span class="p">,</span> <span class="n">heights</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span>
                               <span class="n">heights_len</span><span class="p">,</span> <span class="n">person_height_descr</span><span class="p">,</span>
                               <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">person_height_descr</span><span class="p">)),</span>
 <span class="p">};</span>
</pre></div>
</div>
 </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>struct_</strong> – Struct packing the values </p></li>
<li><p><strong>field_name_</strong> – Field name in the struct containing the array </p></li>
<li><p><strong>max_len_</strong> – Maximum number of elements in the array </p></li>
<li><p><strong>len_field_</strong> – Field name in the struct for the number of elements in the array </p></li>
<li><p><strong>elem_descr_</strong> – Element descriptor, pointer to a descriptor array </p></li>
<li><p><strong>elem_descr_len_</strong> – Number of elements in elem_descr_</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.JSON_OBJ_DESCR_ARRAY_ARRAY">
<span class="target" id="group__json_1gaed8189235fd30d2bc041cafee9591ec9"></span><span class="sig-name descname"><span class="n"><span class="pre">JSON_OBJ_DESCR_ARRAY_ARRAY</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">struct_</span></span>, <span class="n"><span class="pre">field_name_</span></span>, <span class="n"><span class="pre">max_len_</span></span>, <span class="n"><span class="pre">len_field_</span></span>, <span class="n"><span class="pre">elem_descr_</span></span>, <span class="n"><span class="pre">elem_descr_len_</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.JSON_OBJ_DESCR_ARRAY_ARRAY" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Helper macro to declare a descriptor for an array of array. </p>
<p>
Here’s an example of use: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">struct</span> <span class="n">person_height</span> <span class="p">{</span>
     <span class="n">const</span> <span class="n">char</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>
     <span class="nb">int</span> <span class="n">height</span><span class="p">;</span>
 <span class="p">};</span>

 <span class="n">struct</span> <span class="n">person_heights_array</span> <span class="p">{</span>
     <span class="n">struct</span> <span class="n">person_height</span> <span class="n">heights</span><span class="p">;</span>
 <span class="p">}</span>

 <span class="n">struct</span> <span class="n">people_heights</span> <span class="p">{</span>
     <span class="n">struct</span> <span class="n">person_height_array</span> <span class="n">heights</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
     <span class="n">size_t</span> <span class="n">heights_len</span><span class="p">;</span>
 <span class="p">};</span>

 <span class="n">struct</span> <span class="n">json_obj_descr</span> <span class="n">person_height_descr</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
     <span class="n">JSON_OBJ_DESCR_PRIM</span><span class="p">(</span><span class="n">struct</span> <span class="n">person_height</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">JSON_TOK_STRING</span><span class="p">),</span>
     <span class="n">JSON_OBJ_DESCR_PRIM</span><span class="p">(</span><span class="n">struct</span> <span class="n">person_height</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">JSON_TOK_NUMBER</span><span class="p">),</span>
 <span class="p">};</span>

 <span class="n">struct</span> <span class="n">json_obj_descr</span> <span class="n">person_height_array_descr</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
     <span class="n">JSON_OBJ_DESCR_OBJECT</span><span class="p">(</span><span class="n">struct</span> <span class="n">person_heights_array</span><span class="p">,</span>
                           <span class="n">heights</span><span class="p">,</span> <span class="n">person_heigth_descr</span><span class="p">),</span>
 <span class="p">};</span>

 <span class="n">struct</span> <span class="n">json_obj_descr</span> <span class="n">array_array</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">JSON_OBJ_DESCR_ARRAY_ARRAY</span><span class="p">(</span><span class="n">struct</span> <span class="n">people_heights</span><span class="p">,</span> <span class="n">heights</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span>
                                 <span class="n">heights_len</span><span class="p">,</span> <span class="n">person_height_array_descr</span><span class="p">,</span>
                                 <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">person_height_array_descr</span><span class="p">)),</span>
 <span class="p">};</span>
</pre></div>
</div>
 </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>struct_</strong> – Struct packing the values </p></li>
<li><p><strong>field_name_</strong> – Field name in the struct containing the array </p></li>
<li><p><strong>max_len_</strong> – Maximum number of elements in the array </p></li>
<li><p><strong>len_field_</strong> – Field name in the struct for the number of elements in the array </p></li>
<li><p><strong>elem_descr_</strong> – Element descriptor, pointer to a descriptor array </p></li>
<li><p><strong>elem_descr_len_</strong> – Number of elements in elem_descr_</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.JSON_OBJ_DESCR_PRIM_NAMED">
<span class="target" id="group__json_1gaad081c4f8debcb41779bd5879ed8bbd4"></span><span class="sig-name descname"><span class="n"><span class="pre">JSON_OBJ_DESCR_PRIM_NAMED</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">struct_</span></span>, <span class="n"><span class="pre">json_field_name_</span></span>, <span class="n"><span class="pre">struct_field_name_</span></span>, <span class="n"><span class="pre">type_</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.JSON_OBJ_DESCR_PRIM_NAMED" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Variant of JSON_OBJ_DESCR_PRIM that can be used when the structure and JSON field names differ. </p>
<p>This is useful when the JSON field is not a valid C identifier.</p>
<p><div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#group__json_1ga1ed917f5a247ca33f2778afe62ff1a88"><span class="std std-ref">JSON_OBJ_DESCR_PRIM</span></a> </p>
</div>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>struct_</strong> – Struct packing the values. </p></li>
<li><p><strong>json_field_name_</strong> – String, field name in JSON strings </p></li>
<li><p><strong>struct_field_name_</strong> – Field name in the struct </p></li>
<li><p><strong>type_</strong> – Token type for JSON value corresponding to a primitive type.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.JSON_OBJ_DESCR_OBJECT_NAMED">
<span class="target" id="group__json_1ga8f8d03241e4f69d5f7147792db9a9fe9"></span><span class="sig-name descname"><span class="n"><span class="pre">JSON_OBJ_DESCR_OBJECT_NAMED</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">struct_</span></span>, <span class="n"><span class="pre">json_field_name_</span></span>, <span class="n"><span class="pre">struct_field_name_</span></span>, <span class="n"><span class="pre">sub_descr_</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.JSON_OBJ_DESCR_OBJECT_NAMED" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Variant of JSON_OBJ_DESCR_OBJECT that can be used when the structure and JSON field names differ. </p>
<p>This is useful when the JSON field is not a valid C identifier.</p>
<p><div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#group__json_1ga4ee365f43cfa86a214973defe81f1e88"><span class="std std-ref">JSON_OBJ_DESCR_OBJECT</span></a> </p>
</div>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>struct_</strong> – Struct packing the values </p></li>
<li><p><strong>json_field_name_</strong> – String, field name in JSON strings </p></li>
<li><p><strong>struct_field_name_</strong> – Field name in the struct </p></li>
<li><p><strong>sub_descr_</strong> – Array of <a class="reference internal" href="#structjson__obj__descr"><span class="std std-ref">json_obj_descr</span></a> describing the subobject</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.JSON_OBJ_DESCR_ARRAY_NAMED">
<span class="target" id="group__json_1ga4a5bafd64de8abcbc2b5c039bd59ec84"></span><span class="sig-name descname"><span class="n"><span class="pre">JSON_OBJ_DESCR_ARRAY_NAMED</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">struct_</span></span>, <span class="n"><span class="pre">json_field_name_</span></span>, <span class="n"><span class="pre">struct_field_name_</span></span>, <span class="n"><span class="pre">max_len_</span></span>, <span class="n"><span class="pre">len_field_</span></span>, <span class="n"><span class="pre">elem_type_</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.JSON_OBJ_DESCR_ARRAY_NAMED" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Variant of JSON_OBJ_DESCR_ARRAY that can be used when the structure and JSON field names differ. </p>
<p>This is useful when the JSON field is not a valid C identifier.</p>
<p><div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#group__json_1ga0b510decbc755c82903b54fcbc4a3b64"><span class="std std-ref">JSON_OBJ_DESCR_ARRAY</span></a> </p>
</div>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>struct_</strong> – Struct packing the values </p></li>
<li><p><strong>json_field_name_</strong> – String, field name in JSON strings </p></li>
<li><p><strong>struct_field_name_</strong> – Field name in the struct </p></li>
<li><p><strong>max_len_</strong> – Maximum number of elements in array </p></li>
<li><p><strong>len_field_</strong> – Field name in the struct for the number of elements in the array </p></li>
<li><p><strong>elem_type_</strong> – Element type, must be a primitive type</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.JSON_OBJ_DESCR_OBJ_ARRAY_NAMED">
<span class="target" id="group__json_1gaa6602833e59c7e5205d69cc7c4ab2bba"></span><span class="sig-name descname"><span class="n"><span class="pre">JSON_OBJ_DESCR_OBJ_ARRAY_NAMED</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">struct_</span></span>, <span class="n"><span class="pre">json_field_name_</span></span>, <span class="n"><span class="pre">struct_field_name_</span></span>, <span class="n"><span class="pre">max_len_</span></span>, <span class="n"><span class="pre">len_field_</span></span>, <span class="n"><span class="pre">elem_descr_</span></span>, <span class="n"><span class="pre">elem_descr_len_</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.JSON_OBJ_DESCR_OBJ_ARRAY_NAMED" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Variant of JSON_OBJ_DESCR_OBJ_ARRAY that can be used when the structure and JSON field names differ. </p>
<p>This is useful when the JSON field is not a valid C identifier.</p>
<p>
Here’s an example of use: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">struct</span> <span class="n">person_height</span> <span class="p">{</span>
     <span class="n">const</span> <span class="n">char</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>
     <span class="nb">int</span> <span class="n">height</span><span class="p">;</span>
 <span class="p">};</span>

 <span class="n">struct</span> <span class="n">people_heights</span> <span class="p">{</span>
     <span class="n">struct</span> <span class="n">person_height</span> <span class="n">heights</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
     <span class="n">size_t</span> <span class="n">heights_len</span><span class="p">;</span>
 <span class="p">};</span>

 <span class="n">struct</span> <span class="n">json_obj_descr</span> <span class="n">person_height_descr</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">JSON_OBJ_DESCR_PRIM</span><span class="p">(</span><span class="n">struct</span> <span class="n">person_height</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">JSON_TOK_STRING</span><span class="p">),</span>
      <span class="n">JSON_OBJ_DESCR_PRIM</span><span class="p">(</span><span class="n">struct</span> <span class="n">person_height</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">JSON_TOK_NUMBER</span><span class="p">),</span>
 <span class="p">};</span>

 <span class="n">struct</span> <span class="n">json_obj_descr</span> <span class="n">array</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">JSON_OBJ_DESCR_OBJ_ARRAY_NAMED</span><span class="p">(</span><span class="n">struct</span> <span class="n">people_heights</span><span class="p">,</span>
                                     <span class="s2">&quot;people-heights&quot;</span><span class="p">,</span> <span class="n">heights</span><span class="p">,</span>
                                     <span class="mi">10</span><span class="p">,</span> <span class="n">heights_len</span><span class="p">,</span>
                                     <span class="n">person_height_descr</span><span class="p">,</span>
                                     <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">person_height_descr</span><span class="p">)),</span>
 <span class="p">};</span>
</pre></div>
</div>
 </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>struct_</strong> – Struct packing the values </p></li>
<li><p><strong>json_field_name_</strong> – String, field name of the array in JSON strings </p></li>
<li><p><strong>struct_field_name_</strong> – Field name in the struct containing the array </p></li>
<li><p><strong>max_len_</strong> – Maximum number of elements in the array </p></li>
<li><p><strong>len_field_</strong> – Field name in the struct for the number of elements in the array </p></li>
<li><p><strong>elem_descr_</strong> – Element descriptor, pointer to a descriptor array </p></li>
<li><p><strong>elem_descr_len_</strong> – Number of elements in elem_descr_</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-typedefs">Typedefs</p>
<dl class="c type">
<dt class="sig sig-object c" id="c.json_append_bytes_t">
<span class="target" id="group__json_1gacb409ebe9c59789a5d9aca02c6c94674"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">json_append_bytes_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">bytes</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">len</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.json_append_bytes_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Function pointer type to append bytes to a buffer while encoding JSON data. </p>
<dl class="field-list simple">
<dt class="field-odd">Param bytes</dt>
<dd class="field-odd"><p>Contents to write to the output </p>
</dd>
<dt class="field-even">Param len</dt>
<dd class="field-even"><p>Number of bytes to append to output </p>
</dd>
<dt class="field-odd">Param data</dt>
<dd class="field-odd"><p>User-provided pointer</p>
</dd>
<dt class="field-even">Return</dt>
<dd class="field-even"><p>This callback function should return a negative number on error (which will be propagated to the return value of <a class="reference internal" href="#group__json_1gafec772f687a0280f5211139bd019e582"><span class="std std-ref">json_obj_encode()</span></a>), or 0 on success. </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-enums">Enums</p>
<dl class="c enum">
<dt class="sig sig-object c" id="c.json_tokens">
<span class="target" id="group__json_1ga18a137ac5e2998d375540298670797c4"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">json_tokens</span></span></span><a class="headerlink" href="#c.json_tokens" title="Permalink to this definition">¶</a><br /></dt>
<dd><p><em>Values:</em></p>
<dl class="c enumerator">
<dt class="sig sig-object c" id="c.json_tokens.JSON_TOK_NONE">
<span class="target" id="group__json_1gga18a137ac5e2998d375540298670797c4a926d6b0a5458be2e707d51f0b25dbe77"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">JSON_TOK_NONE</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="sc"><span class="pre">'_'</span></span><a class="headerlink" href="#c.json_tokens.JSON_TOK_NONE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.json_tokens.JSON_TOK_OBJECT_START">
<span class="target" id="group__json_1gga18a137ac5e2998d375540298670797c4a81e303d23da0b3d8504cc4a7ee7d52e8"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">JSON_TOK_OBJECT_START</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="sc"><span class="pre">'{'</span></span><a class="headerlink" href="#c.json_tokens.JSON_TOK_OBJECT_START" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.json_tokens.JSON_TOK_OBJECT_END">
<span class="target" id="group__json_1gga18a137ac5e2998d375540298670797c4a835bc516b25eb0619b3f1a52f1ebc911"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">JSON_TOK_OBJECT_END</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="sc"><span class="pre">'}'</span></span><a class="headerlink" href="#c.json_tokens.JSON_TOK_OBJECT_END" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.json_tokens.JSON_TOK_LIST_START">
<span class="target" id="group__json_1gga18a137ac5e2998d375540298670797c4a8f9beceabf104da239f713e23b91d76b"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">JSON_TOK_LIST_START</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="sc"><span class="pre">'['</span></span><a class="headerlink" href="#c.json_tokens.JSON_TOK_LIST_START" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.json_tokens.JSON_TOK_ARRAY_START">
<span class="target" id="group__json_1gga18a137ac5e2998d375540298670797c4a9856446d3a2aa3155266957b8b1371cd"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">JSON_TOK_ARRAY_START</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="sc"><span class="pre">'['</span></span><a class="headerlink" href="#c.json_tokens.JSON_TOK_ARRAY_START" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.json_tokens.JSON_TOK_LIST_END">
<span class="target" id="group__json_1gga18a137ac5e2998d375540298670797c4a5e90a7b034a4af48a1b90fad7675a88d"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">JSON_TOK_LIST_END</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="sc"><span class="pre">']'</span></span><a class="headerlink" href="#c.json_tokens.JSON_TOK_LIST_END" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.json_tokens.JSON_TOK_ARRAY_END">
<span class="target" id="group__json_1gga18a137ac5e2998d375540298670797c4a2483f21d814abcd08b5253e55aef70c9"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">JSON_TOK_ARRAY_END</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="sc"><span class="pre">']'</span></span><a class="headerlink" href="#c.json_tokens.JSON_TOK_ARRAY_END" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.json_tokens.JSON_TOK_STRING">
<span class="target" id="group__json_1gga18a137ac5e2998d375540298670797c4ab145f07a93c4fdcf60c9052fbd9a7afc"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">JSON_TOK_STRING</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="sc"><span class="pre">'&quot;'</span></span><a class="headerlink" href="#c.json_tokens.JSON_TOK_STRING" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.json_tokens.JSON_TOK_COLON">
<span class="target" id="group__json_1gga18a137ac5e2998d375540298670797c4a4873e5c0c6344323d5d6af158952ca36"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">JSON_TOK_COLON</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="sc"><span class="pre">':'</span></span><a class="headerlink" href="#c.json_tokens.JSON_TOK_COLON" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.json_tokens.JSON_TOK_COMMA">
<span class="target" id="group__json_1gga18a137ac5e2998d375540298670797c4a736325745f9521f38a68962775e76a50"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">JSON_TOK_COMMA</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="sc"><span class="pre">','</span></span><a class="headerlink" href="#c.json_tokens.JSON_TOK_COMMA" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.json_tokens.JSON_TOK_NUMBER">
<span class="target" id="group__json_1gga18a137ac5e2998d375540298670797c4ae25f16ae591eb17d4074e6dcc2f1e62c"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">JSON_TOK_NUMBER</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="sc"><span class="pre">'0'</span></span><a class="headerlink" href="#c.json_tokens.JSON_TOK_NUMBER" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.json_tokens.JSON_TOK_TRUE">
<span class="target" id="group__json_1gga18a137ac5e2998d375540298670797c4a87ffb12e4d174bb4427d9a72eabca7e3"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">JSON_TOK_TRUE</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="sc"><span class="pre">'t'</span></span><a class="headerlink" href="#c.json_tokens.JSON_TOK_TRUE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.json_tokens.JSON_TOK_FALSE">
<span class="target" id="group__json_1gga18a137ac5e2998d375540298670797c4a8df1b1d0061d7e289f94bae1df35baa7"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">JSON_TOK_FALSE</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="sc"><span class="pre">'f'</span></span><a class="headerlink" href="#c.json_tokens.JSON_TOK_FALSE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.json_tokens.JSON_TOK_NULL">
<span class="target" id="group__json_1gga18a137ac5e2998d375540298670797c4a93de1b7e780ac22744c97e922de3b35e"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">JSON_TOK_NULL</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="sc"><span class="pre">'n'</span></span><a class="headerlink" href="#c.json_tokens.JSON_TOK_NULL" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.json_tokens.JSON_TOK_ERROR">
<span class="target" id="group__json_1gga18a137ac5e2998d375540298670797c4afe9c51f453d7dd02504071330a030e9e"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">JSON_TOK_ERROR</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="sc"><span class="pre">'!'</span></span><a class="headerlink" href="#c.json_tokens.JSON_TOK_ERROR" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.json_tokens.JSON_TOK_EOF">
<span class="target" id="group__json_1gga18a137ac5e2998d375540298670797c4ad970b7d8553296bf4ed03c831cb6f604"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">JSON_TOK_EOF</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="sc"><span class="pre">'\0'</span></span><a class="headerlink" href="#c.json_tokens.JSON_TOK_EOF" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.json_obj_parse">
<span class="target" id="group__json_1ga9aa97a94e7e91a5d818c20b27059b6cd"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">json_obj_parse</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">json</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">len</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.json_obj_descr" title="json_obj_descr"><span class="n"><span class="pre">json_obj_descr</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">descr</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">descr_len</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">val</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.json_obj_parse" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Parses the JSON-encoded object pointed to by <em>json</em>, with size <em>len</em>, according to the descriptor pointed to by <em>descr</em>. Values are stored in a struct pointed to by <em>val</em>. Set up the descriptor like this: </p>
<p>struct s { int foo; char *bar; } struct <a class="reference internal" href="#structjson__obj__descr"><span class="std std-ref">json_obj_descr</span></a> descr[] = { <a class="reference internal" href="#group__json_1ga1ed917f5a247ca33f2778afe62ff1a88"><span class="std std-ref">JSON_OBJ_DESCR_PRIM(struct s, foo, JSON_TOK_NUMBER)</span></a>, <a class="reference internal" href="#group__json_1ga1ed917f5a247ca33f2778afe62ff1a88"><span class="std std-ref">JSON_OBJ_DESCR_PRIM(struct s, bar, JSON_TOK_STRING)</span></a>, };</p>
<p>Since this parser is designed for machine-to-machine communications, some liberties were taken to simplify the design: (1) strings are not unescaped (but only valid escape sequences are accepted); (2) no UTF-8 validation is performed; and (3) only integer numbers are supported (no strtod() in the minimal libc).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json</strong> – Pointer to JSON-encoded value to be parsed </p></li>
<li><p><strong>len</strong> – Length of JSON-encoded value </p></li>
<li><p><strong>descr</strong> – Pointer to the descriptor array </p></li>
<li><p><strong>descr_len</strong> – Number of elements in the descriptor array. Must be less than 31 due to implementation detail reasons (if more fields are necessary, use two descriptors) </p></li>
<li><p><strong>val</strong> – Pointer to the struct to hold the decoded values</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>&lt; 0 if error, bitmap of decoded fields on success (bit 0 is set if first field in the descriptor has been properly decoded, etc). </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.json_arr_parse">
<span class="target" id="group__json_1gab4e6ad4a040c271d74eaa313c580a739"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">json_arr_parse</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">json</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">len</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.json_obj_descr" title="json_obj_descr"><span class="n"><span class="pre">json_obj_descr</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">descr</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">val</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.json_arr_parse" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Parses the JSON-encoded array pointed to by <em>json</em>, with size <em>len</em>, according to the descriptor pointed to by <em>descr</em>. Values are stored in a struct pointed to by <em>val</em>. Set up the descriptor like this: </p>
<p>struct s { int foo; char *bar; } struct <a class="reference internal" href="#structjson__obj__descr"><span class="std std-ref">json_obj_descr</span></a> descr[] = { <a class="reference internal" href="#group__json_1ga1ed917f5a247ca33f2778afe62ff1a88"><span class="std std-ref">JSON_OBJ_DESCR_PRIM(struct s, foo, JSON_TOK_NUMBER)</span></a>, <a class="reference internal" href="#group__json_1ga1ed917f5a247ca33f2778afe62ff1a88"><span class="std std-ref">JSON_OBJ_DESCR_PRIM(struct s, bar, JSON_TOK_STRING)</span></a>, }; struct a { struct s baz[10]; size_t count; } struct <a class="reference internal" href="#structjson__obj__descr"><span class="std std-ref">json_obj_descr</span></a> array[] = { JSON_OBJ_DESCR_OBJ_ARRAY(struct a, baz, 10, count, descr, <a class="reference internal" href="../util/index.html#group__sys-util_1ga70c57aae3eb654e205459b4362c8089a"><span class="std std-ref">ARRAY_SIZE(descr)</span></a>), };</p>
<p>Since this parser is designed for machine-to-machine communications, some liberties were taken to simplify the design: (1) strings are not unescaped (but only valid escape sequences are accepted); (2) no UTF-8 validation is performed; and (3) only integer numbers are supported (no strtod() in the minimal libc).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>json</strong> – Pointer to JSON-encoded array to be parsed </p></li>
<li><p><strong>len</strong> – Length of JSON-encoded array </p></li>
<li><p><strong>descr</strong> – Pointer to the descriptor array </p></li>
<li><p><strong>val</strong> – Pointer to the struct to hold the decoded values</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 if array has been successfully parsed. A negative value indicates an error (as defined on errno.h). </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.json_escape">
<span class="target" id="group__json_1ga43ee6d1fbd3fa8fb2ae052844b465dda"></span><span class="n"><span class="pre">ssize_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">json_escape</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">str</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">len</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">buf_size</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.json_escape" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Escapes the string so it can be used to encode JSON objects. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>str</strong> – The string to escape; the escape string is stored the buffer pointed to by this parameter </p></li>
<li><p><strong>len</strong> – Points to a size_t containing the size before and after the escaping process </p></li>
<li><p><strong>buf_size</strong> – The size of buffer str points to</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 if string has been escaped properly, or -ENOMEM if there was not enough space to escape the buffer </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.json_calc_escaped_len">
<span class="target" id="group__json_1ga5ef155a3a6444801592badd6a092734c"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">json_calc_escaped_len</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">str</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.json_calc_escaped_len" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Calculates the JSON-escaped string length. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>str</strong> – The string to analyze </p></li>
<li><p><strong>len</strong> – String size</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The length str would have if it were escaped </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.json_calc_encoded_len">
<span class="target" id="group__json_1ga41e6e90beef8bae12fca1de2584145bb"></span><span class="n"><span class="pre">ssize_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">json_calc_encoded_len</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.json_obj_descr" title="json_obj_descr"><span class="n"><span class="pre">json_obj_descr</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">descr</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">descr_len</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">val</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.json_calc_encoded_len" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Calculates the string length to fully encode an object. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>descr</strong> – Pointer to the descriptor array </p></li>
<li><p><strong>descr_len</strong> – Number of elements in the descriptor array </p></li>
<li><p><strong>val</strong> – Struct holding the values</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Number of bytes necessary to encode the values if &gt;0, an error code is returned. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.json_obj_encode_buf">
<span class="target" id="group__json_1gab758ad32cfb6369f4967a6842ac63245"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">json_obj_encode_buf</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.json_obj_descr" title="json_obj_descr"><span class="n"><span class="pre">json_obj_descr</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">descr</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">descr_len</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">val</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">buf_size</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.json_obj_encode_buf" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Encodes an object in a contiguous memory location. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>descr</strong> – Pointer to the descriptor array </p></li>
<li><p><strong>descr_len</strong> – Number of elements in the descriptor array </p></li>
<li><p><strong>val</strong> – Struct holding the values </p></li>
<li><p><strong>buffer</strong> – Buffer to store the JSON data </p></li>
<li><p><strong>buf_size</strong> – Size of buffer, in bytes, with space for the terminating NUL character</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 if object has been successfully encoded. A negative value indicates an error (as defined on errno.h). </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.json_arr_encode_buf">
<span class="target" id="group__json_1gafd27bbcb898dc902cf1dadd3369cf923"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">json_arr_encode_buf</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.json_obj_descr" title="json_obj_descr"><span class="n"><span class="pre">json_obj_descr</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">descr</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">val</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">buf_size</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.json_arr_encode_buf" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Encodes an array in a contiguous memory location. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>descr</strong> – Pointer to the descriptor array </p></li>
<li><p><strong>val</strong> – Struct holding the values </p></li>
<li><p><strong>buffer</strong> – Buffer to store the JSON data </p></li>
<li><p><strong>buf_size</strong> – Size of buffer, in bytes, with space for the terminating NUL character</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 if object has been successfully encoded. A negative value indicates an error (as defined on errno.h). </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.json_obj_encode">
<span class="target" id="group__json_1gafec772f687a0280f5211139bd019e582"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">json_obj_encode</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.json_obj_descr" title="json_obj_descr"><span class="n"><span class="pre">json_obj_descr</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">descr</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">descr_len</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">val</span></span>, <a class="reference internal" href="#c.json_append_bytes_t" title="json_append_bytes_t"><span class="n"><span class="pre">json_append_bytes_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">append_bytes</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.json_obj_encode" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Encodes an object using an arbitrary writer function. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>descr</strong> – Pointer to the descriptor array </p></li>
<li><p><strong>descr_len</strong> – Number of elements in the descriptor array </p></li>
<li><p><strong>val</strong> – Struct holding the values </p></li>
<li><p><strong>append_bytes</strong> – Function to append bytes to the output </p></li>
<li><p><strong>data</strong> – Data pointer to be passed to the append_bytes callback function.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 if object has been successfully encoded. A negative value indicates an error. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.json_arr_encode">
<span class="target" id="group__json_1ga4ffccdc602ab98d489499bf6fa4fa6c5"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">json_arr_encode</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.json_obj_descr" title="json_obj_descr"><span class="n"><span class="pre">json_obj_descr</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">descr</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">val</span></span>, <a class="reference internal" href="#c.json_append_bytes_t" title="json_append_bytes_t"><span class="n"><span class="pre">json_append_bytes_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">append_bytes</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.json_arr_encode" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Encodes an array using an arbitrary writer function. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>descr</strong> – Pointer to the descriptor array </p></li>
<li><p><strong>val</strong> – Struct holding the values </p></li>
<li><p><strong>append_bytes</strong> – Function to append bytes to the output </p></li>
<li><p><strong>data</strong> – Data pointer to be passed to the append_bytes callback function.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 if object has been successfully encoded. A negative value indicates an error. </p>
</dd>
</dl>
</dd></dl>

</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.json_obj_descr">
<span class="target" id="structjson__obj__descr"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">json_obj_descr</span></span></span><a class="headerlink" href="#c.json_obj_descr" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;json.h&gt;</em></div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="jwt">
<h3>JWT<a class="headerlink" href="#jwt" title="Permalink to this headline">¶</a></h3>
<p>JSON Web Tokens (JWT) are an open, industry standard [RFC
7519](<a class="reference external" href="https://tools.ietf.org/html/rfc7519">https://tools.ietf.org/html/rfc7519</a>) method for representing
claims securely between two parties.  Although JWT is fairly flexible,
this API is limited to creating the simplistic tokens needed to
authenticate with the Google Core IoT infrastructure.</p>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__jwt"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">jwt</span></span></dt>
<dd><p>JSON Web Token (JWT) </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.jwt_init_builder">
<span class="target" id="group__jwt_1gab10ee40ee3c0b3eea98051c2acbb8a75"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">jwt_init_builder</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.jwt_builder" title="jwt_builder"><span class="n"><span class="pre">jwt_builder</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">builder</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">buffer</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">buffer_size</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.jwt_init_builder" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Initialize the JWT builder. </p>
<p>Initialize the given JWT builder for the creation of a fresh token. The buffer size should at least be as long as JWT_BUILDER_MAX_SIZE returns.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>builder</strong> – The builder to initialize. </p></li>
<li><p><strong>buffer</strong> – The buffer to write the token to. </p></li>
<li><p><strong>buffer_size</strong> – The size of this buffer. The token will be NULL terminated, which needs to be allowed for in this size.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>0</strong> – Success </p></li>
<li><p><strong>-ENOSPC</strong> – Buffer is insufficient to initialize </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.jwt_add_payload">
<span class="target" id="group__jwt_1ga209dc2bdbaf72b4c9d11be02e0ffe479"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">jwt_add_payload</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.jwt_builder" title="jwt_builder"><span class="n"><span class="pre">jwt_builder</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">builder</span></span>, <span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="n"><span class="pre">exp</span></span>, <span class="n"><span class="pre">int32_t</span></span><span class="w"> </span><span class="n"><span class="pre">iat</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">aud</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.jwt_add_payload" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>add JWT primary payload. </p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.jwt_sign">
<span class="target" id="group__jwt_1gaa000189c83e9b9113f401cd7d523cefe"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">jwt_sign</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.jwt_builder" title="jwt_builder"><span class="n"><span class="pre">jwt_builder</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">builder</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">der_key</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">der_key_len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.jwt_sign" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Sign the JWT token. </p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.jwt_payload_len">
<span class="target" id="group__jwt_1gaab49bf586392b0687aff97a27238fe85"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">jwt_payload_len</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.jwt_builder" title="jwt_builder"><span class="n"><span class="pre">jwt_builder</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">builder</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.jwt_payload_len" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.jwt_builder">
<span class="target" id="structjwt__builder"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">jwt_builder</span></span></span><a class="headerlink" href="#c.jwt_builder" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;jwt.h&gt;</em></div>
<p>JWT data tracking. </p>
<p>JSON Web Tokens contain several sections, each encoded in base-64. This structure tracks the token as it is being built, including limits on the amount of available space. It should be initialized with jwt_init(). </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.jwt_builder.base">
<span class="target" id="structjwt__builder_1a23a0aa512e5bc66722b6d7a8cf20aa95"></span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">base</span></span></span><a class="headerlink" href="#c.jwt_builder.base" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The base of the buffer we are writing to. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.jwt_builder.buf">
<span class="target" id="structjwt__builder_1a74a3d3e645f8b438bcdf12abdf0aabf7"></span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">buf</span></span></span><a class="headerlink" href="#c.jwt_builder.buf" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The place in this buffer where we are currently writing. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.jwt_builder.len">
<span class="target" id="structjwt__builder_1a8fcc85d6704b63cd773397a5a4d9774d"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">len</span></span></span><a class="headerlink" href="#c.jwt_builder.len" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The length remaining to write. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.jwt_builder.overflowed">
<span class="target" id="structjwt__builder_1af53cb40609f623b95ff68d3c66a387ce"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">overflowed</span></span></span><a class="headerlink" href="#c.jwt_builder.overflowed" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Flag that is set if we try to write past the end of the buffer. If set, the token is not valid. </p>
</dd></dl>

</div>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


           </div>
          </div>

          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../copyright.html">Copyright</a> 2015-2022 Zephyr Project members and individual contributors.
      <span class="lastupdated">Last updated on Mar 05, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
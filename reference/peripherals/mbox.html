<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MBOX &mdash; Zephyr Project Documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script type="module" src="../../_static/js/dark-mode-toggle.min.mjs"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-831873-47"></script>
        <script src="../../_static/js/ga-tracker.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="Pinmux" href="pinmux.html" />
    <link rel="prev" title="LED" href="led.html" />
  <meta name="color-scheme" content="dark light">
  
  <link rel="stylesheet" href="../../_static/css/light.css" type="text/css" media="(prefers-color-scheme: light)"/>
  <link rel="stylesheet" href="../../_static/css/dark.css" type="text/css" media="(prefers-color-scheme: dark)"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html">
            <img src="../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.0-rc3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Zephyr Project</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Release Versions</dt>
        
          <dd><a href="/">latest</a></dd>
        
          <dd><a href="/2.7.0/">2.7.0</a></dd>
        
          <dd><a href="/2.6.0/">2.6.0</a></dd>
        
          <dd><a href="/2.5.0/">2.5.0</a></dd>
        
          <dd><a href="/2.4.0/">2.4.0</a></dd>
        
          <dd><a href="/2.3.0/">2.3.0</a></dd>
        
          <dd><a href="/1.14.1/">1.14.1</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="/latest/zephyr.pdf">PDF</a></dd>
      </dl>
      <dl>
        <dt>zephyrproject.org Links</dt>
          <dd>
            <a href="https://www.zephyrproject.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/sdk-ng/releases">SDK</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/zephyr/releases">Releases</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development_process/index.html">Development and Contribution Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/build/index.html">Build and Configuration Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../application/index.html">Application Development</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api/index.html">API Status and Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../audio/index.html">Audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../misc/notify.html">Asynchronous Notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bluetooth/index.html">Bluetooth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canbus/index.html">Controller Area Network (CAN)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../crypto/index.html">Crypto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devicetree/index.html">Devicetree</a></li>
<li class="toctree-l2"><a class="reference internal" href="../drivers/index.html">Device Driver Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../display/index.html">Display Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edac/index.html">Error Detection And Correction (EDAC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../file_system/index.html">File Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iterable_sections/index.html">Iterable Sections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../misc/formatted_output.html">Formatted Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kernel/index.html">Kernel Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libc/index.html">C standard library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging/index.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../memory_management/index.html">Memory Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../misc/index.html">Miscellaneous</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_structures/index.html">Data Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modbus/index.html">Modbus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../networking/index.html">Networking</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Peripherals</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="adc.html">ADC</a></li>
<li class="toctree-l3"><a class="reference internal" href="counter.html">Counter</a></li>
<li class="toctree-l3"><a class="reference internal" href="clock_control.html">Clock Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="dac.html">DAC</a></li>
<li class="toctree-l3"><a class="reference internal" href="dma.html">DMA</a></li>
<li class="toctree-l3"><a class="reference internal" href="ec_host_cmd_periph.html">EC Host Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="eeprom.html">EEPROM</a></li>
<li class="toctree-l3"><a class="reference internal" href="entropy.html">Entropy</a></li>
<li class="toctree-l3"><a class="reference internal" href="flash.html">Flash</a></li>
<li class="toctree-l3"><a class="reference internal" href="gna.html">GNA</a></li>
<li class="toctree-l3"><a class="reference internal" href="gpio.html">GPIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="hwinfo.html">Hardware Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="i2c_eeprom_slave.html">I2C EEPROM Slave</a></li>
<li class="toctree-l3"><a class="reference internal" href="i2c.html">I2C</a></li>
<li class="toctree-l3"><a class="reference internal" href="ipm.html">IPM</a></li>
<li class="toctree-l3"><a class="reference internal" href="kscan.html">KSCAN</a></li>
<li class="toctree-l3"><a class="reference internal" href="led.html">LED</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">MBOX</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-reference">API Reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="pinmux.html">Pinmux</a></li>
<li class="toctree-l3"><a class="reference internal" href="pwm.html">PWM</a></li>
<li class="toctree-l3"><a class="reference internal" href="ps2.html">PS/2</a></li>
<li class="toctree-l3"><a class="reference internal" href="peci.html">PECI</a></li>
<li class="toctree-l3"><a class="reference internal" href="regulators.html">Regulators</a></li>
<li class="toctree-l3"><a class="reference internal" href="rtc.html">RTC</a></li>
<li class="toctree-l3"><a class="reference internal" href="sensor.html">Sensors</a></li>
<li class="toctree-l3"><a class="reference internal" href="spi.html">SPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="uart.html">UART</a></li>
<li class="toctree-l3"><a class="reference internal" href="mdio.html">MDIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="watchdog.html">Watchdog</a></li>
<li class="toctree-l3"><a class="reference internal" href="video.html">Video</a></li>
<li class="toctree-l3"><a class="reference internal" href="espi.html">eSPI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../pinctrl/index.html">Pin Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pm/index.html">Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../random/index.html">Random Number Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../resource_management/index.html">Resource Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/index.html">Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/index.html">Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../task_wdt/index.html">Task Watchdog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../misc/timeutil.html">Time Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usb/index.html">USB device support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usermode/index.html">User Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../util/index.html">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../settings/index.html">Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../timing_functions/index.html">Executing Time Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../virtualization/index.html">Virtualization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/index.html">User and Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../samples/index.html">Samples and Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../boards/index.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/index.html">Release Notes</a></li>
</ul>

  
  <div class="toctree-wrapper compound">
    <p class="caption"><span class="caption-text">Reference</span></p>
    <ul>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/doxygen/html/index.html">API</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/kconfig/index.html">Kconfig Options</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/devicetree/bindings.html">Devicetree Bindings</a>
      </li>
      
    </ul>
  </div>
  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Zephyr Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Docs / Latest -->
  
  

  <li><a href="../../index.html">Docs / Latest</a> &raquo;</li>
  
     <li><a href="../index.html">API Reference</a> &raquo;</li>
  
     <li><a href="index.html">Peripherals</a> &raquo;</li>
  
  <li>MBOX</li>


  <li class="wy-breadcrumbs-aside">
    <dark-mode-toggle id="dark-mode-toggle" appearance="toggle" permanent="true"/>
  </li>
  <li class="wy-breadcrumbs-aside">
      
      
        <a href="https://github.com/zephyrproject-rtos/zephyr/blob/main/doc/reference/peripherals/mbox.rst" class="fa fa-github"> Open on GitHub</a>
      
    
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="wy-alert wy-alert-danger">
     This is the documentation for the latest (main) development branch of
     Zephyr. If you are looking for the documentation of previous releases, use
     the drop-down menu on the left and select the desired version.
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="mbox">
<span id="mbox-api"></span><h1>MBOX<a class="headerlink" href="#mbox" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>An MBOX device is a peripheral capable of passing signals (and data depending
on the peripheral) between CPUs and clusters in the system. Each MBOX instance
is providing one or more channels, each one targeting one other CPU cluster
(multiple channels can target the same cluster).</p>
</div>
<div class="section" id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h2>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__mbox__interface"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">mbox_interface</span></span></dt>
<dd><p>MBOX Interface. </p>
<p><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>                     <span class="n">CPU</span> <span class="c1">#1        |</span>
<span class="o">+----------+</span>                       <span class="o">|</span>        <span class="o">+----------+</span>
<span class="o">|</span>          <span class="o">+---</span><span class="n">TX9</span><span class="o">----+</span>   <span class="o">+--------+--</span><span class="n">RX8</span><span class="o">---+</span>          <span class="o">|</span>
<span class="o">|</span>  <span class="n">dev</span> <span class="n">A</span>   <span class="o">|</span>          <span class="o">|</span>   <span class="o">|</span>        <span class="o">|</span>        <span class="o">|</span>  <span class="n">CPU</span> <span class="c1">#2  |</span>
<span class="o">|</span>          <span class="o">&lt;---</span><span class="n">RX8</span><span class="o">--+</span> <span class="o">|</span>   <span class="o">|</span> <span class="o">+------+--</span><span class="n">TX9</span><span class="o">---&gt;</span>          <span class="o">|</span>
<span class="o">+----------+</span>        <span class="o">|</span> <span class="o">|</span>   <span class="o">|</span> <span class="o">|</span>      <span class="o">|</span>        <span class="o">+----------+</span>
                 <span class="o">+--+-</span><span class="n">v</span><span class="o">---</span><span class="n">v</span><span class="o">-+--+</span>   <span class="o">|</span>
                 <span class="o">|</span>             <span class="o">|</span>   <span class="o">|</span>
                 <span class="o">|</span>   <span class="n">MBOX</span> <span class="n">dev</span>  <span class="o">|</span>   <span class="o">|</span>
                 <span class="o">|</span>             <span class="o">|</span>   <span class="o">|</span>
                 <span class="o">+--+-^---^--+-+</span>   <span class="o">|</span>
<span class="o">+----------+</span>        <span class="o">|</span> <span class="o">|</span>   <span class="o">|</span>  <span class="o">|</span>     <span class="o">|</span>        <span class="o">+----------+</span>
<span class="o">|</span>          <span class="o">&lt;---</span><span class="n">RX2</span><span class="o">--+</span> <span class="o">|</span>   <span class="o">|</span>  <span class="o">+-----+--</span><span class="n">TX3</span><span class="o">---&gt;</span>          <span class="o">|</span>
<span class="o">|</span>  <span class="n">dev</span> <span class="n">B</span>   <span class="o">|</span>          <span class="o">|</span>   <span class="o">|</span>        <span class="o">|</span>        <span class="o">|</span>  <span class="n">CPU</span> <span class="c1">#3  |</span>
<span class="o">|</span>          <span class="o">+---</span><span class="n">TX3</span><span class="o">----+</span>   <span class="o">+--------+--</span><span class="n">RX2</span><span class="o">---+</span>          <span class="o">|</span>
<span class="o">+----------+</span>                       <span class="o">|</span>        <span class="o">+----------+</span>
                                   <span class="o">|</span>
</pre></div>
</div>
</p>
<p>An MBOX device is a peripheral capable of passing signals (and data depending on the peripheral) between CPUs and clusters in the system. Each MBOX instance is providing one or more channels, each one targeting one other CPU cluster (multiple channels can target the same cluster).</p>
<p>For example in the plot the device ‘dev A’ is using the TX channel 9 to signal (or send data to) the CPU #2 and it’s expecting data or signals on the RX channel 8. Thus it can send the message through the channel 9, and it can register a callback on the channel 8 of the MBOX device.</p>
<p>This API supports two modes: signalling mode and data transfer mode.</p>
<p>In signalling mode:<ul class="simple">
<li><p><a class="reference internal" href="#group__mbox__interface_1ga82d9def1b5c31c574d2114abcce2eb1f"><span class="std std-ref">mbox_mtu_get()</span></a> must return 0</p></li>
<li><p><a class="reference internal" href="#group__mbox__interface_1ga18828e5c28201ad838ed9ba7c0afabfe"><span class="std std-ref">mbox_send()</span></a> must have (msg == NULL)</p></li>
<li><p>the callback must be called with (data == NULL)</p></li>
</ul>
</p>
<p>In data transfer mode:<ul class="simple">
<li><p><a class="reference internal" href="#group__mbox__interface_1ga82d9def1b5c31c574d2114abcce2eb1f"><span class="std std-ref">mbox_mtu_get()</span></a> must return a (value != 0)</p></li>
<li><p><a class="reference internal" href="#group__mbox__interface_1ga18828e5c28201ad838ed9ba7c0afabfe"><span class="std std-ref">mbox_send()</span></a> must have (msg != NULL)</p></li>
<li><p>the callback must be called with (data != NULL)</p></li>
<li><p>The msg content must be the same between sender and receiver </p></li>
</ul>
</p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-defines">Defines</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.MBOX_DT_CHANNEL_GET">
<span class="target" id="group__mbox__interface_1ga9e02e3a523a63ff564ce2bb42c03aa1f"></span><span class="sig-name descname"><span class="n"><span class="pre">MBOX_DT_CHANNEL_GET</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">node_id</span></span>, <span class="n"><span class="pre">name</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MBOX_DT_CHANNEL_GET" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Structure initializer for <a class="reference internal" href="#structmbox__channel"><span class="std std-ref">mbox_channel</span></a> from devicetree. </p>
<p>This helper macro expands to a static initializer for a <code class="docutils literal notranslate"><a class="reference internal" href="#structmbox__channel"><span class="std std-ref"><span class="pre">mbox_channel</span></span></a></code> by reading the relevant device controller and channel number from the devicetree.</p>
<p>Example devicetree fragment: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mbox1</span><span class="p">:</span> <span class="n">mbox</span><span class="o">-</span><span class="n">controller</span><span class="o">@...</span> <span class="p">{</span> <span class="o">...</span> <span class="p">};</span>

<span class="n">n</span><span class="p">:</span> <span class="n">node</span> <span class="p">{</span>
        <span class="n">mboxes</span> <span class="o">=</span> <span class="o">&lt;&amp;</span><span class="n">mbox1</span> <span class="mi">8</span><span class="o">&gt;</span><span class="p">,</span>
                 <span class="o">&lt;&amp;</span><span class="n">mbox1</span> <span class="mi">9</span><span class="o">&gt;</span><span class="p">;</span>
        <span class="n">mbox</span><span class="o">-</span><span class="n">names</span> <span class="o">=</span> <span class="s2">&quot;tx&quot;</span><span class="p">,</span> <span class="s2">&quot;rx&quot;</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
 Example usage: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="n">struct</span> <span class="n">mbox_channel</span> <span class="n">channel</span> <span class="o">=</span> <span class="n">MBOX_DT_CHANNEL_GET</span><span class="p">(</span><span class="n">DT_NODELABEL</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">tx</span><span class="p">);</span>
</pre></div>
</div>
 </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node_id</strong> – Devicetree node identifier for the MBOX device </p></li>
<li><p><strong>name</strong> – lowercase-and-underscores name of the mboxes element </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.MBOX_DT_CTLR_BY_NAME">
<span class="target" id="group__mbox__interface_1gac232c8a5efbfc04dc35e7b09f4522dfc"></span><span class="sig-name descname"><span class="n"><span class="pre">MBOX_DT_CTLR_BY_NAME</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">node_id</span></span>, <span class="n"><span class="pre">name</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MBOX_DT_CTLR_BY_NAME" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the node identifier for the MBOX controller from a mboxes property by name. </p>
<p>Example devicetree fragment: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mbox1</span><span class="p">:</span> <span class="n">mbox</span><span class="o">-</span><span class="n">controller</span><span class="o">@...</span> <span class="p">{</span> <span class="o">...</span> <span class="p">};</span>

<span class="n">n</span><span class="p">:</span> <span class="n">node</span> <span class="p">{</span>
        <span class="n">mboxes</span> <span class="o">=</span> <span class="o">&lt;&amp;</span><span class="n">mbox1</span> <span class="mi">8</span><span class="o">&gt;</span><span class="p">,</span>
                 <span class="o">&lt;&amp;</span><span class="n">mbox1</span> <span class="mi">9</span><span class="o">&gt;</span><span class="p">;</span>
        <span class="n">mbox</span><span class="o">-</span><span class="n">names</span> <span class="o">=</span> <span class="s2">&quot;tx&quot;</span><span class="p">,</span> <span class="s2">&quot;rx&quot;</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
 Example usage: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MBOX_DT_CTLR_BY_NAME</span><span class="p">(</span><span class="n">DT_NODELABEL</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">tx</span><span class="p">)</span> <span class="o">//</span> <span class="n">DT_NODELABEL</span><span class="p">(</span><span class="n">mbox1</span><span class="p">)</span>
<span class="n">MBOX_DT_CTLR_BY_NAME</span><span class="p">(</span><span class="n">DT_NODELABEL</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">rx</span><span class="p">)</span> <span class="o">//</span> <span class="n">DT_NODELABEL</span><span class="p">(</span><span class="n">mbox1</span><span class="p">)</span>
</pre></div>
</div>
 <div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../devicetree/api.html#group__devicetree-generic-prop_1ga65c90d2d96255b8569c5b869b637c2fd"><span class="std std-ref">DT_PHANDLE_BY_NAME()</span></a> </p>
</div>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node_id</strong> – node identifier for a node with a mboxes property </p></li>
<li><p><strong>name</strong> – lowercase-and-underscores name of a mboxes element as defined by the node’s mbox-names property</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the node identifier for the MBOX controller in the named element</p>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.MBOX_DT_CHANNEL_ID_BY_NAME">
<span class="target" id="group__mbox__interface_1ga509da4cf8e02135a49a8369af1a65d79"></span><span class="sig-name descname"><span class="n"><span class="pre">MBOX_DT_CHANNEL_ID_BY_NAME</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">node_id</span></span>, <span class="n"><span class="pre">name</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MBOX_DT_CHANNEL_ID_BY_NAME" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get a MBOX channel value by name. </p>
<p>Example devicetree fragment: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mbox1</span><span class="p">:</span> <span class="n">mbox</span><span class="o">@...</span> <span class="p">{</span>
        <span class="c1">#mbox-cells = &lt;1&gt;;</span>
<span class="p">};</span>

<span class="n">n</span><span class="p">:</span> <span class="n">node</span> <span class="p">{</span>
    <span class="n">mboxes</span> <span class="o">=</span> <span class="o">&lt;&amp;</span><span class="n">mbox1</span> <span class="mi">1</span><span class="o">&gt;</span><span class="p">,</span>
             <span class="o">&lt;&amp;</span><span class="n">mbox1</span> <span class="mi">6</span><span class="o">&gt;</span><span class="p">;</span>
    <span class="n">mbox</span><span class="o">-</span><span class="n">names</span> <span class="o">=</span> <span class="s2">&quot;tx&quot;</span><span class="p">,</span> <span class="s2">&quot;rx&quot;</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
 Bindings fragment for the mbox compatible: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mbox</span><span class="o">-</span><span class="n">cells</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">channel</span>
</pre></div>
</div>
 Example usage: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MBOX_DT_CHANNEL_ID_BY_NAME</span><span class="p">(</span><span class="n">DT_NODELABEL</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">tx</span><span class="p">)</span> <span class="o">//</span> <span class="mi">1</span>
<span class="n">MBOX_DT_CHANNEL_ID_BY_NAME</span><span class="p">(</span><span class="n">DT_NODELABEL</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">rx</span><span class="p">)</span> <span class="o">//</span> <span class="mi">6</span>
</pre></div>
</div>
 <div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../devicetree/api.html#group__devicetree-generic-prop_1ga79cda6ca70cc1e27b034ad096d4f4401"><span class="std std-ref">DT_PHA_BY_NAME_OR()</span></a> </p>
</div>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node_id</strong> – node identifier for a node with a mboxes property </p></li>
<li><p><strong>name</strong> – lowercase-and-underscores name of a mboxes element as defined by the node’s mbox-names property</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the channel value in the specifier at the named element or 0 if no channels are supported</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-typedefs">Typedefs</p>
<dl class="c type">
<dt class="sig sig-object c" id="c.mbox_callback_t">
<span class="target" id="group__mbox__interface_1ga4cb393b04d8c3ee01f795bc98ddde2ae"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">mbox_callback_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../drivers/index.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">channel</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">user_data</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.mbox_msg" title="mbox_msg"><span class="n"><span class="pre">mbox_msg</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.mbox_callback_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Callback API for incoming MBOX messages. </p>
<p>These callbacks execute in interrupt context. Therefore, use only interrupt-safe APIS. Registration of callbacks is done via <em><a class="reference internal" href="#group__mbox__interface_1gad48e48c984e70348336a896bb2835c77"><span class="std std-ref">mbox_register_callback()</span></a></em> </p>
<p>The data parameter must be NULL in signalling mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Param dev</dt>
<dd class="field-odd"><p>Driver instance </p>
</dd>
<dt class="field-even">Param channel</dt>
<dd class="field-even"><p>Channel ID </p>
</dd>
<dt class="field-odd">Param user_data</dt>
<dd class="field-odd"><p>Pointer to some private data provided at registration time </p>
</dd>
<dt class="field-even">Param data</dt>
<dd class="field-even"><p>Message struct </p>
</dd>
</dl>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.mbox_send_t">
<span class="target" id="group__mbox__interface_1ga1a79bcdd1ed7612de9fbc72c5af35e3e"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">mbox_send_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../drivers/index.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">channel</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.mbox_msg" title="mbox_msg"><span class="n"><span class="pre">mbox_msg</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">msg</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.mbox_send_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Callback API to send MBOX messages. </p>
<p>See <em><a class="reference internal" href="#group__mbox__interface_1ga18828e5c28201ad838ed9ba7c0afabfe"><span class="std std-ref">mbox_send()</span></a></em> for function description</p>
<dl class="field-list simple">
<dt class="field-odd">Param dev</dt>
<dd class="field-odd"><p>Driver instance </p>
</dd>
<dt class="field-even">Param channel</dt>
<dd class="field-even"><p>Channel ID </p>
</dd>
<dt class="field-odd">Param msg</dt>
<dd class="field-odd"><p>Message struct</p>
</dd>
<dt class="field-even">Return</dt>
<dd class="field-even"><p>See return values for <em><a class="reference internal" href="#group__mbox__interface_1ga18828e5c28201ad838ed9ba7c0afabfe"><span class="std std-ref">mbox_send()</span></a></em> </p>
</dd>
</dl>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.mbox_mtu_get_t">
<span class="target" id="group__mbox__interface_1ga6c5390b649b1a510672c8c109f0f363c"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">mbox_mtu_get_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../drivers/index.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.mbox_mtu_get_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Callback API to get maximum data size. </p>
<p>See <em><a class="reference internal" href="#group__mbox__interface_1ga82d9def1b5c31c574d2114abcce2eb1f"><span class="std std-ref">mbox_mtu_get()</span></a></em> for argument definitions. </p>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.mbox_register_callback_t">
<span class="target" id="group__mbox__interface_1ga14a2af82968f9185f13d39bd709abcbb"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">mbox_register_callback_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../drivers/index.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">channel</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#c.mbox_callback_t" title="mbox_callback_t"><span class="n"><span class="pre">mbox_callback_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">cb</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">user_data</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.mbox_register_callback_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Callback API upon registration. </p>
<p>See <em><a class="reference internal" href="#group__mbox__interface_1gad48e48c984e70348336a896bb2835c77"><span class="std std-ref">mbox_register_callback()</span></a></em> for function description</p>
<dl class="field-list simple">
<dt class="field-odd">Param dev</dt>
<dd class="field-odd"><p>Driver instance </p>
</dd>
<dt class="field-even">Param channel</dt>
<dd class="field-even"><p>Channel ID </p>
</dd>
<dt class="field-odd">Param cb</dt>
<dd class="field-odd"><p>Callback function to execute on incoming message interrupts. </p>
</dd>
<dt class="field-even">Param user_data</dt>
<dd class="field-even"><p>Application-specific data pointer which will be passed to the callback function when executed.</p>
</dd>
<dt class="field-odd">Return</dt>
<dd class="field-odd"><p>See return values for <em><a class="reference internal" href="#group__mbox__interface_1gad48e48c984e70348336a896bb2835c77"><span class="std std-ref">mbox_register_callback()</span></a></em> </p>
</dd>
</dl>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.mbox_set_enabled_t">
<span class="target" id="group__mbox__interface_1ga85d77860581e68d036cccaf17981b1c9"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">mbox_set_enabled_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../drivers/index.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">channel</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n"><span class="pre">enable</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.mbox_set_enabled_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Callback API upon enablement of interrupts. </p>
<p>See <em><a class="reference internal" href="#group__mbox__interface_1ga563c6c0e2199b0608b2cd0606c46fc81"><span class="std std-ref">mbox_set_enabled()</span></a></em> for function description</p>
<dl class="field-list simple">
<dt class="field-odd">Param dev</dt>
<dd class="field-odd"><p>Driver instance </p>
</dd>
<dt class="field-even">Param channel</dt>
<dd class="field-even"><p>Channel ID </p>
</dd>
<dt class="field-odd">Param enable</dt>
<dd class="field-odd"><p>Set to 0 to disable and to nonzero to enable.</p>
</dd>
<dt class="field-even">Return</dt>
<dd class="field-even"><p>See return values for <em><a class="reference internal" href="#group__mbox__interface_1ga563c6c0e2199b0608b2cd0606c46fc81"><span class="std std-ref">mbox_set_enabled()</span></a></em> </p>
</dd>
</dl>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.mbox_max_channels_get_t">
<span class="target" id="group__mbox__interface_1gaa2ba0939cd872198dd8ff4fd348f195f"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">mbox_max_channels_get_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../drivers/index.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.mbox_max_channels_get_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Callback API to get maximum number of channels. </p>
<p>See <em><a class="reference internal" href="#group__mbox__interface_1gaf2f8adbd5e4f7f5972b2d34cfce68bdb"><span class="std std-ref">mbox_max_channels_get()</span></a></em> for argument definitions. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.mbox_init_channel">
<span class="target" id="group__mbox__interface_1ga70253c432c8064a2760731f1d237f2b7"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mbox_init_channel</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.mbox_channel" title="mbox_channel"><span class="n"><span class="pre">mbox_channel</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">channel</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../drivers/index.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">ch_id</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.mbox_init_channel" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Initialize a channel struct. </p>
<p>Initialize an <code class="docutils literal notranslate"><a class="reference internal" href="#structmbox__channel"><span class="std std-ref"><span class="pre">mbox_channel</span></span></a></code> passed by the user with a provided MBOX device and channel ID. This function is needed when the information about the device and the channel ID is not in the DT. In the DT case <a class="reference internal" href="#group__mbox__interface_1ga9e02e3a523a63ff564ce2bb42c03aa1f"><span class="std std-ref">MBOX_DT_CHANNEL_GET()</span></a> must be used instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>channel</strong> – Pointer to the channel struct </p></li>
<li><p><strong>dev</strong> – Driver instance </p></li>
<li><p><strong>ch_id</strong> – Channel ID </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.mbox_send">
<span class="target" id="group__mbox__interface_1ga18828e5c28201ad838ed9ba7c0afabfe"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mbox_send</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.mbox_channel" title="mbox_channel"><span class="n"><span class="pre">mbox_channel</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">channel</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.mbox_msg" title="mbox_msg"><span class="n"><span class="pre">mbox_msg</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">msg</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.mbox_send" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Try to send a message over the MBOX device. </p>
<p>Send a message over an <code class="docutils literal notranslate"><a class="reference internal" href="#structmbox__channel"><span class="std std-ref"><span class="pre">mbox_channel</span></span></a></code>. The msg parameter must be NULL when the driver is used for signalling.</p>
<p>If the msg parameter is not NULL, this data is expected to be delivered on the receiving side using the data parameter of the receiving callback.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>channel</strong> – Channel instance pointer </p></li>
<li><p><strong>msg</strong> – Pointer to the message struct</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>-EBUSY</strong> – If the remote hasn’t yet read the last data sent. </p></li>
<li><p><strong>-EMSGSIZE</strong> – If the supplied data size is unsupported by the driver. </p></li>
<li><p><strong>-EINVAL</strong> – If there was a bad parameter, such as: too-large channel descriptor or the device isn’t an outbound MBOX channel.</p></li>
<li><p><strong>0</strong> – On success, negative value on error. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.mbox_register_callback">
<span class="target" id="group__mbox__interface_1gad48e48c984e70348336a896bb2835c77"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mbox_register_callback</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.mbox_channel" title="mbox_channel"><span class="n"><span class="pre">mbox_channel</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">channel</span></span>, <a class="reference internal" href="#c.mbox_callback_t" title="mbox_callback_t"><span class="n"><span class="pre">mbox_callback_t</span></span></a><span class="w"> </span><span class="n"><span class="pre">cb</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">user_data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.mbox_register_callback" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Register a callback function on a channel for incoming messages. </p>
<p>This function doesn’t assume anything concerning the status of the interrupts. Use <em><a class="reference internal" href="#group__mbox__interface_1ga563c6c0e2199b0608b2cd0606c46fc81"><span class="std std-ref">mbox_set_enabled()</span></a></em> to enable or to disable the interrupts if needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>channel</strong> – Channel instance pointer. </p></li>
<li><p><strong>cb</strong> – Callback function to execute on incoming message interrupts. </p></li>
<li><p><strong>user_data</strong> – Application-specific data pointer which will be passed to the callback function when executed.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – On success, negative value on error. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.mbox_mtu_get">
<span class="target" id="group__mbox__interface_1ga82d9def1b5c31c574d2114abcce2eb1f"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mbox_mtu_get</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../drivers/index.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.mbox_mtu_get" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return the maximum number of bytes possible in an outbound message. </p>
<p>Returns the actual number of bytes that it is possible to send through an outgoing channel.</p>
<p>This number can be 0 when the driver only supports signalling or when on the receiving side the content and size of the message must be retrieved in an indirect way (i.e. probing some other peripheral, reading memory regions, etc…).</p>
<p>If this function returns 0, the msg parameter in <em><a class="reference internal" href="#group__mbox__interface_1ga18828e5c28201ad838ed9ba7c0afabfe"><span class="std std-ref">mbox_send()</span></a></em> is expected to be NULL.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dev</strong> – Driver instance pointer.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Maximum possible size of a message in bytes, 0 for signalling, negative value on error. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.mbox_set_enabled">
<span class="target" id="group__mbox__interface_1ga563c6c0e2199b0608b2cd0606c46fc81"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mbox_set_enabled</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.mbox_channel" title="mbox_channel"><span class="n"><span class="pre">mbox_channel</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">channel</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n"><span class="pre">enable</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.mbox_set_enabled" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Enable (disable) interrupts and callbacks for inbound channels. </p>
<p>Enable interrupt for the channel when the parameter ‘enable’ is set to true. Disable it otherwise.</p>
<p>Immediately after calling this function with ‘enable’ set to true, the channel is considered enabled and ready to receive signal and messages (even already pending), so the user must take care of installing a proper callback (if needed) using <em><a class="reference internal" href="#group__mbox__interface_1gad48e48c984e70348336a896bb2835c77"><span class="std std-ref">mbox_register_callback()</span></a></em> on the channel before enabling it. For this reason it is recommended that all the channels are disabled at probe time.</p>
<p>Enabling a channel for which there is no installed callback is considered undefined behavior (in general the driver must take care of gracefully handling spurious interrupts with no installed callback).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>channel</strong> – Channel instance pointer. </p></li>
<li><p><strong>enable</strong> – Set to 0 to disable and to nonzero to enable.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>0</strong> – On success. </p></li>
<li><p><strong>-EINVAL</strong> – If it isn’t an inbound channel. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.mbox_max_channels_get">
<span class="target" id="group__mbox__interface_1gaf2f8adbd5e4f7f5972b2d34cfce68bdb"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mbox_max_channels_get</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../drivers/index.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.mbox_max_channels_get" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return the maximum number of channels. </p>
<p>Return the maximum number of channels supported by the hardware.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dev</strong> – Driver instance pointer.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Maximum possible number of supported channels on success, negative value on error. </p>
</dd>
</dl>
</dd></dl>

</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.mbox_msg">
<span class="target" id="structmbox__msg"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mbox_msg</span></span></span><a class="headerlink" href="#c.mbox_msg" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;mbox.h&gt;</em></div>
<p>Message struct (to hold data and its size). </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.mbox_msg.data">
<span class="target" id="structmbox__msg_1aa9b02c7a3b1620ca2c6ffa42528cfe0c"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">data</span></span></span><a class="headerlink" href="#c.mbox_msg.data" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Pointer to the data sent in the message. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.mbox_msg.size">
<span class="target" id="structmbox__msg_1a9870d0667d97e4d4ab9ba985b75e1dc4"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">size</span></span></span><a class="headerlink" href="#c.mbox_msg.size" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Size of the data. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.mbox_channel">
<span class="target" id="structmbox__channel"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mbox_channel</span></span></span><a class="headerlink" href="#c.mbox_channel" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;mbox.h&gt;</em></div>
<p>Provides a type to hold an MBOX channel. </p>
<p>Struct type to hold an MBOX device pointer and the channel ID. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.mbox_channel.dev">
<span class="target" id="structmbox__channel_1a6fe03cc3209c832b295a2f7ff2ba7c63"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../drivers/index.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">dev</span></span></span><a class="headerlink" href="#c.mbox_channel.dev" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>MBOX device pointer. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.mbox_channel.id">
<span class="target" id="structmbox__channel_1a0b8104fdbeca9badb76d7779b6e6f8e4"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">id</span></span></span><a class="headerlink" href="#c.mbox_channel.id" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Channel ID. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.mbox_driver_api">
<span class="target" id="structmbox__driver__api"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mbox_driver_api</span></span></span><a class="headerlink" href="#c.mbox_driver_api" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;mbox.h&gt;</em></div>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
          </div>

          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../copyright.html">Copyright</a> 2015-2021 Zephyr Project members and individual contributors.
      <span class="lastupdated">Last updated on Feb 21, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
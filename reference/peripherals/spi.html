<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SPI &mdash; Zephyr Project Documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script type="module" src="../../_static/js/dark-mode-toggle.min.mjs"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-831873-47"></script>
        <script src="../../_static/js/ga-tracker.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="UART" href="uart.html" />
    <link rel="prev" title="Sensors" href="sensor.html" />
  <meta name="color-scheme" content="dark light">
  
  <link rel="stylesheet" href="../../_static/css/light.css" type="text/css" media="(prefers-color-scheme: light)"/>
  <link rel="stylesheet" href="../../_static/css/dark.css" type="text/css" media="(prefers-color-scheme: dark)"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html">
            <img src="../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.99
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Zephyr Project</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Release Versions</dt>
        
          <dd><a href="/">latest</a></dd>
        
          <dd><a href="/3.0.0/">3.0.0</a></dd>
        
          <dd><a href="/2.7.0/">2.7.0</a></dd>
        
          <dd><a href="/2.6.0/">2.6.0</a></dd>
        
          <dd><a href="/2.5.0/">2.5.0</a></dd>
        
          <dd><a href="/2.4.0/">2.4.0</a></dd>
        
          <dd><a href="/2.3.0/">2.3.0</a></dd>
        
          <dd><a href="/1.14.1/">1.14.1</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="/latest/zephyr.pdf">PDF</a></dd>
      </dl>
      <dl>
        <dt>zephyrproject.org Links</dt>
          <dd>
            <a href="https://www.zephyrproject.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/sdk-ng/releases">SDK</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/zephyr/releases">Releases</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development_process/index.html">Development and Contribution Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/build/index.html">Build and Configuration Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../application/index.html">Application Development</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api/index.html">API Status and Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../audio/index.html">Audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../misc/notify.html">Asynchronous Notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bluetooth/index.html">Bluetooth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canbus/index.html">Controller Area Network (CAN)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../crypto/index.html">Crypto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devicetree/index.html">Devicetree</a></li>
<li class="toctree-l2"><a class="reference internal" href="../drivers/index.html">Device Driver Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../display/index.html">Display Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edac/index.html">Error Detection And Correction (EDAC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../file_system/index.html">File Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iterable_sections/index.html">Iterable Sections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../misc/formatted_output.html">Formatted Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kernel/index.html">Kernel Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libc/index.html">C standard library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging/index.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../memory_management/index.html">Memory Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../misc/index.html">Miscellaneous</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_structures/index.html">Data Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modbus/index.html">Modbus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../networking/index.html">Networking</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Peripherals</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="adc.html">ADC</a></li>
<li class="toctree-l3"><a class="reference internal" href="counter.html">Counter</a></li>
<li class="toctree-l3"><a class="reference internal" href="clock_control.html">Clock Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="dac.html">DAC</a></li>
<li class="toctree-l3"><a class="reference internal" href="dma.html">DMA</a></li>
<li class="toctree-l3"><a class="reference internal" href="ec_host_cmd_periph.html">EC Host Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="eeprom.html">EEPROM</a></li>
<li class="toctree-l3"><a class="reference internal" href="entropy.html">Entropy</a></li>
<li class="toctree-l3"><a class="reference internal" href="flash.html">Flash</a></li>
<li class="toctree-l3"><a class="reference internal" href="gna.html">GNA</a></li>
<li class="toctree-l3"><a class="reference internal" href="gpio.html">GPIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="hwinfo.html">Hardware Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="i2c_eeprom_slave.html">I2C EEPROM Slave</a></li>
<li class="toctree-l3"><a class="reference internal" href="i2c.html">I2C</a></li>
<li class="toctree-l3"><a class="reference internal" href="ipm.html">IPM</a></li>
<li class="toctree-l3"><a class="reference internal" href="kscan.html">KSCAN</a></li>
<li class="toctree-l3"><a class="reference internal" href="led.html">LED</a></li>
<li class="toctree-l3"><a class="reference internal" href="mbox.html">MBOX</a></li>
<li class="toctree-l3"><a class="reference internal" href="pinmux.html">Pinmux</a></li>
<li class="toctree-l3"><a class="reference internal" href="pwm.html">PWM</a></li>
<li class="toctree-l3"><a class="reference internal" href="ps2.html">PS/2</a></li>
<li class="toctree-l3"><a class="reference internal" href="peci.html">PECI</a></li>
<li class="toctree-l3"><a class="reference internal" href="regulators.html">Regulators</a></li>
<li class="toctree-l3"><a class="reference internal" href="rtc.html">RTC</a></li>
<li class="toctree-l3"><a class="reference internal" href="sensor.html">Sensors</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">SPI</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-reference">API Reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="uart.html">UART</a></li>
<li class="toctree-l3"><a class="reference internal" href="mdio.html">MDIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="watchdog.html">Watchdog</a></li>
<li class="toctree-l3"><a class="reference internal" href="video.html">Video</a></li>
<li class="toctree-l3"><a class="reference internal" href="espi.html">eSPI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../pinctrl/index.html">Pin Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pm/index.html">Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../random/index.html">Random Number Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../resource_management/index.html">Resource Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/index.html">Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/index.html">Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../task_wdt/index.html">Task Watchdog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../misc/timeutil.html">Time Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usb/index.html">USB device support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usermode/index.html">User Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../util/index.html">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../settings/index.html">Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../timing_functions/index.html">Executing Time Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../virtualization/index.html">Virtualization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/index.html">User and Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../samples/index.html">Samples and Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../boards/index.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/index.html">Release Notes</a></li>
</ul>

  
  <div class="toctree-wrapper compound">
    <p class="caption"><span class="caption-text">Reference</span></p>
    <ul>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/doxygen/html/index.html">API</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/kconfig.html">Kconfig Options</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/devicetree/bindings.html">Devicetree Bindings</a>
      </li>
      
    </ul>
  </div>
  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Zephyr Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Docs / Latest -->
  
  

  <li><a href="../../index.html">Docs / Latest</a> &raquo;</li>
  
     <li><a href="../index.html">API Reference</a> &raquo;</li>
  
     <li><a href="index.html">Peripherals</a> &raquo;</li>
  
  <li>SPI</li>


  <li class="wy-breadcrumbs-aside">
    <dark-mode-toggle id="dark-mode-toggle" appearance="toggle" permanent="true"/>
  </li>
  <li class="wy-breadcrumbs-aside">
      
      
        <a href="https://github.com/zephyrproject-rtos/zephyr/blob/main/doc/reference/peripherals/spi.rst" class="fa fa-github"> Open on GitHub</a>
      
    
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="wy-alert wy-alert-danger">
     This is the documentation for the latest (main) development branch of
     Zephyr. If you are looking for the documentation of previous releases, use
     the drop-down menu on the left and select the desired version.
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="spi">
<span id="spi-api"></span><h1>SPI<a class="headerlink" href="#spi" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h2>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__spi__interface"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">spi_interface</span></span></dt>
<dd><p>SPI Interface. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-spi-operational-mode">SPI operational mode</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_OP_MODE_MASTER">
<span class="target" id="group__spi__interface_1ga5b9d40fa0f455b1e63f8040b3316b0da"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_OP_MODE_MASTER</span></span></span><a class="headerlink" href="#c.SPI_OP_MODE_MASTER" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_OP_MODE_SLAVE">
<span class="target" id="group__spi__interface_1ga1c3310d3711cb99cdb78fa9d1c970779"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_OP_MODE_SLAVE</span></span></span><a class="headerlink" href="#c.SPI_OP_MODE_SLAVE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_OP_MODE_MASK">
<span class="target" id="group__spi__interface_1gaa5e4382992dfb8e33af2dc232ee67b43"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_OP_MODE_MASK</span></span></span><a class="headerlink" href="#c.SPI_OP_MODE_MASK" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_OP_MODE_GET">
<span class="target" id="group__spi__interface_1ga6dd4395e027407a7b3b92cff2abcc8b3"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_OP_MODE_GET</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">_operation_</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.SPI_OP_MODE_GET" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-spi-polarity-&amp;-phase-modes">SPI Polarity &amp; Phase Modes</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_MODE_CPOL">
<span class="target" id="group__spi__interface_1ga5a2be1003873beaa0ade10e7218d67d5"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_MODE_CPOL</span></span></span><a class="headerlink" href="#c.SPI_MODE_CPOL" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Clock Polarity: if set, clock idle state will be 1 and active state will be 0. If untouched, the inverse will be true which is the default. </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_MODE_CPHA">
<span class="target" id="group__spi__interface_1ga35e98b37e3ec4889a90100abe884590f"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_MODE_CPHA</span></span></span><a class="headerlink" href="#c.SPI_MODE_CPHA" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Clock Phase: this dictates when is the data captured, and depends clock’s polarity. When SPI_MODE_CPOL is set and this bit as well, capture will occur on low to high transition and high to low if this bit is not set (default). This is fully reversed if CPOL is not set. </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_MODE_LOOP">
<span class="target" id="group__spi__interface_1ga8619b297de563eca6852af34c79daa62"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_MODE_LOOP</span></span></span><a class="headerlink" href="#c.SPI_MODE_LOOP" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Whatever data is transmitted is looped-back to the receiving buffer of the controller. This is fully controller dependent as some may not support this, and can be used for testing purposes only. </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_MODE_MASK">
<span class="target" id="group__spi__interface_1gaa64ece5364d0d7e1226d50e8773ab654"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_MODE_MASK</span></span></span><a class="headerlink" href="#c.SPI_MODE_MASK" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_MODE_GET">
<span class="target" id="group__spi__interface_1gaa3582b96ff42dba0b0ad815c727d5e42"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_MODE_GET</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">_mode_</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.SPI_MODE_GET" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-spi-transfer-modes-(host-controller-dependent)">SPI Transfer modes (host controller dependent)</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_TRANSFER_MSB">
<span class="target" id="group__spi__interface_1ga7761f42c6241cf396fc02d0de8617e46"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_TRANSFER_MSB</span></span></span><a class="headerlink" href="#c.SPI_TRANSFER_MSB" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_TRANSFER_LSB">
<span class="target" id="group__spi__interface_1ga93504a76a265bedbe781c107beebc9dc"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_TRANSFER_LSB</span></span></span><a class="headerlink" href="#c.SPI_TRANSFER_LSB" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-spi-word-size">SPI word size</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_WORD_SIZE_SHIFT">
<span class="target" id="group__spi__interface_1ga13584494d23db28471ffc68580878f9d"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_WORD_SIZE_SHIFT</span></span></span><a class="headerlink" href="#c.SPI_WORD_SIZE_SHIFT" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_WORD_SIZE_MASK">
<span class="target" id="group__spi__interface_1ga77146b5c9ce71c3a8352b5026f77cda6"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_WORD_SIZE_MASK</span></span></span><a class="headerlink" href="#c.SPI_WORD_SIZE_MASK" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_WORD_SIZE_GET">
<span class="target" id="group__spi__interface_1ga7386c70bd669142bb7558526175765cc"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_WORD_SIZE_GET</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">_operation_</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.SPI_WORD_SIZE_GET" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_WORD_SET">
<span class="target" id="group__spi__interface_1gaaea60640bb9223bbaf94338d07d9d07c"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_WORD_SET</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">_word_size_</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.SPI_WORD_SET" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-specific-spi-devices-control-bits">Specific SPI devices control bits</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_HOLD_ON_CS">
<span class="target" id="group__spi__interface_1gae917312adef283b4bf67cdb53566e4bb"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_HOLD_ON_CS</span></span></span><a class="headerlink" href="#c.SPI_HOLD_ON_CS" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_LOCK_ON">
<span class="target" id="group__spi__interface_1gafe8dc164d6fc0a0f93f2ff9d5381af14"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_LOCK_ON</span></span></span><a class="headerlink" href="#c.SPI_LOCK_ON" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_CS_ACTIVE_HIGH">
<span class="target" id="group__spi__interface_1ga44076fa14703997f7e3aefb2bfccd801"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_CS_ACTIVE_HIGH</span></span></span><a class="headerlink" href="#c.SPI_CS_ACTIVE_HIGH" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-spi-miso-lines-(if-\verbatim-embed:rst:inline-:kconfig:option:`config_spi_extended_modes`-\endverbatim-is-enabled)">SPI MISO lines (if \verbatim embed:rst:inline :kconfig:option:`CONFIG_SPI_EXTENDED_MODES` \endverbatim is enabled)</p>
<p>Some controllers support dual, quad or octal MISO lines connected to slaves. Default is single, which is the case most of the time. Without <span> <a class="reference internal" href="../../kconfig.html#CONFIG_SPI_EXTENDED_MODES" title="CONFIG_SPI_EXTENDED_MODES"><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_SPI_EXTENDED_MODES</span></code></a> </span> being enabled, single is the only supported one. </p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_LINES_SINGLE">
<span class="target" id="group__spi__interface_1ga7a183f157e8cb8b437857a0babbd923b"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_LINES_SINGLE</span></span></span><a class="headerlink" href="#c.SPI_LINES_SINGLE" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_LINES_DUAL">
<span class="target" id="group__spi__interface_1ga120ab60329d664d5d6e828f90251a98a"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_LINES_DUAL</span></span></span><a class="headerlink" href="#c.SPI_LINES_DUAL" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_LINES_QUAD">
<span class="target" id="group__spi__interface_1ga30866b948e995224de854e10a428bda5"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_LINES_QUAD</span></span></span><a class="headerlink" href="#c.SPI_LINES_QUAD" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_LINES_OCTAL">
<span class="target" id="group__spi__interface_1ga512d76085e600886654b8541aab31cf7"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_LINES_OCTAL</span></span></span><a class="headerlink" href="#c.SPI_LINES_OCTAL" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_LINES_MASK">
<span class="target" id="group__spi__interface_1gadc79f986c4b30fe5b263841cd8bb5676"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_LINES_MASK</span></span></span><a class="headerlink" href="#c.SPI_LINES_MASK" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-spi-duplex-mode">SPI duplex mode</p>
<p>Some controllers support half duplex transfer, which results in 3-wire usage. By default, full duplex will prevail. </p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_FULL_DUPLEX">
<span class="target" id="group__spi__interface_1ga5585d5e81dec606b605f31b6745c35d3"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_FULL_DUPLEX</span></span></span><a class="headerlink" href="#c.SPI_FULL_DUPLEX" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_HALF_DUPLEX">
<span class="target" id="group__spi__interface_1ga602a7804b7434d7ebc1ebe6cb9b47a2f"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_HALF_DUPLEX</span></span></span><a class="headerlink" href="#c.SPI_HALF_DUPLEX" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-spi-frame-format">SPI Frame Format</p>
<p>2 frame formats are exposed: Motorola and TI. The main difference is the behavior of the CS line. In Motorala it stays active the whole transfer. In TI, it’s active only one serial clock period prior to actually make the transfer, it is thus inactive during the transfer, which ends when the clocks ends as well. By default, as it is the most commonly used, the Motorola frame format will prevail. </p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_FRAME_FORMAT_MOTOROLA">
<span class="target" id="group__spi__interface_1ga6a1b4ba33900165b6e09706903a6e6ee"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_FRAME_FORMAT_MOTOROLA</span></span></span><a class="headerlink" href="#c.SPI_FRAME_FORMAT_MOTOROLA" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_FRAME_FORMAT_TI">
<span class="target" id="group__spi__interface_1ga22801357a9682371e3d8a10e522de388"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_FRAME_FORMAT_TI</span></span></span><a class="headerlink" href="#c.SPI_FRAME_FORMAT_TI" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-defines">Defines</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_CS_GPIOS_DT_SPEC_GET">
<span class="target" id="group__spi__interface_1ga48aa19f45413d56b03596d10b72c732e"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_CS_GPIOS_DT_SPEC_GET</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">spi_dev</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.SPI_CS_GPIOS_DT_SPEC_GET" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get a <code class="docutils literal notranslate"><span class="pre">struct</span> <a class="reference internal" href="gpio.html#structgpio__dt__spec"><span class="std std-ref"><span class="pre">gpio_dt_spec</span></span></a></code> for a SPI device’s chip select pin. </p>
<p>Example devicetree fragment:</p>
<p><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gpio1</span><span class="p">:</span> <span class="n">gpio</span><span class="o">@...</span> <span class="p">{</span> <span class="o">...</span> <span class="p">};</span>

<span class="n">gpio2</span><span class="p">:</span> <span class="n">gpio</span><span class="o">@...</span> <span class="p">{</span> <span class="o">...</span> <span class="p">};</span>

<span class="n">spi</span><span class="o">@...</span> <span class="p">{</span>
        <span class="n">compatible</span> <span class="o">=</span> <span class="s2">&quot;vnd,spi&quot;</span><span class="p">;</span>
        <span class="n">cs</span><span class="o">-</span><span class="n">gpios</span> <span class="o">=</span> <span class="o">&lt;&amp;</span><span class="n">gpio1</span> <span class="mi">10</span> <span class="n">GPIO_ACTIVE_LOW</span><span class="o">&gt;</span><span class="p">,</span>
                   <span class="o">&lt;&amp;</span><span class="n">gpio2</span> <span class="mi">20</span> <span class="n">GPIO_ACTIVE_LOW</span><span class="o">&gt;</span><span class="p">;</span>

        <span class="n">a</span><span class="p">:</span> <span class="n">spi</span><span class="o">-</span><span class="n">dev</span><span class="o">-</span><span class="n">a</span><span class="o">@</span><span class="mi">0</span> <span class="p">{</span>
                <span class="n">reg</span> <span class="o">=</span> <span class="o">&lt;</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="n">b</span><span class="p">:</span> <span class="n">spi</span><span class="o">-</span><span class="n">dev</span><span class="o">-</span><span class="n">b</span><span class="o">@</span><span class="mi">1</span> <span class="p">{</span>
                <span class="n">reg</span> <span class="o">=</span> <span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">;</span>
        <span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
</p>
<p>Example usage:</p>
<p><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SPI_CS_GPIOS_DT_SPEC_GET</span><span class="p">(</span><span class="n">DT_NODELABEL</span><span class="p">(</span><span class="n">a</span><span class="p">))</span> \
      <span class="o">//</span> <span class="p">{</span> <span class="n">DEVICE_DT_GET</span><span class="p">(</span><span class="n">DT_NODELABEL</span><span class="p">(</span><span class="n">gpio1</span><span class="p">)),</span> <span class="mi">10</span><span class="p">,</span> <span class="n">GPIO_ACTIVE_LOW</span> <span class="p">}</span>
<span class="n">SPI_CS_GPIOS_DT_SPEC_GET</span><span class="p">(</span><span class="n">DT_NODELABEL</span><span class="p">(</span><span class="n">b</span><span class="p">))</span> \
      <span class="o">//</span> <span class="p">{</span> <span class="n">DEVICE_DT_GET</span><span class="p">(</span><span class="n">DT_NODELABEL</span><span class="p">(</span><span class="n">gpio2</span><span class="p">)),</span> <span class="mi">20</span><span class="p">,</span> <span class="n">GPIO_ACTIVE_LOW</span> <span class="p">}</span>
</pre></div>
</div>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spi_dev</strong> – a SPI device node identifier </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="gpio.html#structgpio__dt__spec"><span class="std std-ref">gpio_dt_spec</span></a> struct corresponding with spi_dev’s chip select </p>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_CS_CONTROL_PTR_DT">
<span class="target" id="group__spi__interface_1gabcdae2d5e9cb868498c6782cb631b9cf"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_CS_CONTROL_PTR_DT</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">node_id</span></span>, <span class="n"><span class="pre">delay_</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.SPI_CS_CONTROL_PTR_DT" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Initialize and get a pointer to a <code class="docutils literal notranslate"><a class="reference internal" href="#structspi__cs__control"><span class="std std-ref"><span class="pre">spi_cs_control</span></span></a></code> from a devicetree node identifier. </p>
<p>This helper is useful for initializing a device on a SPI bus. It initializes a struct <a class="reference internal" href="#structspi__cs__control"><span class="std std-ref">spi_cs_control</span></a> and returns a pointer to it. Here, <code class="docutils literal notranslate"><span class="pre">node_id</span></code> is a node identifier for a SPI device, not a SPI controller.</p>
<p>Example devicetree fragment: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">spi</span><span class="o">@...</span> <span class="p">{</span>
        <span class="n">cs</span><span class="o">-</span><span class="n">gpios</span> <span class="o">=</span> <span class="o">&lt;&amp;</span><span class="n">gpio0</span> <span class="mi">1</span> <span class="n">GPIO_ACTIVE_LOW</span><span class="o">&gt;</span><span class="p">;</span>
        <span class="n">spidev</span><span class="p">:</span> <span class="n">spi</span><span class="o">-</span><span class="n">device</span><span class="o">@</span><span class="mi">0</span> <span class="p">{</span> <span class="o">...</span> <span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
 Assume that <code class="docutils literal notranslate"><span class="pre">gpio0</span></code> follows the standard convention for specifying GPIOs, i.e. it has the following in its binding: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gpio</span><span class="o">-</span><span class="n">cells</span><span class="p">:</span>
<span class="o">-</span> <span class="n">pin</span>
<span class="o">-</span> <span class="n">flags</span>
</pre></div>
</div>
 Example usage: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">struct</span> <span class="n">spi_cs_control</span> <span class="o">*</span><span class="n">ctrl</span> <span class="o">=</span>
        <span class="n">SPI_CS_CONTROL_PTR_DT</span><span class="p">(</span><span class="n">DT_NODELABEL</span><span class="p">(</span><span class="n">spidev</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
</pre></div>
</div>
 This example is equivalent to: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">struct</span> <span class="n">spi_cs_control</span> <span class="o">*</span><span class="n">ctrl</span> <span class="o">=</span>
        <span class="o">&amp;</span><span class="p">(</span><span class="n">struct</span> <span class="n">spi_cs_control</span><span class="p">)</span> <span class="p">{</span>
                <span class="o">.</span><span class="n">gpio_dev</span> <span class="o">=</span> <span class="n">DEVICE_DT_GET</span><span class="p">(</span><span class="n">DT_NODELABEL</span><span class="p">(</span><span class="n">gpio0</span><span class="p">)),</span>
                <span class="o">.</span><span class="n">delay</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
                <span class="o">.</span><span class="n">gpio_pin</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
                <span class="o">.</span><span class="n">gpio_dt_flags</span> <span class="o">=</span> <span class="n">GPIO_ACTIVE_LOW</span>
        <span class="p">};</span>
</pre></div>
</div>
 This macro is not available in C++.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node_id</strong> – Devicetree node identifier for a device on a SPI bus </p></li>
<li><p><strong>delay_</strong> – The <code class="docutils literal notranslate"><span class="pre">delay</span></code> field to set in the <code class="docutils literal notranslate"><a class="reference internal" href="#structspi__cs__control"><span class="std std-ref"><span class="pre">spi_cs_control</span></span></a></code> </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a pointer to the <code class="docutils literal notranslate"><a class="reference internal" href="#structspi__cs__control"><span class="std std-ref"><span class="pre">spi_cs_control</span></span></a></code> structure </p>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_CS_CONTROL_PTR_DT_INST">
<span class="target" id="group__spi__interface_1gad4272242d8016742eb9035d0db3d9d6a"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_CS_CONTROL_PTR_DT_INST</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">inst</span></span>, <span class="n"><span class="pre">delay_</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.SPI_CS_CONTROL_PTR_DT_INST" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get a pointer to a <code class="docutils literal notranslate"><a class="reference internal" href="#structspi__cs__control"><span class="std std-ref"><span class="pre">spi_cs_control</span></span></a></code> from a devicetree node. </p>
<p>This is equivalent to <code class="docutils literal notranslate"><a class="reference internal" href="#group__spi__interface_1gabcdae2d5e9cb868498c6782cb631b9cf"><span class="std std-ref"><span class="pre">SPI_CS_CONTROL_PTR_DT(DT_DRV_INST(inst),</span> <span class="pre">delay)</span></span></a></code>.</p>
<p>Therefore, <code class="docutils literal notranslate"><span class="pre">DT_DRV_COMPAT</span></code> must already be defined before using this macro.</p>
<p>This macro is not available in C++.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inst</strong> – Devicetree node instance number </p></li>
<li><p><strong>delay_</strong> – The <code class="docutils literal notranslate"><span class="pre">delay</span></code> field to set in the <code class="docutils literal notranslate"><a class="reference internal" href="#structspi__cs__control"><span class="std std-ref"><span class="pre">spi_cs_control</span></span></a></code> </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a pointer to the <code class="docutils literal notranslate"><a class="reference internal" href="#structspi__cs__control"><span class="std std-ref"><span class="pre">spi_cs_control</span></span></a></code> structure </p>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_CONFIG_DT">
<span class="target" id="group__spi__interface_1ga822af066ee0829aee405c034bb967463"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_CONFIG_DT</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">node_id</span></span>, <span class="n"><span class="pre">operation_</span></span>, <span class="n"><span class="pre">delay_</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.SPI_CONFIG_DT" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Structure initializer for <a class="reference internal" href="#structspi__config"><span class="std std-ref">spi_config</span></a> from devicetree. </p>
<p>This helper macro expands to a static initializer for a <code class="docutils literal notranslate"><span class="pre">struct</span> <a class="reference internal" href="#structspi__config"><span class="std std-ref"><span class="pre">spi_config</span></span></a></code> by reading the relevant <code class="docutils literal notranslate"><span class="pre">frequency</span></code>, <code class="docutils literal notranslate"><span class="pre">slave</span></code>, and <code class="docutils literal notranslate"><span class="pre">cs</span></code> data from the devicetree.</p>
<p>Important: the <code class="docutils literal notranslate"><span class="pre">cs</span></code> field is initialized using <a class="reference internal" href="#group__spi__interface_1gabcdae2d5e9cb868498c6782cb631b9cf"><span class="std std-ref">SPI_CS_CONTROL_PTR_DT()</span></a>. The <code class="docutils literal notranslate"><span class="pre">gpio_dev</span></code> value pointed to by this structure must be checked using <a class="reference internal" href="../drivers/index.html#group__device__model_1gaa4944bd850e90cbd52b0489f9b12edfb"><span class="std std-ref">device_is_ready()</span></a> before use.</p>
<p>This macro is not available in C++.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node_id</strong> – Devicetree node identifier for the SPI device whose struct <a class="reference internal" href="#structspi__config"><span class="std std-ref">spi_config</span></a> to create an initializer for </p></li>
<li><p><strong>operation_</strong> – the desired <code class="docutils literal notranslate"><span class="pre">operation</span></code> field in the struct <a class="reference internal" href="#structspi__config"><span class="std std-ref">spi_config</span></a> </p></li>
<li><p><strong>delay_</strong> – the desired <code class="docutils literal notranslate"><span class="pre">delay</span></code> field in the struct <a class="reference internal" href="#structspi__config"><span class="std std-ref">spi_config</span></a>’s <a class="reference internal" href="#structspi__cs__control"><span class="std std-ref">spi_cs_control</span></a>, if there is one </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_CONFIG_DT_INST">
<span class="target" id="group__spi__interface_1gadc1e7de7925603adfedbac35fdabc78a"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_CONFIG_DT_INST</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">inst</span></span>, <span class="n"><span class="pre">operation_</span></span>, <span class="n"><span class="pre">delay_</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.SPI_CONFIG_DT_INST" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Structure initializer for <a class="reference internal" href="#structspi__config"><span class="std std-ref">spi_config</span></a> from devicetree instance. </p>
<p>This is equivalent to <code class="docutils literal notranslate"><a class="reference internal" href="#group__spi__interface_1ga822af066ee0829aee405c034bb967463"><span class="std std-ref"><span class="pre">SPI_CONFIG_DT(DT_DRV_INST(inst),</span> <span class="pre">operation_,</span> <span class="pre">delay_)</span></span></a></code>.</p>
<p>This macro is not available in C++.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inst</strong> – Devicetree instance number </p></li>
<li><p><strong>operation_</strong> – the desired <code class="docutils literal notranslate"><span class="pre">operation</span></code> field in the struct <a class="reference internal" href="#structspi__config"><span class="std std-ref">spi_config</span></a> </p></li>
<li><p><strong>delay_</strong> – the desired <code class="docutils literal notranslate"><span class="pre">delay</span></code> field in the struct <a class="reference internal" href="#structspi__config"><span class="std std-ref">spi_config</span></a>’s <a class="reference internal" href="#structspi__cs__control"><span class="std std-ref">spi_cs_control</span></a>, if there is one </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_DT_SPEC_GET">
<span class="target" id="group__spi__interface_1gaec6a8fde1c3ec6349a601a2d5f7af785"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_DT_SPEC_GET</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">node_id</span></span>, <span class="n"><span class="pre">operation_</span></span>, <span class="n"><span class="pre">delay_</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.SPI_DT_SPEC_GET" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Structure initializer for <a class="reference internal" href="#structspi__dt__spec"><span class="std std-ref">spi_dt_spec</span></a> from devicetree. </p>
<p>This helper macro expands to a static initializer for a <code class="docutils literal notranslate"><span class="pre">struct</span> <a class="reference internal" href="#structspi__dt__spec"><span class="std std-ref"><span class="pre">spi_dt_spec</span></span></a></code> by reading the relevant bus, frequency, slave, and cs data from the devicetree.</p>
<p>Important: multiple fields are automatically constructed by this macro which must be checked before use. <a class="reference internal" href="#group__spi__interface_1ga7d5fcb15e3a1082ea63203b185c6a207"><span class="std std-ref">spi_is_ready</span></a> performs the required <a class="reference internal" href="../drivers/index.html#group__device__model_1gaa4944bd850e90cbd52b0489f9b12edfb"><span class="std std-ref">device_is_ready</span></a> checks.</p>
<p>This macro is not available in C++.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node_id</strong> – Devicetree node identifier for the SPI device whose struct <a class="reference internal" href="#structspi__dt__spec"><span class="std std-ref">spi_dt_spec</span></a> to create an initializer for </p></li>
<li><p><strong>operation_</strong> – the desired <code class="docutils literal notranslate"><span class="pre">operation</span></code> field in the struct <a class="reference internal" href="#structspi__config"><span class="std std-ref">spi_config</span></a> </p></li>
<li><p><strong>delay_</strong> – the desired <code class="docutils literal notranslate"><span class="pre">delay</span></code> field in the struct <a class="reference internal" href="#structspi__config"><span class="std std-ref">spi_config</span></a>’s <a class="reference internal" href="#structspi__cs__control"><span class="std std-ref">spi_cs_control</span></a>, if there is one </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.SPI_DT_SPEC_INST_GET">
<span class="target" id="group__spi__interface_1ga91c595b7567af23b447c755d898608f3"></span><span class="sig-name descname"><span class="n"><span class="pre">SPI_DT_SPEC_INST_GET</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">inst</span></span>, <span class="n"><span class="pre">operation_</span></span>, <span class="n"><span class="pre">delay_</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.SPI_DT_SPEC_INST_GET" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Structure initializer for <a class="reference internal" href="#structspi__dt__spec"><span class="std std-ref">spi_dt_spec</span></a> from devicetree instance. </p>
<p>This is equivalent to <code class="docutils literal notranslate"><a class="reference internal" href="#group__spi__interface_1gaec6a8fde1c3ec6349a601a2d5f7af785"><span class="std std-ref"><span class="pre">SPI_DT_SPEC_GET(DT_DRV_INST(inst),</span> <span class="pre">operation_,</span> <span class="pre">delay_)</span></span></a></code>.</p>
<p>This macro is not available in C++.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inst</strong> – Devicetree instance number </p></li>
<li><p><strong>operation_</strong> – the desired <code class="docutils literal notranslate"><span class="pre">operation</span></code> field in the struct <a class="reference internal" href="#structspi__config"><span class="std std-ref">spi_config</span></a> </p></li>
<li><p><strong>delay_</strong> – the desired <code class="docutils literal notranslate"><span class="pre">delay</span></code> field in the struct <a class="reference internal" href="#structspi__config"><span class="std std-ref">spi_config</span></a>’s <a class="reference internal" href="#structspi__cs__control"><span class="std std-ref">spi_cs_control</span></a>, if there is one </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-typedefs">Typedefs</p>
<dl class="c type">
<dt class="sig sig-object c" id="c.spi_api_io">
<span class="target" id="group__spi__interface_1gaa03a4e0ce32b9fc5f87d8df9e409eaf2"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">spi_api_io</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../drivers/index.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_config" title="spi_config"><span class="n"><span class="pre">spi_config</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_buf_set" title="spi_buf_set"><span class="n"><span class="pre">spi_buf_set</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">tx_bufs</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_buf_set" title="spi_buf_set"><span class="n"><span class="pre">spi_buf_set</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">rx_bufs</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.spi_api_io" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Callback API for I/O See <a class="reference internal" href="#group__spi__interface_1gad51054c1ba259db5a64619788506a6f5"><span class="std std-ref">spi_transceive()</span></a> for argument descriptions. </p>
<p>Callback API for asynchronous I/O See <a class="reference internal" href="#group__spi__interface_1ga57abc5c454afc239feba1a3e9542a12c"><span class="std std-ref">spi_transceive_async()</span></a> for argument descriptions. </p>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.spi_api_io_async">
<span class="target" id="group__spi__interface_1ga1fd3ad728f7e88c7f358bf93a59add80"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">spi_api_io_async</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../drivers/index.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_config" title="spi_config"><span class="n"><span class="pre">spi_config</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_buf_set" title="spi_buf_set"><span class="n"><span class="pre">spi_buf_set</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">tx_bufs</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_buf_set" title="spi_buf_set"><span class="n"><span class="pre">spi_buf_set</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">rx_bufs</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../kernel/other/polling.html#c.k_poll_signal" title="k_poll_signal"><span class="n"><span class="pre">k_poll_signal</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">async</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.spi_api_io_async" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.spi_api_release">
<span class="target" id="group__spi__interface_1ga86340e5e1a89a61b23b8626adcfb16db"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">spi_api_release</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../drivers/index.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_config" title="spi_config"><span class="n"><span class="pre">spi_config</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.spi_api_release" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Callback API for unlocking SPI device. See <a class="reference internal" href="#group__spi__interface_1ga0c4f4f0a93bb83a4f58d551a7491164e"><span class="std std-ref">spi_release()</span></a> for argument descriptions. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.spi_is_ready">
<span class="target" id="group__spi__interface_1ga7d5fcb15e3a1082ea63203b185c6a207"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">spi_is_ready</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_dt_spec" title="spi_dt_spec"><span class="n"><span class="pre">spi_dt_spec</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">spec</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.spi_is_ready" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Validate that SPI bus is ready. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spec</strong> – SPI specification from devicetree</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>true</strong> – if the SPI bus is ready for use. </p></li>
<li><p><strong>false</strong> – if the SPI bus is not ready for use. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.spi_transceive">
<span class="target" id="group__spi__interface_1gad51054c1ba259db5a64619788506a6f5"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">spi_transceive</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../drivers/index.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_config" title="spi_config"><span class="n"><span class="pre">spi_config</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">config</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_buf_set" title="spi_buf_set"><span class="n"><span class="pre">spi_buf_set</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">tx_bufs</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_buf_set" title="spi_buf_set"><span class="n"><span class="pre">spi_buf_set</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">rx_bufs</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.spi_transceive" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read/write the specified amount of data from the SPI driver. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is synchronous.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dev</strong> – Pointer to the device structure for the driver instance </p></li>
<li><p><strong>config</strong> – Pointer to a valid <a class="reference internal" href="#structspi__config"><span class="std std-ref">spi_config</span></a> structure instance. Pointer-comparison may be used to detect changes from previous operations. </p></li>
<li><p><strong>tx_bufs</strong> – Buffer array where data to be sent originates from, or NULL if none. </p></li>
<li><p><strong>rx_bufs</strong> – Buffer array where data to be read will be written to, or NULL if none.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>frames</strong> – Positive number of frames received in slave mode. </p></li>
<li><p><strong>0</strong> – If successful in master mode. </p></li>
<li><p><strong>-errno</strong> – Negative errno code on failure. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.spi_transceive_dt">
<span class="target" id="group__spi__interface_1ga52c017066736414b31ff709ddc67c4ff"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">spi_transceive_dt</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_dt_spec" title="spi_dt_spec"><span class="n"><span class="pre">spi_dt_spec</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">spec</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_buf_set" title="spi_buf_set"><span class="n"><span class="pre">spi_buf_set</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">tx_bufs</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_buf_set" title="spi_buf_set"><span class="n"><span class="pre">spi_buf_set</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">rx_bufs</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.spi_transceive_dt" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read/write data from an SPI bus specified in <code class="docutils literal notranslate"><a class="reference internal" href="#structspi__dt__spec"><span class="std std-ref"><span class="pre">spi_dt_spec</span></span></a></code>. </p>
<p>This is equivalent to: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">spi_transceive</span><span class="p">(</span><span class="n">spec</span><span class="o">-&gt;</span><span class="n">bus</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">spec</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">,</span> <span class="n">tx_bufs</span><span class="p">,</span> <span class="n">rx_bufs</span><span class="p">);</span>
</pre></div>
</div>
 </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spec</strong> – SPI specification from devicetree </p></li>
<li><p><strong>tx_bufs</strong> – Buffer array where data to be sent originates from, or NULL if none. </p></li>
<li><p><strong>rx_bufs</strong> – Buffer array where data to be read will be written to, or NULL if none.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a value from <a class="reference internal" href="#group__spi__interface_1gad51054c1ba259db5a64619788506a6f5"><span class="std std-ref">spi_transceive()</span></a>. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.spi_read">
<span class="target" id="group__spi__interface_1ga41f771785a4fa9ca0954125d1e97959e"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">spi_read</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../drivers/index.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_config" title="spi_config"><span class="n"><span class="pre">spi_config</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">config</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_buf_set" title="spi_buf_set"><span class="n"><span class="pre">spi_buf_set</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">rx_bufs</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.spi_read" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read the specified amount of data from the SPI driver. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is synchronous.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is an helper function calling spi_transceive.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dev</strong> – Pointer to the device structure for the driver instance </p></li>
<li><p><strong>config</strong> – Pointer to a valid <a class="reference internal" href="#structspi__config"><span class="std std-ref">spi_config</span></a> structure instance. Pointer-comparison may be used to detect changes from previous operations. </p></li>
<li><p><strong>rx_bufs</strong> – Buffer array where data to be read will be written to.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>0</strong> – If successful. </p></li>
<li><p><strong>-errno</strong> – Negative errno code on failure. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.spi_read_dt">
<span class="target" id="group__spi__interface_1ga7a1d7ebd37d2861b169c265cb90015bf"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">spi_read_dt</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_dt_spec" title="spi_dt_spec"><span class="n"><span class="pre">spi_dt_spec</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">spec</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_buf_set" title="spi_buf_set"><span class="n"><span class="pre">spi_buf_set</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">rx_bufs</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.spi_read_dt" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read data from a SPI bus specified in <code class="docutils literal notranslate"><a class="reference internal" href="#structspi__dt__spec"><span class="std std-ref"><span class="pre">spi_dt_spec</span></span></a></code>. </p>
<p>This is equivalent to: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">spi_read</span><span class="p">(</span><span class="n">spec</span><span class="o">-&gt;</span><span class="n">bus</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">spec</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">,</span> <span class="n">rx_bufs</span><span class="p">);</span>
</pre></div>
</div>
 </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spec</strong> – SPI specification from devicetree </p></li>
<li><p><strong>rx_bufs</strong> – Buffer array where data to be read will be written to.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a value from <a class="reference internal" href="#group__spi__interface_1ga41f771785a4fa9ca0954125d1e97959e"><span class="std std-ref">spi_read()</span></a>. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.spi_write">
<span class="target" id="group__spi__interface_1ga7e7c4460670ec1c0433ba19accd97796"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">spi_write</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../drivers/index.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_config" title="spi_config"><span class="n"><span class="pre">spi_config</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">config</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_buf_set" title="spi_buf_set"><span class="n"><span class="pre">spi_buf_set</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">tx_bufs</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.spi_write" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Write the specified amount of data from the SPI driver. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is synchronous.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is an helper function calling spi_transceive.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dev</strong> – Pointer to the device structure for the driver instance </p></li>
<li><p><strong>config</strong> – Pointer to a valid <a class="reference internal" href="#structspi__config"><span class="std std-ref">spi_config</span></a> structure instance. Pointer-comparison may be used to detect changes from previous operations. </p></li>
<li><p><strong>tx_bufs</strong> – Buffer array where data to be sent originates from.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>0</strong> – If successful. </p></li>
<li><p><strong>-errno</strong> – Negative errno code on failure. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.spi_write_dt">
<span class="target" id="group__spi__interface_1ga292d6d1fe82f3f1ce0d9a2aa5437201b"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">spi_write_dt</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_dt_spec" title="spi_dt_spec"><span class="n"><span class="pre">spi_dt_spec</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">spec</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_buf_set" title="spi_buf_set"><span class="n"><span class="pre">spi_buf_set</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">tx_bufs</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.spi_write_dt" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Write data to a SPI bus specified in <code class="docutils literal notranslate"><a class="reference internal" href="#structspi__dt__spec"><span class="std std-ref"><span class="pre">spi_dt_spec</span></span></a></code>. </p>
<p>This is equivalent to: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">spi_write</span><span class="p">(</span><span class="n">spec</span><span class="o">-&gt;</span><span class="n">bus</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">spec</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">,</span> <span class="n">tx_bufs</span><span class="p">);</span>
</pre></div>
</div>
 </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spec</strong> – SPI specification from devicetree </p></li>
<li><p><strong>tx_bufs</strong> – Buffer array where data to be sent originates from.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a value from <a class="reference internal" href="#group__spi__interface_1ga7e7c4460670ec1c0433ba19accd97796"><span class="std std-ref">spi_write()</span></a>. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.spi_transceive_async">
<span class="target" id="group__spi__interface_1ga57abc5c454afc239feba1a3e9542a12c"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">spi_transceive_async</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../drivers/index.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_config" title="spi_config"><span class="n"><span class="pre">spi_config</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">config</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_buf_set" title="spi_buf_set"><span class="n"><span class="pre">spi_buf_set</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">tx_bufs</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_buf_set" title="spi_buf_set"><span class="n"><span class="pre">spi_buf_set</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">rx_bufs</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../kernel/other/polling.html#c.k_poll_signal" title="k_poll_signal"><span class="n"><span class="pre">k_poll_signal</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">async</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.spi_transceive_async" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read/write the specified amount of data from the SPI driver. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is asynchronous.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is available only if <span> <a class="reference internal" href="../../kconfig.html#CONFIG_SPI_ASYNC" title="CONFIG_SPI_ASYNC"><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_SPI_ASYNC</span></code></a> </span> is selected.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dev</strong> – Pointer to the device structure for the driver instance </p></li>
<li><p><strong>config</strong> – Pointer to a valid <a class="reference internal" href="#structspi__config"><span class="std std-ref">spi_config</span></a> structure instance. Pointer-comparison may be used to detect changes from previous operations. </p></li>
<li><p><strong>tx_bufs</strong> – Buffer array where data to be sent originates from, or NULL if none. </p></li>
<li><p><strong>rx_bufs</strong> – Buffer array where data to be read will be written to, or NULL if none. </p></li>
<li><p><strong>async</strong> – A pointer to a valid and ready to be signaled struct <a class="reference internal" href="../kernel/other/polling.html#structk__poll__signal"><span class="std std-ref">k_poll_signal</span></a>. (Note: if NULL this function will not notify the end of the transaction, and whether it went successfully or not).</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>frames</strong> – Positive number of frames received in slave mode. </p></li>
<li><p><strong>0</strong> – If successful in master mode. </p></li>
<li><p><strong>-errno</strong> – Negative errno code on failure. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.spi_read_async">
<span class="target" id="group__spi__interface_1gab64a598898ffbdbfde9673cef26a0d4f"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">spi_read_async</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../drivers/index.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_config" title="spi_config"><span class="n"><span class="pre">spi_config</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">config</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_buf_set" title="spi_buf_set"><span class="n"><span class="pre">spi_buf_set</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">rx_bufs</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../kernel/other/polling.html#c.k_poll_signal" title="k_poll_signal"><span class="n"><span class="pre">k_poll_signal</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">async</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.spi_read_async" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read the specified amount of data from the SPI driver. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is asynchronous.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is an helper function calling spi_transceive_async.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is available only if <span> <a class="reference internal" href="../../kconfig.html#CONFIG_SPI_ASYNC" title="CONFIG_SPI_ASYNC"><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_SPI_ASYNC</span></code></a> </span> is selected.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dev</strong> – Pointer to the device structure for the driver instance </p></li>
<li><p><strong>config</strong> – Pointer to a valid <a class="reference internal" href="#structspi__config"><span class="std std-ref">spi_config</span></a> structure instance. Pointer-comparison may be used to detect changes from previous operations. </p></li>
<li><p><strong>rx_bufs</strong> – Buffer array where data to be read will be written to. </p></li>
<li><p><strong>async</strong> – A pointer to a valid and ready to be signaled struct <a class="reference internal" href="../kernel/other/polling.html#structk__poll__signal"><span class="std std-ref">k_poll_signal</span></a>. (Note: if NULL this function will not notify the end of the transaction, and whether it went successfully or not).</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>0</strong> – If successful </p></li>
<li><p><strong>-errno</strong> – Negative errno code on failure. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.spi_write_async">
<span class="target" id="group__spi__interface_1ga01fc6dc3fc243c74038a10ed86370244"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">spi_write_async</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../drivers/index.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_config" title="spi_config"><span class="n"><span class="pre">spi_config</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">config</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_buf_set" title="spi_buf_set"><span class="n"><span class="pre">spi_buf_set</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">tx_bufs</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../kernel/other/polling.html#c.k_poll_signal" title="k_poll_signal"><span class="n"><span class="pre">k_poll_signal</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">async</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.spi_write_async" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Write the specified amount of data from the SPI driver. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is asynchronous.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is an helper function calling spi_transceive_async.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is available only if <span> <a class="reference internal" href="../../kconfig.html#CONFIG_SPI_ASYNC" title="CONFIG_SPI_ASYNC"><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_SPI_ASYNC</span></code></a> </span> is selected.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dev</strong> – Pointer to the device structure for the driver instance </p></li>
<li><p><strong>config</strong> – Pointer to a valid <a class="reference internal" href="#structspi__config"><span class="std std-ref">spi_config</span></a> structure instance. Pointer-comparison may be used to detect changes from previous operations. </p></li>
<li><p><strong>tx_bufs</strong> – Buffer array where data to be sent originates from. </p></li>
<li><p><strong>async</strong> – A pointer to a valid and ready to be signaled struct <a class="reference internal" href="../kernel/other/polling.html#structk__poll__signal"><span class="std std-ref">k_poll_signal</span></a>. (Note: if NULL this function will not notify the end of the transaction, and whether it went successfully or not).</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>0</strong> – If successful. </p></li>
<li><p><strong>-errno</strong> – Negative errno code on failure. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.spi_release">
<span class="target" id="group__spi__interface_1ga0c4f4f0a93bb83a4f58d551a7491164e"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">spi_release</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../drivers/index.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_config" title="spi_config"><span class="n"><span class="pre">spi_config</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">config</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.spi_release" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Release the SPI device locked on and/or the CS by the current config. </p>
<p>Note: This synchronous function is used to release either the lock on the SPI device and/or the CS line that was kept if, and if only, given config parameter was the last one to be used (in any of the above functions) and if it has the SPI_LOCK_ON bit set and/or the SPI_HOLD_ON_CS bit set into its operation bits field. This can be used if the caller needs to keep its hand on the SPI device for consecutive transactions and/or if it needs the device to stay selected. Usually both bits will be used along each other, so the the device is locked and stays on until another operation is necessary or until it gets released with the present function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dev</strong> – Pointer to the device structure for the driver instance </p></li>
<li><p><strong>config</strong> – Pointer to a valid <a class="reference internal" href="#structspi__config"><span class="std std-ref">spi_config</span></a> structure instance.</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>0</strong> – If successful. </p></li>
<li><p><strong>-errno</strong> – Negative errno code on failure. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.spi_release_dt">
<span class="target" id="group__spi__interface_1ga829b59767c51b20b546eee8a9cc84b69"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">spi_release_dt</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_dt_spec" title="spi_dt_spec"><span class="n"><span class="pre">spi_dt_spec</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">spec</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.spi_release_dt" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Release the SPI device specified in <code class="docutils literal notranslate"><a class="reference internal" href="#structspi__dt__spec"><span class="std std-ref"><span class="pre">spi_dt_spec</span></span></a></code>. </p>
<p>This is equivalent to: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">spi_release</span><span class="p">(</span><span class="n">spec</span><span class="o">-&gt;</span><span class="n">bus</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">spec</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">);</span>
</pre></div>
</div>
 </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spec</strong> – SPI specification from devicetree</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a value from <a class="reference internal" href="#group__spi__interface_1ga0c4f4f0a93bb83a4f58d551a7491164e"><span class="std std-ref">spi_release()</span></a>. </p>
</dd>
</dl>
</dd></dl>

</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.spi_cs_control">
<span class="target" id="structspi__cs__control"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">spi_cs_control</span></span></span><a class="headerlink" href="#c.spi_cs_control" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;spi.h&gt;</em></div>
<p>SPI Chip Select control structure. </p>
<p>This can be used to control a CS line via a GPIO line, instead of using the controller inner CS logic. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.spi_cs_control.&#64;115">
<span class="target" id="structspi__cs__control_1aa35424f0892a710884d2cc94baffb3ef"></span><span class="k"><span class="pre">union</span></span><span class="w"> </span><a class="reference internal" href="#c.spi_cs_control" title="spi_cs_control"><span class="n"><span class="pre">spi_cs_control</span></span></a><span class="p"><span class="pre">.</span></span><span class="n"><span class="pre">[anonymous]</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">[anonymous]</span></span></span><a class="headerlink" href="#c.spi_cs_control.@115" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>GPIO devicetree specification of CS GPIO. The device pointer can be set to NULL to fully inhibit CS control if necessary. The GPIO flags GPIO_ACTIVE_LOW/GPIO_ACTIVE_HIGH should be equivalent to SPI_CS_ACTIVE_HIGH/SPI_CS_ACTIVE_LOW options in struct <a class="reference internal" href="#structspi__config"><span class="std std-ref">spi_config</span></a>. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.spi_cs_control.delay">
<span class="target" id="structspi__cs__control_1a04569d78ac7d6022ffee0c28f5d3b629"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">delay</span></span></span><a class="headerlink" href="#c.spi_cs_control.delay" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Delay in microseconds to wait before starting the transmission and before releasing the CS line. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.spi_config">
<span class="target" id="structspi__config"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">spi_config</span></span></span><a class="headerlink" href="#c.spi_config" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;spi.h&gt;</em></div>
<p>SPI controller configuration structure. </p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Most drivers use pointer comparison to determine whether a passed configuration is different from one used in a previous transaction. Changes to fields in the structure may not be detected. </p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Param frequency</dt>
<dd class="field-odd"><p>is the bus frequency in Hertz </p>
</dd>
<dt class="field-even">Param operation</dt>
<dd class="field-even"><p>is a bit field with the following parts: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">operational</span> <span class="n">mode</span>    <span class="p">[</span> <span class="mi">0</span> <span class="p">]</span>       <span class="o">-</span> <span class="n">master</span> <span class="ow">or</span> <span class="n">slave</span><span class="o">.</span>
<span class="n">mode</span>                <span class="p">[</span> <span class="mi">1</span> <span class="p">:</span> <span class="mi">3</span> <span class="p">]</span>   <span class="o">-</span> <span class="n">Polarity</span><span class="p">,</span> <span class="n">phase</span> <span class="ow">and</span> <span class="n">loop</span> <span class="n">mode</span><span class="o">.</span>
<span class="n">transfer</span>            <span class="p">[</span> <span class="mi">4</span> <span class="p">]</span>       <span class="o">-</span> <span class="n">LSB</span> <span class="ow">or</span> <span class="n">MSB</span> <span class="n">first</span><span class="o">.</span>
<span class="n">word_size</span>           <span class="p">[</span> <span class="mi">5</span> <span class="p">:</span> <span class="mi">10</span> <span class="p">]</span>  <span class="o">-</span> <span class="n">Size</span> <span class="n">of</span> <span class="n">a</span> <span class="n">data</span> <span class="n">frame</span> <span class="ow">in</span> <span class="n">bits</span><span class="o">.</span>
<span class="n">duplex</span>              <span class="p">[</span> <span class="mi">11</span> <span class="p">]</span>      <span class="o">-</span> <span class="n">full</span><span class="o">/</span><span class="n">half</span> <span class="n">duplex</span><span class="o">.</span>
<span class="n">cs_hold</span>             <span class="p">[</span> <span class="mi">12</span> <span class="p">]</span>      <span class="o">-</span> <span class="n">Hold</span> <span class="n">on</span> <span class="n">the</span> <span class="n">CS</span> <span class="n">line</span> <span class="k">if</span> <span class="n">possible</span><span class="o">.</span>
<span class="n">lock_on</span>             <span class="p">[</span> <span class="mi">13</span> <span class="p">]</span>      <span class="o">-</span> <span class="n">Keep</span> <span class="n">resource</span> <span class="n">locked</span> <span class="k">for</span> <span class="n">the</span> <span class="n">caller</span><span class="o">.</span>
<span class="n">cs_active_high</span>      <span class="p">[</span> <span class="mi">14</span> <span class="p">]</span>      <span class="o">-</span> <span class="n">Active</span> <span class="n">high</span> <span class="n">CS</span> <span class="n">logic</span><span class="o">.</span>
<span class="nb">format</span>              <span class="p">[</span> <span class="mi">15</span> <span class="p">]</span>      <span class="o">-</span> <span class="n">Motorola</span> <span class="ow">or</span> <span class="n">TI</span> <span class="n">frame</span> <span class="nb">format</span> <span class="p">(</span><span class="n">optional</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
 if <span> <a class="reference internal" href="../../kconfig.html#CONFIG_SPI_EXTENDED_MODES" title="CONFIG_SPI_EXTENDED_MODES"><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_SPI_EXTENDED_MODES</span></code></a> </span> is defined: lines [ 16 : 17 ] - MISO lines: Single/Dual/Quad/Octal. reserved [ 18 : 31 ] - reserved for future use. </p>
</dd>
<dt class="field-odd">Param slave</dt>
<dd class="field-odd"><p>is the slave number from 0 to host controller slave limit. </p>
</dd>
<dt class="field-even">Param cs</dt>
<dd class="field-even"><p>is a valid pointer on a struct <a class="reference internal" href="#structspi__cs__control"><span class="std std-ref">spi_cs_control</span></a> is CS line is emulated through a gpio line, or NULL otherwise. </p>
</dd>
</dl>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.spi_dt_spec">
<span class="target" id="structspi__dt__spec"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">spi_dt_spec</span></span></span><a class="headerlink" href="#c.spi_dt_spec" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;spi.h&gt;</em></div>
<p>Complete SPI DT information. </p>
<dl class="field-list simple">
<dt class="field-odd">Param bus</dt>
<dd class="field-odd"><p>is the SPI bus </p>
</dd>
<dt class="field-even">Param config</dt>
<dd class="field-even"><p>is the slave specific configuration </p>
</dd>
</dl>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.spi_buf">
<span class="target" id="structspi__buf"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">spi_buf</span></span></span><a class="headerlink" href="#c.spi_buf" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;spi.h&gt;</em></div>
<p>SPI buffer structure. </p>
<dl class="field-list simple">
<dt class="field-odd">Param buf</dt>
<dd class="field-odd"><p>is a valid pointer on a data buffer, or NULL otherwise. </p>
</dd>
<dt class="field-even">Param len</dt>
<dd class="field-even"><p>is the length of the buffer or, if buf is NULL, will be the length which as to be sent as dummy bytes (as TX buffer) or the length of bytes that should be skipped (as RX buffer). </p>
</dd>
</dl>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.spi_buf_set">
<span class="target" id="structspi__buf__set"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">spi_buf_set</span></span></span><a class="headerlink" href="#c.spi_buf_set" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;spi.h&gt;</em></div>
<p>SPI buffer array structure. </p>
<dl class="field-list simple">
<dt class="field-odd">Param buffers</dt>
<dd class="field-odd"><p>is a valid pointer on an array of <a class="reference internal" href="#structspi__buf"><span class="std std-ref">spi_buf</span></a>, or NULL. </p>
</dd>
<dt class="field-even">Param count</dt>
<dd class="field-even"><p>is the length of the array pointed by buffers. </p>
</dd>
</dl>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.spi_driver_api">
<span class="target" id="structspi__driver__api"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">spi_driver_api</span></span></span><a class="headerlink" href="#c.spi_driver_api" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;spi.h&gt;</em></div>
<p>SPI driver API This is the mandatory API any SPI driver needs to expose. </p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
          </div>

          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../copyright.html">Copyright</a> 2015-2022 Zephyr Project members and individual contributors.
      <span class="lastupdated">Last updated on Mar 05, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
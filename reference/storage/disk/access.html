<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Disk Access &mdash; Zephyr Project Documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script type="module" src="../../../_static/js/dark-mode-toggle.min.mjs"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-831873-47"></script>
        <script src="../../../_static/js/ga-tracker.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="copyright" title="Copyright" href="../../../copyright.html" />
    <link rel="next" title="Flash map" href="../flash_map/flash_map.html" />
    <link rel="prev" title="Non-Volatile Storage (NVS)" href="../nvs/nvs.html" />
  <meta name="color-scheme" content="dark light">
  
  <link rel="stylesheet" href="../../../_static/css/light.css" type="text/css" media="(prefers-color-scheme: light)"/>
  <link rel="stylesheet" href="../../../_static/css/dark.css" type="text/css" media="(prefers-color-scheme: dark)"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html">
            <img src="../../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.99
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Zephyr Project</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Release Versions</dt>
        
          <dd><a href="/">latest</a></dd>
        
          <dd><a href="/3.0.0/">3.0.0</a></dd>
        
          <dd><a href="/2.7.0/">2.7.0</a></dd>
        
          <dd><a href="/2.6.0/">2.6.0</a></dd>
        
          <dd><a href="/2.5.0/">2.5.0</a></dd>
        
          <dd><a href="/2.4.0/">2.4.0</a></dd>
        
          <dd><a href="/2.3.0/">2.3.0</a></dd>
        
          <dd><a href="/1.14.1/">1.14.1</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="/latest/zephyr.pdf">PDF</a></dd>
      </dl>
      <dl>
        <dt>zephyrproject.org Links</dt>
          <dd>
            <a href="https://www.zephyrproject.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/sdk-ng/releases">SDK</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/zephyr/releases">Releases</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute/index.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../development_process/index.html">Development and Contribution Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/build/index.html">Build and Configuration Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../application/index.html">Application Development</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../api/index.html">API Status and Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../audio/index.html">Audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../misc/notify.html">Asynchronous Notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bluetooth/index.html">Bluetooth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../canbus/index.html">Controller Area Network (CAN)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../crypto/index.html">Crypto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../devicetree/index.html">Devicetree</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../drivers/index.html">Device Driver Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../display/index.html">Display Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../edac/index.html">Error Detection And Correction (EDAC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../file_system/index.html">File Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../iterable_sections/index.html">Iterable Sections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../misc/formatted_output.html">Formatted Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../kernel/index.html">Kernel Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../libc/index.html">C standard library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../logging/index.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../memory_management/index.html">Memory Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../misc/index.html">Miscellaneous</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../data_structures/index.html">Data Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modbus/index.html">Modbus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../networking/index.html">Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../peripherals/index.html">Peripherals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pinctrl/index.html">Pin Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pm/index.html">Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../random/index.html">Random Number Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../resource_management/index.html">Resource Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shell/index.html">Shell</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Storage</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../nvs/nvs.html">Non-Volatile Storage (NVS)</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Disk Access</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sd-card-support">SD Card support</a></li>
<li class="toctree-l4"><a class="reference internal" href="#disk-access-api-configuration-options">Disk Access API Configuration Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-reference">API Reference</a></li>
<li class="toctree-l4"><a class="reference internal" href="#disk-driver-configuration-options">Disk Driver Configuration Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#disk-driver-interface">Disk Driver Interface</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../flash_map/flash_map.html">Flash map</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fcb/fcb.html">Flash Circular Buffer (FCB)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stream/stream_flash.html">Stream Flash</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../task_wdt/index.html">Task Watchdog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../misc/timeutil.html">Time Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usb/index.html">USB device support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usermode/index.html">User Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../util/index.html">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../settings/index.html">Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../timing_functions/index.html">Executing Time Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../virtualization/index.html">Virtualization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/index.html">User and Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security/index.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../samples/index.html">Samples and Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../boards/index.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/index.html">Release Notes</a></li>
</ul>

  
  <div class="toctree-wrapper compound">
    <p class="caption"><span class="caption-text">Reference</span></p>
    <ul>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/doxygen/html/index.html">API</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/kconfig.html">Kconfig Options</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/devicetree/bindings.html">Devicetree Bindings</a>
      </li>
      
    </ul>
  </div>
  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Zephyr Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Docs / Latest -->
  
  

  <li><a href="../../../index.html">Docs / Latest</a> &raquo;</li>
  
     <li><a href="../../index.html">API Reference</a> &raquo;</li>
  
     <li><a href="../index.html">Storage</a> &raquo;</li>
  
  <li>Disk Access</li>


  <li class="wy-breadcrumbs-aside">
    <dark-mode-toggle id="dark-mode-toggle" appearance="toggle" permanent="true"/>
  </li>
  <li class="wy-breadcrumbs-aside">
      
      
        <a href="https://github.com/zephyrproject-rtos/zephyr/blob/main/doc/reference/storage/disk/access.rst" class="fa fa-github"> Open on GitHub</a>
      
    
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="wy-alert wy-alert-danger">
     This is the documentation for the latest (main) development branch of
     Zephyr. If you are looking for the documentation of previous releases, use
     the drop-down menu on the left and select the desired version.
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="disk-access">
<span id="disk-access-api"></span><h1>Disk Access<a class="headerlink" href="#disk-access" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The disk access API provides access to storage devices.</p>
</div>
<div class="section" id="sd-card-support">
<h2>SD Card support<a class="headerlink" href="#sd-card-support" title="Permalink to this headline">¶</a></h2>
<p>Zephyr has support for some SD card controllers and support for interfacing
SD cards via SPI. These drivers use disk driver interface and a file system
can access the SD cards via disk access API.
Both standard and high-capacity SD cards are supported.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The system does not support inserting or removing cards while the
system is running. The cards must be present at boot and must not be
removed. This may be fixed in future releases.</p>
<p>FAT filesystems are not power safe so the filesystem may become
corrupted if power is lost or if the card is removed.</p>
</div>
<div class="section" id="sd-card-support-via-spi">
<h3>SD Card support via SPI<a class="headerlink" href="#sd-card-support-via-spi" title="Permalink to this headline">¶</a></h3>
<p>Example devicetree fragment below shows how to add SD card node to <code class="docutils literal notranslate"><span class="pre">spi1</span></code>
interface. Example uses pin <code class="docutils literal notranslate"><span class="pre">PA27</span></code> for chip select, and runs the SPI bus
at 24 MHz once the SD card has been initialized:</p>
<div class="highlight-devicetree notranslate"><div class="highlight"><pre><span></span><span class="o">&amp;</span><span class="na">spi1</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kr">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;okay&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">cs-gpios</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;&amp;</span><span class="na">porta</span><span class="w"> </span><span class="mi">27</span><span class="w"> </span><span class="na">GPIO_ACTIVE_LOW</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="nl">sdhc0</span><span class="p">:</span><span class="w"> </span><span class="nf">sdhc</span><span class="o">@</span><span class="mi">0</span><span class="cm"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="kr">compatible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;zephyr,mmc-spi-slot&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="kr">reg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="kr">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;okay&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;SDHC0&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">spi-max-frequency</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">24000000</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">};</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>The SD card will be automatically detected and initialized by the
filesystem driver when the board boots.</p>
<p>To read and write files and directories, see the <a class="reference internal" href="../../file_system/index.html#file-system-api"><span class="std std-ref">File Systems</span></a> in
<a class="reference external" href="https://github.com/zephyrproject-rtos/zephyr/blob/main/include/fs.h">include/fs.h</a> such as <a class="reference internal" href="../../file_system/index.html#c.fs_open" title="fs_open"><code class="xref c c-func docutils literal notranslate"><span class="pre">fs_open()</span></code></a>,
<a class="reference internal" href="../../file_system/index.html#c.fs_read" title="fs_read"><code class="xref c c-func docutils literal notranslate"><span class="pre">fs_read()</span></code></a>, and <a class="reference internal" href="../../file_system/index.html#c.fs_write" title="fs_write"><code class="xref c c-func docutils literal notranslate"><span class="pre">fs_write()</span></code></a>.</p>
</div>
</div>
<div class="section" id="disk-access-api-configuration-options">
<h2>Disk Access API Configuration Options<a class="headerlink" href="#disk-access-api-configuration-options" title="Permalink to this headline">¶</a></h2>
<p>Related configuration options:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../kconfig.html#CONFIG_DISK_ACCESS" title="CONFIG_DISK_ACCESS"><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_DISK_ACCESS</span></code></a></p></li>
</ul>
</div>
<div class="section" id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h2>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__disk__access__interface"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">disk_access_interface</span></span></dt>
<dd><p>Disk Access APIs. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.disk_access_init">
<span class="target" id="group__disk__access__interface_1gaba3fead8c0ce65945b440bf824fd4144"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">disk_access_init</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">pdrv</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.disk_access_init" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>perform any initialization </p>
<p>This call is made by the consumer before doing any IO calls so that the disk or the backing device can do any initialization.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pdrv</strong> – <strong>[in]</strong> Disk name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 on success, negative errno code on fail </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.disk_access_status">
<span class="target" id="group__disk__access__interface_1gac5348a854fe68a607672118c91346133"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">disk_access_status</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">pdrv</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.disk_access_status" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the status of disk. </p>
<p>This call is used to get the status of the disk</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pdrv</strong> – <strong>[in]</strong> Disk name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DISK_STATUS_OK or other DISK_STATUS_*s </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.disk_access_read">
<span class="target" id="group__disk__access__interface_1ga5152825bf2a70902e65dbc596a944a1b"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">disk_access_read</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">pdrv</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data_buf</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">start_sector</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">num_sector</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.disk_access_read" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>read data from disk </p>
<p>Function to read data from disk to a memory buffer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pdrv</strong> – <strong>[in]</strong> Disk name </p></li>
<li><p><strong>data_buf</strong> – <strong>[in]</strong> Pointer to the memory buffer to put data. </p></li>
<li><p><strong>start_sector</strong> – <strong>[in]</strong> Start disk sector to read from </p></li>
<li><p><strong>num_sector</strong> – <strong>[in]</strong> Number of disk sectors to read</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 on success, negative errno code on fail </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.disk_access_write">
<span class="target" id="group__disk__access__interface_1gaa0495600320a71ea9e861fcf19da7184"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">disk_access_write</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">pdrv</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data_buf</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">start_sector</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">num_sector</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.disk_access_write" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>write data to disk </p>
<p>Function write data from memory buffer to disk.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pdrv</strong> – <strong>[in]</strong> Disk name </p></li>
<li><p><strong>data_buf</strong> – <strong>[in]</strong> Pointer to the memory buffer </p></li>
<li><p><strong>start_sector</strong> – <strong>[in]</strong> Start disk sector to write to </p></li>
<li><p><strong>num_sector</strong> – <strong>[in]</strong> Number of disk sectors to write</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 on success, negative errno code on fail </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.disk_access_ioctl">
<span class="target" id="group__disk__access__interface_1ga152d85821d73644fea7ffde27b7c953c"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">disk_access_ioctl</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">pdrv</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">cmd</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">buff</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.disk_access_ioctl" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get/Configure disk parameters. </p>
<p>Function to get disk parameters and make any special device requests.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pdrv</strong> – <strong>[in]</strong> Disk name </p></li>
<li><p><strong>cmd</strong> – <strong>[in]</strong> DISK_IOCTL_* code describing the request </p></li>
<li><p><strong>buff</strong> – <strong>[in]</strong> Command data buffer</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 on success, negative errno code on fail </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</div>
<div class="section" id="disk-driver-configuration-options">
<h2>Disk Driver Configuration Options<a class="headerlink" href="#disk-driver-configuration-options" title="Permalink to this headline">¶</a></h2>
<p>Related driver configuration options:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../kconfig.html#CONFIG_DISK_DRIVERS" title="CONFIG_DISK_DRIVERS"><code class="xref kconfig kconfig-option docutils literal notranslate"><span class="pre">CONFIG_DISK_DRIVERS</span></code></a></p></li>
</ul>
</div>
<div class="section" id="disk-driver-interface">
<h2>Disk Driver Interface<a class="headerlink" href="#disk-driver-interface" title="Permalink to this headline">¶</a></h2>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__disk__driver__interface"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">disk_driver_interface</span></span></dt>
<dd><p>Disk Driver Interface. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-defines">Defines</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.DISK_IOCTL_GET_SECTOR_COUNT">
<span class="target" id="group__disk__driver__interface_1ga7e75d3121989e64a8c6e218409e8fe95"></span><span class="sig-name descname"><span class="n"><span class="pre">DISK_IOCTL_GET_SECTOR_COUNT</span></span></span><a class="headerlink" href="#c.DISK_IOCTL_GET_SECTOR_COUNT" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Possible Cmd Codes for disk_ioctl() </p>
<p>Get the number of sectors in the disk </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.DISK_IOCTL_GET_SECTOR_SIZE">
<span class="target" id="group__disk__driver__interface_1ga03dcb39dd5be7144d8f6ae76b7415e9a"></span><span class="sig-name descname"><span class="n"><span class="pre">DISK_IOCTL_GET_SECTOR_SIZE</span></span></span><a class="headerlink" href="#c.DISK_IOCTL_GET_SECTOR_SIZE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the size of a disk SECTOR in bytes </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.DISK_IOCTL_RESERVED">
<span class="target" id="group__disk__driver__interface_1ga7ffc5d075a4e8d6eb659ee4ea73e62a0"></span><span class="sig-name descname"><span class="n"><span class="pre">DISK_IOCTL_RESERVED</span></span></span><a class="headerlink" href="#c.DISK_IOCTL_RESERVED" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>reserved. It used to be DISK_IOCTL_GET_DISK_SIZE </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.DISK_IOCTL_GET_ERASE_BLOCK_SZ">
<span class="target" id="group__disk__driver__interface_1ga2444e2a2884f9e0d6dd93aedc5d654ac"></span><span class="sig-name descname"><span class="n"><span class="pre">DISK_IOCTL_GET_ERASE_BLOCK_SZ</span></span></span><a class="headerlink" href="#c.DISK_IOCTL_GET_ERASE_BLOCK_SZ" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>How many sectors constitute a FLASH Erase block </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.DISK_IOCTL_CTRL_SYNC">
<span class="target" id="group__disk__driver__interface_1ga656aaa245cc142f3ff82a003bb307d62"></span><span class="sig-name descname"><span class="n"><span class="pre">DISK_IOCTL_CTRL_SYNC</span></span></span><a class="headerlink" href="#c.DISK_IOCTL_CTRL_SYNC" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Commit any cached read/writes to disk </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.DISK_STATUS_OK">
<span class="target" id="group__disk__driver__interface_1gae1730a7bf4ca0210bc8eefe3b590623a"></span><span class="sig-name descname"><span class="n"><span class="pre">DISK_STATUS_OK</span></span></span><a class="headerlink" href="#c.DISK_STATUS_OK" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Possible return bitmasks for disk_status() </p>
<p>Disk status okay </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.DISK_STATUS_UNINIT">
<span class="target" id="group__disk__driver__interface_1ga533eb718a946ba60e0ad6e0e4fd4f75a"></span><span class="sig-name descname"><span class="n"><span class="pre">DISK_STATUS_UNINIT</span></span></span><a class="headerlink" href="#c.DISK_STATUS_UNINIT" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Disk status uninitialized </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.DISK_STATUS_NOMEDIA">
<span class="target" id="group__disk__driver__interface_1ga1c70c8182b3497f606091f19c142be59"></span><span class="sig-name descname"><span class="n"><span class="pre">DISK_STATUS_NOMEDIA</span></span></span><a class="headerlink" href="#c.DISK_STATUS_NOMEDIA" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Disk status no media </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.DISK_STATUS_WR_PROTECT">
<span class="target" id="group__disk__driver__interface_1ga0a5ba8f4be6241f62a969ea56c26f7e3"></span><span class="sig-name descname"><span class="n"><span class="pre">DISK_STATUS_WR_PROTECT</span></span></span><a class="headerlink" href="#c.DISK_STATUS_WR_PROTECT" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Disk status write protected </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.disk_access_register">
<span class="target" id="group__disk__driver__interface_1gaa11586a0b8ae6f2f0c142cec0df0c5fa"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">disk_access_register</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.disk_info" title="disk_info"><span class="n"><span class="pre">disk_info</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">disk</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.disk_access_register" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Register disk. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>disk</strong> – <strong>[in]</strong> Pointer to the disk info structure</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 on success, negative errno code on fail </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.disk_access_unregister">
<span class="target" id="group__disk__driver__interface_1gada802c6be65186009162a25f391dfb71"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">disk_access_unregister</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.disk_info" title="disk_info"><span class="n"><span class="pre">disk_info</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">disk</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.disk_access_unregister" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Unregister disk. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>disk</strong> – <strong>[in]</strong> Pointer to the disk info structure</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>0 on success, negative errno code on fail </p>
</dd>
</dl>
</dd></dl>

</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.disk_info">
<span class="target" id="structdisk__info"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">disk_info</span></span></span><a class="headerlink" href="#c.disk_info" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;disk.h&gt;</em></div>
<p>Disk info. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.disk_info.node">
<span class="target" id="structdisk__info_1ab3413d8809d5181c671e1890a4662ba2"></span><a class="reference internal" href="../../data_structures/dlist.html#c.sys_dnode_t" title="sys_dnode_t"><span class="n"><span class="pre">sys_dnode_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">node</span></span></span><a class="headerlink" href="#c.disk_info.node" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Internally used list node </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.disk_info.name">
<span class="target" id="structdisk__info_1a817b13306aa7deab4d366482b77e4dfc"></span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">name</span></span></span><a class="headerlink" href="#c.disk_info.name" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Disk name </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.disk_info.ops">
<span class="target" id="structdisk__info_1a329a571f988718fd4737b8974d4f7ada"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.disk_operations" title="disk_operations"><span class="n"><span class="pre">disk_operations</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">ops</span></span></span><a class="headerlink" href="#c.disk_info.ops" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Disk operations </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.disk_info.dev">
<span class="target" id="structdisk__info_1ae316915bd577f22dc9d353fc4b2f04bb"></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../../drivers/index.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">dev</span></span></span><a class="headerlink" href="#c.disk_info.dev" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Device associated to this disk </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.disk_operations">
<span class="target" id="structdisk__operations"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">disk_operations</span></span></span><a class="headerlink" href="#c.disk_operations" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;disk.h&gt;</em></div>
<p>Disk operations. </p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
          </div>

          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../../copyright.html">Copyright</a> 2015-2022 Zephyr Project members and individual contributors.
      <span class="lastupdated">Last updated on Mar 05, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
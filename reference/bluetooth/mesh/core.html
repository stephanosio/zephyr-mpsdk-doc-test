<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Core &mdash; Zephyr Project Documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script type="module" src="../../../_static/js/dark-mode-toggle.min.mjs"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-831873-47"></script>
        <script src="../../../_static/js/ga-tracker.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="copyright" title="Copyright" href="../../../copyright.html" />
    <link rel="next" title="Access layer" href="access.html" />
    <link rel="prev" title="Bluetooth Mesh Profile" href="../mesh.html" />
  <meta name="color-scheme" content="dark light">
  
  <link rel="stylesheet" href="../../../_static/css/light.css" type="text/css" media="(prefers-color-scheme: light)"/>
  <link rel="stylesheet" href="../../../_static/css/dark.css" type="text/css" media="(prefers-color-scheme: dark)"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html">
            <img src="../../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.0-rc3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Zephyr Project</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Release Versions</dt>
        
          <dd><a href="/">latest</a></dd>
        
          <dd><a href="/2.7.0/">2.7.0</a></dd>
        
          <dd><a href="/2.6.0/">2.6.0</a></dd>
        
          <dd><a href="/2.5.0/">2.5.0</a></dd>
        
          <dd><a href="/2.4.0/">2.4.0</a></dd>
        
          <dd><a href="/2.3.0/">2.3.0</a></dd>
        
          <dd><a href="/1.14.1/">1.14.1</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="/latest/zephyr.pdf">PDF</a></dd>
      </dl>
      <dl>
        <dt>zephyrproject.org Links</dt>
          <dd>
            <a href="https://www.zephyrproject.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/sdk-ng/releases">SDK</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/zephyr/releases">Releases</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute/index.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../development_process/index.html">Development and Contribution Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/build/index.html">Build and Configuration Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../application/index.html">Application Development</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../api/index.html">API Status and Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../audio/index.html">Audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../misc/notify.html">Asynchronous Notifications</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Bluetooth</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../connection_mgmt.html">Connection Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../controller.html">Bluetooth Controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="../crypto.html">Cryptography</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_buffer.html">Data Buffers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gap.html">Generic Access Profile (GAP)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gatt.html">Generic Attribute Profile (GATT)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hci_drivers.html">HCI Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hci_raw.html">HCI RAW channel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hfp.html">Hands Free Profile (HFP)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../l2cap.html">Logical Link Control and Adaptation Protocol (L2CAP)</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../mesh.html">Bluetooth Mesh Profile</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Core</a></li>
<li class="toctree-l4"><a class="reference internal" href="access.html">Access layer</a></li>
<li class="toctree-l4"><a class="reference internal" href="models.html">Foundation models</a></li>
<li class="toctree-l4"><a class="reference internal" href="msg.html">Message</a></li>
<li class="toctree-l4"><a class="reference internal" href="provisioning.html">Provisioning</a></li>
<li class="toctree-l4"><a class="reference internal" href="proxy.html">Proxy</a></li>
<li class="toctree-l4"><a class="reference internal" href="heartbeat.html">Heartbeat</a></li>
<li class="toctree-l4"><a class="reference internal" href="cfg.html">Runtime Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="shell.html">Bluetooth Mesh Shell</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rfcomm.html">Serial Port Emulation (RFCOMM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sdp.html">Service Discovery Protocol (SDP)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uuid.html">Universal Unique Identifiers (UUIDs)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell/audio.html">Bluetooth: Basic Audio Profile</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canbus/index.html">Controller Area Network (CAN)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../crypto/index.html">Crypto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../devicetree/index.html">Devicetree</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../drivers/index.html">Device Driver Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../display/index.html">Display Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../edac/index.html">Error Detection And Correction (EDAC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../file_system/index.html">File Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../iterable_sections/index.html">Iterable Sections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../misc/formatted_output.html">Formatted Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../kernel/index.html">Kernel Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../libc/index.html">C standard library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../logging/index.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../memory_management/index.html">Memory Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../misc/index.html">Miscellaneous</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../data_structures/index.html">Data Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modbus/index.html">Modbus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../networking/index.html">Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../peripherals/index.html">Peripherals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pinctrl/index.html">Pin Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pm/index.html">Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../random/index.html">Random Number Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../resource_management/index.html">Resource Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shell/index.html">Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../storage/index.html">Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../task_wdt/index.html">Task Watchdog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../misc/timeutil.html">Time Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usb/index.html">USB device support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usermode/index.html">User Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../util/index.html">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../settings/index.html">Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../timing_functions/index.html">Executing Time Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../virtualization/index.html">Virtualization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/index.html">User and Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security/index.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../samples/index.html">Samples and Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../boards/index.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/index.html">Release Notes</a></li>
</ul>

  
  <div class="toctree-wrapper compound">
    <p class="caption"><span class="caption-text">Reference</span></p>
    <ul>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/doxygen/html/index.html">API</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/kconfig/index.html">Kconfig Options</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/devicetree/bindings.html">Devicetree Bindings</a>
      </li>
      
    </ul>
  </div>
  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Zephyr Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Docs / Latest -->
  
  

  <li><a href="../../../index.html">Docs / Latest</a> &raquo;</li>
  
     <li><a href="../../index.html">API Reference</a> &raquo;</li>
  
     <li><a href="../index.html">Bluetooth</a> &raquo;</li>
  
     <li><a href="../mesh.html">Bluetooth Mesh Profile</a> &raquo;</li>
  
  <li>Core</li>


  <li class="wy-breadcrumbs-aside">
    <dark-mode-toggle id="dark-mode-toggle" appearance="toggle" permanent="true"/>
  </li>
  <li class="wy-breadcrumbs-aside">
      
      
        <a href="https://github.com/zephyrproject-rtos/zephyr/blob/main/doc/reference/bluetooth/mesh/core.rst" class="fa fa-github"> Open on GitHub</a>
      
    
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="wy-alert wy-alert-danger">
     This is the documentation for the latest (main) development branch of
     Zephyr. If you are looking for the documentation of previous releases, use
     the drop-down menu on the left and select the desired version.
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="core">
<span id="bluetooth-mesh-core"></span><h1>Core<a class="headerlink" href="#core" title="Permalink to this headline">¶</a></h1>
<p>The core provides functionality for managing the general Bluetooth mesh
state.</p>
<div class="section" id="low-power-node">
<h2>Low Power Node<a class="headerlink" href="#low-power-node" title="Permalink to this headline">¶</a></h2>
<p>The Low Power Node (LPN) role allows battery powered devices to participate in
a mesh network as a leaf node. An LPN interacts with the mesh network through
a Friend node, which is responsible for relaying any messages directed to the
LPN. The LPN saves power by keeping its radio turned off, and only wakes up to
either send messages or poll the Friend node for any incoming messages.</p>
<p>The radio control and polling is managed automatically by the mesh stack, but
the LPN API allows the application to trigger the polling at any time through
<a class="reference internal" href="#c.bt_mesh_lpn_poll" title="bt_mesh_lpn_poll"><code class="xref c c-func docutils literal notranslate"><span class="pre">bt_mesh_lpn_poll()</span></code></a>. The LPN operation parameters, including poll
interval, poll event timing and Friend requirements is controlled through the
<a class="reference internal" href="../../kconfig/dummy-syms.html#std-kconfig-CONFIG_BT_MESH_LOW_POWER"><code class="xref std std-kconfig docutils literal notranslate"><span class="pre">CONFIG_BT_MESH_LOW_POWER</span></code></a> option and related configuration options.</p>
</div>
<div class="section" id="replay-protection-list">
<h2>Replay Protection List<a class="headerlink" href="#replay-protection-list" title="Permalink to this headline">¶</a></h2>
<p>The Replay Protection List (RPL) is used to hold recently received sequence
numbers from elements within the mesh network to perform protection against
replay attacks.</p>
<p>To keep a node protected against replay attacks after reboot, it needs to store
the entire RPL in the persistent storage before it is powered off. Depending on
the amount of traffic in a mesh network, storing recently seen sequence numbers
can make flash wear out sooner or later. To mitigate this,
&#64;ref CONFIG_BT_MESH_RPL_STORE_TIMEOUT can be used. This option postpones
storing of RPL entries in the persistent storage.</p>
<p>This option, however, doesn’t completely solve the issue as the node may
get powered off before the timer to store the RPL is fired. To ensure that
messages can not be replayed, the node can initiate storage of the pending
RPL entry (or entries) at any time (or sufficiently before power loss)
by calling &#64;ref bt_mesh_rpl_pending_store. This is up to the node to decide,
which RPL entries are to be stored in this case.</p>
<p>Setting &#64;ref CONFIG_BT_MESH_RPL_STORE_TIMEOUT to -1 allows to completely
switch off the timer, which can help to significantly reduce flash wear out.
This moves the responsibility of storing RPL to the user application and
requires that sufficient power backup is available from the time this API
is called until all RPL entries are written to the flash.</p>
<p>Finding the right balance between &#64;ref CONFIG_BT_MESH_RPL_STORE_TIMEOUT and
calling &#64;ref bt_mesh_rpl_pending_store may reduce a risk of security
volnurability and flash wear out.</p>
</div>
<div class="section" id="api-reference">
<h2>API reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h2>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__bt__mesh"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">bt_mesh</span></span></dt>
<dd><p>Bluetooth mesh. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-defines">Defines</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.BT_MESH_NET_PRIMARY">
<span class="target" id="group__bt__mesh_1ga0d6985da3c7be76732ee103458b77121"></span><span class="sig-name descname"><span class="n"><span class="pre">BT_MESH_NET_PRIMARY</span></span></span><a class="headerlink" href="#c.BT_MESH_NET_PRIMARY" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.BT_MESH_FEAT_RELAY">
<span class="target" id="group__bt__mesh_1gac588eefe83db94784a420ce063f02b55"></span><span class="sig-name descname"><span class="n"><span class="pre">BT_MESH_FEAT_RELAY</span></span></span><a class="headerlink" href="#c.BT_MESH_FEAT_RELAY" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Relay feature </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.BT_MESH_FEAT_PROXY">
<span class="target" id="group__bt__mesh_1gaee648ce202316c56d4d588cb0ad5aeb4"></span><span class="sig-name descname"><span class="n"><span class="pre">BT_MESH_FEAT_PROXY</span></span></span><a class="headerlink" href="#c.BT_MESH_FEAT_PROXY" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>GATT Proxy feature </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.BT_MESH_FEAT_FRIEND">
<span class="target" id="group__bt__mesh_1ga8f27086b3bc3c4a6e14621836f9f8e80"></span><span class="sig-name descname"><span class="n"><span class="pre">BT_MESH_FEAT_FRIEND</span></span></span><a class="headerlink" href="#c.BT_MESH_FEAT_FRIEND" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Friend feature </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.BT_MESH_FEAT_LOW_POWER">
<span class="target" id="group__bt__mesh_1gaad71a36c82b4e4d3fa334ecff5cc0171"></span><span class="sig-name descname"><span class="n"><span class="pre">BT_MESH_FEAT_LOW_POWER</span></span></span><a class="headerlink" href="#c.BT_MESH_FEAT_LOW_POWER" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Low Power Node feature </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.BT_MESH_FEAT_SUPPORTED">
<span class="target" id="group__bt__mesh_1gac337fd8688d70e862974e010ad42a11b"></span><span class="sig-name descname"><span class="n"><span class="pre">BT_MESH_FEAT_SUPPORTED</span></span></span><a class="headerlink" href="#c.BT_MESH_FEAT_SUPPORTED" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.BT_MESH_LPN_CB_DEFINE">
<span class="target" id="group__bt__mesh_1gac18d4ce09495a8ade098a6320bb26ec2"></span><span class="sig-name descname"><span class="n"><span class="pre">BT_MESH_LPN_CB_DEFINE</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">_name</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.BT_MESH_LPN_CB_DEFINE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Register a callback structure for Friendship events. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_name</strong> – Name of callback structure. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.BT_MESH_FRIEND_CB_DEFINE">
<span class="target" id="group__bt__mesh_1ga4f00fa03af86b39e24140eb09c51ca4c"></span><span class="sig-name descname"><span class="n"><span class="pre">BT_MESH_FRIEND_CB_DEFINE</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">_name</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.BT_MESH_FRIEND_CB_DEFINE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Register a callback structure for Friendship events. </p>
<p>Registers a callback structure that will be called whenever Friendship gets established or terminated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_name</strong> – Name of callback structure. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.bt_mesh_init">
<span class="target" id="group__bt__mesh_1ga521def6f74467a9bd3f2757c6aabd405"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_init</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="provisioning.html#c.bt_mesh_prov" title="bt_mesh_prov"><span class="n"><span class="pre">bt_mesh_prov</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">prov</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="access.html#c.bt_mesh_comp" title="bt_mesh_comp"><span class="n"><span class="pre">bt_mesh_comp</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">comp</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_mesh_init" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Initialize Mesh support. </p>
<p>After calling this API, the node will not automatically advertise as unprovisioned, rather the <a class="reference internal" href="provisioning.html#group__bt__mesh__prov_1ga6c8dc1b09d4cde8738be83c992b860a9"><span class="std std-ref">bt_mesh_prov_enable()</span></a> API needs to be called to enable unprovisioned advertising on one or more provisioning bearers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prov</strong> – Node provisioning information. </p></li>
<li><p><strong>comp</strong> – Node Composition.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Zero on success or (negative) error code otherwise. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_mesh_reset">
<span class="target" id="group__bt__mesh_1ga69fc65f4e07e6007388473f139e5d8d8"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_reset</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_mesh_reset" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Reset the state of the local Mesh node. </p>
<p>Resets the state of the node, which means that it needs to be reprovisioned to become an active node in a Mesh network again.</p>
<p>After calling this API, the node will not automatically advertise as unprovisioned, rather the <a class="reference internal" href="provisioning.html#group__bt__mesh__prov_1ga6c8dc1b09d4cde8738be83c992b860a9"><span class="std std-ref">bt_mesh_prov_enable()</span></a> API needs to be called to enable unprovisioned advertising on one or more provisioning bearers. </p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_mesh_suspend">
<span class="target" id="group__bt__mesh_1ga6c209dbad6881f1e9634d9b7d42f2c34"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_suspend</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_mesh_suspend" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Suspend the Mesh network temporarily. </p>
<p>This API can be used for power saving purposes, but the user should be aware that leaving the local node suspended for a long period of time may cause it to become permanently disconnected from the Mesh network. If at all possible, the Friendship feature should be used instead, to make the node into a Low Power Node.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>0 on success, or (negative) error code on failure. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_mesh_resume">
<span class="target" id="group__bt__mesh_1gaa9114ce8941e641dbb23828d7c0451fd"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_resume</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_mesh_resume" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Resume a suspended Mesh network. </p>
<p>This API resumes the local node, after it has been suspended using the <a class="reference internal" href="#group__bt__mesh_1ga6c209dbad6881f1e9634d9b7d42f2c34"><span class="std std-ref">bt_mesh_suspend()</span></a> API.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>0 on success, or (negative) error code on failure. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_mesh_iv_update_test">
<span class="target" id="group__bt__mesh_1ga3fdc601bd036477f6bdf212667c6b0c9"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_iv_update_test</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n"><span class="pre">enable</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_mesh_iv_update_test" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Toggle the IV Update test mode. </p>
<p>This API is only available if the IV Update test mode has been enabled in Kconfig. It is needed for passing most of the IV Update qualification test cases.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>enable</strong> – true to enable IV Update test mode, false to disable it. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_mesh_iv_update">
<span class="target" id="group__bt__mesh_1gacdf00423b03057fdf3a4207ee579eb74"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_iv_update</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_mesh_iv_update" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Toggle the IV Update state. </p>
<p>This API is only available if the IV Update test mode has been enabled in Kconfig. It is needed for passing most of the IV Update qualification test cases.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>true if IV Update In Progress state was entered, false otherwise. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_mesh_lpn_set">
<span class="target" id="group__bt__mesh_1ga7964f5b1abb7b12728e4ec224c95c849"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_lpn_set</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n"><span class="pre">enable</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_mesh_lpn_set" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Toggle the Low Power feature of the local device. </p>
<p>Enables or disables the Low Power feature of the local device. This is exposed as a run-time feature, since the device might want to change this e.g. based on being plugged into a stable power source or running from a battery power source.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>enable</strong> – true to enable LPN functionality, false to disable it.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Zero on success or (negative) error code otherwise. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_mesh_lpn_poll">
<span class="target" id="group__bt__mesh_1ga3fd66605950a55e299ca3a7cc697d453"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_lpn_poll</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_mesh_lpn_poll" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Send out a Friend Poll message. </p>
<p>Send a Friend Poll message to the Friend of this node. If there is no established Friendship the function will return an error.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Zero on success or (negative) error code otherwise. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_mesh_friend_terminate">
<span class="target" id="group__bt__mesh_1ga28b9b1d7d732e300be8d4bbffdbad391"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_friend_terminate</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">lpn_addr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_mesh_friend_terminate" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Terminate Friendship. </p>
<p>Terminated Friendship for given LPN.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lpn_addr</strong> – Low Power Node address.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Zero on success or (negative) error code otherwise. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_mesh_rpl_pending_store">
<span class="target" id="group__bt__mesh_1ga62f9a72c4e9dc5e4f3f42bd4df4fe452"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_rpl_pending_store</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_mesh_rpl_pending_store" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Store pending RPL entry(ies) in the persistent storage. </p>
<p>This API allows the user to store pending RPL entry(ies) in the persistent storage without waiting for the timeout.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When flash is used as the persistent storage, calling this API too frequently may wear it out.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>addr</strong> – Address of the node which RPL entry needs to be stored or <a class="reference internal" href="access.html#group__bt__mesh__access_1ga27aafd100b6ccc1de060a75370184620"><span class="std std-ref">BT_MESH_ADDR_ALL_NODES</span></a> to store all pending RPL entries. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.bt_mesh_lpn_cb">
<span class="target" id="structbt__mesh__lpn__cb"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_lpn_cb</span></span></span><a class="headerlink" href="#c.bt_mesh_lpn_cb" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;main.h&gt;</em></div>
<p>Low Power Node callback functions. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_lpn_cb.established">
<span class="target" id="structbt__mesh__lpn__cb_1a74b8b398b383518af069266cf3b0be91"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">established</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">net_idx</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">friend_addr</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">queue_size</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">recv_window</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.bt_mesh_lpn_cb.established" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Friendship established. </p>
<p>This callback notifies the application that friendship has been successfully established.</p>
<dl class="field-list simple">
<dt class="field-odd">Param net_idx</dt>
<dd class="field-odd"><p>NetKeyIndex used during friendship establishment. </p>
</dd>
<dt class="field-even">Param friend_addr</dt>
<dd class="field-even"><p>Friend address. </p>
</dd>
<dt class="field-odd">Param queue_size</dt>
<dd class="field-odd"><p>Friend queue size. </p>
</dd>
<dt class="field-even">Param recv_window</dt>
<dd class="field-even"><p>Low Power Node’s listens duration for Friend response. </p>
</dd>
</dl>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_lpn_cb.terminated">
<span class="target" id="structbt__mesh__lpn__cb_1af2e2f5043503c62926f96a5fcb48890c"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">terminated</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">net_idx</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">friend_addr</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.bt_mesh_lpn_cb.terminated" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Friendship terminated. </p>
<p>This callback notifies the application that friendship has been terminated.</p>
<dl class="field-list simple">
<dt class="field-odd">Param net_idx</dt>
<dd class="field-odd"><p>NetKeyIndex used during friendship establishment. </p>
</dd>
<dt class="field-even">Param friend_addr</dt>
<dd class="field-even"><p>Friend address. </p>
</dd>
</dl>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_lpn_cb.polled">
<span class="target" id="structbt__mesh__lpn__cb_1a9805ad8578faec5b371d6f39178332ef"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">polled</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">net_idx</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">friend_addr</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n"><span class="pre">retry</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.bt_mesh_lpn_cb.polled" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Local Poll Request. </p>
<p>This callback notifies the application that the local node has polled the friend node.</p>
<p>This callback will be called before <a class="reference internal" href="#structbt__mesh__lpn__cb_1a74b8b398b383518af069266cf3b0be91"><span class="std std-ref">bt_mesh_lpn_cb::established</span></a> when attempting to establish a friendship.</p>
<dl class="field-list simple">
<dt class="field-odd">Param net_idx</dt>
<dd class="field-odd"><p>NetKeyIndex used during friendship establishment. </p>
</dd>
<dt class="field-even">Param friend_addr</dt>
<dd class="field-even"><p>Friend address. </p>
</dd>
<dt class="field-odd">Param retry</dt>
<dd class="field-odd"><p>Retry or first poll request for each transaction. </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.bt_mesh_friend_cb">
<span class="target" id="structbt__mesh__friend__cb"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_friend_cb</span></span></span><a class="headerlink" href="#c.bt_mesh_friend_cb" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;main.h&gt;</em></div>
<p>Friend Node callback functions. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_friend_cb.established">
<span class="target" id="structbt__mesh__friend__cb_1a824ed814a46a3954d2c6f669c8900156"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">established</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">net_idx</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">lpn_addr</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">recv_delay</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">polltimeout</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.bt_mesh_friend_cb.established" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Friendship established. </p>
<p>This callback notifies the application that friendship has been successfully established.</p>
<dl class="field-list simple">
<dt class="field-odd">Param net_idx</dt>
<dd class="field-odd"><p>NetKeyIndex used during friendship establishment. </p>
</dd>
<dt class="field-even">Param lpn_addr</dt>
<dd class="field-even"><p>Low Power Node address. </p>
</dd>
<dt class="field-odd">Param recv_delay</dt>
<dd class="field-odd"><p>Receive Delay in units of 1 millisecond. </p>
</dd>
<dt class="field-even">Param polltimeout</dt>
<dd class="field-even"><p>PollTimeout in units of 1 millisecond. </p>
</dd>
</dl>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_friend_cb.terminated">
<span class="target" id="structbt__mesh__friend__cb_1a1c0d570eb1b857c65b3b5b4ce31999d6"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">terminated</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">net_idx</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">lpn_addr</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.bt_mesh_friend_cb.terminated" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Friendship terminated. </p>
<p>This callback notifies the application that friendship has been terminated.</p>
<dl class="field-list simple">
<dt class="field-odd">Param net_idx</dt>
<dd class="field-odd"><p>NetKeyIndex used during friendship establishment. </p>
</dd>
<dt class="field-even">Param lpn_addr</dt>
<dd class="field-even"><p>Low Power Node address. </p>
</dd>
</dl>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_friend_cb.polled">
<span class="target" id="structbt__mesh__friend__cb_1a7b904967d89173f82ac26216e3849d23"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">polled</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">net_idx</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">lpn_addr</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.bt_mesh_friend_cb.polled" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Friend Poll Request. </p>
<p>This callback notifies the application that the low power node has polled the friend node.</p>
<p>This callback will be called before <a class="reference internal" href="#structbt__mesh__friend__cb_1a824ed814a46a3954d2c6f669c8900156"><span class="std std-ref">bt_mesh_friend_cb::established</span></a> when attempting to establish a friendship.</p>
<dl class="field-list simple">
<dt class="field-odd">Param net_idx</dt>
<dd class="field-odd"><p>NetKeyIndex used during friendship establishment. </p>
</dd>
<dt class="field-even">Param lpn_addr</dt>
<dd class="field-even"><p>LPN address. </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
          </div>

          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../../copyright.html">Copyright</a> 2015-2021 Zephyr Project members and individual contributors.
      <span class="lastupdated">Last updated on Feb 21, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
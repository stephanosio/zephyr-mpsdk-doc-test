<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Heartbeat &mdash; Zephyr Project Documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script type="module" src="../../../_static/js/dark-mode-toggle.min.mjs"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-831873-47"></script>
        <script src="../../../_static/js/ga-tracker.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="copyright" title="Copyright" href="../../../copyright.html" />
    <link rel="next" title="Runtime Configuration" href="cfg.html" />
    <link rel="prev" title="Proxy" href="proxy.html" />
  <meta name="color-scheme" content="dark light">
  
  <link rel="stylesheet" href="../../../_static/css/light.css" type="text/css" media="(prefers-color-scheme: light)"/>
  <link rel="stylesheet" href="../../../_static/css/dark.css" type="text/css" media="(prefers-color-scheme: dark)"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html">
            <img src="../../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.0-rc3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Zephyr Project</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Release Versions</dt>
        
          <dd><a href="/">latest</a></dd>
        
          <dd><a href="/2.7.0/">2.7.0</a></dd>
        
          <dd><a href="/2.6.0/">2.6.0</a></dd>
        
          <dd><a href="/2.5.0/">2.5.0</a></dd>
        
          <dd><a href="/2.4.0/">2.4.0</a></dd>
        
          <dd><a href="/2.3.0/">2.3.0</a></dd>
        
          <dd><a href="/1.14.1/">1.14.1</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="/latest/zephyr.pdf">PDF</a></dd>
      </dl>
      <dl>
        <dt>zephyrproject.org Links</dt>
          <dd>
            <a href="https://www.zephyrproject.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/sdk-ng/releases">SDK</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/zephyr/releases">Releases</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute/index.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../development_process/index.html">Development and Contribution Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/build/index.html">Build and Configuration Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../application/index.html">Application Development</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../api/index.html">API Status and Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../audio/index.html">Audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../misc/notify.html">Asynchronous Notifications</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Bluetooth</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../connection_mgmt.html">Connection Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../controller.html">Bluetooth Controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="../crypto.html">Cryptography</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_buffer.html">Data Buffers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gap.html">Generic Access Profile (GAP)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gatt.html">Generic Attribute Profile (GATT)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hci_drivers.html">HCI Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hci_raw.html">HCI RAW channel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hfp.html">Hands Free Profile (HFP)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../l2cap.html">Logical Link Control and Adaptation Protocol (L2CAP)</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../mesh.html">Bluetooth Mesh Profile</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="core.html">Core</a></li>
<li class="toctree-l4"><a class="reference internal" href="access.html">Access layer</a></li>
<li class="toctree-l4"><a class="reference internal" href="models.html">Foundation models</a></li>
<li class="toctree-l4"><a class="reference internal" href="msg.html">Message</a></li>
<li class="toctree-l4"><a class="reference internal" href="provisioning.html">Provisioning</a></li>
<li class="toctree-l4"><a class="reference internal" href="proxy.html">Proxy</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Heartbeat</a></li>
<li class="toctree-l4"><a class="reference internal" href="cfg.html">Runtime Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="shell.html">Bluetooth Mesh Shell</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rfcomm.html">Serial Port Emulation (RFCOMM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sdp.html">Service Discovery Protocol (SDP)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uuid.html">Universal Unique Identifiers (UUIDs)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shell/audio.html">Bluetooth: Basic Audio Profile</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../canbus/index.html">Controller Area Network (CAN)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../crypto/index.html">Crypto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../devicetree/index.html">Devicetree</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../drivers/index.html">Device Driver Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../display/index.html">Display Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../edac/index.html">Error Detection And Correction (EDAC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../file_system/index.html">File Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../iterable_sections/index.html">Iterable Sections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../misc/formatted_output.html">Formatted Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../kernel/index.html">Kernel Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../libc/index.html">C standard library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../logging/index.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../memory_management/index.html">Memory Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../misc/index.html">Miscellaneous</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../data_structures/index.html">Data Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modbus/index.html">Modbus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../networking/index.html">Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../peripherals/index.html">Peripherals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pinctrl/index.html">Pin Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pm/index.html">Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../random/index.html">Random Number Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../resource_management/index.html">Resource Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shell/index.html">Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../storage/index.html">Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../task_wdt/index.html">Task Watchdog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../misc/timeutil.html">Time Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usb/index.html">USB device support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../usermode/index.html">User Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../util/index.html">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../settings/index.html">Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../timing_functions/index.html">Executing Time Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../virtualization/index.html">Virtualization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../guides/index.html">User and Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security/index.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../samples/index.html">Samples and Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../boards/index.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/index.html">Release Notes</a></li>
</ul>

  
  <div class="toctree-wrapper compound">
    <p class="caption"><span class="caption-text">Reference</span></p>
    <ul>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/doxygen/html/index.html">API</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/kconfig/index.html">Kconfig Options</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/devicetree/bindings.html">Devicetree Bindings</a>
      </li>
      
    </ul>
  </div>
  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Zephyr Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Docs / Latest -->
  
  

  <li><a href="../../../index.html">Docs / Latest</a> &raquo;</li>
  
     <li><a href="../../index.html">API Reference</a> &raquo;</li>
  
     <li><a href="../index.html">Bluetooth</a> &raquo;</li>
  
     <li><a href="../mesh.html">Bluetooth Mesh Profile</a> &raquo;</li>
  
  <li>Heartbeat</li>


  <li class="wy-breadcrumbs-aside">
    <dark-mode-toggle id="dark-mode-toggle" appearance="toggle" permanent="true"/>
  </li>
  <li class="wy-breadcrumbs-aside">
      
      
        <a href="https://github.com/zephyrproject-rtos/zephyr/blob/main/doc/reference/bluetooth/mesh/heartbeat.rst" class="fa fa-github"> Open on GitHub</a>
      
    
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="wy-alert wy-alert-danger">
     This is the documentation for the latest (main) development branch of
     Zephyr. If you are looking for the documentation of previous releases, use
     the drop-down menu on the left and select the desired version.
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="heartbeat">
<span id="bluetooth-mesh-heartbeat"></span><h1>Heartbeat<a class="headerlink" href="#heartbeat" title="Permalink to this headline">¶</a></h1>
<p>The Heartbeat feature provides functionality for monitoring Bluetooth mesh nodes
and determining the distance between nodes.</p>
<p>The Heartbeat feature is configured through the <a class="reference internal" href="cfg_srv.html#bluetooth-mesh-models-cfg-srv"><span class="std std-ref">Configuration Server</span></a> model.</p>
<div class="section" id="heartbeat-messages">
<h2>Heartbeat messages<a class="headerlink" href="#heartbeat-messages" title="Permalink to this headline">¶</a></h2>
<p>Heartbeat messages are sent as transport control packets through the network,
and are only encrypted with a network key. Heartbeat messages contain the
original Time To Live (TTL) value used to send the message and a bitfield of
the active features on the node. Through this, a receiving node can determine
how many relays the message had to go through to arrive at the receiver, and
what features the node supports.</p>
<p>Available Heartbeat feature flags:</p>
<ul class="simple">
<li><p><a class="reference internal" href="core.html#c.BT_MESH_FEAT_RELAY" title="BT_MESH_FEAT_RELAY"><code class="xref c c-macro docutils literal notranslate"><span class="pre">BT_MESH_FEAT_RELAY</span></code></a></p></li>
<li><p><a class="reference internal" href="core.html#c.BT_MESH_FEAT_PROXY" title="BT_MESH_FEAT_PROXY"><code class="xref c c-macro docutils literal notranslate"><span class="pre">BT_MESH_FEAT_PROXY</span></code></a></p></li>
<li><p><a class="reference internal" href="core.html#c.BT_MESH_FEAT_FRIEND" title="BT_MESH_FEAT_FRIEND"><code class="xref c c-macro docutils literal notranslate"><span class="pre">BT_MESH_FEAT_FRIEND</span></code></a></p></li>
<li><p><a class="reference internal" href="core.html#c.BT_MESH_FEAT_LOW_POWER" title="BT_MESH_FEAT_LOW_POWER"><code class="xref c c-macro docutils literal notranslate"><span class="pre">BT_MESH_FEAT_LOW_POWER</span></code></a></p></li>
</ul>
</div>
<div class="section" id="heartbeat-publication">
<h2>Heartbeat publication<a class="headerlink" href="#heartbeat-publication" title="Permalink to this headline">¶</a></h2>
<p>Heartbeat publication is controlled through the Configuration models, and can
be triggered in two ways:</p>
<dl class="simple">
<dt>Periodic publication</dt><dd><p>The node publishes a new Heartbeat message at regular intervals. The
publication can be configured to stop after a certain number of messages, or
continue indefinitely.</p>
</dd>
<dt>Triggered publication</dt><dd><p>The node publishes a new Heartbeat message every time a feature changes. The
set of features that can trigger the publication is configurable.</p>
</dd>
</dl>
<p>The two publication types can be combined.</p>
</div>
<div class="section" id="heartbeat-subscription">
<h2>Heartbeat subscription<a class="headerlink" href="#heartbeat-subscription" title="Permalink to this headline">¶</a></h2>
<p>A node can be configured to subscribe to Heartbeat messages from one node at
the time. To receive a Heartbeat message, both the source and destination must
match the configured subscription parameters.</p>
<p>Heartbeat subscription is always time limited, and throughout the subscription
period, the node keeps track of the number of received Heartbeats as well as
the minimum and maximum received hop count.</p>
<p>All Heartbeats received with the configured subscription parameters are passed
to the <code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">bt_mesh_hb_cb::recv</span></code> event handler.</p>
<p>When the Heartbeat subscription period ends, the
<code class="xref cpp cpp-member docutils literal notranslate"><span class="pre">bt_mesh_hb_cb::sub_end</span></code> callback gets called.</p>
</div>
<div class="section" id="api-reference">
<h2>API reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h2>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__bt__mesh__heartbeat"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">bt_mesh_heartbeat</span></span></dt>
<dd><p>Heartbeat. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-defines">Defines</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.BT_MESH_HB_CB_DEFINE">
<span class="target" id="group__bt__mesh__heartbeat_1ga517f009151a7eeaa898a853fd0d7a93a"></span><span class="sig-name descname"><span class="n"><span class="pre">BT_MESH_HB_CB_DEFINE</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">_name</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.BT_MESH_HB_CB_DEFINE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Register a callback structure for Heartbeat events. </p>
<p>Registers a callback structure that will be called whenever Heartbeat events occur</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_name</strong> – Name of callback structure. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.bt_mesh_hb_pub_get">
<span class="target" id="group__bt__mesh__heartbeat_1ga2e95d8f9d75f1bea13a9584d201fd713"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_hb_pub_get</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_mesh_hb_pub" title="bt_mesh_hb_pub"><span class="n"><span class="pre">bt_mesh_hb_pub</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">get</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_mesh_hb_pub_get" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the current Heartbeat publication parameters. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>get</strong> – Heartbeat publication parameters return buffer. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.bt_mesh_hb_sub_get">
<span class="target" id="group__bt__mesh__heartbeat_1ga3013c3da6cc1a34b0c98c56fba7e7877"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_hb_sub_get</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_mesh_hb_sub" title="bt_mesh_hb_sub"><span class="n"><span class="pre">bt_mesh_hb_sub</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">get</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.bt_mesh_hb_sub_get" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the current Heartbeat subscription parameters. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>get</strong> – Heartbeat subscription parameters return buffer. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.bt_mesh_hb_pub">
<span class="target" id="structbt__mesh__hb__pub"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_hb_pub</span></span></span><a class="headerlink" href="#c.bt_mesh_hb_pub" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;heartbeat.h&gt;</em></div>
<p>Heartbeat Publication parameters </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_hb_pub.dst">
<span class="target" id="structbt__mesh__hb__pub_1aaeb4c9000088418d8688b4f2f964335a"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dst</span></span></span><a class="headerlink" href="#c.bt_mesh_hb_pub.dst" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Destination address. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_hb_pub.count">
<span class="target" id="structbt__mesh__hb__pub_1a7161896dd5e337b2b0ee671f59a2444a"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">count</span></span></span><a class="headerlink" href="#c.bt_mesh_hb_pub.count" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Remaining publish count. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_hb_pub.ttl">
<span class="target" id="structbt__mesh__hb__pub_1a82dd3457291cc4a939883590e27fdbfb"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ttl</span></span></span><a class="headerlink" href="#c.bt_mesh_hb_pub.ttl" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Time To Live value. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_hb_pub.feat">
<span class="target" id="structbt__mesh__hb__pub_1a08f32f66fb5c7c0011651633ad212bc9"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">feat</span></span></span><a class="headerlink" href="#c.bt_mesh_hb_pub.feat" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Bitmap of features that trigger a Heartbeat publication if they change. Legal values are <a class="reference internal" href="core.html#group__bt__mesh_1gac588eefe83db94784a420ce063f02b55"><span class="std std-ref">BT_MESH_FEAT_RELAY</span></a>, <a class="reference internal" href="core.html#group__bt__mesh_1gaee648ce202316c56d4d588cb0ad5aeb4"><span class="std std-ref">BT_MESH_FEAT_PROXY</span></a>, <a class="reference internal" href="core.html#group__bt__mesh_1ga8f27086b3bc3c4a6e14621836f9f8e80"><span class="std std-ref">BT_MESH_FEAT_FRIEND</span></a> and <a class="reference internal" href="core.html#group__bt__mesh_1gaad71a36c82b4e4d3fa334ecff5cc0171"><span class="std std-ref">BT_MESH_FEAT_LOW_POWER</span></a>. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_hb_pub.net_idx">
<span class="target" id="structbt__mesh__hb__pub_1af8ed3029b088c7b45be4912eb0d9024d"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">net_idx</span></span></span><a class="headerlink" href="#c.bt_mesh_hb_pub.net_idx" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Network index used for publishing. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_hb_pub.period">
<span class="target" id="structbt__mesh__hb__pub_1a0bf6205724b157fe374e24c024f240c9"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">period</span></span></span><a class="headerlink" href="#c.bt_mesh_hb_pub.period" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Publication period in seconds. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.bt_mesh_hb_sub">
<span class="target" id="structbt__mesh__hb__sub"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_hb_sub</span></span></span><a class="headerlink" href="#c.bt_mesh_hb_sub" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;heartbeat.h&gt;</em></div>
<p>Heartbeat Subscription parameters. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_hb_sub.period">
<span class="target" id="structbt__mesh__hb__sub_1af7b20a7337c31110b1ae38c7eacc071a"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">period</span></span></span><a class="headerlink" href="#c.bt_mesh_hb_sub.period" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Subscription period in seconds. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_hb_sub.remaining">
<span class="target" id="structbt__mesh__hb__sub_1ad66fd08eb09d475bef9c290fa7ae0a90"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">remaining</span></span></span><a class="headerlink" href="#c.bt_mesh_hb_sub.remaining" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Remaining subscription time in seconds. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_hb_sub.src">
<span class="target" id="structbt__mesh__hb__sub_1afb9fba6c32257690539dd621e215708b"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">src</span></span></span><a class="headerlink" href="#c.bt_mesh_hb_sub.src" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Source address to receive Heartbeats from. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_hb_sub.dst">
<span class="target" id="structbt__mesh__hb__sub_1ab10708af9ddfd7a80c370d40d2146a8b"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dst</span></span></span><a class="headerlink" href="#c.bt_mesh_hb_sub.dst" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Destination address to received Heartbeats on. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_hb_sub.count">
<span class="target" id="structbt__mesh__hb__sub_1a41dd595eb6a0c980c49f84aca11b3ac2"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">count</span></span></span><a class="headerlink" href="#c.bt_mesh_hb_sub.count" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The number of received Heartbeat messages so far. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_hb_sub.min_hops">
<span class="target" id="structbt__mesh__hb__sub_1aae4eb4e77166dfb49a7341ae8fcb9e6e"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">min_hops</span></span></span><a class="headerlink" href="#c.bt_mesh_hb_sub.min_hops" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Minimum hops in received messages, ie the shortest registered path from the publishing node to the subscribing node. A Heartbeat received from an immediate neighbor has hop count = 1. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_hb_sub.max_hops">
<span class="target" id="structbt__mesh__hb__sub_1a38252818d3a2e136e5dfc9bda847d0b0"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">max_hops</span></span></span><a class="headerlink" href="#c.bt_mesh_hb_sub.max_hops" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Maximum hops in received messages, ie the longest registered path from the publishing node to the subscribing node. A Heartbeat received from an immediate neighbor has hop count = 1. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.bt_mesh_hb_cb">
<span class="target" id="structbt__mesh__hb__cb"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">bt_mesh_hb_cb</span></span></span><a class="headerlink" href="#c.bt_mesh_hb_cb" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;heartbeat.h&gt;</em></div>
<p>Heartbeat callback structure </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_hb_cb.recv">
<span class="target" id="structbt__mesh__hb__cb_1aa3b85249e1a40842c0f937385a72103f"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">recv</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_mesh_hb_sub" title="bt_mesh_hb_sub"><span class="n"><span class="pre">bt_mesh_hb_sub</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sub</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">hops</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">feat</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.bt_mesh_hb_cb.recv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Receive callback for heartbeats. </p>
<p>Gets called on every received Heartbeat that matches the current Heartbeat subscription parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Param sub</dt>
<dd class="field-odd"><p>Current Heartbeat subscription parameters. </p>
</dd>
<dt class="field-even">Param hops</dt>
<dd class="field-even"><p>The number of hops the Heartbeat was received with. </p>
</dd>
<dt class="field-odd">Param feat</dt>
<dd class="field-odd"><p>The feature set of the publishing node. The value is a bitmap of <a class="reference internal" href="core.html#group__bt__mesh_1gac588eefe83db94784a420ce063f02b55"><span class="std std-ref">BT_MESH_FEAT_RELAY</span></a>, <a class="reference internal" href="core.html#group__bt__mesh_1gaee648ce202316c56d4d588cb0ad5aeb4"><span class="std std-ref">BT_MESH_FEAT_PROXY</span></a>, <a class="reference internal" href="core.html#group__bt__mesh_1ga8f27086b3bc3c4a6e14621836f9f8e80"><span class="std std-ref">BT_MESH_FEAT_FRIEND</span></a> and <a class="reference internal" href="core.html#group__bt__mesh_1gaad71a36c82b4e4d3fa334ecff5cc0171"><span class="std std-ref">BT_MESH_FEAT_LOW_POWER</span></a>. </p>
</dd>
</dl>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.bt_mesh_hb_cb.sub_end">
<span class="target" id="structbt__mesh__hb__cb_1aa979e024174fa19f047a26f94b54a9d3"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">sub_end</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.bt_mesh_hb_sub" title="bt_mesh_hb_sub"><span class="n"><span class="pre">bt_mesh_hb_sub</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sub</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.bt_mesh_hb_cb.sub_end" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Subscription end callback for heartbeats. </p>
<p>Gets called when the subscription period ends, providing a summary of the received heartbeat messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Param sub</dt>
<dd class="field-odd"><p>Current Heartbeat subscription parameters. </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
          </div>

          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../../copyright.html">Copyright</a> 2015-2021 Zephyr Project members and individual contributors.
      <span class="lastupdated">Last updated on Feb 21, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
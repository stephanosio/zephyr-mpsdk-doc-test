<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Modbus &mdash; Zephyr Project Documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script type="module" src="../../_static/js/dark-mode-toggle.min.mjs"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-831873-47"></script>
        <script src="../../_static/js/ga-tracker.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="Networking" href="../networking/index.html" />
    <link rel="prev" title="Ring Buffers" href="../data_structures/ring_buffers.html" />
  <meta name="color-scheme" content="dark light">
  
  <link rel="stylesheet" href="../../_static/css/light.css" type="text/css" media="(prefers-color-scheme: light)"/>
  <link rel="stylesheet" href="../../_static/css/dark.css" type="text/css" media="(prefers-color-scheme: dark)"/>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html">
            <img src="../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.0.99
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Zephyr Project</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Release Versions</dt>
        
          <dd><a href="/">latest</a></dd>
        
          <dd><a href="/3.0.0/">3.0.0</a></dd>
        
          <dd><a href="/2.7.0/">2.7.0</a></dd>
        
          <dd><a href="/2.6.0/">2.6.0</a></dd>
        
          <dd><a href="/2.5.0/">2.5.0</a></dd>
        
          <dd><a href="/2.4.0/">2.4.0</a></dd>
        
          <dd><a href="/2.3.0/">2.3.0</a></dd>
        
          <dd><a href="/1.14.1/">1.14.1</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="/latest/zephyr.pdf">PDF</a></dd>
      </dl>
      <dl>
        <dt>zephyrproject.org Links</dt>
          <dd>
            <a href="https://www.zephyrproject.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/sdk-ng/releases">SDK</a>
          </dd>
          <dd>
            <a href="https://github.com/zephyrproject-rtos/zephyr/releases">Releases</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development_process/index.html">Development and Contribution Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/build/index.html">Build and Configuration Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../application/index.html">Application Development</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api/index.html">API Status and Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../audio/index.html">Audio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../misc/notify.html">Asynchronous Notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bluetooth/index.html">Bluetooth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../canbus/index.html">Controller Area Network (CAN)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../crypto/index.html">Crypto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devicetree/index.html">Devicetree</a></li>
<li class="toctree-l2"><a class="reference internal" href="../drivers/index.html">Device Driver Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../display/index.html">Display Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edac/index.html">Error Detection And Correction (EDAC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../file_system/index.html">File Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iterable_sections/index.html">Iterable Sections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../misc/formatted_output.html">Formatted Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kernel/index.html">Kernel Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libc/index.html">C standard library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging/index.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../memory_management/index.html">Memory Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../misc/index.html">Miscellaneous</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_structures/index.html">Data Structures</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Modbus</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#samples">Samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#api-reference">API Reference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../networking/index.html">Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../peripherals/index.html">Peripherals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pinctrl/index.html">Pin Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pm/index.html">Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../random/index.html">Random Number Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../resource_management/index.html">Resource Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/index.html">Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/index.html">Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../task_wdt/index.html">Task Watchdog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../misc/timeutil.html">Time Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usb/index.html">USB device support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usermode/index.html">User Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../util/index.html">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../settings/index.html">Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../timing_functions/index.html">Executing Time Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../virtualization/index.html">Virtualization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/index.html">User and Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../samples/index.html">Samples and Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../boards/index.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/index.html">Release Notes</a></li>
</ul>

  
  <div class="toctree-wrapper compound">
    <p class="caption"><span class="caption-text">Reference</span></p>
    <ul>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/doxygen/html/index.html">API</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/kconfig.html">Kconfig Options</a>
      </li>
      
      <li class="toctree-l1">
        <a class="reference internal" href="/latest/reference/devicetree/bindings.html">Devicetree Bindings</a>
      </li>
      
    </ul>
  </div>
  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Zephyr Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Docs / Latest -->
  
  

  <li><a href="../../index.html">Docs / Latest</a> &raquo;</li>
  
     <li><a href="../index.html">API Reference</a> &raquo;</li>
  
  <li>Modbus</li>


  <li class="wy-breadcrumbs-aside">
    <dark-mode-toggle id="dark-mode-toggle" appearance="toggle" permanent="true"/>
  </li>
  <li class="wy-breadcrumbs-aside">
      
      
        <a href="https://github.com/zephyrproject-rtos/zephyr/blob/main/doc/reference/modbus/index.rst" class="fa fa-github"> Open on GitHub</a>
      
    
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="wy-alert wy-alert-danger">
     This is the documentation for the latest (main) development branch of
     Zephyr. If you are looking for the documentation of previous releases, use
     the drop-down menu on the left and select the desired version.
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="modbus">
<span id="id1"></span><h1>Modbus<a class="headerlink" href="#modbus" title="Permalink to this headline">¶</a></h1>
<p>Modbus is an industrial messaging protocol. The protocol is specified
for different types of networks or buses. Zephyr OS implementation
supports communication over serial line and may be used
with different physical interfaces, like RS485 or RS232.
TCP support is not implemented directly, but there are helper functions
to realize TCP support according to the application’s needs.</p>
<p>Modbus communication is based on client/server model.
Only one client may be present on the bus. Client can communicate with several
server devices. Server devices themselves are passive and must not send
requests or unsolicited responses.
Services requested by the client are specified by function codes (FCxx),
and can be found in the specification or documentation of the API below.</p>
<p>Zephyr RTOS implementation supports both client and server roles.</p>
<p>More information about Modbus and Modbus RTU can be found on the website
<a class="reference external" href="https://www.modbus.org/specs.php">MODBUS Protocol Specifications</a>.</p>
<div class="section" id="samples">
<h2>Samples<a class="headerlink" href="#samples" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="../../samples/subsys/modbus/rtu_server/README.html#modbus-rtu-server-sample"><span class="std std-ref">Modbus RTU Server Sample</span></a> and <a class="reference internal" href="../../samples/subsys/modbus/rtu_client/README.html#modbus-rtu-client-sample"><span class="std std-ref">Modbus RTU Client Sample</span></a> give
the possibility to try out RTU server and RTU client implementation with
an evaluation board.</p>
<p><a class="reference internal" href="../../samples/subsys/modbus/tcp_server/README.html#modbus-tcp-server-sample"><span class="std std-ref">Modbus TCP Server Sample</span></a> is a simple Modbus TCP server.</p>
<p><a class="reference internal" href="../../samples/subsys/modbus/tcp_gateway/README.html#modbus-gateway-sample"><span class="std std-ref">Modbus TCP to serial line gateway sample</span></a> is an example how to build a TCP to serial line
gateway with Zephyr OS.</p>
</div>
<div class="section" id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h2>
<dl>
<dt class="sig sig-object cpp">
<span class="target" id="group__modbus"></span><em><span class="pre">group</span></em> <span class="sig-name descname"><span class="pre">modbus</span></span></dt>
<dd><p>MODBUS transport protocol API. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-defines">Defines</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.MODBUS_MBAP_LENGTH">
<span class="target" id="group__modbus_1ga1015513d4d3b6621fc18dcfda79116a2"></span><span class="sig-name descname"><span class="n"><span class="pre">MODBUS_MBAP_LENGTH</span></span></span><a class="headerlink" href="#c.MODBUS_MBAP_LENGTH" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Length of MBAP Header </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.MODBUS_MBAP_AND_FC_LENGTH">
<span class="target" id="group__modbus_1gae8a6fcfc117e7c4b2ac32aef90155698"></span><span class="sig-name descname"><span class="n"><span class="pre">MODBUS_MBAP_AND_FC_LENGTH</span></span></span><a class="headerlink" href="#c.MODBUS_MBAP_AND_FC_LENGTH" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Length of MBAP Header plus function code </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-typedefs">Typedefs</p>
<dl class="c type">
<dt class="sig sig-object c" id="c.modbus_raw_cb_t">
<span class="target" id="group__modbus_1ga96e98f3f98831e9cd45faf21264f8f5e"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">modbus_raw_cb_t</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">iface</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.modbus_adu" title="modbus_adu"><span class="n"><span class="pre">modbus_adu</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">adu</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.modbus_raw_cb_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>ADU raw callback function signature. </p>
<dl class="field-list simple">
<dt class="field-odd">Param iface</dt>
<dd class="field-odd"><p>Modbus RTU interface index </p>
</dd>
<dt class="field-even">Param adu</dt>
<dd class="field-even"><p>Pointer to the RAW ADU struct to send</p>
</dd>
<dt class="field-odd">Retval 0</dt>
<dd class="field-odd"><p>If transfer was successful </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-enums">Enums</p>
<dl class="c enum">
<dt class="sig sig-object c" id="c.modbus_mode">
<span class="target" id="group__modbus_1ga4bd8913e1c77a1e4b19585caa9f77c2e"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_mode</span></span></span><a class="headerlink" href="#c.modbus_mode" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Modbus interface mode. </p>
<p><em>Values:</em></p>
<dl class="c enumerator">
<dt class="sig sig-object c" id="c.modbus_mode.MODBUS_MODE_RTU">
<span class="target" id="group__modbus_1gga4bd8913e1c77a1e4b19585caa9f77c2ea52033dc2ef37fc286a590b1f97d946ef"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MODBUS_MODE_RTU</span></span></span><a class="headerlink" href="#c.modbus_mode.MODBUS_MODE_RTU" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Modbus over serial line RTU mode </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.modbus_mode.MODBUS_MODE_ASCII">
<span class="target" id="group__modbus_1gga4bd8913e1c77a1e4b19585caa9f77c2eafdf029741cc1bdecb2cb9baf4f06732a"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MODBUS_MODE_ASCII</span></span></span><a class="headerlink" href="#c.modbus_mode.MODBUS_MODE_ASCII" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Modbus over serial line ASCII mode </p>
</dd></dl>

<dl class="c enumerator">
<dt class="sig sig-object c" id="c.modbus_mode.MODBUS_MODE_RAW">
<span class="target" id="group__modbus_1gga4bd8913e1c77a1e4b19585caa9f77c2ea4d05b2cfd56ccf15eb1d8c7bb71071ec"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MODBUS_MODE_RAW</span></span></span><a class="headerlink" href="#c.modbus_mode.MODBUS_MODE_RAW" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Modbus raw ADU mode </p>
</dd></dl>

</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.modbus_read_coils">
<span class="target" id="group__modbus_1ga05b118dc87ebe3739cac4e9572104ffb"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_read_coils</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">iface</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">unit_id</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">start_addr</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">coil_tbl</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">num_coils</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.modbus_read_coils" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Coil read (FC01) </p>
<p>Sends a Modbus message to read the status of coils from a server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iface</strong> – Modbus interface index </p></li>
<li><p><strong>unit_id</strong> – Modbus unit ID of the server </p></li>
<li><p><strong>start_addr</strong> – Coil starting address </p></li>
<li><p><strong>coil_tbl</strong> – Pointer to an array of bytes containing the value of the coils read. The format is: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span>                <span class="n">MSB</span>                               <span class="n">LSB</span>
                <span class="n">B7</span>   <span class="n">B6</span>   <span class="n">B5</span>   <span class="n">B4</span>   <span class="n">B3</span>   <span class="n">B2</span>   <span class="n">B1</span>   <span class="n">B0</span>
                <span class="o">-------------------------------------</span>
<span class="n">coil_tbl</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>     <span class="c1">#8   #7                            #1</span>
<span class="n">coil_tbl</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>     <span class="c1">#16  #15                           #9</span>
     <span class="p">:</span>
     <span class="p">:</span>
</pre></div>
</div>
 Note that the array that will be receiving the coil values must be greater than or equal to: (num_coils - 1) / 8 + 1 </p></li>
<li><p><strong>num_coils</strong> – Quantity of coils to read</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If the function was successful </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.modbus_read_dinputs">
<span class="target" id="group__modbus_1ga921fd6036ff1b8a416dc02e30bb6e653"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_read_dinputs</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">iface</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">unit_id</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">start_addr</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">di_tbl</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">num_di</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.modbus_read_dinputs" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read discrete inputs (FC02) </p>
<p>Sends a Modbus message to read the status of discrete inputs from a server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iface</strong> – Modbus interface index </p></li>
<li><p><strong>unit_id</strong> – Modbus unit ID of the server </p></li>
<li><p><strong>start_addr</strong> – Discrete input starting address </p></li>
<li><p><strong>di_tbl</strong> – Pointer to an array that will receive the state of the discrete inputs. The format of the array is as follows: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span>              <span class="n">MSB</span>                               <span class="n">LSB</span>
              <span class="n">B7</span>   <span class="n">B6</span>   <span class="n">B5</span>   <span class="n">B4</span>   <span class="n">B3</span>   <span class="n">B2</span>   <span class="n">B1</span>   <span class="n">B0</span>
              <span class="o">-------------------------------------</span>
<span class="n">di_tbl</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>     <span class="c1">#8   #7                            #1</span>
<span class="n">di_tbl</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>     <span class="c1">#16  #15                           #9</span>
     <span class="p">:</span>
     <span class="p">:</span>
</pre></div>
</div>
 Note that the array that will be receiving the discrete input values must be greater than or equal to: (num_di - 1) / 8 + 1 </p></li>
<li><p><strong>num_di</strong> – Quantity of discrete inputs to read</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If the function was successful </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.modbus_read_holding_regs">
<span class="target" id="group__modbus_1ga7d7221b32fbf2395e69e25ef2dbaa036"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_read_holding_regs</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">iface</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">unit_id</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">start_addr</span></span>, <span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">reg_buf</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">num_regs</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.modbus_read_holding_regs" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read holding registers (FC03) </p>
<p>Sends a Modbus message to read the value of holding registers from a server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iface</strong> – Modbus interface index </p></li>
<li><p><strong>unit_id</strong> – Modbus unit ID of the server </p></li>
<li><p><strong>start_addr</strong> – Register starting address </p></li>
<li><p><strong>reg_buf</strong> – Is a pointer to an array that will receive the current values of the holding registers from the server. The array pointed to by ‘reg_buf’ needs to be able to hold at least ‘num_regs’ entries. </p></li>
<li><p><strong>num_regs</strong> – Quantity of registers to read</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If the function was successful </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.modbus_read_input_regs">
<span class="target" id="group__modbus_1ga5ff31ca21cf2d1b081d172228d6c2154"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_read_input_regs</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">iface</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">unit_id</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">start_addr</span></span>, <span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">reg_buf</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">num_regs</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.modbus_read_input_regs" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read input registers (FC04) </p>
<p>Sends a Modbus message to read the value of input registers from a server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iface</strong> – Modbus interface index </p></li>
<li><p><strong>unit_id</strong> – Modbus unit ID of the server </p></li>
<li><p><strong>start_addr</strong> – Register starting address </p></li>
<li><p><strong>reg_buf</strong> – Is a pointer to an array that will receive the current value of the holding registers from the server. The array pointed to by ‘reg_buf’ needs to be able to hold at least ‘num_regs’ entries. </p></li>
<li><p><strong>num_regs</strong> – Quantity of registers to read</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If the function was successful </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.modbus_write_coil">
<span class="target" id="group__modbus_1gaccac4f72b5d66a5a2e6c444dda251c41"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_write_coil</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">iface</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">unit_id</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">coil_addr</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n"><span class="pre">coil_state</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.modbus_write_coil" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Write single coil (FC05) </p>
<p>Sends a Modbus message to write the value of single coil to a server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iface</strong> – Modbus interface index </p></li>
<li><p><strong>unit_id</strong> – Modbus unit ID of the server </p></li>
<li><p><strong>coil_addr</strong> – Coils starting address </p></li>
<li><p><strong>coil_state</strong> – Is the desired state of the coil</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If the function was successful </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.modbus_write_holding_reg">
<span class="target" id="group__modbus_1gaf06d2553af8b8e9ab58f54b8b7e2055b"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_write_holding_reg</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">iface</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">unit_id</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">start_addr</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">reg_val</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.modbus_write_holding_reg" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Write single holding register (FC06) </p>
<p>Sends a Modbus message to write the value of single holding register to a server unit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iface</strong> – Modbus interface index </p></li>
<li><p><strong>unit_id</strong> – Modbus unit ID of the server </p></li>
<li><p><strong>start_addr</strong> – Coils starting address </p></li>
<li><p><strong>reg_val</strong> – Desired value of the holding register</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If the function was successful </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.modbus_request_diagnostic">
<span class="target" id="group__modbus_1gac924251f66ca6f357d8b7d90075df210"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_request_diagnostic</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">iface</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">unit_id</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">sfunc</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">data</span></span>, <span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">data_out</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.modbus_request_diagnostic" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read diagnostic (FC08) </p>
<p>Sends a Modbus message to perform a diagnostic function of a server unit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iface</strong> – Modbus interface index </p></li>
<li><p><strong>unit_id</strong> – Modbus unit ID of the server </p></li>
<li><p><strong>sfunc</strong> – Diagnostic sub-function code </p></li>
<li><p><strong>data</strong> – Sub-function data </p></li>
<li><p><strong>data_out</strong> – Pointer to the data value</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If the function was successful </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.modbus_write_coils">
<span class="target" id="group__modbus_1gac0fa22cd0d1fa861fdbc04b65ea60d7e"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_write_coils</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">iface</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">unit_id</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">start_addr</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">coil_tbl</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">num_coils</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.modbus_write_coils" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Write coils (FC15) </p>
<p>Sends a Modbus message to write to coils on a server unit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iface</strong> – Modbus interface index </p></li>
<li><p><strong>unit_id</strong> – Modbus unit ID of the server </p></li>
<li><p><strong>start_addr</strong> – Coils starting address </p></li>
<li><p><strong>coil_tbl</strong> – Pointer to an array of bytes containing the value of the coils to write. The format is: <div class="highlight-default notranslate"><div class="highlight"><pre><span></span>                <span class="n">MSB</span>                               <span class="n">LSB</span>
                <span class="n">B7</span>   <span class="n">B6</span>   <span class="n">B5</span>   <span class="n">B4</span>   <span class="n">B3</span>   <span class="n">B2</span>   <span class="n">B1</span>   <span class="n">B0</span>
                <span class="o">-------------------------------------</span>
<span class="n">coil_tbl</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>     <span class="c1">#8   #7                            #1</span>
<span class="n">coil_tbl</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>     <span class="c1">#16  #15                           #9</span>
     <span class="p">:</span>
     <span class="p">:</span>
</pre></div>
</div>
 Note that the array that will be receiving the coil values must be greater than or equal to: (num_coils - 1) / 8 + 1 </p></li>
<li><p><strong>num_coils</strong> – Quantity of coils to write</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If the function was successful </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.modbus_write_holding_regs">
<span class="target" id="group__modbus_1gadc8273292e0efc8c0d65c00eea7a22c5"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_write_holding_regs</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">iface</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">unit_id</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">start_addr</span></span>, <span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">reg_buf</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">num_regs</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.modbus_write_holding_regs" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Write holding registers (FC16) </p>
<p>Sends a Modbus message to write to integer holding registers to a server unit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iface</strong> – Modbus interface index </p></li>
<li><p><strong>unit_id</strong> – Modbus unit ID of the server </p></li>
<li><p><strong>start_addr</strong> – Register starting address </p></li>
<li><p><strong>reg_buf</strong> – Is a pointer to an array containing the value of the holding registers to write. Note that the array containing the register values must be greater than or equal to ‘num_regs’ </p></li>
<li><p><strong>num_regs</strong> – Quantity of registers to write</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If the function was successful </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.modbus_read_holding_regs_fp">
<span class="target" id="group__modbus_1ga9a8ae6fb4b1aee398f5b19f074d07ea9"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_read_holding_regs_fp</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">iface</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">unit_id</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">start_addr</span></span>, <span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">reg_buf</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">num_regs</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.modbus_read_holding_regs_fp" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read floating-point holding registers (FC03) </p>
<p>Sends a Modbus message to read the value of floating-point holding registers from a server unit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iface</strong> – Modbus interface index </p></li>
<li><p><strong>unit_id</strong> – Modbus unit ID of the server </p></li>
<li><p><strong>start_addr</strong> – Register starting address </p></li>
<li><p><strong>reg_buf</strong> – Is a pointer to an array that will receive the current values of the holding registers from the server. The array pointed to by ‘reg_buf’ needs to be able to hold at least ‘num_regs’ entries. </p></li>
<li><p><strong>num_regs</strong> – Quantity of registers to read</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If the function was successful </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.modbus_write_holding_regs_fp">
<span class="target" id="group__modbus_1ga762da245db3ca4f60fb3aa6c5783c73d"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_write_holding_regs_fp</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">iface</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">unit_id</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">start_addr</span></span>, <span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">reg_buf</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">num_regs</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.modbus_write_holding_regs_fp" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Write floating-point holding registers (FC16) </p>
<p>Sends a Modbus message to write to floating-point holding registers to a server unit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iface</strong> – Modbus interface index </p></li>
<li><p><strong>unit_id</strong> – Modbus unit ID of the server </p></li>
<li><p><strong>start_addr</strong> – Register starting address </p></li>
<li><p><strong>reg_buf</strong> – Is a pointer to an array containing the value of the holding registers to write. Note that the array containing the register values must be greater than or equal to ‘num_regs’ </p></li>
<li><p><strong>num_regs</strong> – Quantity of registers to write</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If the function was successful </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.modbus_iface_get_by_name">
<span class="target" id="group__modbus_1gaa17880a268d6b3b9553de835c800af27"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_iface_get_by_name</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">iface_name</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.modbus_iface_get_by_name" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get Modbus interface index according to interface name. </p>
<p>If there is more than one interface, it can be used to clearly identify interfaces in the application.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iface_name</strong> – Modbus interface name</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>Modbus</strong> – interface index or negative error value. </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.modbus_init_server">
<span class="target" id="group__modbus_1gae4d34276c467bf54e0849a1098e56f8b"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_init_server</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">iface</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.modbus_iface_param" title="modbus_iface_param"><span class="n"><span class="pre">modbus_iface_param</span></span></a><span class="w"> </span><span class="n"><span class="pre">param</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.modbus_init_server" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Configure Modbus Interface as raw ADU server. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iface</strong> – Modbus RTU interface index </p></li>
<li><p><strong>param</strong> – Configuration parameter of the server interface</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If the function was successful </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.modbus_init_client">
<span class="target" id="group__modbus_1ga943eff819ecf1bc268714783047888ef"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_init_client</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">iface</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.modbus_iface_param" title="modbus_iface_param"><span class="n"><span class="pre">modbus_iface_param</span></span></a><span class="w"> </span><span class="n"><span class="pre">param</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.modbus_init_client" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Configure Modbus Interface as raw ADU client. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iface</strong> – Modbus RTU interface index </p></li>
<li><p><strong>param</strong> – Configuration parameter of the client interface</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If the function was successful </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.modbus_disable">
<span class="target" id="group__modbus_1ga32a6319cc51eb5a98dcb58b3231b9d34"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_disable</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="n"><span class="pre">iface</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.modbus_disable" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Disable Modbus Interface. </p>
<p>This function is called to disable Modbus interface.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iface</strong> – Modbus interface index</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If the function was successful </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.modbus_raw_submit_rx">
<span class="target" id="group__modbus_1ga6d40e9eda6b8ead6d071d4192ffe489b"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_raw_submit_rx</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">iface</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.modbus_adu" title="modbus_adu"><span class="n"><span class="pre">modbus_adu</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">adu</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.modbus_raw_submit_rx" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Submit raw ADU. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iface</strong> – Modbus RTU interface index </p></li>
<li><p><strong>adu</strong> – Pointer to the RAW ADU struct that is received</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If transfer was successful </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.modbus_raw_put_header">
<span class="target" id="group__modbus_1ga8fdae6a92e27a845296c9d8ce4b8078e"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_raw_put_header</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.modbus_adu" title="modbus_adu"><span class="n"><span class="pre">modbus_adu</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">adu</span></span>, <span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">header</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.modbus_raw_put_header" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Put MBAP header into a buffer. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>adu</strong> – Pointer to the RAW ADU struct </p></li>
<li><p><strong>header</strong> – Pointer to the buffer in which MBAP header will be placed. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.modbus_raw_get_header">
<span class="target" id="group__modbus_1ga333072d3536d7b6f0680ceecc2c5bddf"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_raw_get_header</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.modbus_adu" title="modbus_adu"><span class="n"><span class="pre">modbus_adu</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">adu</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">header</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.modbus_raw_get_header" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get MBAP header from a buffer. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>adu</strong> – Pointer to the RAW ADU struct </p></li>
<li><p><strong>header</strong> – Pointer to the buffer containing MBAP header </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.modbus_raw_set_server_failure">
<span class="target" id="group__modbus_1gad250c40ba13a7d8c9189de17d1fd31aa"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_raw_set_server_failure</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.modbus_adu" title="modbus_adu"><span class="n"><span class="pre">modbus_adu</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">adu</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.modbus_raw_set_server_failure" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set Server Device Failure exception. </p>
<p>This function modifies ADU passed by the pointer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>adu</strong> – Pointer to the RAW ADU struct </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.modbus_raw_backend_txn">
<span class="target" id="group__modbus_1ga7aa5dfd6e457980e9e9b8a77810ec31e"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_raw_backend_txn</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">iface</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.modbus_adu" title="modbus_adu"><span class="n"><span class="pre">modbus_adu</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">adu</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.modbus_raw_backend_txn" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Use interface as backend to send and receive ADU. </p>
<p>This function overwrites ADU passed by the pointer and generates exception responses if backend interface is misconfigured or target device is unreachable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iface</strong> – Modbus client interface index </p></li>
<li><p><strong>adu</strong> – Pointer to the RAW ADU struct</p></li>
</ul>
</dd>
<dt class="field-even">Return values</dt>
<dd class="field-even"><p><strong>0</strong> – If transfer was successful </p>
</dd>
</dl>
</dd></dl>

</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.modbus_adu">
<span class="target" id="structmodbus__adu"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_adu</span></span></span><a class="headerlink" href="#c.modbus_adu" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;modbus.h&gt;</em></div>
<p>Frame struct used internally and for raw ADU support. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.modbus_adu.trans_id">
<span class="target" id="structmodbus__adu_1a04f0aa95985cc491649ba47f8ba064c8"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">trans_id</span></span></span><a class="headerlink" href="#c.modbus_adu.trans_id" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Transaction Identifier </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.modbus_adu.proto_id">
<span class="target" id="structmodbus__adu_1ae0422aacfe323ce6ca83069a54315fa0"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">proto_id</span></span></span><a class="headerlink" href="#c.modbus_adu.proto_id" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Protocol Identifier </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.modbus_adu.length">
<span class="target" id="structmodbus__adu_1aa33f175677a0100c1f8a84a72c5ca247"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">length</span></span></span><a class="headerlink" href="#c.modbus_adu.length" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Length of the data only (not the length of unit ID + PDU) </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.modbus_adu.unit_id">
<span class="target" id="structmodbus__adu_1ab1fc3e76f3f406c8a0715055088d290d"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">unit_id</span></span></span><a class="headerlink" href="#c.modbus_adu.unit_id" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Unit Identifier </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.modbus_adu.fc">
<span class="target" id="structmodbus__adu_1a015e7b842349dc5567cc51cbf1f87420"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">fc</span></span></span><a class="headerlink" href="#c.modbus_adu.fc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Function Code </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.modbus_adu.data">
<span class="target" id="structmodbus__adu_1a7e94e4a0557717445ab2d791f8a97b7b"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">data</span></span></span><span class="p"><span class="pre">[</span></span><span class="n"><span class="pre">CONFIG_MODBUS_BUFFER_SIZE</span></span><span class="w"> </span><span class="o"><span class="pre">-</span></span><span class="w"> </span><span class="m"><span class="pre">4</span></span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#c.modbus_adu.data" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Transaction Data </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.modbus_adu.crc">
<span class="target" id="structmodbus__adu_1a78b8008e05c8d588d0ecba71e432d14e"></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">crc</span></span></span><a class="headerlink" href="#c.modbus_adu.crc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>RTU CRC </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.modbus_user_callbacks">
<span class="target" id="structmodbus__user__callbacks"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_user_callbacks</span></span></span><a class="headerlink" href="#c.modbus_user_callbacks" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;modbus.h&gt;</em></div>
<p>Modbus Server User Callback structure </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.modbus_user_callbacks.coil_rd">
<span class="target" id="structmodbus__user__callbacks_1a3353b3aa0ec073fb9031a5c151e9995b"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">coil_rd</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.modbus_user_callbacks.coil_rd" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Coil read callback </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.modbus_user_callbacks.coil_wr">
<span class="target" id="structmodbus__user__callbacks_1a0dad31490d8b5d454f06a8b7805a09fd"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">coil_wr</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.modbus_user_callbacks.coil_wr" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Coil write callback </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.modbus_user_callbacks.discrete_input_rd">
<span class="target" id="structmodbus__user__callbacks_1aa6fd8fc2663c6a982ec17a162ae56961"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">discrete_input_rd</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.modbus_user_callbacks.discrete_input_rd" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Discrete Input read callback </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.modbus_user_callbacks.input_reg_rd">
<span class="target" id="structmodbus__user__callbacks_1a91a9270bd945935b74c6f5e021429d42"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">input_reg_rd</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">reg</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.modbus_user_callbacks.input_reg_rd" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Input Register read callback </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.modbus_user_callbacks.input_reg_rd_fp">
<span class="target" id="structmodbus__user__callbacks_1ae315e76c3ceefbd65ef8cea500b43df5"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">input_reg_rd_fp</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">reg</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.modbus_user_callbacks.input_reg_rd_fp" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Floating Point Input Register read callback </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.modbus_user_callbacks.holding_reg_rd">
<span class="target" id="structmodbus__user__callbacks_1acf5fe90fab9765bd83d1ab2075d073a2"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">holding_reg_rd</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">reg</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.modbus_user_callbacks.holding_reg_rd" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Holding Register read callback </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.modbus_user_callbacks.holding_reg_wr">
<span class="target" id="structmodbus__user__callbacks_1a4ca1ed4bfc93b36d939f847d7ac9f8da"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">holding_reg_wr</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">reg</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.modbus_user_callbacks.holding_reg_wr" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Holding Register write callback </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.modbus_user_callbacks.holding_reg_rd_fp">
<span class="target" id="structmodbus__user__callbacks_1a821e0aacd7c90eff5e7c0047cc88a855"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">holding_reg_rd_fp</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">reg</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.modbus_user_callbacks.holding_reg_rd_fp" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Floating Point Holding Register read callback </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.modbus_user_callbacks.holding_reg_wr_fp">
<span class="target" id="structmodbus__user__callbacks_1a333b5781c35e781e7021f53d5a357482"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">holding_reg_wr_fp</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">uint16_t</span></span><span class="w"> </span><span class="n"><span class="pre">addr</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="n"><span class="pre">reg</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.modbus_user_callbacks.holding_reg_wr_fp" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Floating Point Holding Register write callback </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.modbus_serial_param">
<span class="target" id="structmodbus__serial__param"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_serial_param</span></span></span><a class="headerlink" href="#c.modbus_serial_param" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;modbus.h&gt;</em></div>
<p>Modbus serial line parameter. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.modbus_serial_param.baud">
<span class="target" id="structmodbus__serial__param_1af3989f5e20eb96080d456114ef4d86e5"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">baud</span></span></span><a class="headerlink" href="#c.modbus_serial_param.baud" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Baudrate of the serial line </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.modbus_serial_param.parity">
<span class="target" id="structmodbus__serial__param_1a337a18f3ad923bf758cb432b9a2d8ada"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="../peripherals/uart.html#c.uart_config_parity" title="uart_config_parity"><span class="n"><span class="pre">uart_config_parity</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">parity</span></span></span><a class="headerlink" href="#c.modbus_serial_param.parity" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>parity UART’s parity setting: UART_CFG_PARITY_NONE, UART_CFG_PARITY_EVEN, UART_CFG_PARITY_ODD </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.modbus_server_param">
<span class="target" id="structmodbus__server__param"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_server_param</span></span></span><a class="headerlink" href="#c.modbus_server_param" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;modbus.h&gt;</em></div>
<p>Modbus server parameter. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.modbus_server_param.user_cb">
<span class="target" id="structmodbus__server__param_1ad8f72ea4e7dbbd81e23415e25b7d94be"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.modbus_user_callbacks" title="modbus_user_callbacks"><span class="n"><span class="pre">modbus_user_callbacks</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">user_cb</span></span></span><a class="headerlink" href="#c.modbus_server_param.user_cb" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Pointer to the User Callback structure </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.modbus_server_param.unit_id">
<span class="target" id="structmodbus__server__param_1a323a3a9be08f3c77df9f06b135f7f379"></span><span class="n"><span class="pre">uint8_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">unit_id</span></span></span><a class="headerlink" href="#c.modbus_server_param.unit_id" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Modbus unit ID of the server </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.modbus_iface_param">
<span class="target" id="structmodbus__iface__param"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">modbus_iface_param</span></span></span><a class="headerlink" href="#c.modbus_iface_param" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="docutils container">
<em>#include &lt;modbus.h&gt;</em></div>
<p>User parameter structure to configure Modbus interfase as client or server. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.modbus_iface_param.mode">
<span class="target" id="structmodbus__iface__param_1ae73f218d8810afb0c2efbf865ba8b3ba"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><a class="reference internal" href="#c.modbus_mode" title="modbus_mode"><span class="n"><span class="pre">modbus_mode</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mode</span></span></span><a class="headerlink" href="#c.modbus_iface_param.mode" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Mode of the interface </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.modbus_iface_param.rx_timeout">
<span class="target" id="structmodbus__iface__param_1a7726b39e43e660adb63e24b4cf2e7ab7"></span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">rx_timeout</span></span></span><a class="headerlink" href="#c.modbus_iface_param.rx_timeout" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Amount of time client will wait for a response from the server. </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.modbus_iface_param.serial">
<span class="target" id="structmodbus__iface__param_1a77ff747b2e789e96691483994be1d596"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.modbus_serial_param" title="modbus_serial_param"><span class="n"><span class="pre">modbus_serial_param</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">serial</span></span></span><a class="headerlink" href="#c.modbus_iface_param.serial" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Serial support parameter of the interface </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.modbus_iface_param.raw_tx_cb">
<span class="target" id="structmodbus__iface__param_1aa40d3e4b974803a4ac391364e801d66b"></span><a class="reference internal" href="#c.modbus_raw_cb_t" title="modbus_raw_cb_t"><span class="n"><span class="pre">modbus_raw_cb_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">raw_tx_cb</span></span></span><a class="headerlink" href="#c.modbus_iface_param.raw_tx_cb" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Pointer to raw ADU callback function </p>
</dd></dl>

</div>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
          </div>

          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../copyright.html">Copyright</a> 2015-2022 Zephyr Project members and individual contributors.
      <span class="lastupdated">Last updated on Mar 05, 2022.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>